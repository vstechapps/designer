"use strict";(self.webpackChunkdesigner=self.webpackChunkdesigner||[]).push([[179],{50:()=>{function Fe(n){return"function"==typeof n}function Tu(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const wd=Tu(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Cu(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Gn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(Fe(r))try{r()}catch(o){e=o instanceof wd?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{lA(o)}catch(s){e=e??[],s instanceof wd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new wd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)lA(e);else{if(e instanceof Gn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Cu(t,e)}remove(e){const{_finalizers:t}=this;t&&Cu(t,e),e instanceof Gn&&e._removeParent(this)}}Gn.EMPTY=(()=>{const n=new Gn;return n.closed=!0,n})();const uA=Gn.EMPTY;function cA(n){return n instanceof Gn||n&&"closed"in n&&Fe(n.remove)&&Fe(n.add)&&Fe(n.unsubscribe)}function lA(n){Fe(n)?n():n.unsubscribe()}const yo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Td={setTimeout(n,e,...t){const{delegate:r}=Td;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Td;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function dA(n){Td.setTimeout(()=>{const{onUnhandledError:e}=yo;if(!e)throw n;e(n)})}function hA(){}const eB=bg("C",void 0,void 0);function bg(n,e,t){return{kind:n,value:e,error:t}}let vo=null;function Cd(n){if(yo.useDeprecatedSynchronousErrorHandling){const e=!vo;if(e&&(vo={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=vo;if(vo=null,t)throw r}}else n()}class Sg extends Gn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,cA(e)&&e.add(this)):this.destination=aB}static create(e,t,r){return new Du(e,t,r)}next(e){this.isStopped?Pg(function nB(n){return bg("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Pg(function tB(n){return bg("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Pg(eB,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const iB=Function.prototype.bind;function Rg(n,e){return iB.call(n,e)}class oB{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Dd(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Dd(r)}else Dd(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Dd(t)}}}class Du extends Sg{constructor(e,t,r){let i;if(super(),Fe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&yo.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Rg(e.next,o),error:e.error&&Rg(e.error,o),complete:e.complete&&Rg(e.complete,o)}):i=e}this.destination=new oB(i)}}function Dd(n){yo.useDeprecatedSynchronousErrorHandling?function rB(n){yo.useDeprecatedSynchronousErrorHandling&&vo&&(vo.errorThrown=!0,vo.error=n)}(n):dA(n)}function Pg(n,e){const{onStoppedNotification:t}=yo;t&&Td.setTimeout(()=>t(n,e))}const aB={closed:!0,next:hA,error:function sB(n){throw n},complete:hA},xg="function"==typeof Symbol&&Symbol.observable||"@@observable";function Io(n){return n}function fA(n){return 0===n.length?Io:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let st=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function lB(n){return n&&n instanceof Sg||function cB(n){return n&&Fe(n.next)&&Fe(n.error)&&Fe(n.complete)}(n)&&cA(n)}(t)?t:new Du(t,r,i);return Cd(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=pA(r))((i,o)=>{const s=new Du({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[xg](){return this}pipe(...t){return fA(t)(this)}toPromise(t){return new(t=pA(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function pA(n){var e;return null!==(e=n??yo.Promise)&&void 0!==e?e:Promise}const dB=Tu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Yr=(()=>{class n extends st{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new gA(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new dB}next(t){Cd(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Cd(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Cd(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?uA:(this.currentObservers=null,o.push(t),new Gn(()=>{this.currentObservers=null,Cu(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new st;return t.source=this,t}}return n.create=(e,t)=>new gA(e,t),n})();class gA extends Yr{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:uA}}function mA(n){return Fe(n?.lift)}function Pt(n){return e=>{if(mA(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Tt(n,e,t,r,i){return new hB(n,e,t,r,i)}class hB extends Sg{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ce(n,e){return Pt((t,r)=>{let i=0;t.subscribe(Tt(r,o=>{r.next(n.call(e,o,i++))}))})}function Ng(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}function Eo(n){return this instanceof Eo?(this.v=n,this):new Eo(n)}function gB(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){o.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function u(h){h.value instanceof Eo?Promise.resolve(h.value.v).then(c,l):d(o[0][2],h)}(r[h](f))}catch(p){d(o[0][3],p)}}function c(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),o.shift(),o.length&&a(o[0][0],o[0][1])}}function mB(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function vA(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){!function i(o,s,a,u){Promise.resolve(u).then(function(c){o({value:c,done:a})},s)}(a,u,(s=n[o](s)).done,s.value)})}}}const IA=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function EA(n){return Fe(n?.then)}function wA(n){return Fe(n[xg])}function TA(n){return Symbol.asyncIterator&&Fe(n?.[Symbol.asyncIterator])}function CA(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const DA=function yB(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function AA(n){return Fe(n?.[DA])}function bA(n){return gB(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield Eo(t.read());if(i)return yield Eo(void 0);yield yield Eo(r)}}finally{t.releaseLock()}})}function SA(n){return Fe(n?.getReader)}function or(n){if(n instanceof st)return n;if(null!=n){if(wA(n))return function vB(n){return new st(e=>{const t=n[xg]();if(Fe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(IA(n))return function IB(n){return new st(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(EA(n))return function EB(n){return new st(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,dA)})}(n);if(TA(n))return RA(n);if(AA(n))return function wB(n){return new st(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(SA(n))return function TB(n){return RA(bA(n))}(n)}throw CA(n)}function RA(n){return new st(e=>{(function CB(n,e){var t,r,i,o;return function fB(n,e,t,r){return new(t||(t=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(l.value).then(a,u)}c((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=mB(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Jr(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ft(n,e,t=1/0){return Fe(e)?Ft((r,i)=>ce((o,s)=>e(r,o,i,s))(or(n(r,i))),t):("number"==typeof e&&(t=e),Pt((r,i)=>function DB(n,e,t,r,i,o,s,a){const u=[];let c=0,l=0,d=!1;const h=()=>{d&&!u.length&&!c&&e.complete()},f=g=>c<r?p(g):u.push(g),p=g=>{o&&e.next(g),c++;let _=!1;or(t(g,l++)).subscribe(Tt(e,I=>{i?.(I),o?f(I):e.next(I)},()=>{_=!0},void 0,()=>{if(_)try{for(c--;u.length&&c<r;){const I=u.shift();s?Jr(e,s,()=>p(I)):p(I)}h()}catch(I){e.error(I)}}))};return n.subscribe(Tt(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,n,t)))}function ws(n=1/0){return Ft(Io,n)}const Xr=new st(n=>n.complete());function kg(n){return n[n.length-1]}function PA(n){return Fe(kg(n))?n.pop():void 0}function Au(n){return function bB(n){return n&&Fe(n.schedule)}(kg(n))?n.pop():void 0}function xA(n,e=0){return Pt((t,r)=>{t.subscribe(Tt(r,i=>Jr(r,n,()=>r.next(i),e),()=>Jr(r,n,()=>r.complete(),e),i=>Jr(r,n,()=>r.error(i),e)))})}function MA(n,e=0){return Pt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function NA(n,e){if(!n)throw new Error("Iterable cannot be null");return new st(t=>{Jr(t,e,()=>{const r=n[Symbol.asyncIterator]();Jr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function gt(n,e){return e?function kB(n,e){if(null!=n){if(wA(n))return function RB(n,e){return or(n).pipe(MA(e),xA(e))}(n,e);if(IA(n))return function xB(n,e){return new st(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(EA(n))return function PB(n,e){return or(n).pipe(MA(e),xA(e))}(n,e);if(TA(n))return NA(n,e);if(AA(n))return function MB(n,e){return new st(t=>{let r;return Jr(t,e,()=>{r=n[DA](),Jr(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void t.error(s)}o?t.complete():t.next(i)},0,!0)}),()=>Fe(r?.return)&&r.return()})}(n,e);if(SA(n))return function NB(n,e){return NA(bA(n),e)}(n,e)}throw CA(n)}(n,e):or(n)}function Og(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Du({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function Oe(n){for(let e in n)if(n[e]===Oe)return e;throw Error("Could not find renamed property on target object.")}function Vg(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ve(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ve).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Fg(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const FB=Oe({__forward_ref__:Oe});function Le(n){return n.__forward_ref__=Le,n.toString=function(){return Ve(this())},n}function Y(n){return Lg(n)?n():n}function Lg(n){return"function"==typeof n&&n.hasOwnProperty(FB)&&n.__forward_ref__===Le}function Ug(n){return n&&!!n.\u0275providers}class S extends Error{constructor(e,t){super(function Ad(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function re(n){return"string"==typeof n?n:null==n?"":String(n)}function bd(n,e){throw new S(-201,!1)}function qn(n,e){null==n&&function Se(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function G(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function zn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Sd(n){return OA(n,Rd)||OA(n,FA)}function OA(n,e){return n.hasOwnProperty(e)?n[e]:null}function VA(n){return n&&(n.hasOwnProperty(Bg)||n.hasOwnProperty(zB))?n[Bg]:null}const Rd=Oe({\u0275prov:Oe}),Bg=Oe({\u0275inj:Oe}),FA=Oe({ngInjectableDef:Oe}),zB=Oe({ngInjectorDef:Oe});var J=(()=>((J=J||{})[J.Default=0]="Default",J[J.Host=1]="Host",J[J.Self=2]="Self",J[J.SkipSelf=4]="SkipSelf",J[J.Optional=8]="Optional",J))();let jg;function Wn(n){const e=jg;return jg=n,e}function LA(n,e,t){const r=Sd(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&J.Optional?null:void 0!==e?e:void bd(Ve(n))}const Ue=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),bu={},$g="__NG_DI_FLAG__",Pd="ngTempTokenPath",QB=/\n/gm,UA="__source";let Su;function Ts(n){const e=Su;return Su=n,e}function JB(n,e=J.Default){if(void 0===Su)throw new S(-203,!1);return null===Su?LA(n,void 0,e):Su.get(n,e&J.Optional?null:void 0,e)}function B(n,e=J.Default){return(function WB(){return jg}()||JB)(Y(n),e)}function pe(n,e=J.Default){return B(n,xd(e))}function xd(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Hg(n){const e=[];for(let t=0;t<n.length;t++){const r=Y(n[t]);if(Array.isArray(r)){if(0===r.length)throw new S(900,!1);let i,o=J.Default;for(let s=0;s<r.length;s++){const a=r[s],u=XB(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}e.push(B(i,o))}else e.push(B(r))}return e}function Ru(n,e){return n[$g]=e,n.prototype[$g]=e,n}function XB(n){return n[$g]}function Oi(n){return{toString:n}.toString()}var sr=(()=>((sr=sr||{})[sr.OnPush=0]="OnPush",sr[sr.Default=1]="Default",sr))(),Tr=(()=>{return(n=Tr||(Tr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Tr;var n})();const Zr={},De=[],Md=Oe({\u0275cmp:Oe}),Gg=Oe({\u0275dir:Oe}),qg=Oe({\u0275pipe:Oe}),jA=Oe({\u0275mod:Oe}),ei=Oe({\u0275fac:Oe}),Pu=Oe({__NG_ELEMENT_ID__:Oe});let tj=0;function vn(n){return Oi(()=>{const t=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===sr.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||De,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Tr.Emulated,id:"c"+tj++,styles:n.styles||De,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},o=n.dependencies,s=n.features;return i.inputs=GA(n.inputs,r),i.outputs=GA(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map($A).filter(HA):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(an).filter(HA):null,i})}function $A(n){return Re(n)||Wt(n)}function HA(n){return null!==n}function ar(n){return Oi(()=>({type:n.type,bootstrap:n.bootstrap||De,declarations:n.declarations||De,imports:n.imports||De,exports:n.exports||De,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function GA(n,e){if(null==n)return Zr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,e&&(e[i]=o)}return t}const ee=vn;function In(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Re(n){return n[Md]||null}function Wt(n){return n[Gg]||null}function an(n){return n[qg]||null}function xn(n,e){const t=n[jA]||null;if(!t&&!0===e)throw new Error(`Type ${Ve(n)} does not have '\u0275mod' property.`);return t}function Mn(n){return Array.isArray(n)&&"object"==typeof n[1]}function cr(n){return Array.isArray(n)&&!0===n[1]}function Kg(n){return 0!=(4&n.flags)}function ku(n){return n.componentOffset>-1}function Fd(n){return 1==(1&n.flags)}function lr(n){return null!==n.template}function ij(n){return 0!=(256&n[2])}function To(n,e){return n.hasOwnProperty(ei)?n[ei]:null}class aj{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Nn(){return YA}function YA(n){return n.type.prototype.ngOnChanges&&(n.setInput=cj),uj}function uj(){const n=XA(this),e=n?.current;if(e){const t=n.previous;if(t===Zr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function cj(n,e,t,r){const i=this.declaredInputs[t],o=XA(n)||function lj(n,e){return n[JA]=e}(n,{previous:Zr,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new aj(u&&u.currentValue,e,a===Zr),n[r]=e}Nn.ngInherit=!0;const JA="__ngSimpleChanges__";function XA(n){return n[JA]||null}function Lt(n){for(;Array.isArray(n);)n=n[0];return n}function Ld(n,e){return Lt(e[n])}function kn(n,e){return Lt(e[n.index])}function tb(n,e){return n.data[e]}function On(n,e){const t=e[n];return Mn(t)?t:t[0]}function Ud(n){return 64==(64&n[2])}function Vi(n,e){return null==e?null:n[e]}function nb(n){n[18]=0}function Yg(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const ie={lFrame:hb(null),bindingsEnabled:!0};function ib(){return ie.bindingsEnabled}function C(){return ie.lFrame.lView}function Ee(){return ie.lFrame.tView}function Te(n){return ie.lFrame.contextLView=n,n[8]}function Ce(n){return ie.lFrame.contextLView=null,n}function Ut(){let n=ob();for(;null!==n&&64===n.type;)n=n.parent;return n}function ob(){return ie.lFrame.currentTNode}function Dr(n,e){const t=ie.lFrame;t.currentTNode=n,t.isParent=e}function Jg(){return ie.lFrame.isParent}function cn(){const n=ie.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Ps(){return ie.lFrame.bindingIndex++}function Tj(n,e){const t=ie.lFrame;t.bindingIndex=t.bindingRootIndex=n,Zg(e)}function Zg(n){ie.lFrame.currentDirectiveIndex=n}function tm(n){ie.lFrame.currentQueryIndex=n}function Dj(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function lb(n,e,t){if(t&J.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&J.Host||(i=Dj(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;e=i,n=o}const r=ie.lFrame=db();return r.currentTNode=e,r.lView=n,!0}function nm(n){const e=db(),t=n[1];ie.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function db(){const n=ie.lFrame,e=null===n?null:n.child;return null===e?hb(n):e}function hb(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function fb(){const n=ie.lFrame;return ie.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const pb=fb;function rm(){const n=fb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ln(){return ie.lFrame.selectedIndex}function Co(n){ie.lFrame.selectedIndex=n}function Bd(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=o;s&&(n.contentHooks||(n.contentHooks=[])).push(-t,s),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),u&&(n.viewHooks||(n.viewHooks=[])).push(-t,u),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=l&&(n.destroyHooks||(n.destroyHooks=[])).push(t,l)}}function jd(n,e,t){gb(n,e,3,t)}function $d(n,e,t,r){(3&n[2])===t&&gb(n,e,t,r)}function im(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function gb(n,e,t,r){const o=r??-1,s=e.length-1;let a=0;for(let u=void 0!==r?65535&n[18]:0;u<s;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[18]+=65536),(a<o||-1==o)&&(kj(n,t,e,u),n[18]=(4294901760&n[18])+u+2),u++}function kj(n,e,t,r){const i=t[r]<0,o=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}class Vu{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function sm(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{const o=i,s=t[++r];_b(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function mb(n){return 3===n||4===n||6===n}function _b(n){return 64===n.charCodeAt(0)}function Fu(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||yb(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function yb(n,e,t,r,i){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}function vb(n){return-1!==n}function Hd(n){return 32767&n}function Gd(n,e){let t=function Lj(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let am=!0;function qd(n){const e=am;return am=n,e}let Uj=0;const Ar={};function zd(n,e){const t=wb(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,um(r.data,n),um(e,null),um(r.blueprint,null));const i=cm(n,e),o=n.injectorIndex;if(vb(i)){const s=Hd(i),a=Gd(i,e),u=a[1].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|u[s+c]}return e[o+8]=i,o}function um(n,e){n.push(0,0,0,0,0,0,0,0,e)}function wb(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function cm(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Rb(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function lm(n,e,t){!function Bj(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Pu)&&(r=t[Pu]),null==r&&(r=t[Pu]=Uj++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function Tb(n,e,t){if(t&J.Optional||void 0!==n)return n;bd()}function Cb(n,e,t,r){if(t&J.Optional&&void 0===r&&(r=null),0==(t&(J.Self|J.Host))){const i=n[9],o=Wn(void 0);try{return i?i.get(e,r,t&J.Optional):LA(e,r,t&J.Optional)}finally{Wn(o)}}return Tb(r,0,t)}function Db(n,e,t,r=J.Default,i){if(null!==n){if(1024&e[2]){const s=function qj(n,e,t,r,i){let o=n,s=e;for(;null!==o&&null!==s&&1024&s[2]&&!(256&s[2]);){const a=Ab(o,s,t,r|J.Self,Ar);if(a!==Ar)return a;let u=o.parent;if(!u){const c=s[21];if(c){const l=c.get(t,Ar,r);if(l!==Ar)return l}u=Rb(s),s=s[15]}o=u}return i}(n,e,t,r,Ar);if(s!==Ar)return s}const o=Ab(n,e,t,r,Ar);if(o!==Ar)return o}return Cb(e,t,r,i)}function Ab(n,e,t,r,i){const o=function Hj(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Pu)?n[Pu]:void 0;return"number"==typeof e?e>=0?255&e:Gj:e}(t);if("function"==typeof o){if(!lb(e,n,r))return r&J.Host?Tb(i,0,r):Cb(e,t,r,i);try{const s=o(r);if(null!=s||r&J.Optional)return s;bd()}finally{pb()}}else if("number"==typeof o){let s=null,a=wb(n,e),u=-1,c=r&J.Host?e[16][6]:null;for((-1===a||r&J.SkipSelf)&&(u=-1===a?cm(n,e):e[a+8],-1!==u&&Sb(r,!1)?(s=e[1],a=Hd(u),e=Gd(u,e)):a=-1);-1!==a;){const l=e[1];if(bb(o,a,l.data)){const d=$j(a,e,t,s,r,c);if(d!==Ar)return d}u=e[a+8],-1!==u&&Sb(r,e[1].data[a+8]===c)&&bb(o,a,e)?(s=l,a=Hd(u),e=Gd(u,e)):a=-1}}return i}function $j(n,e,t,r,i,o){const s=e[1],a=s.data[n+8],l=function Wd(n,e,t,r,i){const o=n.providerIndexes,s=e.data,a=1048575&o,u=n.directiveStart,l=o>>20,h=i?a+l:n.directiveEnd;for(let f=r?a:a+l;f<h;f++){const p=s[f];if(f<u&&t===p||f>=u&&p.type===t)return f}if(i){const f=s[u];if(f&&lr(f)&&f.type===t)return u}return null}(a,s,t,null==r?ku(a)&&am:r!=s&&0!=(3&a.type),i&J.Host&&o===a);return null!==l?Do(e,s,l,a):Ar}function Do(n,e,t,r){let i=n[t];const o=e.data;if(function Oj(n){return n instanceof Vu}(i)){const s=i;s.resolving&&function LB(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new S(-200,`Circular dependency in DI detected for ${n}${t}`)}(function be(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():re(n)}(o[t]));const a=qd(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?Wn(s.injectImpl):null;lb(n,r,J.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function Nj(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=YA(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o))}(t,o[t],e)}finally{null!==u&&Wn(u),qd(a),s.resolving=!1,pb()}}return i}function bb(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Sb(n,e){return!(n&J.Self||n&J.Host&&e)}class Ms{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Db(this._tNode,this._lView,e,xd(r),t)}}function Gj(){return new Ms(Ut(),C())}function Bt(n){return Oi(()=>{const e=n.prototype.constructor,t=e[ei]||dm(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[ei]||dm(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function dm(n){return Lg(n)?()=>{const e=dm(Y(n));return e&&e()}:To(n)}function Rb(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}const ks="__parameters__";function Vs(n,e,t){return Oi(()=>{const r=function hm(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,c,l){const d=u.hasOwnProperty(ks)?u[ks]:Object.defineProperty(u,ks,{value:[]})[ks];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class U{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=G({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ao(n,e){n.forEach(t=>Array.isArray(t)?Ao(t,e):e(t))}function xb(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Qd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Vn(n,e,t){let r=Fs(n,e);return r>=0?n[1|r]=t:(r=~r,function Qj(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function pm(n,e){const t=Fs(n,e);if(t>=0)return n[1|t]}function Fs(n,e){return function Mb(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const ju=Ru(Vs("Optional"),8),$u=Ru(Vs("SkipSelf"),4);var En=(()=>((En=En||{})[En.Important=1]="Important",En[En.DashCase=2]="DashCase",En))();const Im=new Map;let _$=0;const wm="__ngContext__";function Yt(n,e){Mn(e)?(n[wm]=e[20],function v$(n){Im.set(n[20],n)}(e)):n[wm]=e}function Cm(n,e){return undefined(n,e)}function zu(n){const e=n[3];return cr(e)?e[3]:e}function Dm(n){return Xb(n[13])}function Am(n){return Xb(n[4])}function Xb(n){for(;null!==n&&!cr(n);)n=n[4];return n}function Us(n,e,t,r,i){if(null!=r){let o,s=!1;cr(r)?o=r:Mn(r)&&(s=!0,r=r[0]);const a=Lt(r);0===n&&null!==t?null==i?o0(e,t,a):bo(e,t,a,i||null,!0):1===n&&null!==t?bo(e,t,a,i||null,!0):2===n?function Nm(n,e,t){const r=Zd(n,e);r&&function U$(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function $$(n,e,t,r,i){const o=t[7];o!==Lt(t)&&Us(e,n,r,o,i);for(let a=10;a<t.length;a++){const u=t[a];Wu(u[1],u,n,e,r,o)}}(e,n,o,t,i)}}function Sm(n,e,t){return n.createElement(e,t)}function e0(n,e){const t=n[9],r=t.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,Yg(i,-1)),t.splice(r,1)}function Rm(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&e0(i,r),e>0&&(n[t-1][4]=r[4]);const o=Qd(n,10+e);!function x$(n,e){Wu(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function t0(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&Wu(n,e,t,3,null,null),function k$(n){let e=n[13];if(!e)return Pm(n[1],n);for(;e;){let t=null;if(Mn(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Mn(e)&&Pm(e[1],e),e=e[3];null===e&&(e=n),Mn(e)&&Pm(e[1],e),t=e&&e[4]}e=t}}(e)}}function Pm(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function L$(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Vu)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];try{u.call(a)}finally{}}else try{o.call(i)}finally{}}}}(n,e),function F$(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?r[i=s]():r[i=-s].unsubscribe(),o+=2}else{const s=r[i=t[o+1]];t[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)(0,r[o])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&cr(e[3])){t!==e[3]&&e0(t,e);const r=e[19];null!==r&&r.detachView(n)}!function I$(n){Im.delete(n[20])}(e)}}function n0(n,e,t){return function r0(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=n.data[r.directiveStart+i];if(o===Tr.None||o===Tr.Emulated)return null}return kn(r,t)}}(n,e.parent,t)}function bo(n,e,t,r,i){n.insertBefore(e,t,r,i)}function o0(n,e,t){n.appendChild(e,t)}function s0(n,e,t,r,i){null!==r?bo(n,e,t,r,i):o0(n,e,t)}function Zd(n,e){return n.parentNode(e)}let Vm,c0=function u0(n,e,t){return 40&n.type?kn(n,t):null};function eh(n,e,t,r){const i=n0(n,r,e),o=e[11],a=function a0(n,e,t){return c0(n,e,t)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)s0(o,i,t[u],a,!1);else s0(o,i,t,a,!1)}function th(n,e){if(null!==e){const t=e.type;if(3&t)return kn(e,n);if(4&t)return Mm(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return th(n,r);{const i=n[e.index];return cr(i)?Mm(-1,i):Lt(i)}}if(32&t)return Cm(e,n)()||Lt(n[e.index]);{const r=d0(n,e);return null!==r?Array.isArray(r)?r[0]:th(zu(n[16]),r):th(n,e.next)}}return null}function d0(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Mm(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return th(r,i)}return e[7]}function km(n,e,t,r,i,o,s){for(;null!=t;){const a=r[t.index],u=t.type;if(s&&0===e&&(a&&Yt(Lt(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)km(n,e,t.child,r,i,o,!1),Us(e,n,i,a,o);else if(32&u){const c=Cm(t,r);let l;for(;l=c();)Us(e,n,i,l,o);Us(e,n,i,a,o)}else 16&u?h0(n,e,r,t,i,o):Us(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Wu(n,e,t,r,i,o){km(t,r,n.firstChild,e,i,o,!1)}function h0(n,e,t,r,i,o){const s=t[16],u=s[6].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)Us(e,n,i,u[c],o);else km(n,e,u,s[3],i,o,!0)}function f0(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function p0(n,e,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&sm(n,e,r),null!==i&&f0(n,e,i),null!==o&&function G$(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}class v0{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const oh=new U("ENVIRONMENT_INITIALIZER"),R0=new U("INJECTOR",-1),P0=new U("INJECTOR_DEF_TYPES");class x0{get(e,t=bu){if(t===bu){const r=new Error(`NullInjectorError: No provider for ${Ve(e)}!`);throw r.name="NullInjectorError",r}return t}}function yH(...n){return{\u0275providers:M0(0,n),\u0275fromNgModule:!0}}function M0(n,...e){const t=[],r=new Set;let i;return Ao(e,o=>{const s=o;$m(s,t,[],r)&&(i||(i=[]),i.push(s))}),void 0!==i&&N0(i,t),t}function N0(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];Hm(i,o=>{e.push(o)})}}function $m(n,e,t,r){if(!(n=Y(n)))return!1;let i=null,o=VA(n);const s=!o&&Re(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const u=n.ngModule;if(o=VA(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of u)$m(c,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;r.add(i);try{Ao(o.imports,l=>{$m(l,e,t,r)&&(c||(c=[]),c.push(l))})}finally{}void 0!==c&&N0(c,e)}if(!a){const c=To(i)||(()=>new i);e.push({provide:i,useFactory:c,deps:De},{provide:P0,useValue:i,multi:!0},{provide:oh,useValue:()=>B(i),multi:!0})}const u=o.providers;null==u||a||Hm(u,l=>{e.push(l)})}}return i!==n&&void 0!==n.providers}function Hm(n,e){for(let t of n)Ug(t)&&(t=t.\u0275providers),Array.isArray(t)?Hm(t,e):e(t)}const vH=Oe({provide:String,useValue:Oe});function Gm(n){return null!==n&&"object"==typeof n&&vH in n}function Ro(n){return"function"==typeof n}const qm=new U("Set Injector scope."),sh={},EH={};let zm;function ah(){return void 0===zm&&(zm=new x0),zm}class br{}class V0 extends br{constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Km(e,s=>this.processProvider(s)),this.records.set(R0,Bs(void 0,this)),i.has("environment")&&this.records.set(br,Bs(void 0,this));const o=this.records.get(qm);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(P0.multi,De,J.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=Ts(this),r=Wn(void 0);try{return e()}finally{Ts(t),Wn(r)}}get(e,t=bu,r=J.Default){this.assertNotDestroyed(),r=xd(r);const i=Ts(this),o=Wn(void 0);try{if(!(r&J.SkipSelf)){let a=this.records.get(e);if(void 0===a){const u=function AH(n){return"function"==typeof n||"object"==typeof n&&n instanceof U}(e)&&Sd(e);a=u&&this.injectableDefInScope(u)?Bs(Wm(e),sh):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&J.Self?ah():this.parent).get(e,t=r&J.Optional&&t===bu?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[Pd]=s[Pd]||[]).unshift(Ve(e)),i)throw s;return function ZB(n,e,t,r){const i=n[Pd];throw e[UA]&&i.unshift(e[UA]),n.message=function ej(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Ve(e);if(Array.isArray(e))i=e.map(Ve).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Ve(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(QB,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Pd]=null,n}(s,e,"R3InjectorError",this.source)}throw s}finally{Wn(o),Ts(i)}}resolveInjectorInitializers(){const e=Ts(this),t=Wn(void 0);try{const r=this.get(oh.multi,De,J.Self);for(const i of r)i()}finally{Ts(e),Wn(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Ve(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(e){let t=Ro(e=Y(e))?e:Y(e&&e.provide);const r=function TH(n){return Gm(n)?Bs(void 0,n.useValue):Bs(F0(n),sh)}(e);if(Ro(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Bs(void 0,sh,!0),i.factory=()=>Hg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===sh&&(t.value=EH,t.value=t.factory()),"object"==typeof t.value&&t.value&&function DH(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Y(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Wm(n){const e=Sd(n),t=null!==e?e.factory:To(n);if(null!==t)return t;if(n instanceof U)throw new S(204,!1);if(n instanceof Function)return function wH(n){const e=n.length;if(e>0)throw function Bu(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new S(204,!1);const t=function GB(n){const e=n&&(n[Rd]||n[FA]);if(e){const t=function qB(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new S(204,!1)}function F0(n,e,t){let r;if(Ro(n)){const i=Y(n);return To(i)||Wm(i)}if(Gm(n))r=()=>Y(n.useValue);else if(function O0(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Hg(n.deps||[]));else if(function k0(n){return!(!n||!n.useExisting)}(n))r=()=>B(Y(n.useExisting));else{const i=Y(n&&(n.useClass||n.provide));if(!function CH(n){return!!n.deps}(n))return To(i)||Wm(i);r=()=>new i(...Hg(n.deps))}return r}function Bs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Km(n,e){for(const t of n)Array.isArray(t)?Km(t,e):t&&Ug(t)?Km(t.\u0275providers,e):e(t)}class bH{}class L0{}class RH{resolveComponentFactory(e){throw function SH(n){const e=Error(`No component factory found for ${Ve(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Ju=(()=>{class n{}return n.NULL=new RH,n})();function PH(){return js(Ut(),C())}function js(n,e){return new Fn(kn(n,e))}let Fn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=PH,n})();class B0{}let oi=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function MH(){const n=C(),t=On(Ut().index,n);return(Mn(t)?t:n)[11]}(),n})(),NH=(()=>{class n{}return n.\u0275prov=G({token:n,providedIn:"root",factory:()=>null}),n})();class Xu{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const kH=new Xu("15.0.4"),Qm={};function Jm(n){return n.ngOriginalError}class $s{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Jm(e);for(;t&&Jm(t);)t=Jm(t);return t||null}}function si(n){return n instanceof Function?n():n}function $0(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}const H0="ng-template";function qH(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==$0(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function G0(n){return 4===n.type&&n.value!==H0}function zH(n,e,t){return e===(4!==n.type||t?n.value:H0)}function WH(n,e,t){let r=4;const i=n.attrs||[],o=function YH(n){for(let e=0;e<n.length;e++)if(mb(n[e]))return e;return n.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!zH(n,u,t)||""===u&&1===e.length){if(dr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!qH(n.attrs,c,t)){if(dr(r))return!1;s=!0}continue}const d=KH(8&r?"class":u,i,G0(n),t);if(-1===d){if(dr(r))return!1;s=!0;continue}if(""!==c){let h;h=d>o?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==$0(f,c,0)||2&r&&c!==h){if(dr(r))return!1;s=!0}}}}else{if(!s&&!dr(r)&&!dr(u))return!1;if(s&&dr(u))continue;s=!1,r=u|1&r}}return dr(r)||s}function dr(n){return 0==(1&n)}function KH(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const s=e[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function JH(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function q0(n,e,t=!1){for(let r=0;r<e.length;r++)if(WH(n,e[r],t))return!0;return!1}function z0(n,e){return n?":not("+e.trim()+")":e}function ZH(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!dr(s)&&(e+=z0(o,i),i=""),r=s,o=o||!dr(r);t++}return""!==i&&(e+=z0(o,i)),e}const oe={};function H(n){W0(Ee(),C(),ln()+n,!1)}function W0(n,e,t,r){if(!r)if(3==(3&e[2])){const o=n.preOrderCheckHooks;null!==o&&jd(e,o,t)}else{const o=n.preOrderHooks;null!==o&&$d(e,o,0,t)}Co(t)}function J0(n,e=null,t=null,r){const i=X0(n,e,t,r);return i.resolveInjectorInitializers(),i}function X0(n,e=null,t=null,r,i=new Set){const o=[t||De,yH(n)];return r=r||("object"==typeof n?void 0:Ve(n)),new V0(o,e||ah(),r||null,i)}let hr=(()=>{class n{static create(t,r){if(Array.isArray(t))return J0({name:""},r,t,"");{const i=t.name??"";return J0({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=bu,n.NULL=new x0,n.\u0275prov=G({token:n,providedIn:"any",factory:()=>B(R0)}),n.__NG_ELEMENT_ID__=-1,n})();function T(n,e=J.Default){const t=C();return null===t?B(n,e):Db(Ut(),t,Y(n),e)}function sS(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],o=t[r+1];if(-1!==o){const s=n.data[o];tm(i),s.contentQueries(2,e[o],o)}}}function ch(n,e,t,r,i,o,s,a,u,c,l){const d=e.blueprint.slice();return d[0]=i,d[2]=76|r,(null!==l||n&&1024&n[2])&&(d[2]|=1024),nb(d),d[3]=d[15]=n,d[8]=t,d[10]=s||n&&n[10],d[11]=a||n&&n[11],d[12]=u||n&&n[12]||null,d[9]=c||n&&n[9]||null,d[6]=o,d[20]=function y$(){return _$++}(),d[21]=l,d[16]=2==e.type?n[16]:d,d}function qs(n,e,t,r,i){let o=n.data[e];if(null===o)o=function n_(n,e,t,r,i){const o=ob(),s=Jg(),u=n.data[e]=function DG(n,e,t,r,i,o){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u)),u}(n,e,t,r,i),function wj(){return ie.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function Ou(){const n=ie.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Dr(o,!0),o}function Zu(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function r_(n,e,t){nm(e);try{const r=n.viewQuery;null!==r&&f_(1,r,t);const i=n.template;null!==i&&aS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&sS(n,e),n.staticViewQueries&&f_(2,n.viewQuery,t);const o=n.components;null!==o&&function wG(n,e){for(let t=0;t<e.length;t++)GG(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,rm()}}function lh(n,e,t,r){const i=e[2];if(128!=(128&i)){nm(e);try{nb(e),function ab(n){return ie.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&aS(n,e,t,2,r);const s=3==(3&i);if(s){const c=n.preOrderCheckHooks;null!==c&&jd(e,c,null)}else{const c=n.preOrderHooks;null!==c&&$d(e,c,0,null),im(e,0)}if(function $G(n){for(let e=Dm(n);null!==e;e=Am(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],o=i[3];0==(512&i[2])&&Yg(o,1),i[2]|=512}}}(e),function jG(n){for(let e=Dm(n);null!==e;e=Am(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];Ud(r)&&lh(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&sS(n,e),s){const c=n.contentCheckHooks;null!==c&&jd(e,c)}else{const c=n.contentHooks;null!==c&&$d(e,c,1),im(e,1)}!function IG(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Co(~i);else{const o=i,s=t[++r],a=t[++r];Tj(s,o),a(2,e[o])}}}finally{Co(-1)}}(n,e);const a=n.components;null!==a&&function EG(n,e){for(let t=0;t<e.length;t++)HG(n,e[t])}(e,a);const u=n.viewQuery;if(null!==u&&f_(2,u,r),s){const c=n.viewCheckHooks;null!==c&&jd(e,c)}else{const c=n.viewHooks;null!==c&&$d(e,c,2),im(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,Yg(e[3],-1))}finally{rm()}}}function aS(n,e,t,r,i){const o=ln(),s=2&r;try{Co(-1),s&&e.length>22&&W0(n,e,22,!1),t(r,i)}finally{Co(o)}}function i_(n,e,t){if(Kg(e)){const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const s=n.data[o];s.contentQueries&&s.contentQueries(1,t[o],o)}}}function o_(n,e,t){!ib()||(function xG(n,e,t,r){const i=t.directiveStart,o=t.directiveEnd;ku(t)&&function LG(n,e,t){const r=kn(e,n),i=uS(t),o=n[10],s=dh(n,ch(n,i,null,t.onPush?32:16,r,e,o,o.createRenderer(r,t),null,null,null));n[e.index]=s}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||zd(t,e),Yt(r,e);const s=t.initialInputs;for(let a=i;a<o;a++){const u=n.data[a],c=Do(e,n,a,t);Yt(c,e),null!==s&&UG(0,a-i,c,u,0,s),lr(u)&&(On(t.index,e)[8]=Do(e,n,a,t))}}(n,e,t,kn(t,e)),64==(64&t.flags)&&pS(n,e,t))}function s_(n,e,t=kn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?t(e,n):n[s];n[i++]=a}}}function uS(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=a_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function a_(n,e,t,r,i,o,s,a,u,c){const l=22+r,d=l+i,h=function TG(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:oe);return t}(l,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function lS(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const o=n[i];null===r?dS(t,e,i,o):r.hasOwnProperty(i)&&dS(t,e,r[i],o)}return t}function dS(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function hS(n,e){const t=On(e,n);16&t[2]||(t[2]|=32)}function u_(n,e,t,r){let i=!1;if(ib()){const o=null===r?null:{"":-1},s=function NG(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(q0(e,s.selectors,!1))if(r||(r=[]),lr(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),c_(n,e,a.length)}else r.unshift(s),c_(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(n,t);let a,u;null===s?a=u=null:[a,u]=s,null!==a&&(i=!0,fS(n,e,t,a,o,u)),o&&function kG(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new S(-301,!1);r.push(e[i],o)}}}(t,r,o)}return t.mergedAttrs=Fu(t.mergedAttrs,t.attrs),i}function fS(n,e,t,r,i,o){for(let c=0;c<r.length;c++)lm(zd(t,e),n,r[c].type);!function VG(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const l=r[c];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,u=Zu(n,e,r.length,null);for(let c=0;c<r.length;c++){const l=r[c];t.mergedAttrs=Fu(t.mergedAttrs,l.hostAttrs),FG(n,t,e,u,l),OG(u,l,i),null!==l.contentQueries&&(t.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(t.flags|=64);const d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),a=!0),u++}!function AG(n,e,t){const i=e.directiveEnd,o=n.data,s=e.attrs,a=[];let u=null,c=null;for(let l=e.directiveStart;l<i;l++){const d=o[l],h=t?t.get(d):null,p=h?h.outputs:null;u=lS(d.inputs,l,u,h?h.inputs:null),c=lS(d.outputs,l,c,p);const g=null===u||null===s||G0(e)?null:BG(u,l,s);a.push(g)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}(n,t,o)}function pS(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function Cj(){return ie.lFrame.currentDirectiveIndex}();try{Co(o);for(let a=r;a<i;a++){const u=n.data[a],c=e[a];Zg(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&MG(u,c)}}finally{Co(-1),Zg(s)}}function MG(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function c_(n,e,t){e.componentOffset=t,(n.components||(n.components=[])).push(e.index)}function OG(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;lr(e)&&(t[""]=n)}}function FG(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=To(i.type)),s=new Vu(o,lr(i),T);n.blueprint[r]=s,t[r]=s,function RG(n,e,t,r,i){const o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function PG(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,o)}}(n,e,r,Zu(n,t,i.hostVars,oe),i)}function UG(n,e,t,r,i,o){const s=o[e];if(null!==s){const a=r.setInput;for(let u=0;u<s.length;){const c=s[u++],l=s[u++],d=s[u++];null!==a?r.setInput(t,d,c,l):t[l]=d}}}function BG(n,e,t){let r=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===r&&(r=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function gS(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null]}function HG(n,e){const t=On(e,n);if(Ud(t)){const r=t[1];48&t[2]?lh(r,t,r.template,t[8]):t[5]>0&&d_(t)}}function d_(n){for(let r=Dm(n);null!==r;r=Am(r))for(let i=10;i<r.length;i++){const o=r[i];if(Ud(o))if(512&o[2]){const s=o[1];lh(s,o,s.template,o[8])}else o[5]>0&&d_(o)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=On(t[r],n);Ud(i)&&i[5]>0&&d_(i)}}function GG(n,e){const t=On(e,n),r=t[1];(function qG(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),r_(r,t,t[8])}function dh(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function h_(n){for(;n;){n[2]|=32;const e=zu(n);if(ij(n)&&!e)return n;n=e}return null}function hh(n,e,t,r=!0){const i=e[10];i.begin&&i.begin();try{lh(n,e,n.template,t)}catch(s){throw r&&vS(e,s),s}finally{i.end&&i.end()}}function f_(n,e,t){tm(0),e(n,t)}function mS(n){return n[7]||(n[7]=[])}function _S(n){return n.cleanup||(n.cleanup=[])}function vS(n,e){const t=n[9],r=t?t.get($s,null):null;r&&r.handleError(e)}function p_(n,e,t,r,i){for(let o=0;o<t.length;){const s=t[o++],a=t[o++],u=e[s],c=n.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function fh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=Fg(i,a):2==o&&(r=Fg(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ph(n,e,t,r,i=!1){for(;null!==t;){const o=e[t.index];if(null!==o&&r.push(Lt(o)),cr(o))for(let a=10;a<o.length;a++){const u=o[a],c=u[1].firstChild;null!==c&&ph(u[1],u,c,r)}const s=t.type;if(8&s)ph(n,e,t.child,r);else if(32&s){const a=Cm(t,e);let u;for(;u=a();)r.push(u)}else if(16&s){const a=d0(e,t);if(Array.isArray(a))r.push(...a);else{const u=zu(e[16]);ph(u[1],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class ec{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return ph(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(cr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Rm(e,r),Qd(t,r))}this._attachedToViewContainer=!1}t0(this._lView[1],this._lView)}onDestroy(e){!function cS(n,e,t,r){const i=mS(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&_S(n).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){h_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){hh(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function N$(n,e){Wu(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=e}}class zG extends ec{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;hh(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class IS extends Ju{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Re(e);return new tc(t,this.ngModule)}}function ES(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class KG{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=xd(r);const i=this.injector.get(e,Qm,r);return i!==Qm||t===Qm?i:this.parentInjector.get(e,t,r)}}class tc extends L0{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function eG(n){return n.map(ZH).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return ES(this.componentDef.inputs)}get outputs(){return ES(this.componentDef.outputs)}create(e,t,r,i){let o=(i=i||this.ngModule)instanceof br?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new KG(e,o):e,a=s.get(B0,null);if(null===a)throw new S(407,!1);const u=s.get(NH,null),c=a.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",d=r?function CG(n,e,t){return n.selectRootElement(e,t===Tr.ShadowDom)}(c,r,this.componentDef.encapsulation):Sm(c,l,function WG(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(l)),h=this.componentDef.onPush?288:272,f=a_(0,null,null,1,0,null,null,null,null,null),p=ch(null,f,null,h,null,null,a,c,u,s,null);let g,_;nm(p);try{const I=this.componentDef;let w,y=null;I.findHostDirectiveDefs?(w=[],y=new Map,I.findHostDirectiveDefs(I,w,y),w.push(I)):w=[I];const b=function YG(n,e){const t=n[1];return n[22]=e,qs(t,22,2,"#host",null)}(p,d),$=function JG(n,e,t,r,i,o,s,a){const u=i[1];!function XG(n,e,t,r){for(const i of n)e.mergedAttrs=Fu(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(fh(e,e.mergedAttrs,!0),null!==t&&p0(r,t,e))}(r,n,e,s);const c=o.createRenderer(e,t),l=ch(i,uS(t),null,t.onPush?32:16,i[n.index],n,o,c,a||null,null,null);return u.firstCreatePass&&c_(u,n,r.length-1),dh(i,l),i[n.index]=l}(b,d,I,w,p,a,c);_=tb(f,22),d&&function e4(n,e,t,r){if(r)sm(n,t,["ng-version",kH.full]);else{const{attrs:i,classes:o}=function tG(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!dr(i))break;i=o}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&sm(n,t,i),o&&o.length>0&&f0(n,t,o.join(" "))}}(c,I,d,r),void 0!==t&&function t4(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const o=t[i];r.push(null!=o?Array.from(o):null)}}(_,this.ngContentSelectors,t),g=function ZG(n,e,t,r,i,o){const s=Ut(),a=i[1],u=kn(s,i);fS(a,i,s,t,null,r);for(let l=0;l<t.length;l++)Yt(Do(i,a,s.directiveStart+l,s),i);pS(a,i,s),u&&Yt(u,i);const c=Do(i,a,s.directiveStart+s.componentOffset,s);if(n[8]=i[8]=c,null!==o)for(const l of o)l(c,e);return i_(a,s,n),c}($,I,w,y,p,[n4]),r_(f,p,null)}finally{rm()}return new QG(this.componentType,g,js(_,p),p,_)}}class QG extends bH{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new zG(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const o=this._rootLView;p_(o[1],o,i,e,t),hS(o,this._tNode.index)}}get injector(){return new Ms(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function n4(){const n=Ut();Bd(C()[1],n)}function xe(n){let e=function wS(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(lr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new S(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const s=n;s.inputs=g_(n.inputs),s.declaredInputs=g_(n.declaredInputs),s.outputs=g_(n.outputs);const a=i.hostBindings;a&&s4(n,a);const u=i.viewQuery,c=i.contentQueries;if(u&&i4(n,u),c&&o4(n,c),Vg(n.inputs,i.inputs),Vg(n.declaredInputs,i.declaredInputs),Vg(n.outputs,i.outputs),lr(i)&&i.data.animation){const l=n.data;l.animation=(l.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===xe&&(t=!1)}}e=Object.getPrototypeOf(e)}!function r4(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Fu(i.hostAttrs,t=Fu(t,i.hostAttrs))}}(r)}function g_(n){return n===Zr?{}:n===De?[]:n}function i4(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function o4(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function s4(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let gh=null;function Po(){if(!gh){const n=Ue.Symbol;if(n&&n.iterator)gh=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(gh=r)}}}return gh}function nc(n){return!!m_(n)&&(Array.isArray(n)||!(n instanceof Map)&&Po()in n)}function m_(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Rr(n,e,t){return n[e]=t}function Jt(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function de(n,e,t,r,i,o,s,a){const u=C(),c=Ee(),l=n+22,d=c.firstCreatePass?function m4(n,e,t,r,i,o,s,a,u){const c=e.consts,l=qs(e,n,4,s||null,Vi(c,a));u_(e,t,l,Vi(c,u)),Bd(e,l);const d=l.tViews=a_(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,t,r,i,o,s):c.data[l];Dr(d,!1);const h=u[11].createComment("");eh(c,u,h,d),Yt(h,u),dh(u,u[l]=gS(h,u,h,d)),Fd(d)&&o_(c,u,d),null!=s&&s_(u,d,a)}function W(n,e,t){const r=C();return Jt(r,Ps(),e)&&function Ln(n,e,t,r,i,o,s,a){const u=kn(e,t);let l,c=e.inputs;!a&&null!=c&&(l=c[r])?(p_(n,t,l,r,i),ku(e)&&hS(t,e.index)):3&e.type&&(r=function bG(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(u,r,i))}(Ee(),function Je(){const n=ie.lFrame;return tb(n.tView,n.selectedIndex)}(),r,n,e,r[11],t,!1),W}function __(n,e,t,r,i){const s=i?"class":"style";p_(n,t,e.inputs[s],s,r)}function V(n,e,t,r){const i=C(),o=Ee(),s=22+n,a=i[11],u=i[s]=Sm(a,e,function Mj(){return ie.lFrame.currentNamespace}()),c=o.firstCreatePass?function v4(n,e,t,r,i,o,s){const a=e.consts,c=qs(e,n,2,i,Vi(a,o));return u_(e,t,c,Vi(a,s)),null!==c.attrs&&fh(c,c.attrs,!1),null!==c.mergedAttrs&&fh(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,i,0,e,t,r):o.data[s];return Dr(c,!0),p0(a,u,c),32!=(32&c.flags)&&eh(o,i,u,c),0===function mj(){return ie.lFrame.elementDepthCount}()&&Yt(u,i),function _j(){ie.lFrame.elementDepthCount++}(),Fd(c)&&(o_(o,i,c),i_(o,c,i)),null!==r&&s_(i,c),V}function F(){let n=Ut();Jg()?function Xg(){ie.lFrame.isParent=!1}():(n=n.parent,Dr(n,!1));const e=n;!function yj(){ie.lFrame.elementDepthCount--}();const t=Ee();return t.firstCreatePass&&(Bd(t,n),Kg(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Vj(n){return 0!=(8&n.flags)}(e)&&__(t,e,C(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Fj(n){return 0!=(16&n.flags)}(e)&&__(t,e,C(),e.stylesWithoutHost,!1),F}function ui(n,e,t,r){return V(n,e,t,r),F(),ui}function Pe(){return C()}function ic(n){return!!n&&"function"==typeof n.then}function VS(n){return!!n&&"function"==typeof n.subscribe}const I_=VS;function Z(n,e,t,r){const i=C(),o=Ee(),s=Ut();return function LS(n,e,t,r,i,o,s){const a=Fd(r),c=n.firstCreatePass&&_S(n),l=e[8],d=mS(e);let h=!0;if(3&r.type||s){const g=kn(r,e),_=s?s(g):g,I=d.length,w=s?b=>s(Lt(b[r.index])):r.index;let y=null;if(!s&&a&&(y=function E4(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const a=e[7],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(n,e,i,r.index)),null!==y)(y.__ngLastListenerFn__||y).__ngNextListenerFn__=o,y.__ngLastListenerFn__=o,h=!1;else{o=BS(r,e,l,o,!1);const b=t.listen(_,i,o);d.push(o,b),c&&c.push(i,w,I,I+1)}}else o=BS(r,e,l,o,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const g=p.length;if(g)for(let _=0;_<g;_+=2){const $=e[p[_]][p[_+1]].subscribe(o),q=d.length;d.push(o,$),c&&c.push(i,r.index,q,-(q+1))}}}(o,i,i[11],s,n,e,r),Z}function US(n,e,t,r){try{return!1!==t(r)}catch(i){return vS(n,i),!1}}function BS(n,e,t,r,i){return function o(s){if(s===Function)return r;h_(n.componentOffset>-1?On(n.index,e):e);let u=US(e,0,r,s),c=o.__ngNextListenerFn__;for(;c;)u=US(e,0,c,s)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&(s.preventDefault(),s.returnValue=!1),u}}function z(n=1){return function Aj(n){return(ie.lFrame.contextLView=function bj(n,e){for(;n>0;)e=e[15],n--;return e}(n,ie.lFrame.contextLView))[8]}(n)}function _h(n,e){return n<<17|e<<2}function Li(n){return n>>17&32767}function w_(n){return 2|n}function Mo(n){return(131068&n)>>2}function T_(n,e){return-131069&n|e<<2}function C_(n){return 1|n}function YS(n,e,t,r,i){const o=n[t+1],s=null===e;let a=r?Li(o):Mo(o),u=!1;for(;0!==a&&(!1===u||s);){const l=n[a+1];P4(n[a],e)&&(u=!0,n[a+1]=r?C_(l):w_(l)),a=r?Li(l):Mo(l)}u&&(n[t+1]=r?w_(o):C_(o))}function P4(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Fs(n,e)>=0}function yh(n,e){return function fr(n,e,t,r){const i=C(),o=Ee(),s=function ri(n){const e=ie.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);o.firstUpdatePass&&function oR(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[ln()],s=function iR(n,e){return e>=n.expandoStartIndex}(n,t);(function cR(n,e){return 0!=(n.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function U4(n,e,t,r){const i=function em(n){const e=ie.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=oc(t=D_(null,n,e,t,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==i)if(t=D_(i,n,e,t,r),null===o){let u=function B4(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Mo(r))return n[Li(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=D_(null,n,e,u[1],r),u=oc(u,e.attrs,r),function j4(n,e,t,r){n[Li(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else o=function $4(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=oc(r,n[o].hostAttrs,t);return oc(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function S4(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Li(s),u=Mo(s);n[r]=t;let l,c=!1;if(Array.isArray(t)){const d=t;l=d[1],(null===l||Fs(d,l)>0)&&(c=!0)}else l=t;if(i)if(0!==u){const h=Li(n[a+1]);n[r+1]=_h(h,a),0!==h&&(n[h+1]=T_(n[h+1],r)),n[a+1]=function A4(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=_h(a,0),0!==a&&(n[a+1]=T_(n[a+1],r)),a=r;else n[r+1]=_h(u,0),0===a?a=r:n[u+1]=T_(n[u+1],r),u=r;c&&(n[r+1]=w_(n[r+1])),YS(n,l,r,!0),YS(n,l,r,!1),function R4(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&Fs(o,e)>=0&&(t[r+1]=C_(t[r+1]))}(e,l,n,r,o),s=_h(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,t,s,r)}}(o,n,s,r),e!==oe&&Jt(i,s,e)&&function aR(n,e,t,r,i,o,s,a){if(!(3&e.type))return;const u=n.data,c=u[a+1],l=function b4(n){return 1==(1&n)}(c)?uR(u,e,t,i,Mo(c),s):void 0;vh(l)||(vh(o)||function D4(n){return 2==(2&n)}(c)&&(o=uR(u,null,t,i,a,s)),function H$(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:En.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=En.Important),n.setStyle(t,r,i,o))}}(r,s,Ld(ln(),t),i,o))}(o,o.data[ln()],i,i[11],n,i[s+1]=function q4(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ve(function Fi(n){return n instanceof v0?n.changingThisBreaksApplicationSecurity:n}(n)))),n}(e,t),r,s)}(n,e,null,!0),yh}function D_(n,e,t,r,i){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],r=oc(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function oc(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Vn(n,s,!!t||e[++o]))}return void 0===n?null:n}function uR(n,e,t,r,i,o){const s=null===e;let a;for(;i>0;){const u=n[i],c=Array.isArray(u),l=c?u[1]:u,d=null===l;let h=t[i+1];h===oe&&(h=d?De:void 0);let f=d?pm(h,r):l===r?h:void 0;if(c&&!vh(f)&&(f=pm(u,r)),vh(f)&&(a=f,s))return a;const p=n[i+1];i=s?Li(p):Mo(p)}if(null!==e){let u=o?e.residualClasses:e.residualStyles;null!=u&&(a=pm(u,r))}return a}function vh(n){return void 0!==n}function he(n,e=""){const t=C(),r=Ee(),i=n+22,o=r.firstCreatePass?qs(r,i,1,e,null):r.data[i],s=t[i]=function bm(n,e){return n.createText(e)}(t[11],e);eh(r,t,s,o),Dr(o,!1)}function Tn(n){return A_("",n,""),Tn}function A_(n,e,t){const r=C(),i=function Ws(n,e,t,r){return Jt(n,Ps(),t)?e+re(t)+r:oe}(r,n,e,t);return i!==oe&&function ai(n,e,t){const r=Ld(e,n);!function Zb(n,e,t){n.setValue(e,t)}(n[11],r,t)}(r,ln(),i),A_}const ra="en-US";let xR=ra;function R_(n,e,t,r,i){if(n=Y(n),Array.isArray(n))for(let o=0;o<n.length;o++)R_(n[o],e,t,r,i);else{const o=Ee(),s=C();let a=Ro(n)?n:Y(n.provide),u=F0(n);const c=Ut(),l=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(Ro(n)||!n.multi){const f=new Vu(u,i,T),p=x_(a,e,i?l:l+h,d);-1===p?(lm(zd(c,s),o,a),P_(o,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(f),s.push(f)):(t[p]=f,s[p]=f)}else{const f=x_(a,e,l+h,d),p=x_(a,e,l,l+h),g=f>=0&&t[f],_=p>=0&&t[p];if(i&&!_||!i&&!g){lm(zd(c,s),o,a);const I=function cq(n,e,t,r,i){const o=new Vu(n,t,T);return o.multi=[],o.index=e,o.componentProviders=0,nP(o,i,r&&!t),o}(i?uq:aq,t.length,i,r,u);!i&&_&&(t[p].providerFactory=I),P_(o,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(I),s.push(I)}else P_(o,n,f>-1?f:p,nP(t[i?p:f],u,!i&&r));!i&&r&&_&&t[p].componentProviders++}}}function P_(n,e,t,r){const i=Ro(e),o=function IH(n){return!!n.useClass}(e);if(i||o){const u=(o?Y(e.useClass):e).prototype.ngOnDestroy;if(u){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const l=c.indexOf(t);-1===l?c.push(t,[r,u]):c[l+1].push(r,u)}else c.push(t,u)}}}function nP(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function x_(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function aq(n,e,t,r){return M_(this.multi,[])}function uq(n,e,t,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Do(t,t[1],this.providerFactory.index,r);o=a.slice(0,s),M_(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],M_(i,o);return o}function M_(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Ke(n,e=[]){return t=>{t.providersResolver=(r,i)=>function sq(n,e,t){const r=Ee();if(r.firstCreatePass){const i=lr(n);R_(t,r.data,r.blueprint,i,!0),R_(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class ia{}class rP{}class iP extends ia{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new IS(this);const r=xn(e);this._bootstrapComponents=si(r.bootstrap),this._r3Injector=X0(e,t,[{provide:ia,useValue:this},{provide:Ju,useValue:this.componentFactoryResolver}],Ve(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class N_ extends rP{constructor(e){super(),this.moduleType=e}create(e){return new iP(this.moduleType,e)}}class dq extends ia{constructor(e,t,r){super(),this.componentFactoryResolver=new IS(this),this.instance=null;const i=new V0([...e,{provide:ia,useValue:this},{provide:Ju,useValue:this.componentFactoryResolver}],t||ah(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Ch(n,e,t=null){return new dq(n,e,t).injector}let hq=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=M0(0,t.type),i=r.length>0?Ch([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=G({token:n,providedIn:"environment",factory:()=>new n(B(br))}),n})();function oP(n){n.getStandaloneInjector=e=>e.get(hq).getOrCreateStandaloneInjector(n)}function pP(n,e,t,r,i,o){const s=e+t;return Jt(n,s,i)?Rr(n,s+1,o?r.call(o,i):r(i)):function dc(n,e){const t=n[e];return t===oe?void 0:t}(n,s+1)}function O_(n){return e=>{setTimeout(n,void 0,e)}}const Ae=class kq extends Yr{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=O_(o),i&&(i=O_(i)),s&&(s=O_(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof Gn&&e.add(a),a}};let ci=(()=>{class n{}return n.__NG_ELEMENT_ID__=Lq,n})();const Vq=ci,Fq=class extends Vq{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tViews,i=ch(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(r)),r_(r,i,e),new ec(i)}};function Lq(){return function Dh(n,e){return 4&n.type?new Fq(e,n,js(n,e)):null}(Ut(),C())}let gr=(()=>{class n{}return n.__NG_ELEMENT_ID__=Uq,n})();function Uq(){return function TP(n,e){let t;const r=e[n.index];if(cr(r))t=r;else{let i;if(8&n.type)i=Lt(r);else{const o=e[11];i=o.createComment("");const s=kn(n,e);bo(o,Zd(o,s),i,function B$(n,e){return n.nextSibling(e)}(o,s),!1)}e[n.index]=t=gS(r,e,i,n),dh(e,t)}return new EP(t,n,e)}(Ut(),C())}const Bq=gr,EP=class extends Bq{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return js(this._hostTNode,this._hostLView)}get injector(){return new Ms(this._hostTNode,this._hostLView)}get parentInjector(){const e=cm(this._hostTNode,this._hostLView);if(vb(e)){const t=Gd(e,this._hostLView),r=Hd(e);return new Ms(t[1].data[r+8],t)}return new Ms(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=wP(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=e.createEmbeddedView(t||{},o);return this.insert(s,i),s}createComponent(e,t,r,i,o){const s=e&&!function Uu(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const d=t||{};a=d.index,r=d.injector,i=d.projectableNodes,o=d.environmentInjector||d.ngModuleRef}const u=s?e:new tc(Re(e)),c=r||this.parentInjector;if(!o&&null==u.ngModule){const h=(s?c:this.parentInjector).get(br,null);h&&(o=h)}const l=u.create(c,i,void 0,o);return this.insert(l.hostView,a),l}insert(e,t){const r=e._lView,i=r[1];if(function gj(n){return cr(n[3])}(r)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const d=r[3],h=new EP(d,d[6],d[3]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(t),s=this._lContainer;!function O$(n,e,t,r){const i=10+r,o=t.length;r>0&&(t[i-1][4]=e),r<o-10?(e[4]=t[i],xb(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const s=e[17];null!==s&&t!==s&&function V$(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(i,r,s,o);const a=Mm(o,s),u=r[11],c=Zd(u,s[7]);return null!==c&&function M$(n,e,t,r,i,o){r[0]=i,r[6]=e,Wu(n,r,t,1,i,o)}(i,s[6],u,r,c,a),e.attachToViewContainerRef(),xb(F_(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=wP(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Rm(this._lContainer,t);r&&(Qd(F_(this._lContainer),t),t0(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=Rm(this._lContainer,t);return r&&null!=Qd(F_(this._lContainer),t)?new ec(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function wP(n){return n[8]}function F_(n){return n[8]||(n[8]=[])}function bh(...n){}const Sh=new U("Application Initializer");let Rh=(()=>{class n{constructor(t){this.appInits=t,this.resolve=bh,this.reject=bh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(ic(o))t.push(o);else if(I_(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(B(Sh,8))},n.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pc=new U("AppId",{providedIn:"root",factory:function YP(){return`${W_()}${W_()}${W_()}`}});function W_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const JP=new U("Platform Initializer"),K_=new U("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),XP=new U("appBootstrapListener");let pz=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const li=new U("LocaleId",{providedIn:"root",factory:()=>pe(li,J.Optional|J.SkipSelf)||function gz(){return typeof $localize<"u"&&$localize.locale||ra}()});class _z{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let ZP=(()=>{class n{compileModuleSync(t){return new N_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=si(xn(t).declarations).reduce((s,a)=>{const u=Re(a);return u&&s.push(new tc(u)),s},[]);return new _z(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Iz=(()=>Promise.resolve(0))();function Q_(n){typeof Zone>"u"?Iz.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class _t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ae(!1),this.onMicrotaskEmpty=new Ae(!1),this.onStable=new Ae(!1),this.onError=new Ae(!1),typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Ez(){let n=Ue.requestAnimationFrame,e=Ue.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Cz(n){const e=()=>{!function Tz(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ue,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,J_(n),n.isCheckStableRunning=!0,Y_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),J_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{try{return nx(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),rx(n)}},onInvoke:(t,r,i,o,s,a,u)=>{try{return nx(n),t.invoke(i,o,s,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),rx(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,J_(n),Y_(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_t.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(_t.isInAngularZone())throw new S(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,wz,bh,bh);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const wz={};function Y_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function J_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function nx(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function rx(n){n._nesting--,Y_(n)}class Dz{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ae,this.onMicrotaskEmpty=new Ae,this.onStable=new Ae,this.onError=new Ae}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const ix=new U(""),Ph=new U("");let ey,X_=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ey||(function Az(n){ey=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_t.assertNotInAngularZone(),Q_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Q_(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(B(_t),B(Z_),B(Ph))},n.\u0275prov=G({token:n,factory:n.\u0275fac}),n})(),Z_=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return ey?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Ui=null;const ox=new U("AllowMultipleToken"),ty=new U("PlatformDestroyListeners");class sx{constructor(e,t){this.name=e,this.token=t}}function ux(n,e,t=[]){const r=`Platform: ${e}`,i=new U(r);return(o=[])=>{let s=ny();if(!s||s.injector.get(ox,!1)){const a=[...t,...o,{provide:i,useValue:!0}];n?n(a):function Rz(n){if(Ui&&!Ui.get(ox,!1))throw new S(400,!1);Ui=n;const e=n.get(lx);(function ax(n){const e=n.get(JP,null);e&&e.forEach(t=>t())})(n)}(function cx(n=[],e){return hr.create({name:e,providers:[{provide:qm,useValue:"platform"},{provide:ty,useValue:new Set([()=>Ui=null])},...n]})}(a,r))}return function xz(n){const e=ny();if(!e)throw new S(401,!1);return e}()}}function ny(){return Ui?.get(lx)??null}let lx=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function hx(n,e){let t;return t="noop"===n?new Dz:("zone.js"===n?void 0:n)||new _t(e),t}(r?.ngZone,function dx(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:_t,useValue:i}];return i.run(()=>{const s=hr.create({providers:o,parent:this.injector,name:t.moduleType.name}),a=t.create(s),u=a.injector.get($s,null);if(!u)throw new S(402,!1);return i.runOutsideAngular(()=>{const c=i.onError.subscribe({next:l=>{u.handleError(l)}});a.onDestroy(()=>{Mh(this._modules,a),c.unsubscribe()})}),function fx(n,e,t){try{const r=t();return ic(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(u,i,()=>{const c=a.injector.get(Rh);return c.runInitializers(),c.donePromise.then(()=>(function MR(n){qn(n,"Expected localeId to be defined"),"string"==typeof n&&(xR=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(li,ra)||ra),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,r=[]){const i=px({},r);return function bz(n,e,t){const r=new N_(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(xh);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new S(403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new S(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(ty,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(B(hr))},n.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function px(n,e){return Array.isArray(e)?e.reduce(px,n):{...n,...e}}let xh=(()=>{class n{constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new st(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new st(a=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{_t.assertNotInAngularZone(),Q_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{_t.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{u.unsubscribe(),c.unsubscribe()}});this.isStable=function OB(...n){const e=Au(n),t=function SB(n,e){return"number"==typeof kg(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?or(r[0]):ws(t)(gt(r,e)):Xr}(o,s.pipe(function VB(n={}){const{connector:e=(()=>new Yr),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,c=0,l=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=u=void 0,l=d=!1},p=()=>{const g=s;f(),g?.unsubscribe()};return Pt((g,_)=>{c++,!d&&!l&&h();const I=u=u??e();_.add(()=>{c--,0===c&&!d&&!l&&(a=Og(p,i))}),I.subscribe(_),!s&&c>0&&(s=new Du({next:w=>I.next(w),error:w=>{d=!0,h(),a=Og(f,t,w),I.error(w)},complete:()=>{l=!0,h(),a=Og(f,r),I.complete()}}),or(g).subscribe(s))})(o)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof L0;if(!this._injector.get(Rh).done)throw!i&&function Cs(n){const e=Re(n)||Wt(n)||an(n);return null!==e&&e.standalone}(t),new S(405,false);let s;s=i?t:this._injector.get(Ju).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function Sz(n){return n.isBoundToModule}(s)?void 0:this._injector.get(ia),c=s.create(hr.NULL,[],r||s.selector,a),l=c.location.nativeElement,d=c.injector.get(ix,null);return d?.registerApplication(l),c.onDestroy(()=>{this.detachView(c.hostView),Mh(this.components,c),d?.unregisterApplication(l)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new S(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Mh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(XP,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Mh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new S(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(B(_t),B(br),B($s))},n.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Mh(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let Nh=(()=>{class n{}return n.__NG_ELEMENT_ID__=Nz,n})();function Nz(n){return function kz(n,e,t){if(ku(n)&&!t){const r=On(n.index,e);return new ec(r,r)}return 47&n.type?new ec(e[16],e):null}(Ut(),C(),16==(16&n))}class vx{constructor(){}supports(e){return nc(e)}create(e){return new Bz(e)}}const Uz=(n,e)=>e;class Bz{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Uz}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const s=!r||t&&t.currentIndex<Ex(r,i,o)?t:r,a=Ex(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{o||(o=[]);const c=a-i,l=u-i;if(c!=l){for(let h=0;h<c;h++){const f=h<o.length?o[h]:o[h]=0,p=f+h;l<=p&&p<c&&(o[h]=f+1)}o[s.previousIndex]=l-c}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!nc(e))throw new S(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),r=!0),t=t._next}else i=0,function f4(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Po()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new jz(t,r),o,i),e}_verifyReinsertion(e,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Ix),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ix),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class jz{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $z{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class Ix{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new $z,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ex(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class wx{constructor(){}supports(e){return e instanceof Map||m_(e)}create(){return new Hz}}class Hz{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||m_(e)))throw new S(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new Gz(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class Gz{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Tx(){return new Vh([new vx])}let Vh=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Tx()),deps:[[n,new $u,new ju]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new S(901,!1)}}return n.\u0275prov=G({token:n,providedIn:"root",factory:Tx}),n})();function Cx(){return new gc([new wx])}let gc=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Cx()),deps:[[n,new $u,new ju]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new S(901,!1)}}return n.\u0275prov=G({token:n,providedIn:"root",factory:Cx}),n})();const Wz=ux(null,"core",[]);let Kz=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(B(xh))},n.\u0275mod=ar({type:n}),n.\u0275inj=zn({}),n})(),ay=null;function Nr(){return ay}class Jz{}const fn=new U("DocumentToken");let uy=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=G({token:n,factory:function(){return function Xz(){return B(Dx)}()},providedIn:"platform"}),n})();const Zz=new U("Location Initialized");let Dx=(()=>{class n extends uy{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Nr().getBaseHref(this._doc)}onPopState(t){const r=Nr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Nr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Ax()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Ax()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(B(fn))},n.\u0275prov=G({token:n,factory:function(){return function e9(){return new Dx(B(fn))}()},providedIn:"platform"}),n})();function Ax(){return!!window.history.pushState}function cy(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function bx(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function hi(n){return n&&"?"!==n[0]?"?"+n:n}let Oo=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=G({token:n,factory:function(){return pe(Rx)},providedIn:"root"}),n})();const Sx=new U("appBaseHref");let Rx=(()=>{class n extends Oo{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??pe(fn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return cy(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+hi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+hi(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+hi(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(B(uy),B(Sx,8))},n.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),t9=(()=>{class n extends Oo{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=cy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+hi(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+hi(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(B(uy),B(Sx,8))},n.\u0275prov=G({token:n,factory:n.\u0275fac}),n})(),ly=(()=>{class n{constructor(t){this._subject=new Ae,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function i9(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(bx(Px(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+hi(r))}normalize(t){return n.stripTrailingSlash(function r9(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._basePath,Px(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+hi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+hi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=hi,n.joinWithSlash=cy,n.stripTrailingSlash=bx,n.\u0275fac=function(t){return new(t||n)(B(Oo))},n.\u0275prov=G({token:n,factory:function(){return function n9(){return new ly(B(Oo))}()},providedIn:"root"}),n})();function Px(n){return n.replace(/\/index.html$/,"")}function Ux(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}let Bx=(()=>{class n{constructor(t,r,i,o){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(nc(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Ve(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(T(Vh),T(gc),T(Fn),T(oi))},n.\u0275dir=ee({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class $9{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zh=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new $9(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),Hx(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Hx(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(T(gr),T(ci),T(Vh))},n.\u0275dir=ee({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Hx(n,e){n.context.$implicit=e.item}let Vo=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new G9,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Gx("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Gx("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(T(gr),T(ci))},n.\u0275dir=ee({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class G9{constructor(){this.$implicit=null,this.ngIf=null}}function Gx(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ve(e)}'.`)}class Y9{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class J9{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const X9=new J9,Z9=new Y9;let zx=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(ic(t))return X9;if(VS(t))return Z9;throw function yr(n,e){return new S(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(T(Nh,16))},n.\u0275pipe=In({name:"async",type:n,pure:!1,standalone:!0}),n})(),y6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ar({type:n}),n.\u0275inj=zn({}),n})();let w6=(()=>{class n{}return n.\u0275prov=G({token:n,providedIn:"root",factory:()=>new T6(B(fn),window)}),n})();class T6{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function C6(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Qx(this.window.history)||Qx(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Qx(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Yx{}class J6 extends Jz{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ay extends J6{static makeCurrent(){!function Yz(n){ay||(ay=n)}(new Ay)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function X6(){return vc=vc||document.querySelector("base"),vc?vc.getAttribute("href"):null}();return null==t?null:function Z6(n){Kh=Kh||document.createElement("a"),Kh.setAttribute("href",n);const e=Kh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){vc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ux(document.cookie,e)}}let Kh,vc=null;const nM=new U("TRANSITION_ID"),t5=[{provide:Sh,useFactory:function e5(n,e,t){return()=>{t.get(Rh).donePromise.then(()=>{const r=Nr(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[nM,fn,hr],multi:!0}];let r5=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=G({token:n,factory:n.\u0275fac}),n})();const Qh=new U("EventManagerPlugins");let Yh=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(t))return this._eventNameToPlugin.set(t,s),s}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(B(Qh),B(_t))},n.\u0275prov=G({token:n,factory:n.\u0275fac}),n})();class rM{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Nr().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let iM=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=G({token:n,factory:n.\u0275fac}),n})(),Ic=(()=>{class n extends iM{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(oM),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(oM))}}return n.\u0275fac=function(t){return new(t||n)(B(fn))},n.\u0275prov=G({token:n,factory:n.\u0275fac}),n})();function oM(n){Nr().remove(n)}const by={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Sy=/%COMP%/g;function Ry(n,e){return e.flat(100).map(t=>t.replace(Sy,n))}function uM(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Py=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new xy(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Tr.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new c5(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case Tr.ShadowDom:return new l5(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ry(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(B(Yh),B(Ic),B(pc))},n.\u0275prov=G({token:n,factory:n.\u0275fac}),n})();class xy{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(by[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(lM(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(lM(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=by[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=by[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(En.DashCase|En.Important)?e.style.setProperty(t,r,i&En.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&En.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,uM(r)):this.eventManager.addEventListener(e,t,uM(r))}}function lM(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class c5 extends xy{constructor(e,t,r,i){super(e),this.component=r;const o=Ry(i+"-"+r.id,r.styles);t.addStyles(o),this.contentAttr=function s5(n){return"_ngcontent-%COMP%".replace(Sy,n)}(i+"-"+r.id),this.hostAttr=function a5(n){return"_nghost-%COMP%".replace(Sy,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class l5 extends xy{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Ry(i.id,i.styles);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let d5=(()=>{class n extends rM{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(B(fn))},n.\u0275prov=G({token:n,factory:n.\u0275fac}),n})();const dM=["alt","control","meta","shift"],h5={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},f5={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let p5=(()=>{class n extends rM{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Nr().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),dM.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),s+=c+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=h5[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),dM.forEach(s=>{s!==i&&(0,f5[s])(t)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(B(fn))},n.\u0275prov=G({token:n,factory:n.\u0275fac}),n})();const fM=[{provide:K_,useValue:"browser"},{provide:JP,useValue:function g5(){Ay.makeCurrent()},multi:!0},{provide:fn,useFactory:function _5(){return function K$(n){Vm=n}(document),document},deps:[]}],y5=ux(Wz,"browser",fM),pM=new U(""),gM=[{provide:Ph,useClass:class n5{addToWindow(e){Ue.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},Ue.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ue.getAllAngularRootElements=()=>e.getAllRootElements(),Ue.frameworkStabilizers||(Ue.frameworkStabilizers=[]),Ue.frameworkStabilizers.push(r=>{const i=Ue.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(function(u){u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Nr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:ix,useClass:X_,deps:[_t,Z_,Ph]},{provide:X_,useClass:X_,deps:[_t,Z_,Ph]}],mM=[{provide:qm,useValue:"root"},{provide:$s,useFactory:function m5(){return new $s},deps:[]},{provide:Qh,useClass:d5,multi:!0,deps:[fn,_t,K_]},{provide:Qh,useClass:p5,multi:!0,deps:[fn]},{provide:Py,useClass:Py,deps:[Yh,Ic,pc]},{provide:B0,useExisting:Py},{provide:iM,useExisting:Ic},{provide:Ic,useClass:Ic,deps:[fn]},{provide:Yh,useClass:Yh,deps:[Qh,_t]},{provide:Yx,useClass:r5,deps:[]},[]];let v5=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:pc,useValue:t.appId},{provide:nM,useExisting:pc},t5]}}}return n.\u0275fac=function(t){return new(t||n)(B(pM,12))},n.\u0275mod=ar({type:n}),n.\u0275inj=zn({providers:[...mM,...gM],imports:[y6,Kz]}),n})(),_M=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(B(fn))},n.\u0275prov=G({token:n,factory:function(t){let r=null;return r=t?new t:function E5(){return new _M(B(fn))}(),r},providedIn:"root"}),n})();function K(...n){return gt(n,Au(n))}typeof window<"u"&&window;class Zn extends Yr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Jh=Tu(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:R5}=Array,{getPrototypeOf:P5,prototype:x5,keys:M5}=Object;function IM(n){if(1===n.length){const e=n[0];if(R5(e))return{args:e,keys:null};if(function N5(n){return n&&"object"==typeof n&&P5(n)===x5}(e)){const t=M5(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:k5}=Array;function EM(n){return ce(e=>function O5(n,e){return k5(e)?n(...e):n(e)}(n,e))}function wM(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function TM(...n){const e=Au(n),t=PA(n),{args:r,keys:i}=IM(n);if(0===r.length)return gt([],e);const o=new st(function V5(n,e,t=Io){return r=>{CM(e,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let u=0;u<i;u++)CM(e,()=>{const c=gt(n[u],e);let l=!1;c.subscribe(Tt(r,d=>{o[u]=d,l||(l=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>wM(i,s):Io));return t?o.pipe(EM(t)):o}function CM(n,e,t){n?Jr(t,n,e):e()}function ky(...n){return function F5(){return ws(1)}()(gt(n,Au(n)))}function DM(n){return new st(e=>{or(n()).subscribe(e)})}function Ec(n,e){const t=Fe(n)?n:()=>n,r=i=>i.error(t());return new st(e?i=>e.schedule(r,0,i):r)}function Oy(){return Pt((n,e)=>{let t=null;n._refCount++;const r=Tt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class AM extends st{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,mA(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Gn;const t=this.getSubject();e.add(this.source.subscribe(Tt(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Gn.EMPTY)}return e}refCount(){return Oy()(this)}}function kr(n,e){return Pt((t,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();t.subscribe(Tt(r,u=>{i?.unsubscribe();let c=0;const l=o++;or(n(u,l)).subscribe(i=Tt(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function wc(n){return n<=0?()=>Xr:Pt((e,t)=>{let r=0;e.subscribe(Tt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function pi(n,e){return Pt((t,r)=>{let i=0;t.subscribe(Tt(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Xh(n){return Pt((e,t)=>{let r=!1;e.subscribe(Tt(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function bM(n=U5){return Pt((e,t)=>{let r=!1;e.subscribe(Tt(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function U5(){return new Jh}function ji(n,e){const t=arguments.length>=2;return r=>r.pipe(n?pi((i,o)=>n(i,o,r)):Io,wc(1),t?Xh(e):bM(()=>new Jh))}function $i(n,e){return Fe(e)?Ft(n,e,1):Ft(n,1)}function Xt(n,e,t){const r=Fe(n)||e||t?{next:n,error:e,complete:t}:n;return r?Pt((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Tt(o,u=>{var c;null===(c=r.next)||void 0===c||c.call(r,u),o.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),o.complete()},u=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,u),o.error(u)},()=>{var u,c;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Io}function Hi(n){return Pt((e,t)=>{let o,r=null,i=!1;r=e.subscribe(Tt(t,void 0,void 0,s=>{o=or(n(s,Hi(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function B5(n,e,t,r,i){return(o,s)=>{let a=t,u=e,c=0;o.subscribe(Tt(s,l=>{const d=c++;u=a?n(u,l,d):(a=!0,l),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function SM(n,e){return Pt(B5(n,e,arguments.length>=2,!0))}function Vy(n){return n<=0?()=>Xr:Pt((e,t)=>{let r=[];e.subscribe(Tt(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function RM(n,e){const t=arguments.length>=2;return r=>r.pipe(n?pi((i,o)=>n(i,o,r)):Io,Vy(1),t?Xh(e):bM(()=>new Jh))}function Fy(n){return Pt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const fe="primary",Tc=Symbol("RouteTitle");class H5{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ua(n){return new H5(n)}function G5(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Or(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!PM(n[i],e[i]))return!1;return!0}function PM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function xM(n){return Array.prototype.concat.apply([],n)}function MM(n){return n.length>0?n[n.length-1]:null}function jt(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Gi(n){return I_(n)?n:ic(n)?gt(Promise.resolve(n)):K(n)}const Zh=!1,z5={exact:function OM(n,e,t){if(!Lo(n.segments,e.segments)||!ef(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!OM(n.children[r],e.children[r],t))return!1;return!0},subset:VM},NM={exact:function W5(n,e){return Or(n,e)},subset:function K5(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>PM(n[t],e[t]))},ignored:()=>!0};function kM(n,e,t){return z5[t.paths](n.root,e.root,t.matrixParams)&&NM[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function VM(n,e,t){return FM(n,e,e.segments,t)}function FM(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Lo(i,t)||e.hasChildren()||!ef(i,t,r))}if(n.segments.length===t.length){if(!Lo(n.segments,t)||!ef(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!VM(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Lo(n.segments,i)&&ef(n.segments,i,r)&&n.children[fe])&&FM(n.children[fe],e,o,r)}}function ef(n,e,t){return e.every((r,i)=>NM[t](n[i].parameters,r.parameters))}class Fo{constructor(e=new ge([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ua(this.queryParams)),this._queryParamMap}toString(){return J5.serialize(this)}}class ge{constructor(e,t){this.segments=e,this.children=t,this.parent=null,jt(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tf(this)}}class Cc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ua(this.parameters)),this._parameterMap}toString(){return BM(this)}}function Lo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Dc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=G({token:n,factory:function(){return new Ly},providedIn:"root"}),n})();class Ly{parse(e){const t=new sW(e);return new Fo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ac(e.root,!0)}`,r=function eW(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${nf(t)}=${nf(i)}`).join("&"):`${nf(t)}=${nf(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function X5(n){return encodeURI(n)}(e.fragment)}`:""}`}}const J5=new Ly;function tf(n){return n.segments.map(e=>BM(e)).join("/")}function Ac(n,e){if(!n.hasChildren())return tf(n);if(e){const t=n.children[fe]?Ac(n.children[fe],!1):"",r=[];return jt(n.children,(i,o)=>{o!==fe&&r.push(`${o}:${Ac(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Y5(n,e){let t=[];return jt(n.children,(r,i)=>{i===fe&&(t=t.concat(e(r,i)))}),jt(n.children,(r,i)=>{i!==fe&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===fe?[Ac(n.children[fe],!1)]:[`${i}:${Ac(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[fe]?`${tf(n)}/${t[0]}`:`${tf(n)}/(${t.join("//")})`}}function LM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nf(n){return LM(n).replace(/%3B/gi,";")}function Uy(n){return LM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rf(n){return decodeURIComponent(n)}function UM(n){return rf(n.replace(/\+/g,"%20"))}function BM(n){return`${Uy(n.path)}${function Z5(n){return Object.keys(n).map(e=>`;${Uy(e)}=${Uy(n[e])}`).join("")}(n.parameters)}`}const tW=/^[^\/()?;=#]+/;function sf(n){const e=n.match(tW);return e?e[0]:""}const nW=/^[^=?&#]+/,iW=/^[^&#]+/;class sW{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[fe]=new ge(e,t)),r}parseSegment(){const e=sf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new S(4009,Zh);return this.capture(e),new Cc(rf(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=sf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=sf(this.remaining);i&&(r=i,this.capture(r))}e[rf(t)]=rf(r)}parseQueryParam(e){const t=function rW(n){const e=n.match(nW);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function oW(n){const e=n.match(iW);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=UM(t),o=UM(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=sf(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new S(4010,Zh);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=fe);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[fe]:new ge([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new S(4011,Zh)}}function By(n){return n.segments.length>0?new ge([],{[fe]:n}):n}function af(n){const e={};for(const r of Object.keys(n.children)){const o=af(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function aW(n){if(1===n.numberOfChildren&&n.children[fe]){const e=n.children[fe];return new ge(n.segments.concat(e.segments),e.children)}return n}(new ge(n.segments,e))}function Uo(n){return n instanceof Fo}function lW(n,e,t,r,i){if(0===t.length)return ca(e.root,e.root,e.root,r,i);const o=function HM(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new $M(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return jt(o.outlets,(u,c)=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new $M(t,e,r)}(t);return o.toRoot()?ca(e.root,e.root,new ge([],{}),r,i):function s(u){const c=function hW(n,e,t,r){if(n.isAbsolute)return new la(e.root,!0,0);if(-1===r)return new la(t,t===e.root,0);return function GM(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new S(4005,!1);i=r.segments.length}return new la(r,!1,i-o)}(t,r+(bc(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,u),l=c.processChildren?Rc(c.segmentGroup,c.index,o.commands):$y(c.segmentGroup,c.index,o.commands);return ca(e.root,c.segmentGroup,l,r,i)}(n.snapshot?._lastPathIndex)}function bc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Sc(n){return"object"==typeof n&&null!=n&&n.outlets}function ca(n,e,t,r,i){let s,o={};r&&jt(r,(u,c)=>{o[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`}),s=n===e?t:jM(n,e,t);const a=By(af(s));return new Fo(a,o,i)}function jM(n,e,t){const r={};return jt(n.children,(i,o)=>{r[o]=i===e?t:jM(i,e,t)}),new ge(n.segments,r)}class $M{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&bc(r[0]))throw new S(4003,!1);const i=r.find(Sc);if(i&&i!==MM(r))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class la{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function $y(n,e,t){if(n||(n=new ge([],{})),0===n.segments.length&&n.hasChildren())return Rc(n,e,t);const r=function pW(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const s=n.segments[i],a=t[r];if(Sc(a))break;const u=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!zM(u,c,s))return o;r+=2}else{if(!zM(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new ge(n.segments.slice(0,r.pathIndex),{});return o.children[fe]=new ge(n.segments.slice(r.pathIndex),n.children),Rc(o,0,i)}return r.match&&0===i.length?new ge(n.segments,{}):r.match&&!n.hasChildren()?Hy(n,e,t):r.match?Rc(n,0,i):Hy(n,e,t)}function Rc(n,e,t){if(0===t.length)return new ge(n.segments,{});{const r=function fW(n){return Sc(n[0])?n[0].outlets:{[fe]:n}}(t),i={};return jt(r,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=$y(n.children[s],e,o))}),jt(n.children,(o,s)=>{void 0===r[s]&&(i[s]=o)}),new ge(n.segments,i)}}function Hy(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(Sc(o)){const u=gW(o.outlets);return new ge(r,u)}if(0===i&&bc(t[0])){r.push(new Cc(n.segments[e].path,qM(t[0]))),i++;continue}const s=Sc(o)?o.outlets[fe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&bc(a)?(r.push(new Cc(s,qM(a))),i+=2):(r.push(new Cc(s,{})),i++)}return new ge(r,{})}function gW(n){const e={};return jt(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Hy(new ge([],{}),0,t))}),e}function qM(n){const e={};return jt(n,(t,r)=>e[r]=`${t}`),e}function zM(n,e,t){return n==t.path&&Or(e,t.parameters)}class gi{constructor(e,t){this.id=e,this.url=t}}class Gy extends gi{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bo extends gi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class uf extends gi{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class WM extends gi{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class mW extends gi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _W extends gi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yW extends gi{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class vW extends gi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class IW extends gi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EW{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wW{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class TW{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CW{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DW{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AW{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KM{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let SW=(()=>{class n{createUrlTree(t,r,i,o,s,a){return lW(t||r.root,i,o,s,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=G({token:n,factory:n.\u0275fac}),n})(),RW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=G({token:n,factory:function(e){return SW.\u0275fac(e)},providedIn:"root"}),n})();class QM{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=qy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=qy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=zy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return zy(e,this._root).map(t=>t.value)}}function qy(n,e){if(n===e.value)return e;for(const t of e.children){const r=qy(n,t);if(r)return r}return null}function zy(n,e){if(n===e.value)return[e];for(const t of e.children){const r=zy(n,t);if(r.length)return r.unshift(e),r}return[]}class mi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function da(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class YM extends QM{constructor(e,t){super(e),this.snapshot=t,Wy(this,e)}toString(){return this.snapshot.toString()}}function JM(n,e){const t=function PW(n,e){const s=new cf([],{},{},"",{},fe,e,null,n.root,-1,{});return new ZM("",new mi(s,[]))}(n,e),r=new Zn([new Cc("",{})]),i=new Zn({}),o=new Zn({}),s=new Zn({}),a=new Zn(""),u=new ha(r,i,s,a,o,fe,e,t.root);return u.snapshot=t.root,new YM(new mi(u,[]),t)}class ha{constructor(e,t,r,i,o,s,a,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.pipe(ce(c=>c[Tc]))??K(void 0),this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ce(e=>ua(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ce(e=>ua(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function XM(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function xW(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class cf{constructor(e,t,r,i,o,s,a,u,c,l,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=d}get title(){return this.data?.[Tc]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ua(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ua(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ZM extends QM{constructor(e,t){super(t),this.url=e,Wy(this,t)}toString(){return eN(this._root)}}function Wy(n,e){e.value._routerState=n,e.children.forEach(t=>Wy(n,t))}function eN(n){const e=n.children.length>0?` { ${n.children.map(eN).join(", ")} } `:"";return`${n.value}${e}`}function Ky(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Or(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Or(e.params,t.params)||n.params.next(t.params),function q5(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Or(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Or(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Qy(n,e){const t=Or(n.params,e.params)&&function Q5(n,e){return Lo(n,e)&&n.every((t,r)=>Or(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Qy(n.parent,e.parent))}function Pc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function NW(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Pc(n,r,i);return Pc(n,r)})}(n,e,t);return new mi(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Pc(n,a)),s}}const r=function kW(n){return new ha(new Zn(n.url),new Zn(n.params),new Zn(n.queryParams),new Zn(n.fragment),new Zn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>Pc(n,o));return new mi(r,i)}}const Yy="ngNavigationCancelingError";function tN(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Uo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=nN(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function nN(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Yy]=!0,r.cancellationCode=e,t&&(r.url=t),r}function rN(n){return iN(n)&&Uo(n.url)}function iN(n){return n&&n[Yy]}class OW{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new xc,this.attachRef=null}}let xc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new OW,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lf=!1;let Jy=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=fe,this.activateEvents=new Ae,this.deactivateEvents=new Ae,this.attachEvents=new Ae,this.detachEvents=new Ae,this.parentContexts=pe(xc),this.location=pe(gr),this.changeDetector=pe(Nh),this.environmentInjector=pe(br)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,lf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,lf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,lf);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new S(4013,lf);this._activatedRoute=t;const i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new VW(t,a,i.injector);if(r&&function FW(n){return!!n.resolveComponentFactory}(r)){const c=r.resolveComponentFactory(s);this.activated=i.createComponent(c,i.length,u)}else this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ee({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Nn]}),n})();class VW{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ha?this.route:e===xc?this.childContexts:this.parent.get(e,t)}}let Xy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=vn({type:n,selectors:[["ng-component"]],standalone:!0,features:[oP],decls:1,vars:0,template:function(t,r){1&t&&ui(0,"router-outlet")},dependencies:[Jy],encapsulation:2}),n})();function oN(n,e){return n.providers&&!n._injector&&(n._injector=Ch(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ev(n){const e=n.children&&n.children.map(ev),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==fe&&(t.component=Xy),t}function er(n){return n.outlet||fe}function sN(n,e){const t=n.filter(r=>er(r)===e);return t.push(...n.filter(r=>er(r)!==e)),t}function Mc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class $W{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ky(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=da(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),jt(i,(o,s)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=da(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=da(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=da(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new AW(o.value.snapshot))}),e.children.length&&this.forwardEvent(new CW(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(Ky(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Ky(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=Mc(i.snapshot),u=a?.get(Ju)??null;s.attachRef=null,s.route=i,s.resolver=u,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class aN{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class df{constructor(e,t){this.component=e,this.route=t}}function HW(n,e,t){const r=n._root;return Nc(r,e?e._root:null,t,[r.value])}function fa(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function HB(n){return null!==Sd(n)}(n)?e.get(n):n:r}function Nc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=da(e);return n.children.forEach(s=>{(function qW(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function zW(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Lo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Lo(n.url,e.url)||!Or(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qy(n,e)||!Or(n.queryParams,e.queryParams);default:return!Qy(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new aN(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Nc(n,e,o.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new df(a.outlet.component,s))}else s&&kc(e,a,i),i.canActivateChecks.push(new aN(r)),Nc(n,null,o.component?a?a.children:null:t,r,i)})(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),jt(o,(s,a)=>kc(s,t.getContext(a),i)),i}function kc(n,e,t){const r=da(n),i=n.value;jt(r,(o,s)=>{kc(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new df(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Oc(n){return"function"==typeof n}function tv(n){return n instanceof Jh||"EmptyError"===n?.name}const hf=Symbol("INITIAL_VALUE");function pa(){return kr(n=>TM(n.map(e=>e.pipe(wc(1),function L5(...n){const e=Au(n);return Pt((t,r)=>{(e?ky(n,t,e):ky(n,t)).subscribe(r)})}(hf)))).pipe(ce(e=>{for(const t of e)if(!0!==t){if(t===hf)return hf;if(!1===t||t instanceof Fo)return t}return!0}),pi(e=>e!==hf),wc(1)))}function uN(n){return function uB(...n){return fA(n)}(Xt(e=>{if(Uo(e))throw tN(0,e)}),ce(e=>!0===e))}const nv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cN(n,e,t,r,i){const o=rv(n,e,t);return o.matched?function c8(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?K(i.map(s=>{const a=fa(s,n);return Gi(function XW(n){return n&&Oc(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(pa(),uN()):K(!0)}(r=oN(e,r),e,t).pipe(ce(s=>!0===s?o:{...nv})):K(o)}function rv(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...nv}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||G5)(t,n,e);if(!i)return{...nv};const o={};jt(i.posParams,(a,u)=>{o[u]=a.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function ff(n,e,t,r){if(t.length>0&&function h8(n,e,t){return t.some(r=>pf(n,e,r)&&er(r)!==fe)}(n,t,r)){const o=new ge(e,function d8(n,e,t,r){const i={};i[fe]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&er(o)!==fe){const s=new ge([],{});s._sourceSegment=n,s._segmentIndexShift=e.length,i[er(o)]=s}return i}(n,e,r,new ge(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function f8(n,e,t){return t.some(r=>pf(n,e,r))}(n,t,r)){const o=new ge(n.segments,function l8(n,e,t,r,i){const o={};for(const s of r)if(pf(n,t,s)&&!i[er(s)]){const a=new ge([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,o[er(s)]=a}return{...i,...o}}(n,e,t,r,n.children));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const i=new ge(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function pf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function lN(n,e,t,r){return!!(er(n)===r||r!==fe&&pf(e,t,n))&&("**"===n.path||rv(e,n,t).matched)}function dN(n,e,t){return 0===e.length&&!n.children[t]}const gf=!1;class mf{constructor(e){this.segmentGroup=e||null}}class hN{constructor(e){this.urlTree=e}}function Vc(n){return Ec(new mf(n))}function fN(n){return Ec(new hN(n))}class _8{constructor(e,t,r,i,o){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const e=ff(this.urlTree.root,[],[],this.config).segmentGroup,t=new ge(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,fe).pipe(ce(o=>this.createUrlTree(af(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Hi(o=>{if(o instanceof hN)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof mf?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,fe).pipe(ce(i=>this.createUrlTree(af(i),e.queryParams,e.fragment))).pipe(Hi(i=>{throw i instanceof mf?this.noMatchError(i):i}))}noMatchError(e){return new S(4002,gf)}createUrlTree(e,t,r){const i=By(e);return new Fo(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(ce(o=>new ge([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return gt(i).pipe($i(o=>{const s=r.children[o],a=sN(t,o);return this.expandSegmentGroup(e,a,s,o).pipe(ce(u=>({segment:u,outlet:o})))}),SM((o,s)=>(o[s.outlet]=s.segment,o),{}),RM())}expandSegment(e,t,r,i,o,s){return gt(r).pipe($i(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,o,s).pipe(Hi(c=>{if(c instanceof mf)return K(null);throw c}))),ji(a=>!!a),Hi((a,u)=>{if(tv(a))return dN(t,i,o)?K(new ge([],{})):Vc(t);throw a}))}expandSegmentAgainstRoute(e,t,r,i,o,s,a){return lN(i,t,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s):Vc(t):Vc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?fN(o):this.lineralizeSegments(r,o).pipe(Ft(s=>{const a=new ge(s,{});return this.expandSegment(e,a,t,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){const{matched:a,consumedSegments:u,remainingSegments:c,positionalParamSegments:l}=rv(t,i,o);if(!a)return Vc(t);const d=this.applyRedirectCommands(u,i.redirectTo,l);return i.redirectTo.startsWith("/")?fN(d):this.lineralizeSegments(i,d).pipe(Ft(h=>this.expandSegment(e,t,r,h.concat(c),s,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){return"**"===r.path?(e=oN(r,e),r.loadChildren?(r._loadedRoutes?K({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(ce(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new ge(i,{})))):K(new ge(i,{}))):cN(t,r,i,e).pipe(kr(({matched:s,consumedSegments:a,remainingSegments:u})=>s?this.getChildConfig(e=r._injector??e,r,i).pipe(Ft(l=>{const d=l.injector??e,h=l.routes,{segmentGroup:f,slicedSegments:p}=ff(t,a,u,h),g=new ge(f.segments,f.children);if(0===p.length&&g.hasChildren())return this.expandChildren(d,h,g).pipe(ce(y=>new ge(a,y)));if(0===h.length&&0===p.length)return K(new ge(a,{}));const _=er(r)===o;return this.expandSegment(d,g,h,p,_?fe:o,!0).pipe(ce(w=>new ge(a.concat(w.segments),w.children)))})):Vc(t)))}getChildConfig(e,t,r){return t.children?K({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?K({routes:t._loadedRoutes,injector:t._loadedInjector}):function u8(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?K(!0):K(i.map(s=>{const a=fa(s,n);return Gi(function KW(n){return n&&Oc(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(pa(),uN())}(e,t,r).pipe(Ft(i=>i?this.configLoader.loadChildren(e,t).pipe(Xt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function g8(n){return Ec(nN(gf,3))}())):K({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return K(r);if(i.numberOfChildren>1||!i.children[fe])return Ec(new S(4e3,gf));i=i.children[fe]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new Fo(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return jt(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=t[a]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let s={};return jt(t.children,(a,u)=>{s[u]=this.createSegmentGroup(e,a,r,i)}),new ge(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new S(4001,gf);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class v8{}class w8{constructor(e,t,r,i,o,s,a){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const e=ff(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,fe).pipe(ce(t=>{if(null===t)return null;const r=new cf([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},fe,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new mi(r,t),o=new ZM(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,r=XM(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return gt(Object.keys(r.children)).pipe($i(i=>{const o=r.children[i],s=sN(t,i);return this.processSegmentGroup(e,s,o,i)}),SM((i,o)=>i&&o?(i.push(...o),i):null),function j5(n,e=!1){return Pt((t,r)=>{let i=0;t.subscribe(Tt(r,o=>{const s=n(o,i++);(s||e)&&r.next(o),!s&&r.complete()}))})}(i=>null!==i),Xh(null),RM(),ce(i=>{if(null===i)return null;const o=gN(i);return function T8(n){n.sort((e,t)=>e.value.outlet===fe?-1:t.value.outlet===fe?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,r,i,o){return gt(t).pipe($i(s=>this.processSegmentAgainstRoute(s._injector??e,s,r,i,o)),ji(s=>!!s),Hi(s=>{if(tv(s))return dN(r,i,o)?K([]):K(null);throw s}))}processSegmentAgainstRoute(e,t,r,i,o){if(t.redirectTo||!lN(t,r,i,o))return K(null);let s;if("**"===t.path){const a=i.length>0?MM(i).parameters:{},u=_N(r)+i.length;s=K({snapshot:new cf(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,yN(t),er(t),t.component??t._loadedComponent??null,t,mN(r),u,vN(t)),consumedSegments:[],remainingSegments:[]})}else s=cN(r,t,i,e).pipe(ce(({matched:a,consumedSegments:u,remainingSegments:c,parameters:l})=>{if(!a)return null;const d=_N(r)+u.length;return{snapshot:new cf(u,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,yN(t),er(t),t.component??t._loadedComponent??null,t,mN(r),d,vN(t)),consumedSegments:u,remainingSegments:c}}));return s.pipe(kr(a=>{if(null===a)return K(null);const{snapshot:u,consumedSegments:c,remainingSegments:l}=a;e=t._injector??e;const d=t._loadedInjector??e,h=function C8(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:p}=ff(r,c,l,h.filter(_=>void 0===_.redirectTo));if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(ce(_=>null===_?null:[new mi(u,_)]));if(0===h.length&&0===p.length)return K([new mi(u,[])]);const g=er(t)===o;return this.processSegment(d,h,f,p,g?fe:o).pipe(ce(_=>null===_?null:[new mi(u,_)]))}))}}function D8(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function gN(n){const e=[],t=new Set;for(const r of n){if(!D8(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=gN(r.children);e.push(new mi(r.value,i))}return e.filter(r=>!t.has(r))}function mN(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function _N(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function yN(n){return n.data||{}}function vN(n){return n.resolve||{}}function IN(n){return"string"==typeof n.title||null===n.title}function iv(n){return kr(e=>{const t=n(e);return t?gt(t).pipe(ce(()=>e)):K(e)})}const ga=new U("ROUTES");let ov=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return K(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Gi(t.loadComponent()).pipe(ce(wN),Xt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Fy(()=>{this.componentLoaders.delete(t)})),i=new AM(r,()=>new Yr).pipe(Oy());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return K({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(ce(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let u,c,l=!1;Array.isArray(a)?c=a:(u=a.create(t).injector,c=xM(u.get(ga,[],J.Self|J.Optional)));return{routes:c.map(ev),injector:u}}),Fy(()=>{this.childrenLoaders.delete(r)})),s=new AM(o,()=>new Yr).pipe(Oy());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(t){return Gi(t()).pipe(ce(wN),Ft(i=>i instanceof rP||Array.isArray(i)?K(i):gt(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(B(hr),B(ZP))},n.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function wN(n){return function k8(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let sv=(()=>{class n{constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Yr,this.configLoader=pe(ov),this.environmentInjector=pe(br),this.urlSerializer=pe(Dc),this.rootContexts=pe(xc),this.navigationId=0,this.configLoader.onLoadEndListener=i=>this.events.next(new wW(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new EW(i))}get hasRequestedNavigation(){return 0!==this.navigationId}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Zn({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(pi(r=>0!==r.id),ce(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),kr(r=>{let i=!1,o=!1;return K(r).pipe(Xt(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),kr(s=>{const a=t.browserUrlTree.toString(),u=!t.navigated||s.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(("reload"===t.onSameUrlNavigation||u)&&t.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return CN(s.source)&&(t.browserUrlTree=s.extractedUrl),K(s).pipe(kr(l=>{const d=this.transitions?.getValue();return this.events.next(new Gy(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),d!==this.transitions?.getValue()?Xr:Promise.resolve(l)}),function y8(n,e,t,r){return kr(i=>function m8(n,e,t,r,i){return new _8(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(ce(o=>({...i,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),Xt(l=>{this.currentNavigation={...this.currentNavigation,finalUrl:l.urlAfterRedirects},r.urlAfterRedirects=l.urlAfterRedirects}),function b8(n,e,t,r,i){return Ft(o=>function E8(n,e,t,r,i,o,s="emptyOnly"){return new w8(n,e,t,r,i,s,o).recognize().pipe(kr(a=>null===a?function I8(n){return new st(e=>e.error(n))}(new v8):K(a)))}(n,e,t,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i).pipe(ce(s=>({...o,targetSnapshot:s}))))}(this.environmentInjector,t.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Xt(l=>{if(r.targetSnapshot=l.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!l.extras.skipLocationChange){const h=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl);t.setBrowserUrl(h,l)}t.browserUrlTree=l.urlAfterRedirects}const d=new mW(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}));if(u&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:d,extractedUrl:h,source:f,restoredState:p,extras:g}=s,_=new Gy(d,this.urlSerializer.serialize(h),f,p);this.events.next(_);const I=JM(h,t.rootComponentType).snapshot;return K(r={...s,targetSnapshot:I,urlAfterRedirects:h,extras:{...g,skipLocationChange:!1,replaceUrl:!1}})}return t.rawUrlTree=s.rawUrl,s.resolve(null),Xr}),Xt(s=>{const a=new _W(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ce(s=>r={...s,guards:HW(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function e8(n,e){return Ft(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?K({...t,guardsResult:!0}):function t8(n,e,t,r){return gt(n).pipe(Ft(i=>function a8(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?K(o.map(a=>{const u=Mc(e)??i,c=fa(a,u);return Gi(function JW(n){return n&&Oc(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):u.runInContext(()=>c(n,e,t,r))).pipe(ji())})).pipe(pa()):K(!0)}(i.component,i.route,t,e,r)),ji(i=>!0!==i,!0))}(s,r,i,n).pipe(Ft(a=>a&&function WW(n){return"boolean"==typeof n}(a)?function n8(n,e,t,r){return gt(e).pipe($i(i=>ky(function i8(n,e){return null!==n&&e&&e(new TW(n)),K(!0)}(i.route.parent,r),function r8(n,e){return null!==n&&e&&e(new DW(n)),K(!0)}(i.route,r),function s8(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function GW(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>DM(()=>K(s.guards.map(u=>{const c=Mc(s.node)??t,l=fa(u,c);return Gi(function YW(n){return n&&Oc(n.canActivateChild)}(l)?l.canActivateChild(r,n):c.runInContext(()=>l(r,n))).pipe(ji())})).pipe(pa())));return K(o).pipe(pa())}(n,i.path,t),function o8(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return K(!0);const i=r.map(o=>DM(()=>{const s=Mc(e)??t,a=fa(o,s);return Gi(function QW(n){return n&&Oc(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(ji())}));return K(i).pipe(pa())}(n,i.route,t))),ji(i=>!0!==i,!0))}(r,o,n,e):K(a)),ce(a=>({...t,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),Xt(s=>{if(r.guardsResult=s.guardsResult,Uo(s.guardsResult))throw tN(0,s.guardsResult);const a=new yW(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),pi(s=>!!s.guardsResult||(t.restoreHistory(s),this.cancelNavigationTransition(s,"",3,t),!1)),iv(s=>{if(s.guards.canActivateChecks.length)return K(s).pipe(Xt(a=>{const u=new vW(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),kr(a=>{let u=!1;return K(a).pipe(function S8(n,e){return Ft(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return K(t);let o=0;return gt(i).pipe($i(s=>function R8(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!IN(i)&&(o[Tc]=i.title),function P8(n,e,t,r){const i=function x8(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return K({});const o={};return gt(i).pipe(Ft(s=>function M8(n,e,t,r){const i=Mc(e)??r,o=fa(n,i);return Gi(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[s],e,t,r).pipe(ji(),Xt(a=>{o[s]=a}))),Vy(1),function $5(n){return ce(()=>n)}(o),Hi(s=>tv(s)?Xr:Ec(s)))}(o,n,e,r).pipe(ce(s=>(n._resolvedData=s,n.data=XM(n,t).resolve,i&&IN(i)&&(n.data[Tc]=i.title),null)))}(s.route,r,n,e)),Xt(()=>o++),Vy(1),Ft(s=>o===i.length?K(t):Xr))})}(t.paramsInheritanceStrategy,this.environmentInjector),Xt({next:()=>u=!0,complete:()=>{u||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2,t))}}))}),Xt(a=>{const u=new IW(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),iv(s=>{const a=u=>{const c=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(u.routeConfig).pipe(Xt(l=>{u.component=l}),ce(()=>{})));for(const l of u.children)c.push(...a(l));return c};return TM(a(s.targetSnapshot.root)).pipe(Xh(),wc(1))}),iv(()=>t.afterPreactivation()),ce(s=>{const a=function MW(n,e,t){const r=Pc(n,e._root,t?t._root:void 0);return new YM(r,e)}(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return r={...s,targetRouterState:a}}),Xt(s=>{t.currentUrlTree=s.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),t.routerState=s.targetRouterState,"deferred"===t.urlUpdateStrategy&&(s.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,s),t.browserUrlTree=s.urlAfterRedirects)}),((n,e,t)=>ce(r=>(new $W(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s)),Xt({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Bo(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Fy(()=>{i||o||this.cancelNavigationTransition(r,"",1,t),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Hi(s=>{if(o=!0,iN(s)){rN(s)||(t.navigated=!0,t.restoreHistory(r,!0));const a=new uf(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),rN(s)){const u=t.urlHandlingStrategy.merge(s.url,t.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||CN(r.source)};t.scheduleNavigation(u,"imperative",null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const a=new WM(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(t.errorHandler(s))}catch(u){r.reject(u)}}return Xr}))}))}cancelNavigationTransition(t,r,i,o){const s=new uf(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function CN(n){return"imperative"!==n}let DN=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===fe);return r}getResolvedTitleForRoute(t){return t.data[Tc]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=G({token:n,factory:function(){return pe(O8)},providedIn:"root"}),n})(),O8=(()=>{class n extends DN{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(B(_M))},n.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),V8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=G({token:n,factory:function(){return pe(L8)},providedIn:"root"}),n})();class F8{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let L8=(()=>{class n extends F8{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Bt(n)))(r||n)}}(),n.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _f=new U("",{providedIn:"root",factory:()=>({})});let B8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=G({token:n,factory:function(){return pe(j8)},providedIn:"root"}),n})(),j8=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $8(n){throw n}function H8(n,e,t){return e.parse("/")}const G8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},q8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Zt=(()=>{class n{constructor(){this.disposed=!1,this.currentPageId=0,this.console=pe(pz),this.isNgZoneEnabled=!1,this.options=pe(_f,{optional:!0})||{},this.errorHandler=this.options.errorHandler||$8,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||H8,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>K(void 0),this.urlHandlingStrategy=pe(B8),this.routeReuseStrategy=pe(V8),this.urlCreationStrategy=pe(RW),this.titleStrategy=pe(DN),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=xM(pe(ga,{optional:!0})??[]),this.navigationTransitions=pe(sv),this.urlSerializer=pe(Dc),this.location=pe(ly),this.rootComponentType=null,this.isNgZoneEnabled=pe(_t)instanceof _t&&_t.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Fo,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=JM(this.currentUrlTree,this.rootComponentType),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(t.state){const a={...t.state};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(i.state=a)}const s=this.parseUrl(t.url);this.scheduleNavigation(s,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(ev),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,c=u?this.currentUrlTree.fragment:s;let l=null;switch(a){case"merge":l={...this.currentUrlTree.queryParams,...o};break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=o||null}return null!==l&&(l=this.removeEmptyProps(l)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,l,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Uo(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function z8(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new S(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...G8}:!1===r?{...q8}:r,Uo(t))return kM(this.currentUrlTree,t,i);const o=this.parseUrl(t);return kM(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,c,l;return s?(a=s.resolve,u=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,u=h}),"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),l=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):l=0,this.navigationTransitions.handleNavigationRequest({targetPageId:l,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class bN{}let Q8=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(pi(t=>t instanceof Bo),$i(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=Ch(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(s,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return gt(i).pipe(ws())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):K(null);const o=i.pipe(Ft(s=>null===s?K(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?gt([o,this.loader.loadComponent(r)]).pipe(ws()):o})}}return n.\u0275fac=function(t){return new(t||n)(B(Zt),B(ZP),B(br),B(bN),B(ov))},n.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uv=new U("");let SN=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Gy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Bo&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof KM&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new KM(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){!function oS(){throw new Error("invalid")}()},n.\u0275prov=G({token:n,factory:n.\u0275fac}),n})();function _a(n,e){return{\u0275kind:n,\u0275providers:e}}function PN(){const n=pe(hr);return e=>{const t=n.get(xh);if(e!==t.components[0])return;const r=n.get(Zt),i=n.get(xN);1===n.get(lv)&&r.initialNavigation(),n.get(MN,null,J.Optional)?.setUpPreloading(),n.get(uv,null,J.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const xN=new U("",{factory:()=>new Yr}),lv=new U("",{providedIn:"root",factory:()=>1});const MN=new U("");function e7(n){return _a(0,[{provide:MN,useExisting:Q8},{provide:bN,useExisting:n}])}const NN=new U("ROUTER_FORROOT_GUARD"),t7=[ly,{provide:Dc,useClass:Ly},Zt,xc,{provide:ha,useFactory:function RN(n){return n.routerState.root},deps:[Zt]},ov,[]];function n7(){return new sx("Router",Zt)}let kN=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[t7,[],{provide:ga,multi:!0,useValue:t},{provide:NN,useFactory:s7,deps:[[Zt,new ju,new $u]]},{provide:_f,useValue:r||{}},r?.useHash?{provide:Oo,useClass:t9}:{provide:Oo,useClass:Rx},{provide:uv,useFactory:()=>{const n=pe(w6),e=pe(_t),t=pe(_f),r=pe(sv),i=pe(Dc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new SN(i,r,n,e,t)}},r?.preloadingStrategy?e7(r.preloadingStrategy).\u0275providers:[],{provide:sx,multi:!0,useFactory:n7},r?.initialNavigation?a7(r):[],[{provide:ON,useFactory:PN},{provide:XP,multi:!0,useExisting:ON}]]}}static forChild(t){return{ngModule:n,providers:[{provide:ga,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(B(NN,8))},n.\u0275mod=ar({type:n}),n.\u0275inj=zn({imports:[Xy]}),n})();function s7(n){return"guarded"}function a7(n){return["disabled"===n.initialNavigation?_a(3,[{provide:Sh,multi:!0,useFactory:()=>{const e=pe(Zt);return()=>{e.setUpLocationChangeListener()}}},{provide:lv,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?_a(2,[{provide:lv,useValue:0},{provide:Sh,multi:!0,deps:[hr],useFactory:e=>{const t=e.get(Zz,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const o=e.get(Zt),s=e.get(xN);(function r(i){e.get(Zt).events.pipe(pi(s=>s instanceof Bo||s instanceof uf||s instanceof WM),ce(s=>s instanceof Bo||s instanceof uf&&(0===s.code||1===s.code)&&null),pi(s=>null!==s),wc(1)).subscribe(()=>{i()})})(()=>{i(!0)}),o.afterPreactivation=()=>(i(!0),s.closed?K(void 0):s),o.initialNavigation()}))}}]).\u0275providers:[]]}const ON=new U("");function VN(n,e,t,r,i,o,s){try{var a=n[o](s),u=a.value}catch(c){return void t(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function m(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function s(u){VN(o,r,i,s,a,"next",u)}function a(u){VN(o,r,i,s,a,"throw",u)}s(void 0)})}}const FN=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},LN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,c=u?n[i+2]:0;let h=(15&a)<<2|c>>6,f=63&c;u||(f=64,s||(h=64)),r.push(t[o>>2],t[(3&o)<<4|a>>4],t[h],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(FN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const u=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const o=n[t++],s=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,null==o||null==a||null==c||null==d)throw new h7;r.push(o<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class h7 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yf=function(n){return function(n){const e=FN(n);return LN.encodeByteArray(e,!0)}(n).replace(/\./g,"")},vf=function(n){try{return LN.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},If=()=>{try{return function g7(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&vf(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},BN=n=>{var e,t;return null===(t=null===(e=If())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},jN=()=>{var n;return null===(n=If())||void 0===n?void 0:n.config},$N=n=>{var e;return null===(e=If())||void 0===e?void 0:e[`_${n}`]};class HN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function rt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function GN(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function hv(){try{return"object"==typeof indexedDB}catch{return!1}}function qN(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(t){e(t)}})}class vr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jo.prototype.create)}}class jo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function S7(n,e){return n.replace(R7,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new vr(i,`${this.serviceName}: ${s} (${i}).`,r)}}const R7=/\{\$([^}]+)}/g;function P7(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Lc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],s=e[i];if(WN(o)&&WN(s)){if(!Lc(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function WN(n){return null!==n&&"object"==typeof n}function Uc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class M7{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function N7(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=fv),void 0===i.error&&(i.error=fv),void 0===i.complete&&(i.complete=fv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fv(){}function KN(n,e=1e3,t=2){const r=e*Math.pow(t,n),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function pn(n){return n&&n._delegate?n._delegate:n}class Ir{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const $o="[DEFAULT]";class U7{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new HN;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function j7(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:$o})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=$o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return m(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=$o){return this.instances.has(e)}getOptions(e=$o){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===$o?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=$o){return this.component?this.component.multipleInstances?e:$o:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class $7{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new U7(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const gv=[];var _e=(()=>{return(n=_e||(_e={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",_e;var n})();const QN={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},H7=_e.INFO,G7={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},q7=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=G7[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class wf{constructor(e){this.name=e,this._logLevel=H7,this._logHandler=q7,this._userLogHandler=null,gv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?QN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}let YN,JN;const XN=new WeakMap,mv=new WeakMap,ZN=new WeakMap,_v=new WeakMap,yv=new WeakMap;let vv={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return mv.get(n);if("objectStoreNames"===e)return n.objectStoreNames||ZN.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return qi(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Z7(n){return"function"==typeof n?function X7(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function K7(){return JN||(JN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Iv(this),e),qi(XN.get(this))}:function(...e){return qi(n.apply(Iv(this),e))}:function(e,...t){const r=n.call(Iv(this),e,...t);return ZN.set(r,e.sort?e.sort():[e]),qi(r)}}(n):(n instanceof IDBTransaction&&function Y7(n){if(mv.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});mv.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,function W7(){return YN||(YN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,vv):n)}function qi(n){if(n instanceof IDBRequest)return function Q7(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(qi(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&XN.set(t,n)}).catch(()=>{}),yv.set(e,n),e}(n);if(_v.has(n))return _v.get(n);const e=Z7(n);return e!==n&&(_v.set(n,e),yv.set(e,n)),e}const Iv=n=>yv.get(n);function e1(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(n,e),a=qi(s);return r&&s.addEventListener("upgradeneeded",u=>{r(qi(s.result),u.oldVersion,u.newVersion,qi(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const eK=["get","getKey","getAll","getAllKeys","count"],tK=["put","add","delete","clear"],Ev=new Map;function t1(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Ev.get(e))return Ev.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=tK.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!eK.includes(t))return;const o=function(){var s=m(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[t](...u),i&&c.done]))[0]});return function(u){return s.apply(this,arguments)}}();return Ev.set(e,o),o}!function J7(n){vv=n(vv)}(n=>({...n,get:(e,t,r)=>t1(e,t)||n.get(e,t,r),has:(e,t)=>!!t1(e,t)||n.has(e,t)}));class nK{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function rK(n){return"VERSION"===n.getComponent()?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const wv="@firebase/app",Ho=new wf("@firebase/app"),Tf="[DEFAULT]",RK={[wv]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Go=new Map,Cf=new Map;function PK(n,e){try{n.container.addComponent(e)}catch(t){Ho.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Vr(n){const e=n.name;if(Cf.has(e))return Ho.debug(`There were multiple attempts to register component ${e}.`),!1;Cf.set(e,n);for(const t of Go.values())PK(t,n);return!0}function zi(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const _i=new jo("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class MK{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _i.create("app-deleted",{appName:this._name})}}const ya="10.8.1";function r1(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Tf,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw _i.create("bad-app-name",{appName:String(i)});if(t||(t=jN()),!t)throw _i.create("no-options");const o=Go.get(i);if(o){if(Lc(t,o.options)&&Lc(r,o.config))return o;throw _i.create("duplicate-app",{appName:i})}const s=new $7(i);for(const u of Cf.values())s.addComponent(u);const a=new MK(t,r,s);return Go.set(i,a),a}function Tv(n=Tf){const e=Go.get(n);if(!e&&n===Tf&&jN())return r1();if(!e)throw _i.create("no-app",{appName:n});return e}function tr(n,e,t){var r;let i=null!==(r=RK[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Ho.warn(a.join(" "))}Vr(new Ir(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Bc="firebase-heartbeat-store";let Dv=null;function i1(){return Dv||(Dv=e1("firebase-heartbeat-database",1,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(Bc)}catch(t){console.warn(t)}}}).catch(n=>{throw _i.create("idb-open",{originalErrorMessage:n.message})})),Dv}function Av(){return(Av=m(function*(n){try{const t=(yield i1()).transaction(Bc),r=yield t.objectStore(Bc).get(s1(n));return yield t.done,r}catch(e){if(e instanceof vr)Ho.warn(e.message);else{const t=_i.create("idb-get",{originalErrorMessage:e?.message});Ho.warn(t.message)}}})).apply(this,arguments)}function o1(n,e){return bv.apply(this,arguments)}function bv(){return(bv=m(function*(n,e){try{const r=(yield i1()).transaction(Bc,"readwrite");yield r.objectStore(Bc).put(e,s1(n)),yield r.done}catch(t){if(t instanceof vr)Ho.warn(t.message);else{const r=_i.create("idb-set",{originalErrorMessage:t?.message});Ho.warn(r.message)}}})).apply(this,arguments)}function s1(n){return`${n.name}!${n.options.appId}`}class LK{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new BK(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return m(function*(){var t,r;const o=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=a1();if((null!=(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(e._heartbeatsCache=yield e._heartbeatsCachePromise,null!=(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats)))&&e._heartbeatsCache.lastSentHeartbeatDate!==s&&!e._heartbeatsCache.heartbeats.some(a=>a.date===s))return e._heartbeatsCache.heartbeats.push({date:s,agent:o}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return m(function*(){var t;if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=a1(),{heartbeatsToSend:i,unsentEntries:o}=function UK(n,e=1024){const t=[];let r=n.slice();for(const i of n){const o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),u1(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),u1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=yf(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,o.length>0?(e._heartbeatsCache.heartbeats=o,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function a1(){return(new Date).toISOString().substring(0,10)}class BK{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(function*(){return!!hv()&&qN().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return m(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function OK(n){return Av.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return m(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return o1(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return m(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return o1(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function u1(n){return yf(JSON.stringify({version:2,heartbeats:n})).length}!function jK(n){Vr(new Ir("platform-logger",e=>new nK(e),"PRIVATE")),Vr(new Ir("heartbeat",e=>new LK(e),"PRIVATE")),tr(wv,"0.9.28",n),tr(wv,"0.9.28","esm2017"),tr("fire-js","")}(""),tr("firebase","10.8.1","app");const c1="@firebase/installations",d1="w:0.6.5",h1="FIS_v2",yi=new jo("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function f1(n){return n instanceof vr&&n.code.includes("request-failed")}function Rv({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function p1(n){return{token:n.token,requestStatus:2,expiresIn:QK(n.expiresIn),creationTime:Date.now()}}function Pv(n,e){return xv.apply(this,arguments)}function xv(){return(xv=m(function*(n,e){const r=(yield e.json()).error;return yi.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function g1({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function m1(n,{refreshToken:e}){const t=g1(n);return t.append("Authorization",function YK(n){return`${h1} ${n}`}(e)),t}function Mv(n){return Nv.apply(this,arguments)}function Nv(){return(Nv=m(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function QK(n){return Number(n.replace("s","000"))}function JK(n,e){return kv.apply(this,arguments)}function kv(){return(kv=m(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Rv(n),i=g1(n),o=e.getImmediate({optional:!0});if(o){const c=yield o.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:h1,appId:n.appId,sdkVersion:d1})},u=yield Mv(()=>fetch(r,a));if(u.ok){const c=yield u.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:p1(c.authToken)}}throw yield Pv("Create Installation",u)})).apply(this,arguments)}function _1(n){return new Promise(e=>{setTimeout(e,n)})}const ZK=/^[cdef][\w-]{21}$/;function eQ(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function tQ(n){return function XK(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return ZK.test(t)?t:""}catch{return""}}function va(n){return`${n.appName}!${n.appId}`}const Ia=new Map;function y1(n,e){const t=va(n);v1(t,e),function iQ(n,e){const t=function I1(){return!qo&&"BroadcastChannel"in self&&(qo=new BroadcastChannel("[Firebase] FID Change"),qo.onmessage=n=>{v1(n.data.key,n.data.fid)}),qo}();t&&t.postMessage({key:n,fid:e}),function E1(){0===Ia.size&&qo&&(qo.close(),qo=null)}()}(t,e)}function v1(n,e){const t=Ia.get(n);if(t)for(const r of t)r(e)}let qo=null;const zo="firebase-installations-store";let Vv=null;function Fv(){return Vv||(Vv=e1("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(zo)}})),Vv}function Df(n,e){return Lv.apply(this,arguments)}function Lv(){return(Lv=m(function*(n,e){const t=va(n),i=(yield Fv()).transaction(zo,"readwrite"),o=i.objectStore(zo),s=yield o.get(t);return yield o.put(e,t),yield i.done,(!s||s.fid!==e.fid)&&y1(n,e.fid),e})).apply(this,arguments)}function Uv(n){return Bv.apply(this,arguments)}function Bv(){return(Bv=m(function*(n){const e=va(n),r=(yield Fv()).transaction(zo,"readwrite");yield r.objectStore(zo).delete(e),yield r.done})).apply(this,arguments)}function jc(n,e){return jv.apply(this,arguments)}function jv(){return(jv=m(function*(n,e){const t=va(n),i=(yield Fv()).transaction(zo,"readwrite"),o=i.objectStore(zo),s=yield o.get(t),a=e(s);return void 0===a?yield o.delete(t):yield o.put(a,t),yield i.done,a&&(!s||s.fid!==a.fid)&&y1(n,a.fid),a})).apply(this,arguments)}function $v(n){return Hv.apply(this,arguments)}function Hv(){return(Hv=m(function*(n){let e;const t=yield jc(n.appConfig,r=>{const i=aQ(r),o=uQ(n,i);return e=o.registrationPromise,o.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})).apply(this,arguments)}function aQ(n){return T1(n||{fid:eQ(),registrationStatus:0})}function uQ(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(yi.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function cQ(n,e){return Gv.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:lQ(n)}:{installationEntry:e}}function Gv(){return(Gv=m(function*(n,e){try{const t=yield JK(n,e);return Df(n.appConfig,t)}catch(t){throw f1(t)&&409===t.customData.serverCode?yield Uv(n.appConfig):yield Df(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})).apply(this,arguments)}function lQ(n){return qv.apply(this,arguments)}function qv(){return(qv=m(function*(n){let e=yield w1(n.appConfig);for(;1===e.registrationStatus;)yield _1(100),e=yield w1(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield $v(n);return r||t}return e})).apply(this,arguments)}function w1(n){return jc(n,e=>{if(!e)throw yi.create("installation-not-found");return T1(e)})}function T1(n){return function dQ(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function hQ(n,e){return zv.apply(this,arguments)}function zv(){return(zv=m(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=fQ(n,t),i=m1(n,t),o=e.getImmediate({optional:!0});if(o){const c=yield o.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:d1,appId:n.appId}})},u=yield Mv(()=>fetch(r,a));if(u.ok)return p1(yield u.json());throw yield Pv("Generate Auth Token",u)})).apply(this,arguments)}function fQ(n,{fid:e}){return`${Rv(n)}/${e}/authTokens:generate`}function Wv(n){return Kv.apply(this,arguments)}function Kv(){return(Kv=m(function*(n,e=!1){let t;const r=yield jc(n.appConfig,o=>{if(!D1(o))throw yi.create("not-registered");const s=o.authToken;if(!e&&mQ(s))return o;if(1===s.requestStatus)return t=pQ(n,e),o;{if(!navigator.onLine)throw yi.create("app-offline");const a=yQ(o);return t=gQ(n,a),a}});return t?yield t:r.authToken})).apply(this,arguments)}function pQ(n,e){return Qv.apply(this,arguments)}function Qv(){return(Qv=m(function*(n,e){let t=yield C1(n.appConfig);for(;1===t.authToken.requestStatus;)yield _1(100),t=yield C1(n.appConfig);const r=t.authToken;return 0===r.requestStatus?Wv(n,e):r})).apply(this,arguments)}function C1(n){return jc(n,e=>{if(!D1(e))throw yi.create("not-registered");return function vQ(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function gQ(n,e){return Yv.apply(this,arguments)}function Yv(){return(Yv=m(function*(n,e){try{const t=yield hQ(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Df(n.appConfig,r),t}catch(t){if(!f1(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Df(n.appConfig,r)}else yield Uv(n.appConfig);throw t}})).apply(this,arguments)}function D1(n){return void 0!==n&&2===n.registrationStatus}function mQ(n){return 2===n.requestStatus&&!function _Q(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function yQ(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function Jv(){return(Jv=m(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield $v(e);return r?r.catch(console.error):Wv(e).catch(console.error),t.fid})).apply(this,arguments)}function Xv(){return(Xv=m(function*(n,e=!1){const t=n;return yield wQ(t),(yield Wv(t,e)).token})).apply(this,arguments)}function wQ(n){return Zv.apply(this,arguments)}function Zv(){return(Zv=m(function*(n){const{registrationPromise:e}=yield $v(n);e&&(yield e)})).apply(this,arguments)}function nI(n){return yi.create("missing-app-config-values",{valueName:n})}const A1="installations",bQ=n=>{const e=n.getProvider("app").getImmediate(),t=function DQ(n){if(!n||!n.options)throw nI("App Configuration");if(!n.name)throw nI("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw nI(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:zi(e,"heartbeat"),_delete:()=>Promise.resolve()}},SQ=n=>{const t=zi(n.getProvider("app").getImmediate(),A1).getImmediate();return{getId:()=>function IQ(n){return Jv.apply(this,arguments)}(t),getToken:i=>function EQ(n){return Xv.apply(this,arguments)}(t,i)}};(function RQ(){Vr(new Ir(A1,bQ,"PUBLIC")),Vr(new Ir("installations-internal",SQ,"PRIVATE"))})(),tr(c1,"0.6.5"),tr(c1,"0.6.5","esm2017");const Af="analytics",PQ="firebase_id",NQ="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",rI="https://www.googletagmanager.com/gtag/js",xt=new wf("@firebase/analytics"),gn=new jo("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function OQ(n){if(!n.startsWith(rI)){const e=gn.create("invalid-gtag-resource",{gtagURL:n});return xt.warn(e.message),""}return n}function b1(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function FQ(n,e){const t=function VQ(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:OQ}),r=document.createElement("script"),i=`${rI}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function UQ(n,e,t,r,i,o){return iI.apply(this,arguments)}function iI(){return(iI=m(function*(n,e,t,r,i,o){const s=r[i];try{if(s)yield e[s];else{const u=(yield b1(t)).find(c=>c.measurementId===i);u&&(yield e[u.appId])}}catch(a){xt.error(a)}n("config",i,o)})).apply(this,arguments)}function BQ(n,e,t,r,i){return oI.apply(this,arguments)}function oI(){return(oI=m(function*(n,e,t,r,i){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const a=yield b1(t);for(const u of s){const c=a.find(d=>d.measurementId===u),l=c&&e[c.appId];if(!l){o=[];break}o.push(l)}}0===o.length&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){xt.error(o)}})).apply(this,arguments)}function HQ(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(rI)&&t.src.includes(n))return t;return null}const S1=new class zQ{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function WQ(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function KQ(n){return sI.apply(this,arguments)}function sI(){return(sI=m(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:WQ(r)},o=NQ.replace("{app-id}",t),s=yield fetch(o,i);if(200!==s.status&&304!==s.status){let a="";try{const u=yield s.json();null!==(e=u.error)&&void 0!==e&&e.message&&(a=u.error.message)}catch{}throw gn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})).apply(this,arguments)}function QQ(n){return aI.apply(this,arguments)}function aI(){return(aI=m(function*(n,e=S1,t){const{appId:r,apiKey:i,measurementId:o}=n.options;if(!r)throw gn.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw gn.create("no-api-key")}const s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new XQ;return setTimeout(m(function*(){a.abort()}),void 0!==t?t:6e4),R1({appId:r,apiKey:i,measurementId:o},s,a,e)})).apply(this,arguments)}function R1(n,e,t){return uI.apply(this,arguments)}function uI(){return(uI=m(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=S1){var o;const{appId:s,measurementId:a}=n;try{yield YQ(r,e)}catch(u){if(a)return xt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:s,measurementId:a};throw u}try{const u=yield KQ(n);return i.deleteThrottleMetadata(s),u}catch(u){const c=u;if(!JQ(c)){if(i.deleteThrottleMetadata(s),a)return xt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:s,measurementId:a};throw u}const l=503===Number(null===(o=c?.customData)||void 0===o?void 0:o.httpStatus)?KN(t,i.intervalMillis,30):KN(t,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+l,backoffCount:t+1};return i.setThrottleMetadata(s,d),xt.debug(`Calling attemptFetch again in ${l} millis`),R1(n,d,r,i)}})).apply(this,arguments)}function YQ(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(gn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function JQ(n){if(!(n instanceof vr&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class XQ{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let cI,mI;function lI(){return(lI=m(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const o=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:o}))}})).apply(this,arguments)}function P1(n){mI=n}function x1(n){cI=n}function oY(){return _I.apply(this,arguments)}function _I(){return(_I=m(function*(){if(!hv())return xt.warn(gn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield qN()}catch(n){return xt.warn(gn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function yI(){return(yI=m(function*(n,e,t,r,i,o,s){var a;const u=QQ(n);u.then(f=>{t[f.measurementId]=f.appId,n.options.measurementId&&f.measurementId!==n.options.measurementId&&xt.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>xt.error(f)),e.push(u);const c=oY().then(f=>{if(f)return r.getId()}),[l,d]=yield Promise.all([u,c]);HQ(o)||FQ(o,l.measurementId),mI&&(i("consent","default",mI),P1(void 0)),i("js",new Date);const h=null!==(a=s?.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h[PQ]=d),i("config",l.measurementId,h),cI&&(i("set",cI),x1(void 0)),l.measurementId})).apply(this,arguments)}class aY{constructor(e){this.app=e}_delete(){return delete Fr[this.app.options.appId],Promise.resolve()}}let Fr={},M1=[];const N1={};let O1,Lr,bf="dataLayer",vI=!1;function cY(n,e,t){!function uY(){const n=[];if(GN()&&n.push("This is a browser extension environment."),function A7(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=gn.create("invalid-analytics-context",{errorInfo:e});xt.warn(t.message)}}();const r=n.options.appId;if(!r)throw gn.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw gn.create("no-api-key");xt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Fr[r])throw gn.create("already-exists",{id:r});if(!vI){!function LQ(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(bf);const{wrappedGtag:o,gtagCore:s}=function $Q(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function jQ(n,e,t,r){function o(){return(o=m(function*(s,...a){try{if("event"===s){const[u,c]=a;yield BQ(n,e,t,u,c)}else if("config"===s){const[u,c]=a;yield UQ(n,e,t,r,u,c)}else if("consent"===s){const[u]=a;n("consent","update",u)}else if("get"===s){const[u,c,l]=a;n("get",u,c,l)}else if("set"===s){const[u]=a;n("set",u)}else n(s,...a)}catch(u){xt.error(u)}})).apply(this,arguments)}return function i(s){return o.apply(this,arguments)}}(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}(Fr,M1,N1,bf,"gtag");Lr=o,O1=s,vI=!0}return Fr[r]=function sY(n,e,t,r,i,o,s){return yI.apply(this,arguments)}(n,M1,N1,e,O1,bf,t),new aY(n)}function V1(n,e,t,r){n=pn(n),function ZQ(n,e,t,r,i){return lI.apply(this,arguments)}(Lr,Fr[n.app.options.appId],e,t,r).catch(i=>xt.error(i))}const F1="@firebase/analytics";!function hY(){Vr(new Ir(Af,(e,{options:t})=>cY(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Vr(new Ir("analytics-internal",function n(e){try{const t=e.getProvider(Af).getImmediate();return{logEvent:(r,i,o)=>V1(t,r,i,o)}}catch(t){throw gn.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),tr(F1,"0.10.1"),tr(F1,"0.10.1","esm2017")}();const fY=function U1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},B1=new jo("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Sf=new wf("@firebase/auth");function Rf(n,...e){Sf.logLevel<=_e.ERROR&&Sf.error(`Auth (${ya}): ${n}`,...e)}function Dn(n,...e){throw wI(n,...e)}function Un(n,...e){return wI(n,...e)}function j1(n,e,t){const r=Object.assign(Object.assign({},fY()),{[e]:t});return new jo("auth","Firebase",r).create(e,{appName:n.name})}function Ea(n,e,t){if(!(e instanceof t))throw t.name!==e.constructor.name&&Dn(n,"argument-error"),j1(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wI(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return B1.create(n,...e)}function R(n,e,...t){if(!n)throw wI(e,...t)}function Ur(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Rf(e),new Error(e)}function vi(n,e){n||Ur(e)}function $c(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function $1(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class Hc{constructor(e,t){this.shortDelay=e,this.longDelay=t,vi(t>e,"Short delay should be less than long delay!"),this.isMobile=function E7(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}()||function T7(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return function gY(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function TI(){return"http:"===$1()||"https:"===$1()}()||GN()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function CI(n,e){vi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class H1{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _Y={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},yY=new Hc(3e4,6e4);function Ge(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function qe(n,e,t,r){return DI.apply(this,arguments)}function DI(){return(DI=m(function*(n,e,t,r,i={}){return G1(n,i,m(function*(){let o={},s={};r&&("GET"===e?s=r:o={body:JSON.stringify(r)});const a=Uc(Object.assign({key:n.config.apiKey},s)).slice(1),u=yield n._getAdditionalHeaders();return u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode),H1.fetch()(q1(n,n.config.apiHost,t,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},o))}))})).apply(this,arguments)}function G1(n,e,t){return AI.apply(this,arguments)}function AI(){return(AI=m(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},_Y),e);try{const i=new IY(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw Gc(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[u,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw Gc(n,"credential-already-in-use",s);if("EMAIL_EXISTS"===u)throw Gc(n,"email-already-in-use",s);if("USER_DISABLED"===u)throw Gc(n,"user-disabled",s);const l=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw j1(n,l,c);Dn(n,l)}}catch(i){if(i instanceof vr)throw i;Dn(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function Ii(n,e,t,r){return bI.apply(this,arguments)}function bI(){return(bI=m(function*(n,e,t,r,i={}){const o=yield qe(n,e,t,r,i);return"mfaPendingCredential"in o&&Dn(n,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function q1(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?CI(n.config,i):`${n.config.apiScheme}://${i}`}class IY{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Un(this.auth,"network-request-failed")),yY.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Un(n,e,r);return i.customData._tokenResponse=t,i}function PI(){return(PI=m(function*(n,e){return qe(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function CY(n,e){return MI.apply(this,arguments)}function MI(){return(MI=m(function*(n,e){return qe(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function qc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function NI(){return(NI=m(function*(n,e=!1){const t=pn(n),r=yield t.getIdToken(e),i=Pf(r);R(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:qc(kI(i.auth_time)),issuedAtTime:qc(kI(i.iat)),expirationTime:qc(kI(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function kI(n){return 1e3*Number(n)}function Pf(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return Rf("JWT malformed, contained fewer than 3 sections"),null;try{const i=vf(t);return i?JSON.parse(i):(Rf("Failed to decode base64 JWT payload"),null)}catch(i){return Rf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Ei(n,e){return OI.apply(this,arguments)}function OI(){return(OI=m(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof vr&&bY(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}function bY({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}class SY{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(m(function*(){yield t.iteration()}),r)}iteration(){var e=this;return m(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class Y1{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qc(this.lastLoginAt),this.creationTime=qc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function zc(n){return VI.apply(this,arguments)}function VI(){return(VI=m(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield Ei(n,CY(t,{idToken:r}));R(i?.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?xY(o.providerUserInfo):[],a=PY(n.providerData,s),l=!!n.isAnonymous&&!(n.email&&o.passwordHash||a?.length),d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Y1(o.createdAt,o.lastLoginAt),isAnonymous:l};Object.assign(n,d)})).apply(this,arguments)}function FI(){return(FI=m(function*(n){const e=pn(n);yield zc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function PY(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function xY(n){return n.map(e=>{var{providerId:t}=e,r=Ng(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function LI(){return(LI=m(function*(n,e){const t=yield G1(n,{},m(function*(){const r=Uc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=q1(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",H1.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}function UI(){return(UI=m(function*(n,e){return qe(n,"POST","/v2/accounts:revokeToken",Ge(n,e))})).apply(this,arguments)}class Wc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){R(e.idToken,"internal-error"),R(typeof e.idToken<"u","internal-error"),R(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function AY(n){const e=Pf(n);return R(e,"internal-error"),R(typeof e.exp<"u","internal-error"),R(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return m(function*(){return R(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return m(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function MY(n,e){return LI.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new Wc;return r&&(R("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),i&&(R("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),o&&(R("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wc,this.toJSON())}_performRefresh(){return Ur("not implemented")}}function Wi(n,e){R("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Wo{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Ng(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new SY(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Y1(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var t=this;return m(function*(){const r=yield Ei(t,t.stsTokenManager.getToken(t.auth,e));return R(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function DY(n){return NI.apply(this,arguments)}(this,e)}reload(){return function RY(n){return FI.apply(this,arguments)}(this)}_assign(e){this!==e&&(R(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Wo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){R(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return m(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield zc(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return m(function*(){const t=yield e.getIdToken();return yield Ei(e,function wY(n,e){return PI.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,c,l;const d=null!==(r=t.displayName)&&void 0!==r?r:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,f=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,g=null!==(a=t.tenantId)&&void 0!==a?a:void 0,_=null!==(u=t._redirectEventId)&&void 0!==u?u:void 0,I=null!==(c=t.createdAt)&&void 0!==c?c:void 0,w=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:b,isAnonymous:$,providerData:q,stsTokenManager:et}=t;R(y&&et,e,"internal-error");const Rn=Wc.fromJSON(this.name,et);R("string"==typeof y,e,"internal-error"),Wi(d,e.name),Wi(h,e.name),R("boolean"==typeof b,e,"internal-error"),R("boolean"==typeof $,e,"internal-error"),Wi(f,e.name),Wi(p,e.name),Wi(g,e.name),Wi(_,e.name),Wi(I,e.name),Wi(w,e.name);const Ed=new Wo({uid:y,auth:e,email:h,emailVerified:b,displayName:d,isAnonymous:$,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:Rn,createdAt:I,lastLoginAt:w});return q&&Array.isArray(q)&&(Ed.providerData=q.map(Ag=>Object.assign({},Ag))),_&&(Ed._redirectEventId=_),Ed}static _fromIdTokenResponse(e,t,r=!1){return m(function*(){const i=new Wc;i.updateFromServerResponse(t);const o=new Wo({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield zc(o),o})()}}const J1=new Map;function wi(n){vi(n instanceof Function,"Expected a class definition");let e=J1.get(n);return e?(vi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,J1.set(n,e),e)}const X1=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(function*(){return!0})()}_set(t,r){var i=this;return m(function*(){i.storage[t]=r})()}_get(t){var r=this;return m(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return m(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function xf(n,e,t){return`firebase:${n}:${e}:${t}`}class wa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=xf(this.userKey,i.apiKey,o),this.fullPersistenceKey=xf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return m(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Wo._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return m(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return m(function*(){if(!t.length)return new wa(wi(X1),e,r);const i=(yield Promise.all(t.map(function(){var c=m(function*(l){if(yield l._isAvailable())return l});return function(l){return c.apply(this,arguments)}}()))).filter(c=>c);let o=i[0]||wi(X1);const s=xf(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const l=yield c._get(s);if(l){const d=Wo._fromJSON(e,l);c!==o&&(a=d),o=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return o._shouldAllowMigration&&u.length?(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(function(){var c=m(function*(l){if(l!==o)try{yield l._remove(s)}catch{}});return function(l){return c.apply(this,arguments)}}())),new wa(o,e,r)):new wa(o,e,r)})()}}function Z1(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ek(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ik(e))return"Blackberry";if(ok(e))return"Webos";if(BI(e))return"Safari";if((e.includes("chrome/")||tk(e))&&!e.includes("edge/"))return"Chrome";if(rk(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function ek(n=rt()){return/firefox\//i.test(n)}function BI(n=rt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tk(n=rt()){return/crios\//i.test(n)}function nk(n=rt()){return/iemobile/i.test(n)}function rk(n=rt()){return/android/i.test(n)}function ik(n=rt()){return/blackberry/i.test(n)}function ok(n=rt()){return/webos/i.test(n)}function Mf(n=rt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function sk(n=rt()){return Mf(n)||rk(n)||ok(n)||ik(n)||/windows phone/i.test(n)||nk(n)}function ak(n,e=[]){let t;switch(n){case"Browser":t=Z1(rt());break;case"Worker":t=`${Z1(rt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ya}/${r}`}class FY{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((s,a)=>{try{s(e(o))}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return m(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function jI(){return(jI=m(function*(n,e={}){return qe(n,"GET","/v2/passwordPolicy",Ge(n,e))})).apply(this,arguments)}class BY{constructor(e){var t,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=null===(t=u.meetsMinPasswordLength)||void 0===t||t),u.isValid&&(u.isValid=null===(r=u.meetsMaxPasswordLength)||void 0===r||r),u.isValid&&(u.isValid=null===(i=u.containsLowercaseLetter)||void 0===i||i),u.isValid&&(u.isValid=null===(o=u.containsUppercaseLetter)||void 0===o||o),u.isValid&&(u.isValid=null===(s=u.containsNumericCharacter)||void 0===s||s),u.isValid&&(u.isValid=null===(a=u.containsNonAlphanumericCharacter)||void 0===a||a),u}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class jY{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uk(this),this.idTokenSubscription=new uk(this),this.beforeStateQueue=new FY(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=B1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=wi(t)),this._initializationPromise=this.queue(m(function*(){var i,o;if(!r._deleted&&(r.persistenceManager=yield wa.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return m(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return m(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let o=i,s=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,u=o?._redirectEventId,c=yield t.tryRedirectSignIn(e);(!a||a===u)&&c?.user&&(o=c.user,s=!0)}if(!o)return t.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield t.beforeStateQueue.runMiddleware(o)}catch(a){o=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return o?t.reloadAndSetCurrentUserOrClear(o):t.directlySetCurrentUser(null)}return R(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===o._redirectEventId?t.directlySetCurrentUser(o):t.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var t=this;return m(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return m(function*(){try{yield zc(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function mY(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return m(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return m(function*(){const r=e?pn(e):null;return r&&R(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return m(function*(){if(!r._deleted)return e&&R(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(m(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return m(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(m(function*(){yield t.assertedPersistence.setPersistence(wi(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return m(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return m(function*(){const t=yield function LY(n){return jI.apply(this,arguments)}(e),r=new BY(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new jo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){var t=this;return m(function*(){if(t.currentUser){const r=yield t.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=t.tenantId&&(i.tenantId=t.tenantId),yield function NY(n,e){return UI.apply(this,arguments)}(t,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return m(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return m(function*(){if(!t.redirectPersistenceManager){const r=e&&wi(e)||t._popupRedirectResolver;R(r,t,"argument-error"),t.redirectPersistenceManager=yield wa.create(t,[wi(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return m(function*(){var r,i;return t._isInitialized&&(yield t.queue(m(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return m(function*(){if(e===t.currentUser)return t.queue(m(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o="function"==typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(R(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),"function"==typeof t){const u=e.addObserver(t,r,i);return()=>{s=!0,u()}}{const u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){var t=this;return m(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return R(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ak(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return m(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return m(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function pY(n,...e){Sf.logLevel<=_e.WARN&&Sf.warn(`Auth (${ya}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function ct(n){return pn(n)}class uk{constructor(e){this.auth=e,this.observer=null,this.addObserver=function x7(n,e){const t=new M7(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return R(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Kc={loadJS:()=>m(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ck(n){return`__${n}${Math.floor(1e6*Math.random())}`}function hk(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function fk(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class pk{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ur("not implemented")}_getIdTokenResponse(e){return Ur("not implemented")}_linkToIdToken(e,t){return Ur("not implemented")}_getReauthenticationResolver(e){return Ur("not implemented")}}function Ti(n,e){return oE.apply(this,arguments)}function oE(){return(oE=m(function*(n,e){return Ii(n,"POST","/v1/accounts:signInWithIdp",Ge(n,e))})).apply(this,arguments)}class Ta extends pk{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ta(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Dn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=Ng(t,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Ta(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){return Ti(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ti(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ti(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Uc(t)}return e}}class Ki{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class _k extends Ki{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let lE=(()=>{class n extends _k{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Ta._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})();class nr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return m(function*(){const o=yield Wo._fromIdTokenResponse(e,r,i),s=vk(r);return new nr({user:o,providerId:s,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return m(function*(){yield e._updateTokensIfNecessary(r,!0);const i=vk(r);return new nr({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function vk(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Vf extends vr{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Vf.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Vf(e,t,r,i)}}function Ik(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?Vf._fromErrorAndOperation(n,o,e,r):o})}function gE(n,e){return mE.apply(this,arguments)}function mE(){return(mE=m(function*(n,e,t=!1){const r=yield Ei(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return nr._forOperation(n,"link",r)})).apply(this,arguments)}function yE(){return(yE=m(function*(n,e,t=!1){const{auth:r}=n,i="reauthenticate";try{const o=yield Ei(n,Ik(r,i,e,n),t);R(o.idToken,r,"internal-error");const s=Pf(o.idToken);R(s,r,"internal-error");const{sub:a}=s;return R(n.uid===a,r,"user-mismatch"),nr._forOperation(n,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&Dn(r,"user-mismatch"),o}})).apply(this,arguments)}function vE(){return(vE=m(function*(n,e,t=!1){const r="signIn",i=yield Ik(n,r,e),o=yield nr._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})).apply(this,arguments)}const Uf="__sak";class Dk{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Uf,"1"),this.storage.removeItem(Uf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const jJ=(()=>{class n extends Dk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function LJ(){const n=rt();return BI(n)||Mf(n)}()&&function VY(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=sk(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(t.newValue!==a)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function OY(){return function C7(){const n=rt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===t.newValue||t.newValue===t.oldValue?o():setTimeout(o,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,o=this;return m(function*(){yield i().call(o,t,r),o.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return m(function*(){const o=yield r().call(i,t);return i.localCache[t]=JSON.stringify(o),o})()}_remove(t){var r=()=>super._remove,i=this;return m(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),Ak=(()=>{class n extends Dk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let HJ=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return m(function*(){const i=t,{eventId:o,eventType:s,data:a}=i.data,u=r.handlersMap[s];if(!u?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const c=Array.from(u).map(function(){var d=m(function*(h){return h(i.origin,a)});return function(h){return d.apply(this,arguments)}}()),l=yield function $J(n){return Promise.all(n.map(function(){var e=m(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(c);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:l})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function Bf(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class GJ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return m(function*(){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let s,a;return new Promise((u,c)=>{const l=Bf("",20);o.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:o,onMessage(h){const f=h;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(f.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"))}}},i.handlers.add(a),o.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:l,data:t},[o.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function It(){return window}function XE(){return typeof It().WorkerGlobalScope<"u"&&"function"==typeof It().importScripts}function ZE(){return(ZE=m(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const bk="firebaseLocalStorageDb",jf="firebaseLocalStorage",Sk="fbase_key";class Xc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $f(n,e){return n.transaction([jf],e?"readwrite":"readonly").objectStore(jf)}function ew(){const n=indexedDB.open(bk,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(jf,{keyPath:Sk})}catch(i){t(i)}}),n.addEventListener("success",m(function*(){const r=n.result;r.objectStoreNames.contains(jf)?e(r):(r.close(),yield function YJ(){const n=indexedDB.deleteDatabase(bk);return new Xc(n).toPromise()}(),e(yield ew()))}))})}function Rk(n,e,t){return tw.apply(this,arguments)}function tw(){return(tw=m(function*(n,e,t){const r=$f(n,!0).put({[Sk]:e,value:t});return new Xc(r).toPromise()})).apply(this,arguments)}function nw(){return(nw=m(function*(n,e){const t=$f(n,!1).get(e),r=yield new Xc(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function Pk(n,e){const t=$f(n,!0).delete(e);return new Xc(t).toPromise()}const eX=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return m(function*(){return t.db||(t.db=yield ew()),t.db})()}_withRetries(t){var r=this;return m(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield t(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return m(function*(){return XE()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return m(function*(){t.receiver=HJ._getInstance(function KJ(){return XE()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=m(function*(i,o){return{keyProcessed:(yield t._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=m(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return m(function*(){var r,i;if(t.activeServiceWorker=yield function zJ(){return ZE.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new GJ(t.activeServiceWorker);const o=yield t.sender._send("ping",{},800);!o||(null===(r=o[0])||void 0===r?void 0:r.fulfilled)&&(null===(i=o[0])||void 0===i?void 0:i.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return m(function*(){if(r.sender&&r.activeServiceWorker&&function WJ(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return m(function*(){try{if(!indexedDB)return!1;const t=yield ew();return yield Rk(t,Uf,"1"),yield Pk(t,Uf),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return m(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return m(function*(){return i._withPendingWrite(m(function*(){return yield i._withRetries(o=>Rk(o,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return m(function*(){const i=yield r._withRetries(o=>function JJ(n,e){return nw.apply(this,arguments)}(o,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return m(function*(){return r._withPendingWrite(m(function*(){return yield r._withRetries(i=>Pk(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return m(function*(){const r=yield t._withRetries(s=>{const a=$f(s,!1).getAll();return new Xc(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],o=new Set;if(0!==r.length)for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(t.localCache[s])!==JSON.stringify(a)&&(t.notifyListeners(s,a),i.push(s));for(const s of Object.keys(t.localCache))t.localCache[s]&&!o.has(s)&&(t.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(m(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function Qo(n,e){return e?wi(e):(R(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}ck("rcb"),new Hc(3e4,6e4);class dw extends pk{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ti(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ti(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ti(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function gX(n){return function Tk(n,e){return vE.apply(this,arguments)}(n.auth,new dw(n),n.bypassAuthState)}function mX(n){const{auth:e,user:t}=n;return R(t,e,"internal-error"),function wk(n,e){return yE.apply(this,arguments)}(t,new dw(n),n.bypassAuthState)}function _X(n){return hw.apply(this,arguments)}function hw(){return(hw=m(function*(n){const{auth:e,user:t}=n;return R(t,e,"internal-error"),gE(t,new dw(n),n.bypassAuthState)})).apply(this,arguments)}class Mk{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=m(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return m(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:u}=e;if(a)return void t.reject(a);const c={auth:t.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(u)(c))}catch(l){t.reject(l)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gX;case"linkViaPopup":case"linkViaRedirect":return _X;case"reauthViaPopup":case"reauthViaRedirect":return mX;default:Dn(this.auth,"internal-error")}}resolve(e){vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yX=new Hc(2e3,1e4);function fw(){return(fw=m(function*(n,e,t){const r=ct(n);Ea(n,e,Ki);const i=Qo(r,t);return new mw(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}let mw=(()=>{class n extends Mk{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){var t=this;return m(function*(){const r=yield t.execute();return R(r,t.auth,"internal-error"),r})()}onExecution(){var t=this;return m(function*(){vi(1===t.filter.length,"Popup operations only handle one event");const r=Bf();t.authWindow=yield t.resolver._openPopup(t.auth,t.provider,t.filter[0],r),t.authWindow.associatedEvent=r,t.resolver._originValidation(t.auth).catch(i=>{t.reject(i)}),t.resolver._isIframeWebStorageSupported(t.auth,i=>{i||t.reject(Un(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation()})()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Un(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(t,yX.get())};t()}}return n.currentPopupAction=null,n})();const Zc=new Map;class EX extends Mk{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return m(function*(){let r=Zc.get(t.auth._key());if(!r){try{const o=(yield function wX(n,e){return _w.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}Zc.set(t.auth._key(),r)}return t.bypassAuthState||Zc.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return m(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return m(function*(){})()}cleanUp(){}}function _w(){return(_w=m(function*(n,e){const t=kk(e),r=Nk(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function TX(n,e){Zc.set(n._key(),e)}function Nk(n){return wi(n._redirectPersistence)}function kk(n){return xf("pendingRedirect",n.config.apiKey,n.name)}function Ok(n,e){return Cw.apply(this,arguments)}function Cw(){return(Cw=m(function*(n,e,t=!1){const r=ct(n),i=Qo(r,e),s=yield new EX(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})).apply(this,arguments)}class SX{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function RX(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lk(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Lk(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(Un(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fk(e))}saveEventToCache(e){this.cachedEventUids.add(Fk(e)),this.lastProcessedEventTime=Date.now()}}function Fk(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Lk({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function PX(n){return Aw.apply(this,arguments)}function Aw(){return(Aw=m(function*(n,e={}){return qe(n,"GET","/v1/projects",e)})).apply(this,arguments)}const xX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MX=/^https?/;function bw(){return(bw=m(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield PX(n);for(const t of e)try{if(kX(t))return}catch{}Dn(n,"unauthorized-domain")})).apply(this,arguments)}function kX(n){const e=$c(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return""===s.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&s.hostname===r}if(!MX.test(t))return!1;if(xX.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const OX=new Hc(3e4,6e4);function Uk(){const n=It().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}function VX(n){return new Promise((e,t)=>{var r,i,o;function s(){Uk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Uk(),t(Un(n,"network-request-failed"))},timeout:OX.get()})}if(null!==(i=null===(r=It().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(o=It().gapi)||void 0===o||!o.load){const a=ck("iframefcb");return It()[a]=()=>{gapi.load?s():t(Un(n,"network-request-failed"))},function $I(n){return Kc.loadJS(n)}(`${function qY(){return Kc.gapiScript}()}?onload=${a}`).catch(u=>t(u))}s()}}).catch(e=>{throw Gf=null,e})}let Gf=null;function FX(n){return Gf=Gf||VX(n),Gf}const LX=new Hc(5e3,15e3),jX={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$X=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HX(n){const e=n.config;R(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?CI(e,"emulator/auth/iframe"):`https://${n.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:n.name,v:ya},i=$X.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Uc(r).slice(1)}`}function Sw(){return Sw=m(function*(n){const e=yield FX(n),t=It().gapi;return R(t,n,"internal-error"),e.open({where:document.body,url:HX(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jX,dontclear:!0},r=>new Promise(function(){var i=m(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=Un(n,"network-request-failed"),u=It().setTimeout(()=>{s(a)},LX.get());function c(){It().clearTimeout(u),o(r)}r.ping(c).then(c,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),Sw.apply(this,arguments)}const qX={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Bk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const eZ=encodeURIComponent("fac");function jk(n,e,t,r,i,o){return Rw.apply(this,arguments)}function Rw(){return(Rw=m(function*(n,e,t,r,i,o){R(n.config.authDomain,n,"auth-domain-config-required"),R(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ya,eventId:i};if(e instanceof Ki){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",P7(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,d]of Object.entries(o||{}))s[l]=d}if(e instanceof _k){const l=e.getScopes().filter(d=>""!==d);l.length>0&&(s.scopes=l.join(","))}n.tenantId&&(s.tid=n.tenantId);const a=s;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];const u=yield n._getAppCheckToken(),c=u?`#${eZ}=${encodeURIComponent(u)}`:"";return`${tZ(n)}?${Uc(a).slice(1)}${c}`})).apply(this,arguments)}function tZ({config:n}){return n.emulator?CI(n,"emulator/auth/handler"):`https://${n.authDomain}/__/auth/handler`}const Pw="webStorageSupport",rZ=class nZ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ak,this._completeRedirectFn=Ok,this._overrideRedirectResult=TX}_openPopup(e,t,r,i){var o=this;return m(function*(){var s;vi(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=yield jk(e,t,r,$c(),i);return function YX(n,e,t,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},qX),{width:r.toString(),height:i.toString(),top:o,left:s}),c=rt().toLowerCase();t&&(a=tk(c)?"_blank":t),ek(c)&&(e=e||"http://localhost",u.scrollbars="yes");const l=Object.entries(u).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(function kY(n=rt()){var e;return Mf(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function JX(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new Bk(null);const d=window.open(e||"",a,l);R(d,n,"popup-blocked");try{d.focus()}catch{}return new Bk(d)}(e,a,Bf())})()}_openRedirect(e,t,r,i){var o=this;return m(function*(){return yield o._originValidation(e),function qJ(n){It().location.href=n}(yield jk(e,t,r,$c(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(vi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return m(function*(){const r=yield function GX(n){return Sw.apply(this,arguments)}(e),i=new SX(e);return r.register("authEvent",o=>(R(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Pw,{type:Pw},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[Pw];void 0!==s&&t(!!s),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function NX(n){return bw.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sk()||BI()||Mf()}};var Gk="@firebase/auth";class iZ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return m(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){R(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const uZ=$N("authIdTokenMaxAge")||300;let zk=null;const cZ=n=>function(){var e=m(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>uZ)return;const o=r?.token;zk!==o&&(zk=o,yield fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function lZ(n=Tv()){const e=zi(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function QY(n,e){const t=zi(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(Lc(t.getOptions(),e??{}))return i;Dn(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:rZ,persistence:[eX,jJ,Ak]}),r=$N("authTokenSyncURL");if(r){const o=cZ(r);(function MJ(n,e,t){pn(n).beforeAuthStateChanged(e,t)})(t,o,()=>o(t.currentUser)),function xJ(n,e,t,r){pn(n).onIdTokenChanged(e,t,r)}(t,s=>o(s))}const i=BN("auth");return i&&function JY(n,e,t){const r=ct(n);R(r._canInitEmulator,r,"emulator-config-failed"),R(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,o=hk(e),{host:s,port:a}=function XY(n){const e=hk(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:fk(r.substr(o.length+1))}}{const[o,s]=r.split(":");return{host:o,port:fk(s)}}}(e);r.config.emulator={url:`${o}//${s}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function ZY(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}(function $Y(n){Kc=n})({loadJS:n=>new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Un("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",function dZ(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function sZ(n){Vr(new Ir("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;R(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ak(n)},c=new jY(r,i,o,u);return function YY(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(wi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Vr(new Ir("auth-internal",e=>{const t=ct(e.getProvider("auth").getImmediate());return new iZ(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),tr(Gk,"1.6.1",function oZ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(n)),tr(Gk,"1.6.1","esm2017")}("Browser");var M,hZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Er={},Mw=Mw||{},ne=hZ||self;function zf(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function el(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Nw="closure_uid_"+(1e9*Math.random()>>>0),pZ=0;function gZ(n,e,t){return n.call.apply(n.bind,arguments)}function mZ(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function en(n,e,t){return(en=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gZ:mZ).apply(null,arguments)}function Wf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Mt(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function Qi(){this.s=this.s,this.o=this.o}Qi.prototype.s=!1,Qi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function fZ(n){Object.prototype.hasOwnProperty.call(n,Nw)&&n[Nw]||(n[Nw]=++pZ)}(this)},Qi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Wk=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function kw(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Kk(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(zf(r)){const i=n.length||0,o=r.length||0;n.length=i+o;for(let s=0;s<o;s++)n[i+s]=r[s]}else n.push(r)}}function tn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}tn.prototype.h=function(){this.defaultPrevented=!0};var yZ=function(){if(!ne.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};ne.addEventListener("test",t,e),ne.removeEventListener("test",t,e)}catch{}return n}();function tl(n){return/^[\s\xa0]*$/.test(n)}function Kf(){var n=ne.navigator;return n&&(n=n.userAgent)?n:""}function Br(n){return-1!=Kf().indexOf(n)}function Ow(n){return Ow[" "](n),n}Ow[" "]=function(){};var Fw,n,IZ=Br("Opera"),Ca=Br("Trident")||Br("MSIE"),Qk=Br("Edge"),Vw=Qk||Ca,Yk=Br("Gecko")&&!(-1!=Kf().toLowerCase().indexOf("webkit")&&!Br("Edge"))&&!(Br("Trident")||Br("MSIE"))&&!Br("Edge"),EZ=-1!=Kf().toLowerCase().indexOf("webkit")&&!Br("Edge");function Jk(){var n=ne.document;return n?n.documentMode:void 0}e:{var Lw="",Uw=(n=Kf(),Yk?/rv:([^\);]+)(\)|;)/.exec(n):Qk?/Edge\/([\d\.]+)/.exec(n):Ca?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):EZ?/WebKit\/(\S+)/.exec(n):IZ?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Uw&&(Lw=Uw?Uw[1]:""),Ca){var Bw=Jk();if(null!=Bw&&Bw>parseFloat(Lw)){Fw=String(Bw);break e}}Fw=Lw}var wZ=ne.document&&Ca&&(Jk()||parseInt(Fw,10))||void 0;function nl(n,e){if(tn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Yk){e:{try{Ow(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:TZ[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&nl.$.h.call(this)}}Mt(nl,tn);var TZ={2:"touch",3:"pen",4:"mouse"};nl.prototype.h=function(){nl.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var rl="closure_listenable_"+(1e6*Math.random()|0),CZ=0;function DZ(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++CZ,this.fa=this.ia=!1}function Qf(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function $w(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Zk(n){const e={};for(const t in n)e[t]=n[t];return e}const eO="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tO(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<eO.length;o++)t=eO[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Yf(n){this.src=n,this.g={},this.h=0}function Hw(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=Wk(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Qf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Gw(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.fa&&o.listener==e&&o.capture==!!t&&o.la==r)return i}return-1}Yf.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var s=Gw(n,e,r,i);return-1<s?(e=n[s],t||(e.ia=!1)):((e=new DZ(e,this.src,o,!!r,i)).ia=t,n.push(e)),e};var qw="closure_lm_"+(1e6*Math.random()|0),zw={};function nO(n,e,t,r,i){if(r&&r.once)return iO(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)nO(n,e[o],t,r,i);return null}return t=Yw(t),n&&n[rl]?n.O(e,t,el(r)?!!r.capture:!!r,i):rO(n,e,t,!1,r,i)}function rO(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var s=el(i)?!!i.capture:!!i,a=Kw(n);if(a||(n[qw]=a=new Yf(n)),(t=a.add(e,t,r,s,o)).proxy)return t;if(r=function bZ(){const e=SZ;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)yZ||(i=s),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(sO(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function iO(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)iO(n,e[o],t,r,i);return null}return t=Yw(t),n&&n[rl]?n.P(e,t,el(r)?!!r.capture:!!r,i):rO(n,e,t,!0,r,i)}function oO(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)oO(n,e[o],t,r,i);else r=el(r)?!!r.capture:!!r,t=Yw(t),n&&n[rl]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Gw(o=n.g[e],t,r,i))&&(Qf(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=Kw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Gw(e,t,r,i)),(t=-1<n?e[n]:null)&&Ww(t))}function Ww(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[rl])Hw(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(sO(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Kw(e))?(Hw(t,n),0==t.h&&(t.src=null,e[qw]=null)):Qf(n)}}}function sO(n){return n in zw?zw[n]:zw[n]="on"+n}function SZ(n,e){if(n.fa)n=!0;else{e=new nl(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Ww(n),n=t.call(r,e)}return n}function Kw(n){return(n=n[qw])instanceof Yf?n:null}var Qw="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yw(n){return"function"==typeof n?n:(n[Qw]||(n[Qw]=function(e){return n.handleEvent(e)}),n[Qw])}function Nt(){Qi.call(this),this.i=new Yf(this),this.S=this,this.J=null}function $t(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new tn(e,n);else if(e instanceof tn)e.target=e.target||n;else{var i=e;tO(e=new tn(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var s=e.g=t[o];i=Jf(s,r,!0,e)&&i}if(i=Jf(s=e.g=n,r,!0,e)&&i,i=Jf(s,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Jf(s=e.g=t[o],r,!1,e)&&i}function Jf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==t){var a=s.listener,u=s.la||s.src;s.ia&&Hw(n.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Mt(Nt,Qi),Nt.prototype[rl]=!0,Nt.prototype.removeEventListener=function(n,e,t,r){oO(this,n,e,t,r)},Nt.prototype.N=function(){if(Nt.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Qf(t[r]);delete n.g[e],n.h--}}this.J=null},Nt.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Nt.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Jw=ne.JSON.stringify;function PZ(){var n=Xw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var aO=new class RZ{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new MZ,n=>n.reset());class MZ{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function NZ(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function kZ(n){ne.setTimeout(()=>{throw n},0)}let il,ol=!1,Xw=new class xZ{constructor(){this.h=this.g=null}add(e,t){const r=aO.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},uO=()=>{const n=ne.Promise.resolve(void 0);il=()=>{n.then(OZ)}};var OZ=()=>{for(var n;n=PZ();){try{n.h.call(n.g)}catch(t){kZ(t)}var e=aO;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ol=!1};function Xf(n,e){Nt.call(this),this.h=n||1,this.g=e||ne,this.j=en(this.qb,this),this.l=Date.now()}function Zw(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function eT(n,e,t){if("function"==typeof n)t&&(n=en(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=en(n.handleEvent,n)}return 2147483647<Number(e)?-1:ne.setTimeout(n,e||0)}function cO(n){n.g=eT(()=>{n.g=null,n.i&&(n.i=!1,cO(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Mt(Xf,Nt),(M=Xf.prototype).ga=!1,M.T=null,M.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),$t(this,"tick"),this.ga&&(Zw(this),this.start()))}},M.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},M.N=function(){Xf.$.N.call(this),Zw(this),delete this.g};class VZ extends Qi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:cO(this)}N(){super.N(),this.g&&(ne.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sl(n){Qi.call(this),this.h=n,this.g={}}Mt(sl,Qi);var lO=[];function dO(n,e,t,r){Array.isArray(t)||(t&&(lO[0]=t.toString()),t=lO);for(var i=0;i<t.length;i++){var o=nO(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function hO(n){$w(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ww(e)},n),n.g={}}function Zf(){this.g=!0}function Da(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function BZ(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Jw(t)}catch{return e}}(n,t)+(r?" "+r:"")})}sl.prototype.N=function(){sl.$.N.call(this),hO(this)},sl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zf.prototype.Ea=function(){this.g=!1},Zf.prototype.info=function(){};var Yo={},fO=null;function ep(){return fO=fO||new Nt}function pO(n){tn.call(this,Yo.Ta,n)}function al(n){const e=ep();$t(e,new pO(e))}function gO(n,e){tn.call(this,Yo.STAT_EVENT,n),this.stat=e}function mn(n){const e=ep();$t(e,new gO(e,n))}function mO(n,e){tn.call(this,Yo.Ua,n),this.size=e}function ul(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return ne.setTimeout(function(){n()},e)}Yo.Ta="serverreachability",Mt(pO,tn),Yo.STAT_EVENT="statevent",Mt(gO,tn),Yo.Ua="timingevent",Mt(mO,tn);var tp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},_O={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function tT(){}function vO(){}tT.prototype.h=null;var iT,cl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function nT(){tn.call(this,"d")}function rT(){tn.call(this,"c")}function np(){}function ll(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new sl(this),this.P=jZ,this.V=new Xf(n=Vw?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new IO}function IO(){this.i=null,this.g="",this.h=!1}Mt(nT,tn),Mt(rT,tn),Mt(np,tT),np.prototype.g=function(){return new XMLHttpRequest},np.prototype.i=function(){return{}},iT=new np;var jZ=45e3,EO={},oT={};function sT(n,e,t){n.L=1,n.A=sp(Ci(e)),n.u=t,n.S=!0,wO(n,null)}function wO(n,e){n.G=Date.now(),dl(n),n.B=Ci(n.A);var t=n.B,r=n.W;Array.isArray(r)||(r=[String(r)]),MO(t.i,"t",r),n.o=0,t=n.l.J,n.h=new IO,n.g=nV(n.l,t?e:null,!n.u),0<n.O&&(n.M=new VZ(en(n.Pa,n,n.g),n.O)),dO(n.U,n.g,"readystatechange",n.nb),e=n.I?Zk(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),al(),function FZ(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");s=2<=d.length&&"type"==d[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+s})}(n.j,n.v,n.B,n.m,n.W,n.u)}function TO(n){return!!n.g&&"GET"==n.v&&2!=n.L&&n.l.Ha}function CO(n,e,t){let i,r=!0;for(;!n.J&&n.o<t.length;){if(i=$Z(n,t),i==oT){4==e&&(n.s=4,mn(14),r=!1),Da(n.j,n.m,null,"[Incomplete Response]");break}if(i==EO){n.s=4,mn(15),Da(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Da(n.j,n.m,i,null),aT(n,i)}TO(n)&&0!=n.o&&(n.h.g=n.h.g.slice(n.o),n.o=0),4!=e||0!=t.length||n.h.h||(n.s=1,mn(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),pT(e),e.M=!0,mn(11))):(Da(n.j,n.m,t,"[Invalid Chunked Response]"),Jo(n),hl(n))}function $Z(n,e){var t=n.o,r=e.indexOf("\n",t);return-1==r?oT:(t=Number(e.substring(t,r)),isNaN(t)?EO:(r+=1)+t>e.length?oT:(e=e.slice(r,r+t),n.o=r+t,e))}function dl(n){n.Y=Date.now()+n.P,DO(n,n.P)}function DO(n,e){if(null!=n.C)throw Error("WatchDog timer not null");n.C=ul(en(n.lb,n),e)}function rp(n){n.C&&(ne.clearTimeout(n.C),n.C=null)}function hl(n){0==n.l.H||n.J||XO(n.l,n)}function Jo(n){rp(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Zw(n.V),hO(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function aT(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||uT(t.i,n)))if(!n.K&&uT(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;hp(t),lp(t)}fT(t),mn(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=ul(en(t.ib,t),6e3));if(1>=OO(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Zo(t,11)}else if((n.K||t.g==n)&&hp(t),!tl(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(t.V=c[0],c=c[1],2==t.H)if("c"==c[0]){t.K=c[1],t.pa=c[2];const l=c[3];null!=l&&(t.ra=l,t.l.info("VER="+t.ra));const d=c[4];null!=d&&(t.Ga=d,t.l.info("SVER="+t.Ga));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(t.L=r=1.5*h,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const f=n.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var o=r.i;o.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(cT(o,o.h),o.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,ze(r.I,r.F,g))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var s=n;if((r=t).wa=tV(r,r.J?r.pa:null,r.Y),s.K){VO(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(rp(a),dl(a)),r.g=s}else YO(r);0<t.j.length&&dp(t)}else"stop"!=c[0]&&"close"!=c[0]||Zo(t,7);else 3==t.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Zo(t,7):hT(t):"noop"!=c[0]&&t.h&&t.h.Aa(c),t.A=0)}al()}catch{}}function AO(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(zf(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function GZ(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(zf(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function HZ(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(zf(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}(M=ll.prototype).setTimeout=function(n){this.P=n},M.nb=function(n){n=n.target;const e=this.M;e&&3==jr(n)?e.l():this.Pa(n)},M.Pa=function(n){try{if(n==this.g)e:{const l=jr(this.g);var e=this.g.Ia();if(this.g.da(),!(3>l)&&(3!=l||Vw||this.g&&(this.h.h||this.g.ja()||GO(this.g)))){this.J||4!=l||7==e||al(),rp(this);var t=this.g.da();this.ca=t;t:if(TO(this)){var r=GO(this.g);n="";var i=r.length,o=4==jr(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Jo(this),hl(this);var s="";break t}this.h.i=new ne.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=n,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==t,function LZ(n,e,t,r,i,o,s){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+s})}(this.j,this.v,this.B,this.m,this.W,l,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!tl(a)){var c=a;break t}}c=null}if(!(t=c)){this.i=!1,this.s=3,mn(12),Jo(this),hl(this);break e}Da(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,aT(this,t)}this.S?(CO(this,l,s),Vw&&this.i&&3==l&&(dO(this.U,this.V,"tick",this.mb),this.V.start())):(Da(this.j,this.m,s,null),aT(this,s)),4==l&&Jo(this),this.i&&!this.J&&(4==l?XO(this.l,this):(this.i=!1,dl(this)))}else(function uee(n){const e={};n=(n.g&&2<=jr(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(tl(n[r]))continue;var t=NZ(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const o=e[i]||[];e[i]=o,o.push(t)}!function AZ(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<s.indexOf("Unknown SID")?(this.s=3,mn(12)):(this.s=0,mn(13)),Jo(this),hl(this)}}}catch{}},M.mb=function(){if(this.g){var n=jr(this.g),e=this.g.ja();this.o<e.length&&(rp(this),CO(this,n,e),this.i&&4!=n&&dl(this))}},M.cancel=function(){this.J=!0,Jo(this)},M.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(function UZ(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(al(),mn(17)),Jo(this),this.s=2,hl(this)):DO(this,this.Y-n)};var bO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xo(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Xo){this.h=n.h,ip(this,n.j),this.s=n.s,this.g=n.g,op(this,n.m),this.l=n.l;var e=n.i,t=new gl;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),SO(this,t),this.o=n.o}else n&&(e=String(n).match(bO))?(this.h=!1,ip(this,e[1]||"",!0),this.s=fl(e[2]||""),this.g=fl(e[3]||"",!0),op(this,e[4]),this.l=fl(e[5]||"",!0),SO(this,e[6]||"",!0),this.o=fl(e[7]||"")):(this.h=!1,this.i=new gl(null,this.h))}function Ci(n){return new Xo(n)}function ip(n,e,t){n.j=t?fl(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function op(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function SO(n,e,t){e instanceof gl?(n.i=e,function JZ(n,e){e&&!n.j&&(Yi(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(PO(this,r),MO(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=pl(e,QZ)),n.i=new gl(e,n.h))}function ze(n,e,t){n.i.set(e,t)}function sp(n){return ze(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function fl(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function pl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,zZ),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function zZ(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Xo.prototype.toString=function(){var n=[],e=this.j;e&&n.push(pl(e,RO,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(pl(e,RO,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(pl(t,"/"==t.charAt(0)?KZ:WZ,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",pl(t,YZ)),n.join("")};var RO=/[#\/\?@]/g,WZ=/[#\?:]/g,KZ=/[#\?]/g,QZ=/[#\?@]/g,YZ=/#/g;function gl(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Yi(n){n.g||(n.g=new Map,n.h=0,n.i&&function qZ(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function PO(n,e){Yi(n),e=Aa(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function xO(n,e){return Yi(n),e=Aa(n,e),n.g.has(e)}function MO(n,e,t){PO(n,e),0<t.length&&(n.i=null,n.g.set(Aa(n,e),kw(t)),n.h+=t.length)}function Aa(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function NO(n){this.l=n||ZZ,n=ne.PerformanceNavigationTiming?0<(n=ne.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(ne.g&&ne.g.Ka&&ne.g.Ka()&&ne.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(M=gl.prototype).add=function(n,e){Yi(this),this.i=null,n=Aa(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},M.forEach=function(n,e){Yi(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},M.ta=function(){Yi(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let o=0;o<i.length;o++)t.push(e[r])}return t},M.Z=function(n){Yi(this);let e=[];if("string"==typeof n)xO(this,n)&&(e=e.concat(this.g.get(Aa(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},M.set=function(n,e){return Yi(this),this.i=null,xO(this,n=Aa(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},M.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},M.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),n.push(i)}}return this.i=n.join("&")};var ZZ=10;function kO(n){return!!n.h||!!n.g&&n.g.size>=n.j}function OO(n){return n.h?1:n.g?n.g.size:0}function uT(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function cT(n,e){n.g?n.g.add(e):n.h=e}function VO(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function FO(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return kw(n.i)}function tee(){this.g=new class{stringify(n){return ne.JSON.stringify(n,void 0)}parse(n){return ne.JSON.parse(n,void 0)}}}function nee(n,e,t){const r=t||"";try{AO(n,function(i,o){let s=i;el(i)&&(s=Jw(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ap(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function ml(n){this.l=n.ec||null,this.j=n.ob||!1}function up(n,e){Nt.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=lT,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}NO.prototype.cancel=function(){if(this.i=FO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Mt(ml,tT),ml.prototype.g=function(){return new up(this.l,this.j)},ml.prototype.i=function(n){return function(){return n}}({}),Mt(up,Nt);var lT=0;function LO(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function _l(n){n.readyState=4,n.l=null,n.j=null,n.A=null,yl(n)}function yl(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(M=up.prototype).open=function(n,e){if(this.readyState!=lT)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,yl(this)},M.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||ne).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},M.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_l(this)),this.readyState=lT},M.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,yl(this)),this.g&&(this.readyState=3,yl(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ne.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;LO(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},M.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?_l(this):yl(this),3==this.readyState&&LO(this)}},M.Za=function(n){this.g&&(this.response=this.responseText=n,_l(this))},M.Ya=function(n){this.g&&(this.response=n,_l(this))},M.ka=function(){this.g&&_l(this)},M.setRequestHeader=function(n,e){this.v.append(n,e)},M.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},M.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(up.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var iee=ne.JSON.parse;function it(n){Nt.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=UO,this.L=this.M=!1}Mt(it,Nt);var UO="",oee=/^https?$/i,see=["POST","PUT"];function BO(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,jO(n),cp(n)}function jO(n){n.F||(n.F=!0,$t(n,"complete"),$t(n,"error"))}function $O(n){if(n.h&&typeof Mw<"u"&&(!n.C[1]||4!=jr(n)||2!=n.da()))if(n.v&&4==jr(n))eT(n.La,0,n);else if($t(n,"readystatechange"),4==jr(n)){n.h=!1;try{const s=n.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===s){var i=String(n.I).match(bO)[1]||null;!i&&ne.self&&ne.self.location&&(i=ne.self.location.protocol.slice(0,-1)),r=!oee.test(i?i.toLowerCase():"")}t=r}if(t)$t(n,"complete"),$t(n,"success");else{n.m=6;try{var o=2<jr(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",jO(n)}}finally{cp(n)}}}function cp(n,e){if(n.g){HO(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||$t(n,"ready");try{t.onreadystatechange=r}catch{}}}function HO(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(ne.clearTimeout(n.A),n.A=null)}function jr(n){return n.g?n.g.readyState:0}function GO(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case UO:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function qO(n){let e="";return $w(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function dT(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=qO(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ze(n,e,t))}function vl(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function zO(n){this.Ga=0,this.j=[],this.l=new Zf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=vl("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=vl("baseRetryDelayMs",5e3,n),this.hb=vl("retryDelaySeedMs",1e4,n),this.eb=vl("forwardChannelMaxRetries",2,n),this.xa=vl("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new NO(n&&n.concurrentRequestLimit),this.Ja=new tee,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function hT(n){if(WO(n),3==n.H){var e=n.W++,t=Ci(n.I);if(ze(t,"SID",n.K),ze(t,"RID",e),ze(t,"TYPE","terminate"),Il(n,t),(e=new ll(n,n.l,e)).L=2,e.A=sp(Ci(t)),t=!1,ne.navigator&&ne.navigator.sendBeacon)try{t=ne.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&ne.Image&&((new Image).src=e.A,t=!0),t||(e.g=nV(e.l,null),e.g.ha(e.A)),e.G=Date.now(),dl(e)}eV(n)}function lp(n){n.g&&(pT(n),n.g.cancel(),n.g=null)}function WO(n){lp(n),n.u&&(ne.clearTimeout(n.u),n.u=null),hp(n),n.i.cancel(),n.m&&("number"==typeof n.m&&ne.clearTimeout(n.m),n.m=null)}function dp(n){if(!kO(n.i)&&!n.m){n.m=!0;var e=n.Na;il||uO(),ol||(il(),ol=!0),Xw.add(e,n),n.C=0}}function KO(n,e){var t;t=e?e.m:n.W++;const r=Ci(n.I);ze(r,"SID",n.K),ze(r,"RID",t),ze(r,"AID",n.V),Il(n,r),n.o&&n.s&&dT(r,n.o,n.s),t=new ll(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=QO(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),cT(n.i,t),sT(t,r,e)}function Il(n,e){n.na&&$w(n.na,function(t,r){ze(e,r,t)}),n.h&&AO({},function(t,r){ze(e,r,t)})}function QO(n,e,t){t=Math.min(n.j.length,t);var r=n.h?en(n.h.Va,n.h,n):null;e:{var i=n.j;let o=-1;for(;;){const s=["count="+t];-1==o?0<t?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let u=0;u<t;u++){let c=i[u].g;const l=i[u].map;if(c-=o,0>c)o=Math.max(0,i[u].g-100),a=!1;else try{nee(l,s,"req"+c+"_")}catch{r&&r(l)}}if(a){r=s.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function YO(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;il||uO(),ol||(il(),ol=!0),Xw.add(e,n),n.A=0}}function fT(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=ul(en(n.Ma,n),ZO(n,n.A)),n.A++,0))}function pT(n){null!=n.B&&(ne.clearTimeout(n.B),n.B=null)}function JO(n){n.g=new ll(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Ci(n.wa);ze(e,"RID","rpc"),ze(e,"SID",n.K),ze(e,"AID",n.V),ze(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&ze(e,"TO",n.qa),ze(e,"TYPE","xmlhttp"),Il(n,e),n.o&&n.s&&dT(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=sp(Ci(e)),t.u=null,t.S=!0,wO(t,n)}function hp(n){null!=n.v&&(ne.clearTimeout(n.v),n.v=null)}function XO(n,e){var t=null;if(n.g==e){hp(n),pT(n),n.g=null;var r=2}else{if(!uT(n.i,e))return;t=e.F,VO(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.u?e.u.length:0,e=Date.now()-e.G;var i=n.C;$t(r=ep(),new mO(r,t)),dp(n)}else YO(n);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function cee(n,e){return!(OO(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=ul(en(n.Na,n,e),ZO(n,n.C)),n.C++,0)))}(n,e)||2==r&&fT(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Zo(n,5);break;case 4:Zo(n,10);break;case 3:Zo(n,6);break;default:Zo(n,2)}}function ZO(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Zo(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=en(n.pb,n);t||(t=new Xo("//www.google.com/images/cleardot.gif"),ne.location&&"http"==ne.location.protocol||ip(t,"https"),sp(t)),function ree(n,e){const t=new Zf;if(ne.Image){const r=new Image;r.onload=Wf(ap,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Wf(ap,t,r,"TestLoadImage: error",!1,e),r.onabort=Wf(ap,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Wf(ap,t,r,"TestLoadImage: timeout",!1,e),ne.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else mn(2);n.H=0,n.h&&n.h.za(e),eV(n),WO(n)}function eV(n){if(n.H=0,n.ma=[],n.h){const e=FO(n.i);(0!=e.length||0!=n.j.length)&&(Kk(n.ma,e),Kk(n.ma,n.j),n.i.i.length=0,kw(n.j),n.j.length=0),n.h.ya()}}function tV(n,e,t){var r=t instanceof Xo?Ci(t):new Xo(t);if(""!=r.g)e&&(r.g=e+"."+r.g),op(r,r.m);else{var i=ne.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Xo(null);r&&ip(o,r),e&&(o.g=e),i&&op(o,i),t&&(o.l=t),r=o}return e=n.Da,(t=n.F)&&e&&ze(r,t,e),ze(r,"VER",n.ra),Il(n,r),r}function nV(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new it(n.Ha&&!n.va?new ml({ob:t}):n.va)).Oa(n.J),e}function rV(){}function fp(){if(Ca&&!(10<=Number(wZ)))throw Error("Environmental error: no available transport.")}function Bn(n,e){Nt.call(this),this.g=new zO(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!tl(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!tl(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ba(this)}function iV(n){nT.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function oV(){rT.call(this),this.status=1}function ba(n){this.g=n}function wr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function gT(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var o=n.g[3],s=(e=n.g[0])+(o^(t=n.g[1])&((i=n.g[2])^o))+r[0]+3614090360&4294967295;s=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=t+(s<<7&4294967295|s>>>25))+((s=o+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(t^o&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^t&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(t^o&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^t&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(t^o&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^t&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(t^o&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=e+(i^o&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^t&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^t&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^t&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^t&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=e+(t^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=t+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=e+(t^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=t+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=e+(t^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=t+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=e+(t^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^t)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=t+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=e+(i^(t|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~t))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=t+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(t|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~t))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=t+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(t|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~t))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=t+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(e=t+((s=e+(i^(t|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(e^(o|~t))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+o&4294967295}function Me(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var o=0|n[i];r&&o==e||(t[i]=o,r=!1)}this.g=t}(M=it.prototype).Oa=function(n){this.M=n},M.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():iT.g(),this.C=function yO(n){return n.h||(n.h=n.i())}(this.u?this.u:iT),this.g.onreadystatechange=en(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(o){return void BO(this,o)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())t.set(o,r.get(o))}r=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),i=ne.FormData&&n instanceof ne.FormData,!(0<=Wk(see,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of t)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{HO(this),0<this.B&&((this.L=function aee(n){return Ca&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=en(this.ua,this)):this.A=eT(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){BO(this,o)}},M.ua=function(){typeof Mw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$t(this,"timeout"),this.abort(8))},M.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,$t(this,"complete"),$t(this,"abort"),cp(this))},M.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cp(this,!0)),it.$.N.call(this)},M.La=function(){this.s||(this.G||this.v||this.l?$O(this):this.kb())},M.kb=function(){$O(this)},M.isActive=function(){return!!this.g},M.da=function(){try{return 2<jr(this)?this.g.status:-1}catch{return-1}},M.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},M.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),iee(e)}},M.Ia=function(){return this.m},M.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(M=zO.prototype).ra=8,M.H=1,M.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new ll(this,this.l,n);let o=this.s;if(this.U&&(o?(o=Zk(o),tO(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=QO(this,i,e),ze(t=Ci(this.I),"RID",n),ze(t,"CVER",22),this.F&&ze(t,"X-HTTP-Session-Id",this.F),Il(this,t),o&&(this.O?e="headers="+encodeURIComponent(String(qO(o)))+"&"+e:this.o&&dT(t,this.o,o)),cT(this.i,i),this.bb&&ze(t,"TYPE","init"),this.P?(ze(t,"$req",e),ze(t,"SID","null"),i.aa=!0,sT(i,t,null)):sT(i,t,e),this.H=2}}else 3==this.H&&(n?KO(this,n):0==this.j.length||kO(this.i)||KO(this))},M.Ma=function(){if(this.u=null,JO(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=ul(en(this.jb,this),n)}},M.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,mn(10),lp(this),JO(this))},M.ib=function(){null!=this.v&&(this.v=null,lp(this),fT(this),mn(19))},M.pb=function(n){n?(this.l.info("Successfully pinged google.com"),mn(2)):(this.l.info("Failed to ping google.com"),mn(1))},M.isActive=function(){return!!this.h&&this.h.isActive(this)},(M=rV.prototype).Ba=function(){},M.Aa=function(){},M.za=function(){},M.ya=function(){},M.isActive=function(){return!0},M.Va=function(){},fp.prototype.g=function(n,e){return new Bn(n,e)},Mt(Bn,Nt),Bn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;mn(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=tV(n,null,n.Y),dp(n)},Bn.prototype.close=function(){hT(this.g)},Bn.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Jw(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&dp(e)},Bn.prototype.N=function(){this.g.h=null,delete this.j,hT(this.g),delete this.g,Bn.$.N.call(this)},Mt(iV,nT),Mt(oV,rT),Mt(ba,rV),ba.prototype.Ba=function(){$t(this.g,"a")},ba.prototype.Aa=function(n){$t(this.g,new iV(n))},ba.prototype.za=function(n){$t(this.g,new oV)},ba.prototype.ya=function(){$t(this.g,"b")},Mt(wr,function lee(){this.blockSize=-1}),wr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},wr.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=t;)gT(this,n,o),o+=this.blockSize;if("string"==typeof n){for(;o<e;)if(r[i++]=n.charCodeAt(o++),i==this.blockSize){gT(this,r),i=0;break}}else for(;o<e;)if(r[i++]=n[o++],i==this.blockSize){gT(this,r),i=0;break}}this.h=i,this.i+=e},wr.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var dee={};function mT(n){return-128<=n&&128>n?function vZ(n,e){var t=dee;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Me([0|e],0>e?-1:0)}):new Me([0|n],0>n?-1:0)}function $r(n){if(isNaN(n)||!isFinite(n))return Sa;if(0>n)return Ht($r(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=_T;return new Me(e,0)}var _T=4294967296,Sa=mT(0),yT=mT(1),aV=mT(16777216);function Di(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function rr(n){return-1==n.h}function Ht(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Me(t,~n.h).add(yT)}function pp(n,e){return n.add(Ht(e))}function gp(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function El(n,e){this.g=n,this.h=e}function mp(n,e){if(Di(e))throw Error("division by zero");if(Di(n))return new El(Sa,Sa);if(rr(n))return e=mp(Ht(n),e),new El(Ht(e.g),Ht(e.h));if(rr(e))return e=mp(n,Ht(e)),new El(Ht(e.g),e.h);if(30<n.g.length){if(rr(n)||rr(e))throw Error("slowDivide_ only works with positive integers.");for(var t=yT,r=e;0>=r.X(n);)t=uV(t),r=uV(r);var i=Ra(t,1),o=Ra(r,1);for(r=Ra(r,2),t=Ra(t,2);!Di(r);){var s=o.add(r);0>=s.X(n)&&(i=i.add(t),o=s),r=Ra(r,1),t=Ra(t,1)}return e=pp(n,i.R(e)),new El(i,e)}for(i=Sa;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),s=(o=$r(t)).R(e);rr(s)||0<s.X(n);)s=(o=$r(t-=r)).R(e);Di(o)&&(o=yT),i=i.add(o),n=pp(n,s)}return new El(i,n)}function uV(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Me(t,n.h)}function Ra(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],o=0;o<r;o++)i[o]=0<e?n.D(o+t)>>>e|n.D(o+t+1)<<32-e:n.D(o+t);return new Me(i,n.h)}(M=Me.prototype).ea=function(){if(rr(this))return-Ht(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:_T+r)*e,e*=_T}return n},M.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Di(this))return"0";if(rr(this))return"-"+Ht(this).toString(n);for(var e=$r(Math.pow(n,6)),t=this,r="";;){var i=mp(t,e).g,o=((0<(t=pp(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Di(t=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},M.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},M.X=function(n){return rr(n=pp(this,n))?-1:Di(n)?0:1},M.abs=function(){return rr(this)?Ht(this):this},M.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&n.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=s>>>16,t[i]=(s&=65535)<<16|(o&=65535)}return new Me(t,-2147483648&t[t.length-1]?-1:0)},M.R=function(n){if(Di(this)||Di(n))return Sa;if(rr(this))return rr(n)?Ht(this).R(Ht(n)):Ht(Ht(this).R(n));if(rr(n))return Ht(this.R(Ht(n)));if(0>this.X(aV)&&0>n.X(aV))return $r(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=n.D(i)>>>16,u=65535&n.D(i);t[2*r+2*i]+=s*u,gp(t,2*r+2*i),t[2*r+2*i+1]+=o*u,gp(t,2*r+2*i+1),t[2*r+2*i+1]+=s*a,gp(t,2*r+2*i+1),t[2*r+2*i+2]+=o*a,gp(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Me(t,0)},M.gb=function(n){return mp(this,n).h},M.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Me(t,this.h&n.h)},M.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Me(t,this.h|n.h)},M.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Me(t,this.h^n.h)},fp.prototype.createWebChannel=fp.prototype.g,Bn.prototype.send=Bn.prototype.u,Bn.prototype.open=Bn.prototype.m,Bn.prototype.close=Bn.prototype.close,tp.NO_ERROR=0,tp.TIMEOUT=8,tp.HTTP_ERROR=6,_O.COMPLETE="complete",vO.EventType=cl,cl.OPEN="a",cl.CLOSE="b",cl.ERROR="c",cl.MESSAGE="d",Nt.prototype.listen=Nt.prototype.O,it.prototype.listenOnce=it.prototype.P,it.prototype.getLastError=it.prototype.Sa,it.prototype.getLastErrorCode=it.prototype.Ia,it.prototype.getStatus=it.prototype.da,it.prototype.getResponseJson=it.prototype.Wa,it.prototype.getResponseText=it.prototype.ja,it.prototype.send=it.prototype.ha,it.prototype.setWithCredentials=it.prototype.Oa,wr.prototype.digest=wr.prototype.l,wr.prototype.reset=wr.prototype.reset,wr.prototype.update=wr.prototype.j,Me.prototype.add=Me.prototype.add,Me.prototype.multiply=Me.prototype.R,Me.prototype.modulo=Me.prototype.gb,Me.prototype.compare=Me.prototype.X,Me.prototype.toNumber=Me.prototype.ea,Me.prototype.toString=Me.prototype.toString,Me.prototype.getBits=Me.prototype.D,Me.fromNumber=$r,Me.fromString=function sV(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ht(sV(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=$r(Math.pow(e,8)),r=Sa,i=0;i<n.length;i+=8){var o=Math.min(8,n.length-i),s=parseInt(n.substring(i,i+o),e);8>o?(o=$r(Math.pow(e,o)),r=r.R(o).add($r(s))):r=(r=r.R(t)).add($r(s))}return r};var hee=Er.createWebChannelTransport=function(){return new fp},fee=Er.getStatEventTarget=function(){return ep()},vT=Er.ErrorCode=tp,pee=Er.EventType=_O,gee=Er.Event=Yo,cV=Er.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},_p=(Er.FetchXmlHttpFactory=ml,Er.WebChannel=vO),mee=Er.XhrIo=it,_ee=Er.Md5=wr,Pa=Er.Integer=Me;const lV="@firebase/firestore";class kt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kt.UNAUTHENTICATED=new kt(null),kt.GOOGLE_CREDENTIALS=new kt("google-credentials-uid"),kt.FIRST_PARTY=new kt("first-party-uid"),kt.MOCK_USER=new kt("mock-user");let xa="10.8.1";const Ji=new wf("@firebase/firestore");function Ma(){return Ji.logLevel}function D(n,...e){if(Ji.logLevel<=_e.DEBUG){const t=e.map(IT);Ji.debug(`Firestore (${xa}): ${n}`,...t)}}function lt(n,...e){if(Ji.logLevel<=_e.ERROR){const t=e.map(IT);Ji.error(`Firestore (${xa}): ${n}`,...t)}}function jn(n,...e){if(Ji.logLevel<=_e.WARN){const t=e.map(IT);Ji.warn(`Firestore (${xa}): ${n}`,...t)}}function IT(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function O(n="Unexpected state"){const e=`FIRESTORE (${xa}) INTERNAL ASSERTION FAILED: `+n;throw lt(e),new Error(e)}function L(n,e){n||O()}function P(n,e){return n}const E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class A extends vr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class St{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class dV{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yee{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(kt.UNAUTHENTICATED))}shutdown(){}}class vee{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Iee{constructor(e){this.t=e,this.currentUser=kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let s=new St;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new St,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(m(function*(){yield c.promise,yield o(r.currentUser)}))},u=c=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new St)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(L("string"==typeof r.accessToken),new dV(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return L(null===e||"string"==typeof e),new kt(e)}}class Eee{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=kt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class wee{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Eee(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Tee{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=o=>{null!=o.error&&D("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,D("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(L("string"==typeof t.token),this.R=t.token,new hV(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Cee(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class fV{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Cee(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function te(n,e){return n<e?-1:n>e?1:0}function Na(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class Ze{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new A(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new A(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new A(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new A(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ze(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?te(this.nanoseconds,e.nanoseconds):te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class j{constructor(e){this.timestamp=e}static fromTimestamp(e){return new j(e)}static min(){return new j(new Ze(0,0))}static max(){return new j(new Ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class wl{constructor(e,t,r){void 0===t?t=0:t>e.length&&O(),void 0===r?r=e.length-t:r>e.length-t&&O(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===wl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ye extends wl{construct(e,t,r){return new ye(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new A(E.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new ye(t)}static emptyPath(){return new ye([])}}const Dee=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends wl{construct(e,t,r){return new Qe(e,t,r)}static isValidIdentifier(e){return Dee.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qe(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new A(E.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new A(E.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new A(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new A(E.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qe(t)}static emptyPath(){return new Qe([])}}class x{constructor(e){this.path=e}static fromPath(e){return new x(ye.fromString(e))}static fromName(e){return new x(ye.fromString(e).popFirst(5))}static empty(){return new x(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ye.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new x(new ye(e.slice()))}}function mV(n){return new $n(n.readTime,n.key,-1)}class $n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new $n(j.min(),x.empty(),-1)}static max(){return new $n(j.max(),x.empty(),-1)}}function wT(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=x.comparator(n.documentKey,e.documentKey),0!==t?t:te(n.largestBatchId,e.largestBatchId))}const _V="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class See{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Xi(n){return TT.apply(this,arguments)}function TT(){return TT=m(function*(n){if(n.code!==E.FAILED_PRECONDITION||n.message!==_V)throw n;D("LocalStore","Unexpectedly lost primary lease")}),TT.apply(this,arguments)}class v{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&O(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new v((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof v?t:v.resolve(t)}catch(t){return v.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):v.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):v.reject(t)}static resolve(e){return new v((t,r)=>{t(e)})}static reject(e){return new v((t,r)=>{r(e)})}static waitFor(e){return new v((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=v.resolve(!1);for(const r of e)t=t.next(i=>i?v.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new v((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const c=u;t(e[c]).next(l=>{s[c]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,t){return new v((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class yp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new St,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Tl(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=CT(r.target.error);this.V.reject(new Tl(e,i))}}static open(e,t,r,i){try{return new yp(t,e.transaction(i,r))}catch(o){throw new Tl(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(D("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Pee(t)}}class ir{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===ir.S(rt())&&lt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return D("SimpleDb","Removing database:",e),ns(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!hv())return!1;if(ir.C())return!0;const e=rt(),t=ir.S(e),r=0<t&&t<10,i=ir.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return m(function*(){return t.db||(D("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new Tl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new A(E.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new A(E.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Tl(e,a))},o.onupgradeneeded=s=>{D("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',s.oldVersion),t.p.N(s.target.result,o.transaction,s.oldVersion,t.version).next(()=>{D("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return m(function*(){const s="readonly"===t;let a=0;for(;;){++a;try{o.db=yield o.O(e);const u=yp.open(o.db,e,s?"readonly":"readwrite",r),c=i(u).next(l=>(u.g(),l)).catch(l=>(u.abort(l),v.reject(l))).toPromise();return c.catch(()=>{}),yield u.m,c}catch(u){const c=u,l="FirebaseError"!==c.name&&a<3;if(D("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),o.close(),!l)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ree{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ns(this.k.delete())}}class Tl extends A{constructor(e,t){super(E.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Zi(n){return"IndexedDbTransactionError"===n.name}class Pee{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(D("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(D("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ns(r)}add(e){return D("SimpleDb","ADD",this.store.name,e,e),ns(this.store.add(e))}get(e){return ns(this.store.get(e)).next(t=>(void 0===t&&(t=null),D("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return D("SimpleDb","DELETE",this.store.name,e),ns(this.store.delete(e))}count(){return D("SimpleDb","COUNT",this.store.name),ns(this.store.count())}W(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const o=i.getAll(r.range);return new v((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{const o=this.cursor(r),s=[];return this.G(o,(a,u)=>{s.push(u)}).next(()=>s)}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new v((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,t){D("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.J=!1;const i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Z(e){const t=this.cursor({});return new v((r,i)=>{t.onerror=o=>{const s=CT(o.target.error);i(s)},t.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,t){const r=[];return new v((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const u=new Ree(a),c=t(a.primaryKey,a.value,u);if(c instanceof v){const l=c.catch(d=>(u.done(),v.reject(d)));r.push(l)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>v.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ns(n){return new v((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=CT(r.target.error);t(i)}})}let yV=!1;function CT(n){const e=ir.S(rt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new A("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yV||(yV=!0,setTimeout(()=>{throw r},0)),r}}return n}let Hn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function Cl(n){return null==n}function Dl(n){return 0===n&&1/n==-1/0}function AV(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function eo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function bV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class je{constructor(e,t){this.comparator=e,this.root=t||Gt.EMPTY}insert(e,t){return new je(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ip(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ip(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ip(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ip(this.root,e,this.comparator,!0)}}class Ip{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Gt.RED,this.left=i??Gt.EMPTY,this.right=o??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Gt(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Gt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw O();const e=this.left.check();if(e!==this.right.check())throw O();return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1,Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw O()}get value(){throw O()}get color(){throw O()}get left(){throw O()}get right(){throw O()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Gt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ke{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new SV(this.data.getIterator())}getIteratorFrom(e){return new SV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ke)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ke(this.comparator);return t.data=e,t}}class SV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class An{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new An([])}unionWith(e){let t=new ke(Qe.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new An(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Na(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class RV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new RV("Invalid base64 string: "+o):o}}(e);return new Rt(t)}static fromUint8Array(e){const t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Rt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const Jee=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function to(n){if(L(!!n),"string"==typeof n){let e=0;const t=Jee.exec(n);if(L(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(n.seconds),nanos:ot(n.nanos)}}function ot(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ai(n){return"string"==typeof n?Rt.fromBase64String(n):Rt.fromUint8Array(n)}function Ep(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function wp(n){const e=n.mapValue.fields.__previous_value__;return Ep(e)?wp(e):e}function Al(n){const e=to(n.mapValue.fields.__local_write_time__.timestampValue);return new Ze(e.seconds,e.nanos)}class Xee{constructor(e,t,r,i,o,s,a,u,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class rs{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new rs("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof rs&&e.projectId===this.projectId&&e.database===this.database}}const no_mapValue={fields:{__type__:{stringValue:"__max__"}}};function ro(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ep(n)?4:NV(n)?9007199254740991:10:O()}function Gr(n,e){if(n===e)return!0;const t=ro(n);if(t!==ro(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Al(n).isEqual(Al(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=to(i.timestampValue),a=to(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Ai(n.bytesValue).isEqual(Ai(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ot(i.geoPointValue.latitude)===ot(o.geoPointValue.latitude)&&ot(i.geoPointValue.longitude)===ot(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ot(i.integerValue)===ot(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=ot(i.doubleValue),a=ot(o.doubleValue);return s===a?Dl(s)===Dl(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Na(n.arrayValue.values||[],e.arrayValue.values||[],Gr);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(AV(s)!==AV(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===a[u]||!Gr(s[u],a[u])))return!1;return!0}(n,e);default:return O()}var o}function bl(n,e){return void 0!==(n.values||[]).find(t=>Gr(t,e))}function io(n,e){if(n===e)return 0;const t=ro(n),r=ro(e);if(t!==r)return te(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return te(n.booleanValue,e.booleanValue);case 2:return function(o,s){const a=ot(o.integerValue||o.doubleValue),u=ot(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return PV(n.timestampValue,e.timestampValue);case 4:return PV(Al(n),Al(e));case 5:return te(n.stringValue,e.stringValue);case 6:return function(o,s){const a=Ai(o),u=Ai(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let c=0;c<a.length&&c<u.length;c++){const l=te(a[c],u[c]);if(0!==l)return l}return te(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){const a=te(ot(o.latitude),ot(s.latitude));return 0!==a?a:te(ot(o.longitude),ot(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],u=s.values||[];for(let c=0;c<a.length&&c<u.length;++c){const l=io(a[c],u[c]);if(l)return l}return te(a.length,u.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===no_mapValue&&s===no_mapValue)return 0;if(o===no_mapValue)return 1;if(s===no_mapValue)return-1;const a=o.fields||{},u=Object.keys(a),c=s.fields||{},l=Object.keys(c);u.sort(),l.sort();for(let d=0;d<u.length&&d<l.length;++d){const h=te(u[d],l[d]);if(0!==h)return h;const f=io(a[u[d]],c[l[d]]);if(0!==f)return f}return te(u.length,l.length)}(n.mapValue,e.mapValue);default:throw O()}}function PV(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return te(n,e);const t=to(n),r=to(e),i=te(t.seconds,r.seconds);return 0!==i?i:te(t.nanos,r.nanos)}function Fa(n){return AT(n)}function AT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=to(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ai(n.bytesValue).toBase64():"referenceValue"in n?x.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=AT(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${AT(t.fields[s])}`;return i+"}"}(n.mapValue):O()}function is(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function bT(n){return!!n&&"integerValue"in n}function Sl(n){return!!n&&"arrayValue"in n}function xV(n){return!!n&&"nullValue"in n}function MV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Dp(n){return!!n&&"mapValue"in n}function Rl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return eo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Rl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function NV(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class qt{constructor(e){this.value=e}static empty(){return new qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Dp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rl(t)}setAll(e){let t=Qe.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Rl(s):i.push(a.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Dp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Dp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){eo(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new qt(Rl(this.value))}}function VV(n){const e=[];return eo(n.fields,(t,r)=>{const i=new Qe([t]);if(Dp(r)){const o=VV(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new An(e)}class We{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new We(e,0,j.min(),j.min(),j.min(),qt.empty(),0)}static newFoundDocument(e,t,r,i){return new We(e,1,t,j.min(),r,i,0)}static newNoDocument(e,t){return new We(e,2,t,j.min(),j.min(),qt.empty(),0)}static newUnknownDocument(e,t){return new We(e,3,t,j.min(),j.min(),qt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(j.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=j.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof We&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new We(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class oo{constructor(e,t){this.position=e,this.inclusive=t}}function FV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(r=o.field.isKeyField()?x.comparator(x.fromName(s.referenceValue),t.key):io(s,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function LV(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gr(n.position[t],e.position[t]))return!1;return!0}class Pl{constructor(e,t="asc"){this.field=e,this.dir=t}}function tte(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class UV{}class ve extends UV{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new nte(e,t,r):"array-contains"===t?new ote(e,r):"in"===t?new qV(e,r):"not-in"===t?new ste(e,r):"array-contains-any"===t?new ate(e,r):new ve(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new rte(e,r):new ite(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(io(t,this.value)):null!==t&&ro(this.value)===ro(t)&&this.matchesComparison(io(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return O()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ne extends UV{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Ne(e,t)}matches(e){return La(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function La(n){return"and"===n.op}function RT(n){return function BV(n){for(const e of n.filters)if(e instanceof Ne)return!1;return!0}(n)&&La(n)}function PT(n){if(n instanceof ve)return n.field.canonicalString()+n.op.toString()+Fa(n.value);if(RT(n))return n.filters.map(e=>PT(e)).join(",");{const e=n.filters.map(t=>PT(t)).join(",");return`${n.op}(${e})`}}function jV(n,e){return n instanceof ve?(r=n,(i=e)instanceof ve&&r.op===i.op&&r.field.isEqual(i.field)&&Gr(r.value,i.value)):n instanceof Ne?function(r,i){return i instanceof Ne&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&jV(s,i.filters[a]),!0)}(n,e):void O();var r,i}function HV(n){return n instanceof ve?`${(t=n).field.canonicalString()} ${t.op} ${Fa(t.value)}`:n instanceof Ne?function(t){return t.op.toString()+" {"+t.getFilters().map(HV).join(" ,")+"}"}(n):"Filter";var t}class nte extends ve{constructor(e,t,r){super(e,t,r),this.key=x.fromName(r.referenceValue)}matches(e){const t=x.comparator(e.key,this.key);return this.matchesComparison(t)}}class rte extends ve{constructor(e,t){super(e,"in",t),this.keys=GV(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ite extends ve{constructor(e,t){super(e,"not-in",t),this.keys=GV(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function GV(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>x.fromName(r.referenceValue))}class ote extends ve{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sl(t)&&bl(t.arrayValue,this.value)}}class qV extends ve{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&bl(this.value.arrayValue,t)}}class ste extends ve{constructor(e,t){super(e,"not-in",t)}matches(e){if(bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!bl(this.value.arrayValue,t)}}class ate extends ve{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>bl(this.value.arrayValue,r))}}class ute{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function xT(n,e=null,t=[],r=[],i=null,o=null,s=null){return new ute(n,e,t,r,i,o,s)}function os(n){const e=P(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>PT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Cl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fa(r)).join(",")),e.ce=t}return e.ce}function xl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!tte(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!LV(n.startAt,e.startAt)&&LV(n.endAt,e.endAt)}function Ap(n){return x.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class bi{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function Ua(n){return new bi(n)}function QV(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function MT(n){return null!==n.collectionGroup}function Ba(n){const e=P(n);if(null===e.le){e.le=[];const t=new Set;for(const o of e.explicitOrderBy)e.le.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ke(Qe.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.le.push(new Pl(o,r))}),t.has(Qe.keyField().canonicalString())||e.le.push(new Pl(Qe.keyField(),r))}return e.le}function _n(n){const e=P(n);return e.he||(e.he=function YV(n,e){if("F"===n.limitType)return xT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Pl(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new oo(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new oo(n.startAt.position,n.startAt.inclusive):null;return xT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Ba(n))),e.he}function NT(n,e){const t=n.filters.concat([e]);return new bi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Sp(n,e,t){return new bi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ml(n,e){return xl(_n(n),_n(e))&&n.limitType===e.limitType}function JV(n){return`${os(_n(n))}|lt:${n.limitType}`}function ja(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>HV(i)).join(", ")}]`),Cl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Fa(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Fa(i)).join(",")),`Target(${r})`}(_n(n))}; limitType=${n.limitType})`}function Nl(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):x.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of Ba(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(s,a,u){const c=FV(s,a,u);return s.inclusive?c<=0:c<0}(r.startAt,Ba(r),i)||r.endAt&&!function(s,a,u){const c=FV(s,a,u);return s.inclusive?c>=0:c>0}(r.endAt,Ba(r),i)));var r,i}function ZV(n){return(e,t)=>{let r=!1;for(const i of Ba(n)){const o=cte(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function cte(n,e,t){const r=n.field.isKeyField()?x.comparator(e.key,t.key):function(o,s,a){const u=s.data.field(o),c=a.data.field(o);return null!==u&&null!==c?io(u,c):O()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return O()}}class Si{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){eo(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return bV(this.inner)}size(){return this.innerSize}}const lte=new je(x.comparator);function bn(){return lte}const eF=new je(x.comparator);function kl(...n){let e=eF;for(const t of n)e=e.insert(t.key,t);return e}function tF(n){let e=eF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function qr(){return Ol()}function nF(){return Ol()}function Ol(){return new Si(n=>n.toString(),(n,e)=>n.isEqual(e))}const dte=new je(x.comparator),hte=new ke(x.comparator);function se(...n){let e=hte;for(const t of n)e=e.add(t);return e}const fte=new ke(te);function rF(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dl(e)?"-0":e}}function iF(n){return{integerValue:""+n}}function oF(n,e){return function vV(n){return"number"==typeof n&&Number.isInteger(n)&&!Dl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?iF(e):rF(n,e)}class Rp{constructor(){this._=void 0}}function pte(n,e,t){return n instanceof $a?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Ep(o)&&(o=wp(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof ss?aF(n,e):n instanceof as?uF(n,e):function(i,o){const s=sF(i,o),a=cF(s)+cF(i.Ie);return bT(s)&&bT(i.Ie)?iF(a):rF(i.serializer,a)}(n,e)}function gte(n,e,t){return n instanceof ss?aF(n,e):n instanceof as?uF(n,e):t}function sF(n,e){return n instanceof Ha?bT(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class $a extends Rp{}class ss extends Rp{constructor(e){super(),this.elements=e}}function aF(n,e){const t=lF(e);for(const r of n.elements)t.some(i=>Gr(i,r))||t.push(r);return{arrayValue:{values:t}}}class as extends Rp{constructor(e){super(),this.elements=e}}function uF(n,e){let t=lF(e);for(const r of n.elements)t=t.filter(i=>!Gr(i,r));return{arrayValue:{values:t}}}class Ha extends Rp{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function cF(n){return ot(n.integerValue||n.doubleValue)}function lF(n){return Sl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class _te{constructor(e,t){this.version=e,this.transformResults=t}}class Ye{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ye}static exists(e){return new Ye(void 0,e)}static updateTime(e){return new Ye(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class xp{}function dF(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new qa(n.key,Ye.none()):new Ga(n.key,n.data,Ye.none());{const t=n.data,r=qt.empty();let i=new ke(Qe.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);null===s&&o.length>1&&(o=o.popLast(),s=t.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new Ri(n.key,r,new An(i.toArray()),Ye.none())}}function yte(n,e,t){n instanceof Ga?function(i,o,s){const a=i.value.clone(),u=pF(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ri?function(i,o,s){if(!Pp(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=pF(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(fF(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Fl(n,e,t,r){return n instanceof Ga?function(o,s,a,u){if(!Pp(o.precondition,s))return a;const c=o.value.clone(),l=gF(o.fieldTransforms,u,s);return c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ri?function(o,s,a,u){if(!Pp(o.precondition,s))return a;const c=gF(o.fieldTransforms,u,s),l=s.data;return l.setAll(fF(o)),l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(n,e,t,r):(a=t,Pp(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function vte(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=sF(r.transform,i||null);null!=o&&(null===t&&(t=qt.empty()),t.set(r.field,o))}return t||null}function hF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Na(r,i,(o,s)=>function mte(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof ss&&i instanceof ss||r instanceof as&&i instanceof as?Na(r.elements,i.elements,Gr):r instanceof Ha&&i instanceof Ha?Gr(r.Ie,i.Ie):r instanceof $a&&i instanceof $a);var r,i}(o,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Ga extends xp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ri extends xp{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function fF(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function pF(n,e,t){const r=new Map;L(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,gte(s,a,t[i]))}return r}function gF(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,pte(o,s,e))}return r}class qa extends xp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OT extends xp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class VT{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&yte(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Fl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=nF();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;const u=dF(s,a);null!==u&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(j.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),se())}isEqual(e){return this.batchId===e.batchId&&Na(this.mutations,e.mutations,(t,r)=>hF(t,r))&&Na(this.baseMutations,e.baseMutations,(t,r)=>hF(t,r))}}class FT{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){L(e.mutations.length===r.length);let i=dte;const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new FT(e,t,r,i)}}class LT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ete{constructor(e,t){this.count=e,this.unchangedNames=t}}var Et,we;function mF(n){switch(n){default:return O();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0}}function _F(n){if(void 0===n)return lt("GRPC error has no .code"),E.UNKNOWN;switch(n){case Et.OK:return E.OK;case Et.CANCELLED:return E.CANCELLED;case Et.UNKNOWN:return E.UNKNOWN;case Et.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case Et.INTERNAL:return E.INTERNAL;case Et.UNAVAILABLE:return E.UNAVAILABLE;case Et.UNAUTHENTICATED:return E.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case Et.NOT_FOUND:return E.NOT_FOUND;case Et.ALREADY_EXISTS:return E.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return E.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case Et.ABORTED:return E.ABORTED;case Et.OUT_OF_RANGE:return E.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return E.UNIMPLEMENTED;case Et.DATA_LOSS:return E.DATA_LOSS;default:return O()}}(we=Et||(Et={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";const wte=new Pa([4294967295,4294967295],0);function vF(n){const e=function yF(){return new TextEncoder}().encode(n),t=new _ee;return t.update(e),new Uint8Array(t.digest())}function IF(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Pa([t,r],0),new Pa([i,o],0)]}class UT{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ll(`Invalid padding: ${t}`);if(r<0)throw new Ll(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Ll(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Ll(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=Pa.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply(Pa.fromNumber(r)));return 1===i.compare(wte)&&(i=new Pa([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=vF(e),[r,i]=IF(t);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new UT(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Te)return;const t=vF(e),[r,i]=IF(t);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);this.Re(s)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Ll extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ul{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Bl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ul(j.min(),i,new je(te),bn(),se())}}class Bl{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Bl(r,t,se(),se(),se())}}class Np{constructor(e,t,r,i){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=i}}class EF{constructor(e,t){this.targetId=e,this.fe=t}}class wF{constructor(e,t,r=Rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class TF{constructor(){this.ge=0,this.pe=DF(),this.ye=Rt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=se(),t=se(),r=se();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:O()}}),new Bl(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=DF()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,L(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Tte{constructor(e){this.Le=e,this.ke=new Map,this.qe=bn(),this.Qe=CF(),this.Ke=new je(te)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:O()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.fe.count,i=this.Ye(t);if(i){const o=i.target;if(Ap(o))if(0===r){const s=new x(o.path);this.We(t,s,We.newNoDocument(s,j.min()))}else L(1===r);else{const s=this.Ze(t);if(s!==r){const a=this.Xe(e),u=a?this.et(a,e,s):1;0!==u&&(this.He(t),this.Ke=this.Ke.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let s,a;try{s=Ai(r).toUint8Array()}catch(u){if(u instanceof RV)return jn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new UT(s,i,o)}catch(u){return jn(u instanceof Ll?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(t,o,null),i++)}),i}it(e){const t=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&Ap(a.target)){const u=new x(a.target.path);null!==this.qe.get(u)||this.st(s,u)||this.We(s,u,We.newNoDocument(u,e))}o.De&&(t.set(s,o.ve()),o.Fe())}});let r=se();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const c=this.Ye(u);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const i=new Ul(e,t,this.Ke,this.qe,r);return this.qe=bn(),this.Qe=CF(),this.Ke=new je(te),i}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,t)?i.Me(t,1):i.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new TF,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new ke(te),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||D("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new TF),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function CF(){return new je(x.comparator)}function DF(){return new je(x.comparator)}const Cte={asc:"ASCENDING",desc:"DESCENDING"},Dte={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ate={and:"AND",or:"OR"};class bte{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function BT(n,e){return n.useProto3Json||Cl(e)?e:{value:e}}function za(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ste(n,e){return za(n,e.toTimestamp())}function dt(n){return L(!!n),j.fromTimestamp(function(t){const r=to(t);return new Ze(r.seconds,r.nanos)}(n))}function jT(n,e){return $T(n,e).canonicalString()}function $T(n,e){const t=(i=n,new ye(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function bF(n){const e=ye.fromString(n);return L(FF(e)),e}function jl(n,e){return jT(n.databaseId,e.path)}function zr(n,e){const t=bF(e);if(t.get(1)!==n.databaseId.projectId)throw new A(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new A(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new x(PF(t))}function SF(n,e){return jT(n.databaseId,e)}function HT(n){return new ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function PF(n){return L(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function xF(n,e,t){return{name:jl(n,e),fields:t.value.mapValue.fields}}function NF(n,e){return{documents:[SF(n,e.path)]}}function qT(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=SF(n,i);const o=function(c){if(0!==c.length)return VF(Ne.create(c,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const s=function(c){if(0!==c.length)return c.map(l=>{return{field:so((h=l).field),direction:Nte(h.dir)};var h})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=BT(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:t,parent:i};var c}function kF(n){let e=function RF(n){const e=bF(n);return 4===e.length?ye.emptyPath():PF(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){L(1===r);const l=t.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];t.where&&(o=function(d){const h=OF(d);return h instanceof Ne&&RT(h)?h.getFilters():[h]}(t.where));let s=[];t.orderBy&&(s=t.orderBy.map(h=>{return new Pl(Wa((p=h).field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction));var p}));let a=null;t.limit&&(a=function(d){let h;return h="object"==typeof d?d.value:d,Cl(h)?null:h}(t.limit));let u=null;var d;t.startAt&&(u=new oo((d=t.startAt).values||[],!!d.before));let c=null;return t.endAt&&(c=function(d){return new oo(d.values||[],!d.before)}(t.endAt)),function KV(n,e,t,r,i,o,s,a){return new bi(n,e,t,r,i,o,s,a)}(e,i,s,o,a,"F",u,c)}function OF(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Wa(t.unaryFilter.field);return ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Wa(t.unaryFilter.field);return ve.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Wa(t.unaryFilter.field);return ve.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Wa(t.unaryFilter.field);return ve.create(s,"!=",{nullValue:"NULL_VALUE"});default:return O()}}(n):void 0!==n.fieldFilter?ve.create(Wa((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return O()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Ne.create(t.compositeFilter.filters.map(r=>OF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return O()}}(t.compositeFilter.op))}(n):O();var t}function Nte(n){return Cte[n]}function kte(n){return Dte[n]}function Ote(n){return Ate[n]}function so(n){return{fieldPath:n.canonicalString()}}function Wa(n){return Qe.fromServerFormat(n.fieldPath)}function VF(n){return n instanceof ve?function(t){if("=="===t.op){if(MV(t.value))return{unaryFilter:{field:so(t.field),op:"IS_NAN"}};if(xV(t.value))return{unaryFilter:{field:so(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(MV(t.value))return{unaryFilter:{field:so(t.field),op:"IS_NOT_NAN"}};if(xV(t.value))return{unaryFilter:{field:so(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:so(t.field),op:kte(t.op),value:t.value}}}(n):n instanceof Ne?function(t){const r=t.getFilters().map(i=>VF(i));return 1===r.length?r[0]:{compositeFilter:{op:Ote(t.op),filters:r}}}(n):O()}function Vte(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function FF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Pi{constructor(e,t,r,i,o=j.min(),s=j.min(),a=Rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Pi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class LF{constructor(e){this.ct=e}}function zT(n){const e=kF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Sp(e,e.limit,"L"):e}class ds{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(ot(e.integerValue));else if("doubleValue"in e){const r=ot(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Dl(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At(`${r.seconds||""}`),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Ai(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?NV(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):O()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),x.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}ds.bt=new ds;class Gte{constructor(){this._n=new XT}addToCollectionParentIndex(e,t){return this._n.add(t),v.resolve()}getCollectionParents(e,t){return v.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return v.resolve()}deleteFieldIndex(e,t){return v.resolve()}deleteAllFieldIndexes(e){return v.resolve()}createTargetIndexes(e,t){return v.resolve()}getDocumentsMatchingTarget(e,t){return v.resolve(null)}getIndexType(e,t){return v.resolve(0)}getFieldIndexes(e,t){return v.resolve([])}getNextCollectionGroupToUpdate(e){return v.resolve(null)}getMinOffset(e,t){return v.resolve($n.min())}getMinOffsetFromCollectionGroup(e,t){return v.resolve($n.min())}updateCollectionGroup(e,t,r){return v.resolve()}updateIndexEntries(e,t){return v.resolve()}}class XT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ke(ye.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ke(ye.comparator)).toArray()}}new Uint8Array(0);class rn{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(41943040,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class fs{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new fs(0)}static Bn(){return new fs(-1)}}class Yte{constructor(){this.changes=new Si(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,We.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?v.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Zte{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class dL{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Fl(r.mutation,i,An.empty(),Ze.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,t,r=se()){const i=qr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=kl();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=qr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,se()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=bn();const s=Ol(),a=Ol();return t.forEach((u,c)=>{const l=r.get(c.key);i.has(c.key)&&(void 0===l||l.mutation instanceof Ri)?o=o.insert(c.key,c):void 0!==l?(s.set(c.key,l.mutation.getFieldMask()),Fl(l.mutation,c,l.mutation.getFieldMask(),Ze.now())):s.set(c.key,An.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,l)=>s.set(c,l)),t.forEach((c,l)=>{var d;return a.set(c,new Zte(l,null!==(d=s.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Ol();let i=new je((s,a)=>s-a),o=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const a of s)a.keys().forEach(u=>{const c=t.get(u);if(null===c)return;let l=r.get(u)||An.empty();l=a.applyToLocalView(c,l),r.set(u,l);const d=(i.get(a.batchId)||se()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,l=u.value,d=nF();l.forEach(h=>{if(!o.has(h)){const f=dF(t.get(h),r.get(h));null!==f&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,d))}return v.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return x.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):MT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var s}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):v.resolve(qr());let a=-1,u=o;return s.next(c=>v.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(l)?v.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,se())).next(l=>({batchId:a,changes:tF(l)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new x(t)).next(r=>{let i=kl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let s=kl();return this.indexManager.getCollectionParents(e,o).next(a=>v.forEach(a,u=>{const c=(d=t,h=u.child(o),new bi(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt));var d,h;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(l=>{l.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,c)=>{const l=c.getKey();null===s.get(l)&&(s=s.insert(l,We.newInvalidDocument(l)))});let a=kl();return s.forEach((u,c)=>{const l=o.get(u);void 0!==l&&Fl(l.mutation,c,An.empty(),Ze.now()),Nl(t,c)&&(a=a.insert(u,c))}),a})}}class ene{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return v.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:dt(i.createTime)}),v.resolve();var i}getNamedQuery(e,t){return v.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:zT(i.bundledQuery),readTime:dt(i.readTime)}),v.resolve();var i}}class tne{constructor(){this.overlays=new je(x.comparator),this.hr=new Map}getOverlay(e,t){return v.resolve(this.overlays.get(t))}getOverlays(e,t){const r=qr();return v.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),v.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),v.resolve()}getOverlaysForCollection(e,t,r){const i=qr(),o=t.length+1,s=new x(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return v.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new je((c,l)=>c-l);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let l=o.get(c.largestBatchId);null===l&&(l=qr(),o=o.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}const a=qr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return v.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new LT(t,r));let o=this.hr.get(t);void 0===o&&(o=se(),this.hr.set(t,o)),this.hr.set(t,o.add(r.key))}}class ZT{constructor(){this.Pr=new ke(Vt.Ir),this.Tr=new ke(Vt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Vt(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Vt(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new x(new ye([])),r=new Vt(t,e),i=new Vt(t,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new x(new ye([])),r=new Vt(t,e),i=new Vt(t,e+1);let o=se();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const t=new Vt(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Vt{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return x.comparator(e.key,t.key)||te(e.pr,t.pr)}static Er(e,t){return te(e.pr,t.pr)||x.comparator(e.key,t.key)}}class nne{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new ke(Vt.Ir)}checkEmpty(e){return v.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.yr;this.yr++;const s=new VT(o,t,r,i);this.mutationQueue.push(s);for(const a of i)this.wr=this.wr.add(new Vt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return v.resolve(s)}lookupMutationBatch(e,t){return v.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),o=i<0?0:i;return v.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return v.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return v.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Vt(t,0),i=new Vt(t,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{const a=this.Sr(s.pr);o.push(a)}),v.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ke(te);return t.forEach(i=>{const o=new Vt(i,0),s=new Vt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),v.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;x.isDocumentKey(o)||(o=o.child(""));const s=new Vt(new x(o),0);let a=new ke(te);return this.wr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.pr)),!0)},s),v.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){L(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return v.forEach(t.mutations,i=>{const o=new Vt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new Vt(t,0),i=this.wr.firstAfterOrEqual(r);return v.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return v.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class rne{constructor(e){this.vr=e,this.docs=new je(x.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return v.resolve(r?r.document.mutableCopy():We.newInvalidDocument(t))}getEntries(e,t){let r=bn();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():We.newInvalidDocument(i))}),v.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=bn();const s=t.path,a=new x(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:l}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||wT(mV(l),r)<=0||(i.has(l.key)||Nl(t,l))&&(o=o.insert(l.key,l.mutableCopy()))}return v.resolve(o)}getAllFromCollectionGroup(e,t,r,i){O()}Fr(e,t){return v.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ine(this)}getSize(e){return v.resolve(this.size)}}class ine extends Yte{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),v.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class one{constructor(e){this.persistence=e,this.Mr=new Si(t=>os(t),xl),this.lastRemoteSnapshotVersion=j.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ZT,this.targetCount=0,this.Br=fs.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),v.resolve()}getLastRemoteSnapshotVersion(e){return v.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return v.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),v.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),v.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new fs(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,v.resolve()}updateTargetData(e,t){return this.qn(t),v.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,v.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),v.waitFor(o).next(()=>i)}getTargetCount(e){return v.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return v.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),v.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),v.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),v.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return v.resolve(r)}containsKey(e,t){return v.resolve(this.Nr.containsKey(t))}}class eC{constructor(e,t){this.Lr={},this.overlays={},this.kr=new Hn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new one(this),this.indexManager=new Gte,this.remoteDocumentCache=new rne(r=>this.referenceDelegate.Kr(r)),this.serializer=new LF(t),this.$r=new ene(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tne,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Lr[e.toKey()];return r||(r=new nne(t,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){D("MemoryPersistence","Starting transaction:",e);const i=new sne(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,t){return v.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,t)))}}class sne extends See{constructor(e){super(),this.currentSequenceNumber=e}}class jp{constructor(e){this.persistence=e,this.zr=new ZT,this.jr=null}static Hr(e){return new jp(e)}get Jr(){if(this.jr)return this.jr;throw O()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),v.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),v.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),v.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return v.forEach(this.Jr,r=>{const i=x.fromPath(r);return this.Yr(e,i).next(o=>{o||t.removeEntry(i,j.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return v.or([()=>v.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class iC{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=se(),i=se();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new iC(e,t.fromCache,r,i)}}class une{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class fL{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function D7(){return!function w7(){var n;const e=null===(n=If())||void 0===n?void 0:n.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}()?8:ir.v(rt())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ji(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new une;return this.Ji(e,t,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,t,s,a.size)})}).next(()=>o.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Ma()<=_e.DEBUG&&D("QueryEngine","SDK will not create cache indexes for query:",ja(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),v.resolve()):(Ma()<=_e.DEBUG&&D("QueryEngine","Query:",ja(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Ma()<=_e.DEBUG&&D("QueryEngine","The SDK decides to create cache indexes for query:",ja(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_n(t))):v.resolve())}ji(e,t){if(QV(t))return v.resolve(null);let r=_n(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Sp(t,null,"F"),r=_n(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=se(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Zi(t,a);return this.Xi(t,c,s,u.readTime)?this.ji(e,Sp(t,null,"F")):this.es(e,c,t,u)}))})))}Hi(e,t,r,i){return QV(t)||i.isEqual(j.min())?v.resolve(null):this.zi.getDocuments(e,r).next(o=>{const s=this.Zi(t,o);return this.Xi(t,s,r,i)?v.resolve(null):(Ma()<=_e.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ja(t)),this.es(e,s,t,function gV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=j.fromTimestamp(1e9===r?new Ze(t+1,0):new Ze(t,r));return new $n(i,x.empty(),e)}(i,-1)).next(a=>a))})}Zi(e,t){let r=new ke(ZV(e));return t.forEach((i,o)=>{Nl(e,o)&&(r=r.add(o))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,t,r){return Ma()<=_e.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",ja(t)),this.zi.getDocumentsMatchingQuery(e,t,$n.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}}class cne{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new je(te),this.rs=new Si(o=>os(o),xl),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dL(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function gL(n,e){return oC.apply(this,arguments)}function oC(){return oC=m(function*(n,e){const t=P(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=se();for(const c of i){s.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}for(const c of o){a.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}return t.localDocuments.getDocuments(r,u).next(c=>({us:c,removedBatchIds:s,addedBatchIds:a}))})})}),oC.apply(this,arguments)}function lne(n,e){const t=P(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.os.newChangeBuffer({trackRemovals:!0});return function(a,u,c,l){const d=c.batch,h=d.keys();let f=v.resolve();return h.forEach(p=>{f=f.next(()=>l.getEntry(u,p)).next(g=>{const _=c.docVersions.get(p);L(null!==_),g.version.compareTo(_)<0&&(d.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),l.addEntry(g)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=se();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function mL(n){const e=P(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function dne(n,e){const t=P(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((l,d)=>{const h=i.get(d);if(!h)return;a.push(t.Qr.removeMatchingKeys(o,l.removedDocuments,d).next(()=>t.Qr.addMatchingKeys(o,l.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);var g,_,I;null!==e.targetMismatches.get(d)?f=f.withResumeToken(Rt.EMPTY_BYTE_STRING,j.min()).withLastLimboFreeSnapshotVersion(j.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),_=f,I=l,(0===(g=h).resumeToken.approximateByteSize()||_.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8||I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(o,f))});let u=bn(),c=se();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(function _L(n,e,t){let r=se(),i=se();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=bn();return t.forEach((a,u)=>{const c=o.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(j.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):D("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{cs:s,ls:i}})}(o,s,e.documentUpdates).next(l=>{u=l.cs,c=l.ls})),!r.isEqual(j.min())){const l=t.Qr.getLastRemoteSnapshotVersion(o).next(d=>t.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return v.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(t.ns=i,o))}function hne(n,e){const t=P(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xa(n,e){const t=P(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(o=>o?(i=o,v.resolve(i)):t.Qr.allocateTargetId(r).next(s=>(i=new Pi(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Za(n,e,t){return sC.apply(this,arguments)}function sC(){return sC=m(function*(n,e,t){const r=P(n),i=r.ns.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Zi(s))throw s;D("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}),sC.apply(this,arguments)}function Gp(n,e,t){const r=P(n);let i=j.min(),o=se();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,c,l){const d=P(u),h=d.rs.get(l);return void 0!==h?v.resolve(d.ns.get(h)):d.Qr.getTargetData(c,l)}(r,s,_n(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,t?i:j.min(),t?o:se())).next(a=>(function IL(n,e,t){let r=n.ss.get(e)||j.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ss.set(e,r)}(r,function XV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),a),{documents:a,hs:o})))}class dC{constructor(){this.activeTargetIds=function kT(){return fte}()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TL{constructor(){this.no=new dC,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new dC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gne{io(e){}shutdown(){}}class CL{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){D("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){D("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Wp=null;function fC(){return null===Wp?Wp=268435456+Math.round(2147483648*Math.random()):Wp++,"0x"+Wp.toString(16)}const mne={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _ne{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const on="WebChannelConnection";class yne extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+t.host,this.po=`projects/${i}/databases/${o}`,this.yo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(t,r,i,o,s){const a=fC(),u=this.bo(t,r.toUriEncodedString());D("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,o,s),this.Co(t,u,c,i).then(l=>(D("RestConnection",`Received RPC '${t}' ${a}: `,l),l),l=>{throw jn("RestConnection",`RPC '${t}' ${a} failed with error: `,l,"url: ",u,"request:",i),l})}vo(t,r,i,o,s,a){return this.So(t,r,i,o,s)}Do(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+xa,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}bo(t,r){return`${this.fo}/v1/${r}:${mne[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,r,i){const o=fC();return new Promise((s,a)=>{const u=new mee;u.setWithCredentials(!0),u.listenOnce(pee.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case vT.NO_ERROR:const l=u.getResponseJson();D(on,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),s(l);break;case vT.TIMEOUT:D(on,`RPC '${e}' ${o} timed out`),a(new A(E.DEADLINE_EXCEEDED,"Request time out"));break;case vT.HTTP_ERROR:const d=u.getStatus();if(D(on,`RPC '${e}' ${o} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h?.error;if(f&&f.status&&f.message){const p=function(_){const I=_.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(I)>=0?I:E.UNKNOWN}(f.status);a(new A(p,f.message))}else a(new A(E.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new A(E.UNAVAILABLE,"Connection failed."));break;default:O()}}finally{D(on,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);D(on,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",c,r,15)})}Fo(e,t,r){const i=fC(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=hee(),a=fee(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const l=o.join("");D(on,`Creating RPC '${e}' stream ${i}: ${l}`,u);const d=s.createWebChannel(l,u);let h=!1,f=!1;const p=new _ne({lo:_=>{f?D(on,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(h||(D(on,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),D(on,`RPC '${e}' stream ${i} sending:`,_),d.send(_))},ho:()=>d.close()}),g=(_,I,w)=>{_.listen(I,y=>{try{w(y)}catch(b){setTimeout(()=>{throw b},0)}})};return g(d,_p.EventType.OPEN,()=>{f||D(on,`RPC '${e}' stream ${i} transport opened.`)}),g(d,_p.EventType.CLOSE,()=>{f||(f=!0,D(on,`RPC '${e}' stream ${i} transport closed`),p.Vo())}),g(d,_p.EventType.ERROR,_=>{f||(f=!0,jn(on,`RPC '${e}' stream ${i} transport errored:`,_),p.Vo(new A(E.UNAVAILABLE,"The operation could not be completed")))}),g(d,_p.EventType.MESSAGE,_=>{var I;if(!f){const w=_.data[0];L(!!w);const y=w,b=y.error||(null===(I=y[0])||void 0===I?void 0:I.error);if(b){D(on,`RPC '${e}' stream ${i} received error:`,b);const $=b.status;let q=function(Ed){const Ag=Et[Ed];if(void 0!==Ag)return _F(Ag)}($),et=b.message;void 0===q&&(q=E.INTERNAL,et="Unknown error status: "+$+" with message "+b.message),f=!0,p.Vo(new A(q,et)),d.close()}else D(on,`RPC '${e}' stream ${i} received:`,w),p.mo(w)}}),g(a,gee.STAT_EVENT,_=>{_.stat===cV.PROXY?D(on,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===cV.NOPROXY&&D(on,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}}function Kp(){return typeof document<"u"?document:null}function Yl(n){return new bte(n,!0)}class pC{constructor(e,t,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=t,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,t-r);i>0&&D("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class AL{constructor(e,t,r,i,o,s,a,u){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new pC(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return m(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return m(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,t){var r=this;return m(function*(){r.n_(),r.r_(),r.jo.cancel(),r.Wo++,4!==e?r.jo.reset():t&&t.code===E.RESOURCE_EXHAUSTED?(lt(t.toString()),lt("Using maximum backoff delay to prevent overloading the backend."),r.jo.ko()):t&&t.code===E.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.i_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.To(t)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===t&&this.o_(r,i)},r=>{e(()=>{const i=new A(E.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,t){const r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){var e=this;this.state=5,this.jo.qo(m(function*(){e.state=0,e.start()}))}__(e){return D("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget(()=>this.Wo===e?t():(D("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vne extends AL{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function Pte(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:O(),i=e.targetChange.targetIds||[],o=function(c,l){return c.useProto3Json?(L(void 0===l||"string"==typeof l),Rt.fromBase64String(l||"")):(L(void 0===l||l instanceof Uint8Array),Rt.fromUint8Array(l||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const l=void 0===c.code?E.UNKNOWN:_F(c.code);return new A(l,c.message||"")}(s);t=new wF(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=zr(n,r.document.name),o=dt(r.document.updateTime),s=r.document.createTime?dt(r.document.createTime):j.min(),a=new qt({mapValue:{fields:r.document.fields}}),u=We.newFoundDocument(i,o,s,a);t=new Np(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=zr(n,r.document),o=r.readTime?dt(r.readTime):j.min(),s=We.newNoDocument(i,o);t=new Np([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=zr(n,r.document);t=new Np([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return O();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new Ete(i,o);t=new EF(r.targetId,s)}}var c;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return j.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?j.min():s.readTime?dt(s.readTime):j.min()}(e);return this.listener.u_(t,r)}c_(e){const t={};t.database=HT(this.serializer),t.addTarget=function(o,s){let a;const u=s.target;if(a=Ap(u)?{documents:NF(o,u)}:{query:qT(o,u).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=AF(o,s.resumeToken);const c=BT(o,s.expectedCount);null!==c&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(j.min())>0){a.readTime=za(o,s.snapshotVersion.toTimestamp());const c=BT(o,s.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function Mte(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return O()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.t_(t)}l_(e){const t={};t.database=HT(this.serializer),t.removeTarget=e,this.t_(t)}}class Ine extends AL{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(L(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function xte(n,e){return n&&n.length>0?(L(void 0!==e),n.map(t=>function(i,o){let s=dt(i.updateTime?i.updateTime:o);return s.isEqual(j.min())&&(s=dt(o)),new _te(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=dt(e.commitTime);return this.listener.T_(r,t)}return L(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=HT(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function $l(n,e){let t;if(e instanceof Ga)t={update:xF(n,e.key,e.value)};else if(e instanceof qa)t={delete:jl(n,e.key)};else if(e instanceof Ri)t={update:xF(n,e.key,e.data),updateMask:Vte(e.fieldMask)};else{if(!(e instanceof OT))return O();t={verify:jl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof $a)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ss)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof as)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ha)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw O()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Ste(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:O()),t;var o}(this.serializer,r))};this.t_(t)}}class Ene extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new A(E.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,$T(t,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new A(E.UNKNOWN,o.toString())})}vo(e,t,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,$T(t,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new A(E.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class Tne{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(lt(t),this.g_=!1):D("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Cne{constructor(e,t,r,i,o){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(a=>{r.enqueueAndForget(m(function*(){var u;lo(s)&&(D("RemoteStore","Restarting streams for network reachability change."),yield(u=m(function*(l){const d=P(l);d.v_.add(4),yield eu(d),d.x_.set("Unknown"),d.v_.delete(4),yield Jl(d)}),function c(l){return u.apply(this,arguments)})(s))}))}),this.x_=new Tne(r,i)}}function Jl(n){return mC.apply(this,arguments)}function mC(){return mC=m(function*(n){if(lo(n))for(const e of n.F_)yield e(!0)}),mC.apply(this,arguments)}function eu(n){return _C.apply(this,arguments)}function _C(){return _C=m(function*(n){for(const e of n.F_)yield e(!1)}),_C.apply(this,arguments)}function Qp(n,e){const t=P(n);t.C_.has(e.targetId)||(t.C_.set(e.targetId,e),IC(t)?vC(t):nu(t).Jo()&&yC(t,e))}function Xl(n,e){const t=P(n),r=nu(t);t.C_.delete(e),r.Jo()&&bL(t,e),0===t.C_.size&&(r.Jo()?r.Xo():lo(t)&&t.x_.set("Unknown"))}function yC(n,e){if(n.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(j.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}nu(n).c_(e)}function bL(n,e){n.O_.Oe(e),nu(n).l_(e)}function vC(n){n.O_=new Tte({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.C_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),nu(n).start(),n.x_.p_()}function IC(n){return lo(n)&&!nu(n).Ho()&&n.C_.size>0}function lo(n){return 0===P(n).v_.size}function SL(n){n.O_=void 0}function Dne(n){return EC.apply(this,arguments)}function EC(){return EC=m(function*(n){n.C_.forEach((e,t)=>{yC(n,e)})}),EC.apply(this,arguments)}function Ane(n,e){return wC.apply(this,arguments)}function wC(){return wC=m(function*(n,e){SL(n),IC(n)?(n.x_.S_(e),vC(n)):n.x_.set("Unknown")}),wC.apply(this,arguments)}function bne(n,e,t){return TC.apply(this,arguments)}function TC(){return TC=m(function*(n,e,t){if(n.x_.set("Online"),e instanceof wF&&2===e.state&&e.cause)try{yield(r=m(function*(o,s){const a=s.cause;for(const u of s.targetIds)o.C_.has(u)&&(yield o.remoteSyncer.rejectListen(u,a),o.C_.delete(u),o.O_.removeTarget(u))}),function i(o,s){return r.apply(this,arguments)})(n,e)}catch(r){D("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Yp(n,r)}else if(e instanceof Np?n.O_.$e(e):e instanceof EF?n.O_.Je(e):n.O_.Ge(e),!t.isEqual(j.min()))try{const r=yield mL(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){const a=o.O_.it(s);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const l=o.C_.get(c);l&&o.C_.set(c,l.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,c)=>{const l=o.C_.get(u);if(!l)return;o.C_.set(u,l.withResumeToken(Rt.EMPTY_BYTE_STRING,l.snapshotVersion)),bL(o,u);const d=new Pi(l.target,u,c,l.sequenceNumber);yC(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){D("RemoteStore","Failed to raise snapshot:",r),yield Yp(n,r)}var r}),TC.apply(this,arguments)}function Yp(n,e,t){return CC.apply(this,arguments)}function CC(){return CC=m(function*(n,e,t){if(!Zi(e))throw e;n.v_.add(1),yield eu(n),n.x_.set("Offline"),t||(t=()=>mL(n.localStore)),n.asyncQueue.enqueueRetryable(m(function*(){D("RemoteStore","Retrying IndexedDB access"),yield t(),n.v_.delete(1),yield Jl(n)}))}),CC.apply(this,arguments)}function RL(n,e){return e().catch(t=>Yp(n,t,e))}function tu(n){return DC.apply(this,arguments)}function DC(){return DC=m(function*(n){const e=P(n),t=ho(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Sne(e);)try{const i=yield hne(e.localStore,r);if(null===i){0===e.D_.length&&t.Xo();break}r=i.batchId,Rne(e,i)}catch(i){yield Yp(e,i)}PL(e)&&xL(e)}),DC.apply(this,arguments)}function Sne(n){return lo(n)&&n.D_.length<10}function Rne(n,e){n.D_.push(e);const t=ho(n);t.Jo()&&t.P_&&t.I_(e.mutations)}function PL(n){return lo(n)&&!ho(n).Ho()&&n.D_.length>0}function xL(n){ho(n).start()}function Pne(n){return AC.apply(this,arguments)}function AC(){return AC=m(function*(n){ho(n).d_()}),AC.apply(this,arguments)}function xne(n){return bC.apply(this,arguments)}function bC(){return bC=m(function*(n){const e=ho(n);for(const t of n.D_)e.I_(t.mutations)}),bC.apply(this,arguments)}function Mne(n,e,t){return SC.apply(this,arguments)}function SC(){return SC=m(function*(n,e,t){const r=n.D_.shift(),i=FT.from(r,e,t);yield RL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield tu(n)}),SC.apply(this,arguments)}function Nne(n,e){return RC.apply(this,arguments)}function RC(){return RC=m(function*(n,e){var t;e&&ho(n).P_&&(yield(t=m(function*(i,o){if(mF(a=o.code)&&a!==E.ABORTED){const s=i.D_.shift();ho(i).Zo(),yield RL(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield tu(i)}var a}),function r(i,o){return t.apply(this,arguments)})(n,e)),PL(n)&&xL(n)}),RC.apply(this,arguments)}function ML(n,e){return PC.apply(this,arguments)}function PC(){return PC=m(function*(n,e){const t=P(n);t.asyncQueue.verifyOperationInProgress(),D("RemoteStore","RemoteStore received new credentials");const r=lo(t);t.v_.add(3),yield eu(t),r&&t.x_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.v_.delete(3),yield Jl(t)}),PC.apply(this,arguments)}function MC(){return MC=m(function*(n,e){const t=P(n);e?(t.v_.delete(2),yield Jl(t)):e||(t.v_.add(2),yield eu(t),t.x_.set("Unknown"))}),MC.apply(this,arguments)}function nu(n){return n.N_||(n.N_=function(t,r,i){const o=P(t);return o.R_(),new vne(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:Dne.bind(null,n),To:Ane.bind(null,n),u_:bne.bind(null,n)}),n.F_.push(function(){var e=m(function*(t){t?(n.N_.Zo(),IC(n)?vC(n):n.x_.set("Unknown")):(yield n.N_.stop(),SL(n))});return function(t){return e.apply(this,arguments)}}())),n.N_}function ho(n){return n.B_||(n.B_=function(t,r,i){const o=P(t);return o.R_(),new Ine(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:Pne.bind(null,n),To:Nne.bind(null,n),E_:xne.bind(null,n),T_:Mne.bind(null,n)}),n.F_.push(function(){var e=m(function*(t){t?(n.B_.Zo(),yield tu(n)):(yield n.B_.stop(),n.D_.length>0&&(D("RemoteStore",`Stopping write stream with ${n.D_.length} pending writes`),n.D_=[]))});return function(t){return e.apply(this,arguments)}}())),n.B_}class NC{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new St,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,a=new NC(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new A(E.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ru(n,e){if(lt("AsyncQueue",`${e}: ${n}`),Zi(n))return new A(E.UNAVAILABLE,`${e}: ${n}`);throw n}class iu{constructor(e){this.comparator=e?(t,r)=>e(t,r)||x.comparator(t.key,r.key):(t,r)=>x.comparator(t.key,r.key),this.keyedMap=kl(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new iu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof iu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new iu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class NL{constructor(){this.L_=new je(x.comparator)}track(e){const t=e.doc.key,r=this.L_.get(t);r?0!==e.type&&3===r.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==r.type?this.L_=this.L_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.L_=this.L_.remove(t):1===e.type&&2===r.type?this.L_=this.L_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):O():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal((t,r)=>{e.push(r)}),e}}class ou{constructor(e,t,r,i,o,s,a,u,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new ou(e,t,iu.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ml(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class kne{constructor(){this.q_=void 0,this.Q_=[]}}class One{constructor(){this.queries=new Si(e=>JV(e),Ml),this.onlineState="Unknown",this.K_=new Set}}function kC(n,e){return OC.apply(this,arguments)}function OC(){return OC=m(function*(n,e){const t=P(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new kne),i)try{o.q_=yield t.onListen(r)}catch(s){const a=ru(s,`Initialization of query '${ja(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,o),o.Q_.push(e),e.U_(t.onlineState),o.q_&&e.W_(o.q_)&&LC(t)}),OC.apply(this,arguments)}function VC(n,e){return FC.apply(this,arguments)}function FC(){return FC=m(function*(n,e){const t=P(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),i=0===o.Q_.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),FC.apply(this,arguments)}function Vne(n,e){const t=P(n);let r=!1;for(const i of e){const s=t.queries.get(i.query);if(s){for(const a of s.Q_)a.W_(i)&&(r=!0);s.q_=i}}r&&LC(t)}function Fne(n,e,t){const r=P(n),i=r.queries.get(e);if(i)for(const o of i.Q_)o.onError(t);r.queries.delete(e)}function LC(n){n.K_.forEach(e=>{e.next()})}class UC{constructor(e,t,r){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ou(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){return!e.fromCache||(!this.options.Z_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=ou.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class VL{constructor(e){this.key=e}}class FL{constructor(e){this.key=e}}class LL{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=se(),this.mutatedKeys=se(),this.ua=ZV(e),this.ca=new iu(this.ua)}get la(){return this.oa}ha(e,t){const r=t?t.Pa:new NL,i=t?t.ca:this.ca;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const h=i.get(l),f=Nl(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let _=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),_=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),_=!0,(u&&this.ua(f,u)>0||c&&this.ua(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),_=!0):h&&!f&&(r.track({type:1,doc:h}),_=!0,(u||c)&&(a=!0)),_&&(f?(s=s.add(f),o=g?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const l="F"===this.query.limitType?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ca:s,Pa:r,Xi:a,mutatedKeys:o}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort((l,d)=>function(f,p){const g=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return O()}};return g(f)-g(p)}(l.type,d.type)||this.ua(l.doc,d.doc)),this.Ta(r),i=null!=i&&i;const a=t&&!i?this.Ea():[],u=0===this.aa.size&&this.current&&!i?1:0,c=u!==this._a;return this._a=u,0!==s.length||c?{snapshot:new ou(this.query,e.ca,o,s,e.mutatedKeys,0===u,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new NL,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(t=>this.oa=this.oa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.oa=this.oa.delete(t)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=se(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const t=[];return e.forEach(r=>{this.aa.has(r)||t.push(new FL(r))}),this.aa.forEach(r=>{e.has(r)||t.push(new VL(r))}),t}Ra(e){this.oa=e.hs,this.aa=se();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return ou.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class Bne{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jne{constructor(e){this.key=e,this.ma=!1}}class $ne{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Si(a=>JV(a),Ml),this.pa=new Map,this.ya=new Set,this.wa=new je(x.comparator),this.Sa=new Map,this.ba=new ZT,this.Da={},this.Ca=new Map,this.va=fs.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function Hne(n,e){return BC.apply(this,arguments)}function BC(){return BC=m(function*(n,e){const t=cD(n);let r,i;const o=t.ga.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{const s=yield Xa(t.localStore,_n(e)),a=t.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield jC(t,e,r,"current"===a,s.resumeToken),t.isPrimaryClient&&Qp(t.remoteStore,s)}return i}),BC.apply(this,arguments)}function jC(n,e,t,r,i){return $C.apply(this,arguments)}function $C(){return $C=m(function*(n,e,t,r,i){n.Ma=(d,h,f)=>{return(p=m(function*(_,I,w,y){let b=I.view.ha(w);b.Xi&&(b=yield Gp(_.localStore,I.query,!1).then(({documents:Rn})=>I.view.ha(Rn,b)));const $=y&&y.targetChanges.get(I.targetId),q=y&&null!=y.targetMismatches.get(I.targetId),et=I.view.applyChanges(b,_.isPrimaryClient,$,q);return XC(_,I.targetId,et.da),et.snapshot}),function g(_,I,w,y){return p.apply(this,arguments)})(n,d,h,f);var p};const o=yield Gp(n.localStore,e,!0),s=new LL(e,o.hs),a=s.ha(o.documents),u=Bl.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),c=s.applyChanges(a,n.isPrimaryClient,u);XC(n,t,c.da);const l=new Bne(e,t,s);return n.ga.set(e,l),n.pa.has(t)?n.pa.get(t).push(e):n.pa.set(t,[e]),c.snapshot}),$C.apply(this,arguments)}function Gne(n,e){return HC.apply(this,arguments)}function HC(){return HC=m(function*(n,e){const t=P(n),r=t.ga.get(e),i=t.pa.get(r.targetId);if(i.length>1)return t.pa.set(r.targetId,i.filter(o=>!Ml(o,e))),void t.ga.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Za(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Xl(t.remoteStore,r.targetId),su(t,r.targetId)}).catch(Xi))):(su(t,r.targetId),yield Za(t.localStore,r.targetId,!0))}),HC.apply(this,arguments)}function GC(){return GC=m(function*(n,e,t){const r=lD(n);try{const i=yield function(s,a){const u=P(s),c=Ze.now(),l=a.reduce((f,p)=>f.add(p.key),se());let d,h;return u.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=bn(),g=se();return u.os.getEntries(f,l).next(_=>{p=_,p.forEach((I,w)=>{w.isValidDocument()||(g=g.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(f,p)).next(_=>{d=_;const I=[];for(const w of a){const y=vte(w,d.get(w.key).overlayedDocument);null!=y&&I.push(new Ri(w.key,y,VV(y.value.mapValue),Ye.exists(!0)))}return u.mutationQueue.addMutationBatch(f,c,I,a)}).next(_=>{h=_;const I=_.applyToLocalDocumentSet(d,g);return u.documentOverlayCache.saveOverlays(f,_.batchId,I)})}).then(()=>({batchId:h.batchId,changes:tF(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let c=s.Da[s.currentUser.toKey()];c||(c=new je(te)),c=c.insert(a,u),s.Da[s.currentUser.toKey()]=c}(r,i.batchId,t),yield xi(r,i.changes),yield tu(r.remoteStore)}catch(i){const o=ru(i,"Failed to persist write");t.reject(o)}}),GC.apply(this,arguments)}function UL(n,e){return qC.apply(this,arguments)}function qC(){return qC=m(function*(n,e){const t=P(n);try{const r=yield dne(t.localStore,e);e.targetChanges.forEach((i,o)=>{const s=t.Sa.get(o);s&&(L(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.ma=!0:i.modifiedDocuments.size>0?L(s.ma):i.removedDocuments.size>0&&(L(s.ma),s.ma=!1))}),yield xi(t,r,e)}catch(r){yield Xi(r)}}),qC.apply(this,arguments)}function BL(n,e,t){const r=P(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ga.forEach((o,s)=>{const a=s.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=P(s);u.onlineState=a;let c=!1;u.queries.forEach((l,d)=>{for(const h of d.Q_)h.U_(a)&&(c=!0)}),c&&LC(u)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function zne(n,e,t){return zC.apply(this,arguments)}function zC(){return zC=m(function*(n,e,t){const r=P(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Sa.get(e),o=i&&i.key;if(o){let s=new je(x.comparator);s=s.insert(o,We.newNoDocument(o,j.min()));const a=se().add(o),u=new Ul(j.min(),new Map,new je(te),s,a);yield UL(r,u),r.wa=r.wa.remove(o),r.Sa.delete(e),ZC(r)}else yield Za(r.localStore,e,!1).then(()=>su(r,e,t)).catch(Xi)}),zC.apply(this,arguments)}function Wne(n,e){return WC.apply(this,arguments)}function WC(){return WC=m(function*(n,e){const t=P(n),r=e.batch.batchId;try{const i=yield lne(t.localStore,e);JC(t,r,null),YC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield xi(t,i)}catch(i){yield Xi(i)}}),WC.apply(this,arguments)}function Kne(n,e,t){return KC.apply(this,arguments)}function KC(){return KC=m(function*(n,e,t){const r=P(n);try{const i=yield function(s,a){const u=P(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return u.mutationQueue.lookupMutationBatch(c,a).next(d=>(L(null!==d),l=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,l,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>u.localDocuments.getDocuments(c,l))})}(r.localStore,e);JC(r,e,t),YC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield xi(r,i)}catch(i){yield Xi(i)}}),KC.apply(this,arguments)}function YC(n,e){(n.Ca.get(e)||[]).forEach(t=>{t.resolve()}),n.Ca.delete(e)}function JC(n,e,t){const r=P(n);let i=r.Da[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function su(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.pa.get(e))n.ga.delete(r),t&&n.fa.xa(r,t);n.pa.delete(e),n.isPrimaryClient&&n.ba.Vr(e).forEach(r=>{n.ba.containsKey(r)||jL(n,r)})}function jL(n,e){n.ya.delete(e.path.canonicalString());const t=n.wa.get(e);null!==t&&(Xl(n.remoteStore,t),n.wa=n.wa.remove(e),n.Sa.delete(t),ZC(n))}function XC(n,e,t){for(const r of t)r instanceof VL?(n.ba.addReference(r.key,e),Yne(n,r)):r instanceof FL?(D("SyncEngine","Document no longer in limbo: "+r.key),n.ba.removeReference(r.key,e),n.ba.containsKey(r.key)||jL(n,r.key)):O()}function Yne(n,e){const t=e.key,r=t.path.canonicalString();n.wa.get(t)||n.ya.has(r)||(D("SyncEngine","New document in limbo: "+t),n.ya.add(r),ZC(n))}function ZC(n){for(;n.ya.size>0&&n.wa.size<n.maxConcurrentLimboResolutions;){const e=n.ya.values().next().value;n.ya.delete(e);const t=new x(ye.fromString(e)),r=n.va.next();n.Sa.set(r,new jne(t)),n.wa=n.wa.insert(t,r),Qp(n.remoteStore,new Pi(_n(Ua(t.path)),r,"TargetPurposeLimboResolution",Hn._e))}}function xi(n,e,t){return eD.apply(this,arguments)}function eD(){return eD=m(function*(n,e,t){const r=P(n),i=[],o=[],s=[];var a;r.ga.isEmpty()||(r.ga.forEach((a,u)=>{s.push(r.Ma(u,e,t).then(c=>{if((c||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);const l=iC.Ki(u.targetId,c);o.push(l)}}))}),yield Promise.all(s),r.fa.u_(i),yield(a=m(function*(c,l){const d=P(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>v.forEach(l,f=>v.forEach(f.qi,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>v.forEach(f.Qi,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Zi(h))throw h;D("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const f=h.targetId;if(!h.fromCache){const p=d.ns.get(f),_=p.withLastLimboFreeSnapshotVersion(p.snapshotVersion);d.ns=d.ns.insert(f,_)}}}),function u(c,l){return a.apply(this,arguments)})(r.localStore,o))}),eD.apply(this,arguments)}function Jne(n,e){return tD.apply(this,arguments)}function tD(){return tD=m(function*(n,e){const t=P(n);if(!t.currentUser.isEqual(e)){D("SyncEngine","User change. New user:",e.toKey());const r=yield gL(t.localStore,e);t.currentUser=e,(o=t).Ca.forEach(a=>{a.forEach(u=>{u.reject(new A(E.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ca.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield xi(t,r.us)}var o}),tD.apply(this,arguments)}function Xne(n,e){const t=P(n),r=t.Sa.get(e);if(r&&r.ma)return se().add(r.key);{let i=se();const o=t.pa.get(e);if(!o)return i;for(const s of o){const a=t.ga.get(s);i=i.unionWith(a.view.la)}return i}}function cD(n){const e=P(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=UL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xne.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zne.bind(null,e),e.fa.u_=Vne.bind(null,e.eventManager),e.fa.xa=Fne.bind(null,e.eventManager),e}function lD(n){const e=P(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wne.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Kne.bind(null,e),e}class Jp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return m(function*(){t.serializer=Yl(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function pL(n,e,t,r){return new cne(n,e,t,r)}(this.persistence,new fL,e.initialUser,this.serializer)}createPersistence(e){return new eC(jp.Hr,this.serializer)}createSharedClientState(e){return new TL}terminate(){var e=this;return m(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class au{initialize(e,t){var r=this;return m(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>BL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Jne.bind(null,r.syncEngine),yield function xC(n,e){return MC.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new One}createDatastore(e){const t=Yl(e.databaseInfo.databaseId),r=new yne(e.databaseInfo);return new Ene(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,o=e.asyncQueue,s=t=>BL(this.syncEngine,t,0),a=CL.D()?new CL:new gne,new Cne(r,i,o,s,a);var r,i,o,s,a}createSyncEngine(e,t){return function(i,o,s,a,u,c,l){const d=new $ne(i,o,s,a,u,c);return l&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return m(function*(){var t,r;yield(r=m(function*(o){const s=P(o);D("RemoteStore","RemoteStore shutting down."),s.v_.add(5),yield eu(s),s.M_.shutdown(),s.x_.set("Unknown")}),function i(o){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}class Xp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):lt("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class dre{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=kt.UNAUTHENTICATED,this.clientId=fV.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var s=m(function*(a){D("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(r,s=>(D("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new A(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new St;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(m(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=ru(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Zp(n,e){return dD.apply(this,arguments)}function dD(){return dD=m(function*(n,e){n.asyncQueue.verifyOperationInProgress(),D("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=m(function*(o){r.isEqual(o)||(yield gL(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),dD.apply(this,arguments)}function hD(n,e){return fD.apply(this,arguments)}function fD(){return fD=m(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield pD(n);D("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>ML(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>ML(e.remoteStore,i)),n._onlineComponents=e}),fD.apply(this,arguments)}function WL(n){return"FirebaseError"===n.name?n.code===E.FAILED_PRECONDITION||n.code===E.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function pD(n){return gD.apply(this,arguments)}function gD(){return gD=m(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){D("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Zp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!WL(t))throw t;jn("Error using user provided cache. Falling back to memory cache: "+t),yield Zp(n,new Jp)}}else D("FirestoreClient","Using default OfflineComponentProvider"),yield Zp(n,new Jp);return n._offlineComponents}),gD.apply(this,arguments)}function eg(n){return mD.apply(this,arguments)}function mD(){return mD=m(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(D("FirestoreClient","Using user provided OnlineComponentProvider"),yield hD(n,n._uninitializedComponentsProvider._online)):(D("FirestoreClient","Using default OnlineComponentProvider"),yield hD(n,new au))),n._onlineComponents}),mD.apply(this,arguments)}function cu(n){return yD.apply(this,arguments)}function yD(){return yD=m(function*(n){const e=yield eg(n),t=e.eventManager;return t.onListen=Hne.bind(null,e.syncEngine),t.onUnlisten=Gne.bind(null,e.syncEngine),t}),yD.apply(this,arguments)}function ZL(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const e2=new Map;function vD(n,e,t){if(!t)throw new A(E.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function t2(n){if(!x.isDocumentKey(n))throw new A(E.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function n2(n){if(x.isDocumentKey(n))throw new A(E.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tg(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":O()}function Ie(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new A(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tg(n);throw new A(E.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class i2{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new A(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new A(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function wre(n,e,t,r){if(!0===e&&!0===r)throw new A(E.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=ZL(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new A(E.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new A(E.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new A(E.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zl{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i2({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new A(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new A(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i2(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new yee;switch(r.type){case"firstParty":return new wee(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new A(E.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=e2.get(t);r&&(D("ComponentProvider","Removing Datastore"),e2.delete(t),r.terminate())}(this),Promise.resolve()}}class zt{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zt(this.firestore,e,this._query)}}class ht{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ht(this.firestore,e,this._key)}}class Wr extends zt{constructor(e,t,r){super(e,t,Ua(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new x(e))}withConverter(e){return new Wr(this.firestore,e,this._path)}}function ID(n,e,...t){if(n=pn(n),vD("collection","path",e),n instanceof Zl){const r=ye.fromString(e,...t);return n2(r),new Wr(n,null,r)}{if(!(n instanceof ht||n instanceof Wr))throw new A(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ye.fromString(e,...t));return n2(r),new Wr(n.firestore,null,r)}}function ng(n,e,...t){if(n=pn(n),1===arguments.length&&(e=fV.newId()),vD("doc","path",e),n instanceof Zl){const r=ye.fromString(e,...t);return t2(r),new ht(n,null,new x(r))}{if(!(n instanceof ht||n instanceof Wr))throw new A(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ye.fromString(e,...t));return t2(r),new ht(n.firestore,n instanceof Wr?n.converter:null,new x(r))}}class Cre{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new pC(this,"async_queue_retry"),this._u=()=>{const t=Kp();t&&D("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const e=Kp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=Kp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const t=new St;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){var e=this;return m(function*(){if(0!==e.eu.length){try{yield e.eu[0](),e.eu.shift(),e.jo.reset()}catch(t){if(!Zi(t))throw t;D("AsyncQueue","Operation failed with retryable error: "+t)}e.eu.length>0&&e.jo.qo(()=>e.cu())}})()}uu(e){const t=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{throw this.ru=r,this.iu=!1,lt("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.iu=!1,r))));return this.Xa=t,t}enqueueAfterDelay(e,t,r){this.au(),this.ou.indexOf(e)>-1&&(t=0);const i=NC.createAndSchedule(this,e,t,r,o=>this.lu(o));return this.nu.push(i),i}au(){this.ru&&O()}verifyOperationInProgress(){}hu(){var e=this;return m(function*(){let t;do{t=e.Xa,yield t}while(t!==e.Xa)})()}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}class $e extends Zl{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Cre,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||s2(this),this._firestoreClient.terminate()}}function Are(n,e){const r="string"==typeof n?n:e||"(default)",i=zi("object"==typeof n?n:Tv(),"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(n=>{const e=BN("firestore");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})();o&&function Tre(n,e,t,r={}){var i;const o=(n=Ie(n,Zl))._getSettings(),s=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&jn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=kt.MOCK_USER;else{a=function I7(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[yf(JSON.stringify({alg:"none",type:"JWT"})),yf(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new A(E.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new kt(c)}n._authCredentials=new vee(new dV(a,u))}}(i,...o)}return i}function ft(n){return n._firestoreClient||s2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function s2(n){var e,t,r;const i=n._freezeSettings(),o=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Xee(n._databaseId,u,n._persistenceKey,(l=i).host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,ZL(l.experimentalLongPollingOptions),l.useFetchStreams));var u,l;n._firestoreClient=new dre(n._authCredentials,n._appCheckCredentials,n._queue,o),(null===(t=i.localCache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class gs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gs(Rt.fromBase64String(e))}catch(t){throw new A(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gs(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class lu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new A(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class c2{constructor(e){this._methodName=e}}class wD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new A(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new A(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return te(this._lat,e._lat)||te(this._long,e._long)}}const Sre=/^__.*__$/;class Rre{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ri(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ga(e,this.data,t,this.fieldTransforms)}}function d2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw O()}}class rg{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new rg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return og(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(d2(this.du)&&Sre.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Pre{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Yl(e)}Su(e,t,r,i=!1){return new rg({du:e,methodName:t,wu:r,path:Qe.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function du(n){const e=n._freezeSettings(),t=Yl(n._databaseId);return new Pre(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TD(n,e,t,r,i,o={}){const s=n.Su(o.merge||o.mergeFields?2:0,e,t,i);SD("Data must be an object, but it was:",s,r);const a=m2(r,s);let u,c;if(o.merge)u=new An(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const l=[];for(const d of o.mergeFields){const h=nd(e,d,t);if(!s.contains(h))throw new A(E.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);y2(l,h)||l.push(h)}u=new An(l),c=s.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=s.fieldTransforms;return new Rre(new qt(a),u,c)}function ms(n,e){if(_2(n=pn(n)))return SD("Unsupported field value:",e,n),m2(n,e);if(n instanceof c2)return function(r,i){if(!d2(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=ms(a,i.gu(s));null==u&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if(null===(r=pn(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return oF(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=Ze.fromDate(r);return{timestampValue:za(i.serializer,o)}}if(r instanceof Ze){const o=new Ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:za(i.serializer,o)}}if(r instanceof wD)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gs)return{bytesValue:AF(i.serializer,r._byteString)};if(r instanceof ht){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.pu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:jT(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${tg(r)}`)}(n,e)}function m2(n,e){const t={};return bV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):eo(n,(r,i)=>{const o=ms(i,e.Ru(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function _2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ze||n instanceof wD||n instanceof gs||n instanceof ht||n instanceof c2)}function SD(n,e,t){if(!_2(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=tg(t);throw e.pu("an object"===r?n+" a custom object":n+" "+r)}var i}function nd(n,e,t){if((e=pn(e))instanceof lu)return e._internalPath;if("string"==typeof e)return ig(n,e);throw og("Field path arguments must be of type string or ",n,!1,void 0,t)}const xre=new RegExp("[~\\*/\\[\\]]");function ig(n,e,t){if(e.search(xre)>=0)throw og(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new lu(...e.split("."))._internalPath}catch{throw og(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function og(n,e,t,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new A(E.INVALID_ARGUMENT,a+n+u)}function y2(n,e){return n.some(t=>t.isEqual(e))}class RD{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Mre(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Mre extends RD{data(){return super.data()}}function sg(n,e){return"string"==typeof e?ig(n,e):e instanceof lu?e._internalPath:e._delegate._internalPath}class PD{}class I2 extends PD{}class rd extends I2{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new rd(e,t,r)}_apply(e){const t=this._parse(e);return C2(e._query,t),new zt(e.firestore,e.converter,NT(e._query,t))}_parse(e){const t=du(e.firestore);return function(o,s,a,u,c,l,d){let h;if(c.isKeyField()){if("array-contains"===l||"array-contains-any"===l)throw new A(E.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if("in"===l||"not-in"===l){T2(d,l);const f=[];for(const p of d)f.push(w2(u,o,p));h={arrayValue:{values:f}}}else h=w2(u,o,d)}else"in"!==l&&"not-in"!==l&&"array-contains-any"!==l||T2(d,l),h=function g2(n,e,t,r=!1){return ms(t,n.Su(r?4:3,e))}(a,"where",d,"in"===l||"not-in"===l);return ve.create(c,l,h)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class hu extends PD{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hu(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Ne.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)C2(s,u),s=NT(s,u)}(e._query,t),new zt(e.firestore,e.converter,NT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ag extends I2{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new ag(e,t,r)}_apply(e){return new zt(e.firestore,e.converter,Sp(e._query,this._limit,this._limitType))}}function w2(n,e,t){if("string"==typeof(t=pn(t))){if(""===t)throw new A(E.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!MT(e)&&-1!==t.indexOf("/"))throw new A(E.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ye.fromString(t));if(!x.isDocumentKey(r))throw new A(E.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return is(n,new x(r))}if(t instanceof ht)return is(n,t._key);throw new A(E.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tg(t)}.`)}function T2(n,e){if(!Array.isArray(n)||0===n.length)throw new A(E.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function C2(n,e){const t=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new A(E.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Ore{convertValue(e,t="none"){switch(ro(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw O()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return eo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new wD(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=wp(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Al(e));default:return null}}convertTimestamp(e){const t=to(e);return new Ze(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ye.fromString(e);L(FF(r));const i=new rs(r.get(1),r.get(3)),o=new x(r.popFirst(5));return i.isEqual(t)||lt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}class _s{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fu extends RD{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sg("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class lg extends fu{data(e={}){return super.data(e)}}class pu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new _s(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new lg(this._firestore,this._userDataWriter,r.key,r,new _s(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new A(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new lg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new _s(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const u=new lg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new _s(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,l=-1;return 0!==a.type&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:Fre(a.type),doc:u,oldIndex:c,newIndex:l}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Fre(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return O()}}class fo extends Ore{constructor(e){super(),this.firestore=e}convertBytes(e){return new gs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,t)}}function A2(n,e,t){n=Ie(n,ht);const r=Ie(n.firestore,$e),i=function MD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}(n.converter,e,t);return function id(n,e){return function(r,i){const o=new St;return r.asyncQueue.enqueueAndForget(m(function*(){return function qne(n,e,t){return GC.apply(this,arguments)}(yield function _D(n){return eg(n).then(e=>e.syncEngine)}(r),i,o)})),o.promise}(ft(n),e)}(r,[TD(du(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Ye.none())])}!function(e,t=!0){xa="10.8.1",Vr(new Ir("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new $e(new Iee(r.getProvider("auth-internal")),new Tee(r.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new A(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rs(c.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),tr(lV,"4.4.3",e),tr(lV,"4.4.3","esm2017")}();class Sn{static clone(e){let t;if(e){for(var r in t=Sn.create(e.tag),t.attributes=e.attributes,t.text=e.text,e.children)t.children.push(this.clone(e.children[r]));return t}return e}}Sn.create=function(n){return{id:Sn.id(10),tag:n,attributes:new Map,children:[]}},Sn.add=function(n,e){let t=Sn.create(e),r=n.children.push(t);return n.children[r-1]},Sn.id=function(n){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=t.length;let i=0;for(;i<n;)e+=t.charAt(Math.floor(Math.random()*r)),i+=1;return e},Sn.remove=function(n,e){for(var t=n,r=!1,i=0;!r&&i<t.children.length;i++){if(e.id==t.children[i].id)return t.children.splice(i,1),!0;r=Sn.remove(t.children[i],e)}return r};const Zre=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];var gu=(()=>(function(n){n.USER="USER",n.ADMIN="ADMIN"}(gu||(gu={})),gu))();class ys{constructor(){this.isLoading=new Zn(!1)}show(){this.isLoading.next(!0)}hide(){this.isLoading.next(!1)}}ys.\u0275fac=function(e){return new(e||ys)},ys.\u0275prov=G({token:ys,factory:ys.\u0275fac,providedIn:"root"});class Kr{constructor(e){this.loader=e,this.app=r1(tie),this.analytics=function lY(n=Tv()){const e=zi(n=pn(n),Af);return e.isInitialized()?e.getImmediate():function dY(n,e={}){const t=zi(n,Af);if(t.isInitialized()){const i=t.getImmediate();if(Lc(e,t.getOptions()))return i;throw gn.create("already-initialized")}return t.initialize({options:e})}(n)}(this.app),this.firestore=Are(this.app),this.auth=lZ(this.app),this.isAdmin=!1,this.data={},this.cursors={},this.refreshEvent=new Ae,this.refreshUser=new Ae,this.refreshUserSession();var t=[vs.DESIGNS];for(var r in t)this.init(t[r]),this.refresh(t[r])}init(e){this.cursors[e]={order:"order",limit:20}}refreshUserSession(){this.auth.onAuthStateChanged(e=>{null==e?(this.user=void 0,this.isAdmin=!1,this.refreshUser.emit(void 0)):(console.log("FirestoreService:refreshUserSession:: Auth State Changed ",e),this.loader.show(),this.login({id:e.uid,email:e.email,name:e.displayName,contact:e.phoneNumber,image:e.photoURL,role:gu.USER}))})}refresh(e){console.log("Refreshing "+e);const r=function Nre(n,e,...t){let r=[];e instanceof PD&&r.push(e),r=r.concat(t),function(o){const s=o.filter(u=>u instanceof hu).length,a=o.filter(u=>u instanceof rd).length;if(s>1||s>0&&a>0)throw new A(E.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}(ID(this.firestore,e),function kre(n){return function r2(n,e){if(e<=0)throw new A(E.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}("limit",n),ag._create("limit",n,"F")}(this.cursors[e].limit));(function Ure(n){n=Ie(n,zt);const e=Ie(n.firestore,$e),t=ft(e),r=new fo(e);return function v2(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new A(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query),function XL(n,e,t={}){const r=new St;return n.asyncQueue.enqueueAndForget(m(function*(){return function(o,s,a,u,c){const l=new Xp({next:h=>{s.enqueueAndForget(()=>VC(o,d)),h.fromCache&&"server"===u.source?c.reject(new A(E.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new UC(a,l,{includeMetadataChanges:!0,Z_:!0});return kC(o,d)}(yield cu(n),n.asyncQueue,e,t,r)})),r.promise}(t,n._query).then(i=>new pu(e,r,n,i))})(r).then(i=>{this.data[e]=[],i.forEach(o=>{let s=o.data();s.id=o.id,this.data[e].push(s)}),this.refreshEvent.emit(e)})}login(e){var t=this;return m(function*(){const r=ng(t.firestore,"users",e.id),i=yield function Lre(n){n=Ie(n,ht);const e=Ie(n.firestore,$e);return function JL(n,e,t={}){const r=new St;return n.asyncQueue.enqueueAndForget(m(function*(){return function(o,s,a,u,c){const l=new Xp({next:h=>{s.enqueueAndForget(()=>VC(o,d));const f=h.docs.has(a);!f&&h.fromCache?c.reject(new A(E.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&u&&"server"===u.source?c.reject(new A(E.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new UC(Ua(a.path),l,{includeMetadataChanges:!0,Z_:!0});return kC(o,d)}(yield cu(n),n.asyncQueue,e,t,r)})),r.promise}(ft(e),n._key).then(t=>function ND(n,e,t){const r=t.docs.get(e._key),i=new fo(n);return new fu(n,i,e._key,r,new _s(t.hasPendingWrites,t.fromCache),e.converter)}(e,n,t))}(r);if(i.exists()){let o=i.data();console.log("FirestoreService:login:: Existing User :",o),t.user={id:o.id,name:o.name,email:o.email,contact:o.contact,role:o.role,image:o.image},t.refreshUser.emit(t.user),sessionStorage.setItem("user",JSON.stringify(t.user)),t.isAdmin=t.user.role==gu.ADMIN,t.loader.hide()}else console.log("FirestoreService:login:: Create new user: "+e.email),t.user=e,yield A2(ng(ID(t.firestore,"users"),e.id),t.user),console.log("FirestoreService:login:: Created new user: "+e.email),t.refreshUser.emit(t.user),sessionStorage.setItem("user",JSON.stringify(t.user)),t.log(mu.SIGN_UP,t.user),t.loader.hide()})()}logout(){var e=this;return m(function*(){console.log("FirestoreService:logout:: Logging out user: "+e.user?.email),e.user=void 0,sessionStorage.clear(),e.isAdmin=!1,e.log(mu.LOGOUT,e.user),e.refreshUser.emit(e.user)})()}log(e,t=null){let r={url:window.location.href,device:window.navigator.userAgent,timestamp:(new Date).toISOString(),event:e};t&&(r.data=t),console.log("Sending Event to Analytics: ",r),V1(this.analytics,e,r)}}Kr.\u0275fac=function(e){return new(e||Kr)(B(ys))},Kr.\u0275prov=G({token:Kr,factory:Kr.\u0275fac,providedIn:"root"});var mu=(()=>(function(n){n.PAGE_VIEW="PAGE_VIEW",n.LOGIN="login",n.SIGN_UP="sign_up",n.LOGOUT="logout"}(mu||(mu={})),mu))(),vs=(()=>(function(n){n.DESIGNS="designs"}(vs||(vs={})),vs))();const tie={apiKey:"AIzaSyAW1LTd9_9KMW90Xtcwd_wzAv6oSyYxdUs",authDomain:"design-vvsk.firebaseapp.com",projectId:"design-vvsk",storageBucket:"design-vvsk.appspot.com",messagingSenderId:"145324731810",appId:"1:145324731810:web:52249d2b70fbee852896fb",measurementId:"G-RYQ3M3HT1H"};class od{constructor(e,t){this.router=e,this.fs=t,this.provider=new lE;var r=sessionStorage.getItem("redirect");sessionStorage.removeItem("redirect"),t.refreshUser.subscribe(i=>{null!=i&&(r?(console.log("Login Success, Redirecting to ",r),this.router.navigateByUrl(r)):(console.log("Login Success, Redirecting to home"),this.router.navigate(["home"])))})}login(){this.fs.loader.show(),function vX(n,e,t){return fw.apply(this,arguments)}(this.fs.auth,this.provider).then(e=>{lE.credentialFromResult(e);let i=e.user;console.log("LoginComponent: SignInUser",i),this.fs.log(mu.LOGIN,{id:i.uid,email:i.email,name:i.displayName,contact:i.phoneNumber,image:i.photoURL,role:gu.USER})}).catch(e=>{this.fs.loader.hide(),console.error(e),lE.credentialFromError(e)})}}od.\u0275fac=function(e){return new(e||od)(T(Zt),T(Kr))},od.\u0275cmp=vn({type:od,selectors:[["app-login"]],decls:12,vars:0,consts:[[1,"row","text-center","p-3"],[1,"col-md-4","col-sm-6","col-xs-12","form"],[2,"font-weight","600","font-size","18px"],["src","../../assets/icons/google-logo.png"],[3,"click"]],template:function(e,t){1&e&&(V(0,"div",0)(1,"div",1)(2,"div")(3,"h5"),he(4,"Welcome to "),V(5,"b"),he(6,"DeSiGnER"),F()(),V(7,"p",2),he(8,"Login with your google account"),F()(),ui(9,"img",3),V(10,"button",4),Z("click",function(){return t.login()}),he(11,"Sign in"),F()()())},styles:["img[_ngcontent-%COMP%]{display:block;width:80px;margin:30px auto;box-shadow:0 5px 10px -7px #333;border-radius:50%}.form[_ngcontent-%COMP%]{background-color:#fff;margin:50px auto 10px;padding:30px;border-radius:8px;overflow:hidden;box-shadow:0 2px 10px -3px #333;text-align:center}button[_ngcontent-%COMP%]{border-radius:100px;border:none;background:#719BE6;width:50%;padding:10px;color:#fff;box-shadow:0 2px 10px -3px #719be6;display:block;margin:30px auto 10px}"]});class Mi{constructor(){this.events=new Ae,this.style="",this.script="",this.parser=new DOMParser}parseText(e){let t;console.log("Parsing: ",e);try{var r=this.parser.parseFromString(e,"text/html");t=this.parse(r.body.children[0])}catch(i){console.error(i),alert("Unable to parse pasted content")}return console.log("Parsing Success: ",t),t}parse(e){let t=Sn.create(e.tagName);for(var r=0;r<e.attributes.length;r++){var i=e.attributes[r];t.attributes.set(i.name,i.value)}for(r=0;r<e.children.length;r++)t.children.push(this.parse(e.children[r]));for(r=0;r<e.childNodes.length;r++)if(e.childNodes[r].nodeType==Node.TEXT_NODE){t.text=e.childNodes[r].textContent||void 0;break}return t}}Mi.\u0275fac=function(e){return new(e||Mi)},Mi.\u0275prov=G({token:Mi,factory:Mi.\u0275fac,providedIn:"root"});class fg{}class OD{}class Ni{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ni?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ni;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ni?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class nie{encodeKey(e){return P2(e)}encodeValue(e){return P2(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const iie=/%(\d[a-f0-9])/gi,oie={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function P2(n){return encodeURIComponent(n).replace(iie,(e,t)=>oie[t]??e)}function pg(n){return`${n}`}class po{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new nie,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function rie(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=t.get(s)||[];u.push(a),t.set(s,u)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(pg):[pg(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new po({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(pg(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(pg(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class sie{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function x2(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function M2(n){return typeof Blob<"u"&&n instanceof Blob}function N2(n){return typeof FormData<"u"&&n instanceof FormData}class sd{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function aie(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Ni),this.context||(this.context=new sie),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new po,this.urlWithParams=t}serializeBody(){return null===this.body?null:x2(this.body)||M2(this.body)||N2(this.body)||function uie(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof po?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||N2(this.body)?null:M2(this.body)?this.body.type||null:x2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof po?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,c=e.params||this.params;const l=e.context??this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),u)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new sd(t,r,o,{params:c,headers:u,context:l,reportProgress:a,responseType:i,withCredentials:s})}}var wt=(()=>((wt=wt||{})[wt.Sent=0]="Sent",wt[wt.UploadProgress=1]="UploadProgress",wt[wt.ResponseHeader=2]="ResponseHeader",wt[wt.DownloadProgress=3]="DownloadProgress",wt[wt.Response=4]="Response",wt[wt.User=5]="User",wt))();class VD{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ni,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class FD extends VD{constructor(e={}){super(e),this.type=wt.ResponseHeader}clone(e={}){return new FD({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class gg extends VD{constructor(e={}){super(e),this.type=wt.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new gg({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class k2 extends VD{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function LD(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let O2=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof sd)o=t;else{let u,c;u=i.headers instanceof Ni?i.headers:new Ni(i.headers),i.params&&(c=i.params instanceof po?i.params:new po({fromObject:i.params})),o=new sd(t,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=K(o).pipe($i(u=>this.handler.handle(u)));if(t instanceof sd||"events"===i.observe)return s;const a=s.pipe(pi(u=>u instanceof gg));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ce(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(ce(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(ce(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(ce(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new po).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,LD(i,r))}post(t,r,i={}){return this.request("POST",t,LD(i,r))}put(t,r,i={}){return this.request("PUT",t,LD(i,r))}}return n.\u0275fac=function(t){return new(t||n)(B(fg))},n.\u0275prov=G({token:n,factory:n.\u0275fac}),n})();function V2(n,e){return e(n)}function cie(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const die=new U("HTTP_INTERCEPTORS"),ad=new U("HTTP_INTERCEPTOR_FNS");function hie(){let n=null;return(e,t)=>(null===n&&(n=(pe(die,{optional:!0})??[]).reduceRight(cie,V2)),n(e,t))}let F2=(()=>{class n extends fg{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(ad)));this.chain=r.reduceRight((i,o)=>function lie(n,e,t){return(r,i)=>t.runInContext(()=>e(r,o=>n(o,i)))}(i,o,this.injector),V2)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(B(OD),B(br))},n.\u0275prov=G({token:n,factory:n.\u0275fac}),n})();const mie=/^\)\]\}',?\n/;let U2=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new st(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((f,p)=>i.setRequestHeader(f,p.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const f=t.detectContentTypeHeader();null!==f&&i.setRequestHeader("Content-Type",f)}if(t.responseType){const f=t.responseType.toLowerCase();i.responseType="json"!==f?f:"text"}const o=t.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const f=i.statusText||"OK",p=new Ni(i.getAllResponseHeaders()),g=function _ie(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return s=new FD({headers:p,status:i.status,statusText:f,url:g}),s},u=()=>{let{headers:f,status:p,statusText:g,url:_}=a(),I=null;204!==p&&(I=typeof i.response>"u"?i.responseText:i.response),0===p&&(p=I?200:0);let w=p>=200&&p<300;if("json"===t.responseType&&"string"==typeof I){const y=I;I=I.replace(mie,"");try{I=""!==I?JSON.parse(I):null}catch(b){I=y,w&&(w=!1,I={error:b,text:I})}}w?(r.next(new gg({body:I,headers:f,status:p,statusText:g,url:_||void 0})),r.complete()):r.error(new k2({error:I,headers:f,status:p,statusText:g,url:_||void 0}))},c=f=>{const{url:p}=a(),g=new k2({error:f,status:i.status||0,statusText:i.statusText||"Unknown Error",url:p||void 0});r.error(g)};let l=!1;const d=f=>{l||(r.next(a()),l=!0);let p={type:wt.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===t.responseType&&!!i.responseText&&(p.partialText=i.responseText),r.next(p)},h=f=>{let p={type:wt.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),r.next(p)};return i.addEventListener("load",u),i.addEventListener("error",c),i.addEventListener("timeout",c),i.addEventListener("abort",c),t.reportProgress&&(i.addEventListener("progress",d),null!==o&&i.upload&&i.upload.addEventListener("progress",h)),i.send(o),r.next({type:wt.Sent}),()=>{i.removeEventListener("error",c),i.removeEventListener("abort",c),i.removeEventListener("load",u),i.removeEventListener("timeout",c),t.reportProgress&&(i.removeEventListener("progress",d),null!==o&&i.upload&&i.upload.removeEventListener("progress",h)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(B(Yx))},n.\u0275prov=G({token:n,factory:n.\u0275fac}),n})();const UD=new U("XSRF_ENABLED"),B2="XSRF-TOKEN",j2=new U("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>B2}),$2="X-XSRF-TOKEN",H2=new U("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>$2});class G2{}let yie=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ux(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(B(fn),B(K_),B(j2))},n.\u0275prov=G({token:n,factory:n.\u0275fac}),n})();function vie(n,e){const t=n.url.toLowerCase();if(!pe(UD)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=pe(G2).getToken(),i=pe(H2);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var pt=(()=>((pt=pt||{})[pt.Interceptors=0]="Interceptors",pt[pt.LegacyInterceptors=1]="LegacyInterceptors",pt[pt.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",pt[pt.NoXsrfProtection=3]="NoXsrfProtection",pt[pt.JsonpSupport=4]="JsonpSupport",pt[pt.RequestsMadeViaParent=5]="RequestsMadeViaParent",pt))();function _u(n,e){return{\u0275kind:n,\u0275providers:e}}function Iie(...n){const e=[O2,U2,F2,{provide:fg,useExisting:F2},{provide:OD,useExisting:U2},{provide:ad,useValue:vie,multi:!0},{provide:UD,useValue:!0},{provide:G2,useClass:yie}];for(const t of n)e.push(...t.\u0275providers);return function _H(n){return{\u0275providers:n}}(e)}const q2=new U("LEGACY_INTERCEPTOR_FN");function wie({cookieName:n,headerName:e}){const t=[];return void 0!==n&&t.push({provide:j2,useValue:n}),void 0!==e&&t.push({provide:H2,useValue:e}),_u(pt.CustomXsrfConfiguration,t)}let Tie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ar({type:n}),n.\u0275inj=zn({providers:[Iie(_u(pt.LegacyInterceptors,[{provide:q2,useFactory:hie},{provide:ad,useExisting:q2,multi:!0}]),wie({cookieName:B2,headerName:$2}))]}),n})();class ud{constructor(){this.menu=new Ae}}function Cie(n,e){if(1&n){const t=Pe();V(0,"div")(1,"i",2),Z("click",function(){return Te(t),Ce(z().action.emit("edit"))}),he(2,"edit"),F()()}}function Die(n,e){if(1&n){const t=Pe();V(0,"div")(1,"i",4),Z("click",function(){return Te(t),Ce(z().action.emit("cut"))}),he(2,"cut"),F()()}}function Aie(n,e){if(1&n){const t=Pe();V(0,"div")(1,"i",2),Z("click",function(){return Te(t),Ce(z().action.emit("copy"))}),he(2,"content_copy"),F()()}}function bie(n,e){if(1&n){const t=Pe();V(0,"div")(1,"i",2),Z("click",function(){return Te(t),Ce(z().action.emit("paste"))}),he(2,"content_paste"),F()()}}function Sie(n,e){if(1&n){const t=Pe();V(0,"div")(1,"i",2),Z("click",function(){return Te(t),Ce(z().action.emit("preview"))}),he(2,"preview"),F()()}}function Rie(n,e){if(1&n){const t=Pe();V(0,"div")(1,"i",2),Z("click",function(){return Te(t),Ce(z().action.emit("upload"))}),he(2,"upload"),F()()}}function Pie(n,e){if(1&n){const t=Pe();V(0,"div")(1,"i",2),Z("click",function(){return Te(t),Ce(z().action.emit("download"))}),he(2,"download"),F()()}}function xie(n,e){if(1&n){const t=Pe();V(0,"div")(1,"i",2),Z("click",function(){return Te(t),Ce(z().action.emit("script"))}),he(2,"javascript"),F()()}}function Mie(n,e){if(1&n){const t=Pe();V(0,"div")(1,"i",2),Z("click",function(){return Te(t),Ce(z().action.emit("style"))}),he(2,"css"),F()()}}function Nie(n,e){if(1&n){const t=Pe();V(0,"div")(1,"i",2),Z("click",function(){return Te(t),Ce(z().action.emit("load"))}),he(2,"folder_open"),F()()}}function kie(n,e){if(1&n){const t=Pe();V(0,"div")(1,"i",2),Z("click",function(){return Te(t),Ce(z().action.emit("web"))}),he(2,"web"),F()()}}function Oie(n,e){if(1&n){const t=Pe();V(0,"div")(1,"i",2),Z("click",function(){return Te(t),Ce(z().action.emit("save"))}),he(2,"save"),F()()}}function Vie(n,e){if(1&n){const t=Pe();V(0,"div")(1,"i",5),Z("click",function(){return Te(t),Ce(z().action.emit("delete"))}),he(2,"delete"),F()()}}function Fie(n,e){if(1&n){const t=Pe();V(0,"div")(1,"i",2),Z("click",function(){return Te(t),Ce(z().login())}),he(2,"login"),F()()}}function Lie(n,e){if(1&n){const t=Pe();V(0,"div")(1,"i",2),Z("click",function(){return Te(t),Ce(z().logout())}),he(2,"logout"),F()()}}ud.\u0275fac=function(e){return new(e||ud)},ud.\u0275cmp=vn({type:ud,selectors:[["app-header"]],outputs:{menu:"menu"},decls:10,vars:0,consts:[[1,"header"],[1,"row"],[1,"col-6","title","px-3"],[1,"col-6","d-flex","align-items-center","justify-content-end"],[1,"material-icons","m-1"]],template:function(e,t){1&e&&(V(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),he(4," Design"),F()(),V(5,"div",3)(6,"i",4),he(7,"copyright"),F(),V(8,"span"),he(9,"V.V.S.K Chaitanya"),F()()()())},styles:[".header[_ngcontent-%COMP%]{padding:5px 20px 5px 8px;background:#673ab7;color:#fff}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:30px}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .arrow-font[_ngcontent-%COMP%]{font-size:50px;line-height:.5;vertical-align:text-top}"]});class cd{constructor(e,t,r){this.app=e,this.firestore=t,this.router=r,this.close=new Ae,this.action=new Ae}ngOnInit(){}login(){this.router.navigate(["login"])}logout(){this.router.navigate(["logout"])}}cd.\u0275fac=function(e){return new(e||cd)(T(Mi),T(Kr),T(Zt))},cd.\u0275cmp=vn({type:cd,selectors:[["app-menu"]],outputs:{close:"close",action:"action"},decls:20,vars:15,consts:[[1,"menu"],[1,"mx-3","d-flex","flex-column"],[1,"material-icons","text-light","pointer","mt-4",3,"click"],[4,"ngIf"],[1,"material-symbols-outlined","text-light","pointer","mt-4",3,"click"],[1,"material-icons","text-danger","pointer","mt-4",3,"click"]],template:function(e,t){1&e&&(V(0,"div",0)(1,"div",1)(2,"div")(3,"i",2),Z("click",function(){return t.action.emit("add")}),he(4,"add"),F()(),de(5,Cie,3,0,"div",3),de(6,Die,3,0,"div",3),de(7,Aie,3,0,"div",3),de(8,bie,3,0,"div",3),de(9,Sie,3,0,"div",3),de(10,Rie,3,0,"div",3),de(11,Pie,3,0,"div",3),de(12,xie,3,0,"div",3),de(13,Mie,3,0,"div",3),de(14,Nie,3,0,"div",3),de(15,kie,3,0,"div",3),de(16,Oie,3,0,"div",3),de(17,Vie,3,0,"div",3),de(18,Fie,3,0,"div",3),de(19,Lie,3,0,"div",3),F()()),2&e&&(H(5),W("ngIf",t.app.current),H(1),W("ngIf",t.app.current),H(1),W("ngIf",t.app.current),H(1),W("ngIf",t.app.current&&t.app.paste),H(1),W("ngIf",t.app.design),H(1),W("ngIf",!t.app.design),H(1),W("ngIf",t.app.design),H(1),W("ngIf",t.app.current),H(1),W("ngIf",t.app.current),H(1),W("ngIf",t.firestore.user&&!t.app.design),H(1),W("ngIf",!t.app.design),H(1),W("ngIf",t.firestore.user&&t.app.design),H(1),W("ngIf",t.app.current),H(1),W("ngIf",!t.firestore.user),H(1),W("ngIf",t.firestore.user))},dependencies:[Vo],styles:[".menu[_ngcontent-%COMP%]{position:absolute;top:55px;left:0;background:#673ab7;height:-webkit-fill-available}.menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}"]});class ld{constructor(e,t){this.appService=e,this.firestore=t,this.html="",this.appService.events.subscribe(r=>{"preview"==r&&this.ngOnChanges(),"download"==r&&this.download(),"save"==r&&this.save()})}ngOnInit(){console.log("Rendering Preview ..."),this.html=this.process(this.design),this.update()}ngOnChanges(){console.log("Rendering Preview ..."),this.html=this.process(this.design),this.update()}download(){navigator.clipboard.writeText(this.html)}update(){let e=document.getElementById("preview");e&&(e.innerHTML=this.updateScriptStyle())}updateScriptStyle(){var e=this.html;return null!=this.appService.style&&""!=this.appService.style&&(e+="<style>"+this.appService.style+"</style>"),null!=this.appService.script&&""!=this.appService.script&&(e+="<script>"+this.appService.script+"<\/script>"),e}save(){var e=this;return m(function*(){if(e.design){var t={design:e.html};null!=e.appService.script&&""!=e.appService.script&&(t.script=e.appService.script),null!=e.appService.style&&""!=e.appService.style&&(t.style=e.appService.style),yield A2(ng(ID(e.firestore.firestore,vs.DESIGNS),e.appService.file),t),alert("Design Saved")}})()}process(e){console.log("Processing ",e);let t="";if(e){let r=function(n){return null!=n&&-1!==Zre.indexOf(n.toLowerCase())}(e.tag),i="";for(let o of e.attributes)i+=" "+o[0]+'="'+o[1]+'"';if(r)t="<"+e.tag+i+"/>";else{let o="";e.text&&(o+=e.text);for(let s of e.children)o+=this.process(s);t="<"+e.tag+i+">"+o+"</"+e.tag+">"}}return t}}function Uie(n,e){if(1&n){const t=Pe();V(0,"i",6),Z("click",function(){Te(t);const i=z(2);return Ce(i.expand=!i.expand)}),he(1),F()}if(2&n){const t=z(2);H(1),Tn(t.expand?"expand_more":"chevron_right")}}function Bie(n,e){if(1&n){const t=Pe();V(0,"div")(1,"app-node",9),Z("select",function(i){return Te(t),Ce(z(3).select.emit(i))}),F()()}if(2&n){const t=e.$implicit,r=z(3);H(1),W("node",t)("current",r.current)}}function jie(n,e){if(1&n&&(V(0,"div",7),de(1,Bie,2,2,"div",8),F()),2&n){const t=z(2);H(1),W("ngForOf",t.node.children)}}ld.\u0275fac=function(e){return new(e||ld)(T(Mi),T(Kr))},ld.\u0275cmp=vn({type:ld,selectors:[["app-preview"]],inputs:{design:"design"},features:[Nn],decls:1,vars:0,consts:[["id","preview"]],template:function(e,t){1&e&&ui(0,"div",0)}});const $ie=function(n){return{"active-node":n}};function Hie(n,e){if(1&n){const t=Pe();V(0,"div",1)(1,"div",2),de(2,Uie,2,1,"i",3),V(3,"span",4),Z("click",function(){Te(t);const i=z();return Ce(i.select.emit(i.node))}),he(4),F()(),de(5,jie,2,1,"div",5),F()}if(2&n){const t=z();H(1),W("ngClass",function fP(n,e,t,r){return pP(C(),cn(),n,e,t,r)}(4,$ie,null!=t.current&&t.node.id==t.current.id)),H(1),W("ngIf",t.node.children.length>=0),H(2),Tn(t.node.tag),H(1),W("ngIf",t.expand)}}class yu{constructor(){this.select=new Ae,this.expand=!1}}yu.\u0275fac=function(e){return new(e||yu)},yu.\u0275cmp=vn({type:yu,selectors:[["app-node"]],inputs:{node:"node",current:"current"},outputs:{select:"select"},decls:1,vars:1,consts:[["class","row m-0",4,"ngIf"],[1,"row","m-0"],[1,"col-12",3,"ngClass"],["class","material-icons mx-2 pointer align-middle",3,"click",4,"ngIf"],[1,"pointer","text-uppercase",3,"click"],["class","col-12","style","margin-left:15px;",4,"ngIf"],[1,"material-icons","mx-2","pointer","align-middle",3,"click"],[1,"col-12",2,"margin-left","15px"],[4,"ngFor","ngForOf"],[3,"node","current","select"]],template:function(e,t){1&e&&de(0,Hie,6,6,"div",0),2&e&&W("ngIf",t.node&&t.node.tag)},dependencies:[Bx,zh,Vo,yu],styles:[".active-node[_ngcontent-%COMP%]{background-color:#add8e6}"]});let z2=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(T(oi),T(Fn))},n.\u0275dir=ee({type:n}),n})(),Is=(()=>{class n extends z2{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Bt(n)))(r||n)}}(),n.\u0275dir=ee({type:n,features:[xe]}),n})();const Qr=new U("NgValueAccessor"),sn=new U("NgValidators"),mo=new U("NgAsyncValidators");function rU(n){return null!=n}function iU(n){return ic(n)?gt(n):n}function oU(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function sU(n,e){return e.map(t=>t(n))}function aU(n){return n.map(e=>function Jie(n){return!n.validate}(e)?e:t=>e.validate(t))}function jD(n){return null!=n?function uU(n){if(!n)return null;const e=n.filter(rU);return 0==e.length?null:function(t){return oU(sU(t,e))}}(aU(n)):null}function $D(n){return null!=n?function cU(n){if(!n)return null;const e=n.filter(rU);return 0==e.length?null:function(t){return function Gie(...n){const e=PA(n),{args:t,keys:r}=IM(n),i=new st(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let u=s,c=s;for(let l=0;l<s;l++){let d=!1;or(t[l]).subscribe(Tt(o,h=>{d||(d=!0,c--),a[l]=h},()=>u--,void 0,()=>{(!u||!d)&&(c||o.next(r?wM(r,a):a),o.complete())}))}});return e?i.pipe(EM(e)):i}(sU(t,e).map(iU)).pipe(ce(oU))}}(aU(n)):null}function lU(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function HD(n){return n?Array.isArray(n)?n:[n]:[]}function _g(n,e){return Array.isArray(n)?n.includes(e):n===e}function fU(n,e){const t=HD(e);return HD(n).forEach(i=>{_g(t,i)||t.push(i)}),t}function pU(n,e){return HD(e).filter(t=>!_g(n,t))}class gU{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=jD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=$D(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class yn extends gU{get formDirective(){return null}get path(){return null}}class mU{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let _U=(()=>{class n extends mU{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(T(yn,10))},n.\u0275dir=ee({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&yh("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[xe]}),n})();const dd="VALID",vg="INVALID",vu="PENDING",hd="DISABLED";function Ig(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class EU{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===dd}get invalid(){return this.status===vg}get pending(){return this.status==vu}get disabled(){return this.status===hd}get enabled(){return this.status!==hd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(fU(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(fU(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(pU(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(pU(e,this._rawAsyncValidators))}hasValidator(e){return _g(this._rawValidators,e)}hasAsyncValidator(e){return _g(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=vu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=hd,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=dd,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===dd||this.status===vu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?hd:dd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=vu,this._hasOwnPendingAsyncValidator=!0;const t=iU(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ae,this.statusChanges=new Ae}_calculateStatus(){return this._allControlsDisabled()?hd:this.errors?vg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vu)?vu:this._anyControlsHaveStatus(vg)?vg:dd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ig(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function ooe(n){return Array.isArray(n)?jD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function soe(n){return Array.isArray(n)?$D(n):n||null}(this._rawAsyncValidators)}}class QD extends EU{constructor(e,t,r){super(function WD(n){return(Ig(n)?n.validators:n)||null}(t),function KD(n,e){return(Ig(e)?e.asyncValidators:n)||null}(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function IU(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new S(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function vU(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new S(1e3,"");if(!r[t])throw new S(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const fd=new U("CallSetDisabledState",{providedIn:"root",factory:()=>YD}),YD="always";function Tg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function JD(n,e){const t=function dU(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(lU(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function hU(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(lU(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Tg(e._rawValidators,i),Tg(e._rawAsyncValidators,i)}function wU(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const moe={provide:yn,useExisting:Le(()=>Dg)},gd=(()=>Promise.resolve())();let Dg=(()=>{class n extends yn{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ae,this.form=new QD({},jD(t),$D(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){gd.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),function pd(n,e,t=YD){JD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function coe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&wU(n,e)})}(n,e),function doe(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function loe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&wU(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function uoe(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){gd.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){gd.then(()=>{const r=this._findContainer(t.path),i=new QD({});(function TU(n,e){JD(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){gd.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){gd.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function CU(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(T(sn,10),T(mo,10),T(fd,8))},n.\u0275dir=ee({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&Z("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ke([moe]),xe]}),n})(),MU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ee({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),kU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ar({type:n}),n.\u0275inj=zn({}),n})();const Roe={provide:Qr,useExisting:Le(()=>iA),multi:!0};function jU(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let iA=(()=>{class n extends Is{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=jU(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function Poe(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Bt(n)))(r||n)}}(),n.\u0275dir=ee({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&Z("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ke([Roe]),xe]}),n})(),$U=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(jU(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(T(Fn),T(oi),T(iA,9))},n.\u0275dir=ee({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const xoe={provide:Qr,useExisting:Le(()=>oA),multi:!0};function HU(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let oA=(()=>{class n extends Is{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],o=r.selectedOptions;if(void 0!==o){const s=o;for(let a=0;a<s.length;a++){const c=this._getOptionValue(s[a].value);i.push(c)}}else{const s=r.options;for(let a=0;a<s.length;a++){const u=s[a];if(u.selected){const c=this._getOptionValue(u.value);i.push(c)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Moe(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Bt(n)))(r||n)}}(),n.\u0275dir=ee({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&Z("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ke([xoe]),xe]}),n})(),GU=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(HU(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(HU(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(T(Fn),T(oi),T(oA,9))},n.\u0275dir=ee({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),joe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ar({type:n}),n.\u0275inj=zn({imports:[kU]}),n})(),$oe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:fd,useValue:t.callSetDisabledState??YD}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ar({type:n}),n.\u0275inj=zn({imports:[joe]}),n})();function Goe(n,e){if(1&n&&(V(0,"label",8),he(1),F()),2&n){const t=z(2).$implicit;W("for",t.id),H(1),Tn(t.label)}}function qoe(n,e){if(1&n){const t=Pe();V(0,"span",9),Z("click",function(){Te(t);const i=z(4);return Ce(i.expand=!i.expand)}),he(1),F()}if(2&n){const t=z(4);H(1),Tn(t.expand?"expand_less":"expand_more")}}function zoe(n,e){if(1&n){const t=Pe();V(0,"button",12),Z("click",function(){const o=Te(t).$implicit,s=z(3).$implicit;return Ce(z(2).update(s,{target:{value:o}}))}),he(1),F()}if(2&n){const t=e.$implicit;H(1),Tn(t)}}function Woe(n,e){if(1&n&&(V(0,"div",10),de(1,zoe,2,1,"button",11),F()),2&n){const t=z(2).$implicit;H(1),W("ngForOf",t.values)}}function Koe(n,e){if(1&n){const t=Pe();V(0,"div"),de(1,Goe,2,2,"label",4),V(2,"input",5),Z("change",function(i){Te(t);const o=z().$implicit;return Ce(z(2).update(o,i))}),F(),de(3,qoe,2,1,"span",6),de(4,Woe,2,1,"div",7),F()}if(2&n){const t=z().$implicit,r=z(2);H(1),W("ngIf",t.label),H(1),W("type",t.type)("value",t.value)("id",t.id)("placeholder",t.placeholder)("name",t.name),H(1),W("ngIf",t.values),H(1),W("ngIf",r.expand&&t.values)}}function Qoe(n,e){if(1&n&&(V(0,"label",8),he(1),F()),2&n){const t=z(2).$implicit;W("for",t.id),H(1),Tn(t.label)}}function Yoe(n,e){if(1&n&&(V(0,"option"),he(1),F()),2&n){const t=e.$implicit;H(1),Tn(t)}}function Joe(n,e){if(1&n){const t=Pe();V(0,"div"),de(1,Qoe,2,2,"label",4),V(2,"select",13),Z("change",function(i){Te(t);const o=z().$implicit;return Ce(z(2).update(o,i))}),de(3,Yoe,2,1,"option",14),F()()}if(2&n){const t=z().$implicit;H(1),W("ngIf",t.label),H(1),W("value",t.value),H(1),W("ngForOf",t.values)}}function Xoe(n,e){if(1&n&&(V(0,"label",8),he(1),F()),2&n){const t=z(2).$implicit;W("for",t.id),H(1),Tn(t.label)}}function Zoe(n,e){if(1&n){const t=Pe();V(0,"div"),de(1,Xoe,2,2,"label",4),V(2,"textarea",15),Z("change",function(i){Te(t);const o=z().$implicit;return Ce(z(2).update(o,i))}),he(3,"            "),F()()}if(2&n){const t=z().$implicit;H(1),W("ngIf",t.label),H(1),W("value",t.value)}}const ese=function(){return["text","email","password","number"]};function tse(n,e){if(1&n&&(V(0,"div",3),de(1,Koe,5,8,"div",0),de(2,Joe,4,3,"div",0),de(3,Zoe,4,2,"div",0),F()),2&n){const t=e.$implicit;H(1),W("ngIf",function hP(n,e,t){const r=cn()+n,i=C();return i[r]===oe?Rr(i,r,t?e.call(t):e()):function rc(n,e){return n[e]}(i,r)}(3,ese).indexOf(t.type)>-1),H(1),W("ngIf","select"==t.type),H(1),W("ngIf","textarea"==t.type)}}function nse(n,e){if(1&n){const t=Pe();V(0,"button",16),Z("click",function(){const o=Te(t).$implicit;return Ce(z(2).submit.emit(o.action))}),he(1),F()}if(2&n){const t=e.$implicit;H(1),Tn(t.text)}}function rse(n,e){if(1&n&&(V(0,"form"),de(1,tse,4,4,"div",1),V(2,"div"),de(3,nse,2,1,"button",2),F()()),2&n){const t=z();H(1),W("ngForOf",t.form.controls),H(2),W("ngForOf",t.form.actions)}}class md{constructor(){this.expand=!1,this.submit=new Ae}update(e,t){e.value=t.target.value,this.expand=!1}}function ise(n,e){if(1&n){const t=Pe();V(0,"div",4)(1,"div",5)(2,"h5",6),he(3),F(),V(4,"button",7),Z("click",function(){return Te(t),Ce(z(2).action.emit("close_dialog"))}),F()(),V(5,"div",8)(6,"app-form",9),Z("submit",function(i){return Te(t),Ce(z(2).action.emit(i))}),F()()()}if(2&n){const t=z(2);H(3),Tn(t.dialog.form.title),H(3),W("form",t.dialog.form)}}function ose(n,e){if(1&n){const t=Pe();V(0,"button",11),Z("click",function(){const o=Te(t).$implicit;return Ce(z(3).action.emit(o.action))}),he(1),F()}if(2&n){const t=e.$implicit;H(1),Tn(t.text)}}function sse(n,e){if(1&n){const t=Pe();V(0,"div",4)(1,"div",5)(2,"h5",6),he(3),F(),V(4,"button",7),Z("click",function(){return Te(t),Ce(z(2).action.emit("close_dialog"))}),F()(),V(5,"div",8),de(6,ose,2,1,"button",10),F()()}if(2&n){const t=z(2);H(3),Tn(t.dialog.title),H(3),W("ngForOf",t.dialog.actions)}}function ase(n,e){if(1&n&&(V(0,"div",1)(1,"div",2),de(2,ise,7,2,"div",3),de(3,sse,7,2,"div",3),F()()),2&n){const t=z();H(2),W("ngIf",t.dialog.form),H(1),W("ngIf",t.dialog.actions)}}md.\u0275fac=function(e){return new(e||md)},md.\u0275cmp=vn({type:md,selectors:[["app-form"]],inputs:{form:"form"},outputs:{submit:"submit"},decls:1,vars:1,consts:[[4,"ngIf"],["class","m-3",4,"ngFor","ngForOf"],["class","btn btn-primary m-2",3,"click",4,"ngFor","ngForOf"],[1,"m-3"],["class","form-label",3,"for",4,"ngIf"],[1,"form-control",3,"type","value","id","placeholder","name","change"],["class","mx-2 material-icons pointer expand",3,"click",4,"ngIf"],["class","mt-2 exp-con",4,"ngIf"],[1,"form-label",3,"for"],[1,"mx-2","material-icons","pointer","expand",3,"click"],[1,"mt-2","exp-con"],["class","m-2 btn btn-sm btn-primary",3,"click",4,"ngFor","ngForOf"],[1,"m-2","btn","btn-sm","btn-primary",3,"click"],[1,"form-select",3,"value","change"],[4,"ngFor","ngForOf"],["rows","5",1,"form-select",3,"value","change"],[1,"btn","btn-primary","m-2",3,"click"]],template:function(e,t){1&e&&de(0,rse,4,2,"form",0),2&e&&W("ngIf",t.form)},dependencies:[zh,Vo,MU,$U,GU,_U,Dg],styles:[".expand[_ngcontent-%COMP%]{position:relative;top:-30px;float:right}.exp-con[_ngcontent-%COMP%]{height:150px;overflow-y:scroll}"]});class _d{constructor(){this.action=new Ae}}function use(n,e){if(1&n){const t=Pe();V(0,"app-menu",8),Z("close",function(){return Te(t),Ce(z().menu=!1)})("action",function(i){return Te(t),Ce(z().perform(i))}),F()}}function cse(n,e){if(1&n){const t=Pe();V(0,"app-node",9),Z("select",function(i){return Te(t),Ce(z().select(i))}),F()}if(2&n){const t=z();W("node",t.design)("current",t.current)}}_d.\u0275fac=function(e){return new(e||_d)},_d.\u0275cmp=vn({type:_d,selectors:[["app-dialog"]],inputs:{dialog:"dialog"},outputs:{action:"action"},decls:1,vars:1,consts:[["class","modal d-block","tabindex","-1",4,"ngIf"],["tabindex","-1",1,"modal","d-block"],[1,"modal-dialog"],["class","modal-content",4,"ngIf"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"form","submit"],["class","btn btn-primary m-2",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-primary","m-2",3,"click"]],template:function(e,t){1&e&&de(0,ase,4,2,"div",0),2&e&&W("ngIf",t.dialog)},dependencies:[zh,Vo,md]});class Iu{constructor(e,t,r){this.app=e,this.firestore=t,this.http=r,this.menu=!0}select(e){console.log(e),this.current=e,this.app.current=e}deselect(){this.current=void 0,this.app.current=void 0}perform(e){if(null!=aA[e]&&(this.dialog=aA[e]),"close_dialog"==e&&(this.dialog=void 0),"download"==e&&this.app.events.emit("download"),"upload"==e&&navigator.clipboard.readText().then(r=>{let i=this.app.parseText(r);i&&(this.design=i,this.app.design=i,this.current=this.design)}),"delete"==e&&(this.dialog={form:{title:"Confirm Delete?",controls:[{id:"node-d",type:"textarea",value:JSON.stringify(this.current)}],actions:[{text:"Yes",action:"delete_confirm"}]}}),"delete_confirm"==e&&(this.perform("close_dialog"),this.performDelete()),0==e.indexOf("add")&&this.performAdd(e),0==e.indexOf("edit")&&this.performEdit(e),"cut"==e&&(this.app.paste=this.current,this.performDelete()),"copy"==e&&this.current&&(this.app.paste=Sn.clone(this.current)),"paste"==e&&this.current&&this.app.paste&&(this.current.children.push(this.app.paste),this.app.events.emit("preview")),"preview"==e&&this.app.events.emit("preview"),"save"==e&&(this.dialog={form:{title:"Save Design",controls:[{id:"design-name",type:"text",placeholder:"Name",value:""}],actions:[{text:"Save",action:"save_"}]}},this.dialog.form&&this.app.file&&(this.dialog.form.controls[0].value=this.app.file)),"save_"==e&&(this.app.file=this.dialog?.form?.controls[0].value,null!=this.app.file&&""!=this.app.file&&this.app.events.emit("save"),this.perform("close_dialog")),"script"==e&&(this.dialog={form:{title:"Script",controls:[{id:"script",type:"textarea",value:this.app.script}],actions:[{action:"script_",text:"Save Script"}]}}),"script_"==e&&(this.app.script=this.dialog?.form?.controls[0].value||"",this.perform("close_dialog"),this.app.events.emit("preview")),"style"==e&&(this.dialog={form:{title:"Style",controls:[{id:"style",type:"textarea",value:this.app.style}],actions:[{action:"style_",text:"Save Style"}]}}),"style_"==e&&(this.app.style=this.dialog?.form?.controls[0].value||"",this.perform("close_dialog"),this.app.events.emit("preview")),"web"==e&&(this.dialog={action:"web",form:{title:"Website",controls:[{id:"web",type:"text",value:""}],actions:[{action:"web_",text:"Load"}]}}),"web_"==e){let r=this.dialog?.form?.controls[0].value;r&&this.http.get(r).subscribe(i=>{console.log("Response from website",i)})}if("load"==e){this.dialog={action:"load",title:"Load Design",actions:[]};let r=this.firestore.data[vs.DESIGNS];if(!r)return;for(var t in r)this.dialog.actions?.push({text:r[t].id,action:"load_"+r[t].id})}else if(0==e.indexOf("load_")){let r=e.replace("load_",""),i=this.firestore.data[vs.DESIGNS];if(!i)return void this.perform("close_dialog");let o=i.filter(a=>a.id==r)[0];if(!o)return void this.perform("close_dialog");let s=this.app.parseText(o.design);s&&(this.design=s,this.app.design=s,this.app.script=o.script,this.app.style=o.style,this.current=this.design,this.app.file=r),this.perform("close_dialog")}}performEdit(e){if("edit_text"==e&&(this.dialog=aA.add_text,this.dialog?.form&&(this.dialog.form.controls[0].value=this.current?.text||""),this.dialog?.actions&&(this.dialog.actions[0].text="Update")),"edit_style"==e){var t=this.current?.attributes.get("style");if(""==(t=t||""))this.perform("add_style");else{var r=t.split(";");for(var i in this.dialog={form:{title:"Edit Style",controls:[],actions:[{text:"Update",action:"edit_style_"}]}},r)if(""!=r[i]&&" "!=r[i]){var o=r[i].split(":")[0],s=r[i].split(":")[1];this.dialog.form?.controls.push({id:"c_"+i,type:"text",label:o,value:s})}}}if("edit_style_"==e){var a=[];this.dialog?.form?.controls.forEach(c=>{""!=c.label&&""!=c.value&&a.push(c.label+":"+c.value)}),a.length>0&&this.current?.attributes.set("style",a.join(";")+";"),this.perform("close_dialog")}if("edit_attribute"==e){var u=this.current?.attributes;if(0==(u=u||new Map)?.size)this.perform("add_attribute");else for(var i in this.dialog={form:{title:"Edit Attr",controls:[],actions:[{text:"Update",action:"edit_attribute_"}]}},u)""!=i&&null!=u.get(i)&&""!=u.get(i)&&(s=u.get(i)||"",this.dialog.form?.controls.push({id:"c_"+i,type:"text",label:i,value:s}))}if("edit_attribute_"==e){let c=new Map;this.dialog?.form?.controls.forEach(l=>{l.label&&l.value&&""!=l.value&&c.set(l.label,l.value)}),this.current&&(this.current.attributes=c),this.perform("close_dialog")}if("edit_class"==e){let c=this.current?.attributes.get("class")||"";this.dialog={form:{title:"Edit Class",controls:[{id:"addclass",type:"text",value:c}],actions:[{text:"Update",action:"edit_class_"}]}}}if("edit_class_"==e&&this.current){let c=this.dialog?.form?.controls[0].value;null==c||""==c?this.current.attributes.delete("class"):this.current.attributes.set("class",c),this.perform("close_dialog")}this.app.events.emit("preview")}performAdd(e){if(e.indexOf("add_element_")>-1){let t=e.replace("add_element_","");null==this.current?(this.current=Sn.create(t),this.design=this.current,this.app.design=this.design):Sn.add(this.current,t),this.perform("close_dialog")}if(e.indexOf("add_text_")>-1){if(this.current){let t=this.dialog?.form?.controls[0].value;t=""==t?void 0:t,this.current.text=t}console.log("Form",this.dialog?.form),this.perform("close_dialog")}if(e.indexOf("add_class_")>-1){if(this.current){let t=this.current.attributes.get("class"),r=this.dialog?.form?.controls[0].value;t=t?t+" "+r:r,t&&this.current.attributes.set("class",t)}console.log("Form",this.dialog?.form),this.perform("close_dialog")}if(e.indexOf("add_style_")>-1){if(this.current){let t=this.current.attributes.get("style"),r=this.dialog?.form?.controls[0].value,i=this.dialog?.form?.controls[1].value;t=t?t+r+":"+i+";":r+":"+i+";",t&&this.current.attributes.set("style",t)}console.log("Form",this.dialog?.form),this.perform("close_dialog")}if(e.indexOf("add_attribute_")>-1){if(this.current){let t=this.dialog?.form?.controls[0].value,r=this.dialog?.form?.controls[1].value;t&&r&&this.current.attributes.set(t,r)}console.log("Form",this.dialog?.form),this.perform("close_dialog")}this.app.events.emit("preview")}performDelete(){!this.design||!this.current||(this.design.id==this.current.id?(this.design=void 0,this.current=void 0,this.app.design=void 0,this.app.current=void 0):(Sn.remove(this.design,this.current),this.current=this.design),this.app.events.emit("preview"))}}Iu.\u0275fac=function(e){return new(e||Iu)(T(Mi),T(Kr),T(O2))},Iu.\u0275cmp=vn({type:Iu,selectors:[["app-home"]],decls:8,vars:4,consts:[[3,"menu"],[3,"close","action",4,"ngIf"],[1,"node-preview","row","m-0"],[1,"col-12","col-md-3","node","table-responsive"],[3,"node","current","select",4,"ngIf"],[1,"col-12","col-md-9","node","table-responsive",3,"click"],[3,"design"],[3,"dialog","action"],[3,"close","action"],[3,"node","current","select"]],template:function(e,t){1&e&&(V(0,"app-header",0),Z("menu",function(){return t.menu=!0}),F(),de(1,use,1,0,"app-menu",1),V(2,"div",2)(3,"div",3),de(4,cse,1,2,"app-node",4),F(),V(5,"div",5),Z("click",function(){return t.deselect()}),ui(6,"app-preview",6),F()(),V(7,"app-dialog",7),Z("action",function(i){return t.perform(i)}),F()),2&e&&(H(1),W("ngIf",t.menu),H(3),W("ngIf",t.design),H(2),W("design",t.design),H(1),W("dialog",t.dialog))},dependencies:[Vo,ud,cd,ld,yu,_d],styles:[".node[_ngcontent-%COMP%]{border:solid 10px darkblue;padding:10px;height:100%}.node-preview[_ngcontent-%COMP%]{border:solid 1px black;position:absolute;top:55px;left:55px;height:-webkit-fill-available;width:-webkit-fill-available}@media only screen and (min-width: 600px){.col-md-9.node[_ngcontent-%COMP%]{border-left:0px}}"]});const aA={add:{action:"add",title:"Add",actions:[{text:"Element",action:"add_element"},{text:"Text",action:"add_text"},{text:"Class",action:"add_class"},{text:"Style",action:"add_style"},{text:"Attribute",action:"add_attribute"}]},add_element:{action:"add_element",title:"Add Element",actions:[{text:"Div",action:"add_element_div"},{text:"Span",action:"add_element_span"},{text:"Button",action:"add_element_button"},{text:"Input",action:"add_element_input"},{text:"Paragraph",action:"add_element_p"},{text:"Image",action:"add_element_img"},{text:"Video",action:"add_element_video"},{text:"Script",action:"add_element_script"},{text:"Style",action:"add_element_style"}]},add_text:{form:{title:"Add Text",controls:[{id:"addtext",type:"textarea",placeholder:"Enter text here..",value:""}],actions:[{text:"Add",action:"add_text_"}]}},add_class:{form:{title:"Add Class",controls:[{id:"addclass",type:"text",placeholder:"Specify class..",value:""}],actions:[{text:"Add",action:"add_class_"}]}},add_style:{form:{title:"Add Style",controls:[{id:"addstylekey",type:"text",placeholder:"name",value:"",values:["height","width","margin","padding","border","text-align","float","position","display","color","background","font-size","font-weight","text-decoration","vertical-align"]},{id:"addstylevalue",type:"text",placeholder:"value",value:""}],actions:[{text:"Add",action:"add_style_"}]}},add_attribute:{form:{title:"Add Attribute",controls:[{id:"attributeKey",type:"text",placeholder:"name",value:""},{id:"attributeKey",type:"text",placeholder:"value",value:""}],actions:[{text:"Add",action:"add_attribute_"}]}},edit:{action:"edit",title:"Edit",actions:[{text:"Text",action:"edit_text"},{text:"Class",action:"edit_class"},{text:"Style",action:"edit_style"},{text:"Attribute",action:"edit_attribute"}]}};class yd{constructor(e,t){this.router=e,this.fs=t,t.refreshUser.subscribe(r=>this.router.navigate(r?["dashboard"]:["home"]))}logout(){(function NJ(n){return pn(n).signOut()})(this.fs.auth).then(()=>this.fs.logout())}}yd.\u0275fac=function(e){return new(e||yd)(T(Zt),T(Kr))},yd.\u0275cmp=vn({type:yd,selectors:[["app-logout"]],decls:7,vars:0,consts:[[1,"row","text-center","p-3"],[1,"col-md-4","col-sm-6","col-xs-12","form"],[2,"font-weight","600","font-size","18px"],[3,"click"]],template:function(e,t){1&e&&(V(0,"div",0)(1,"div",1)(2,"p",2),he(3," Are you sure you want to log-off? "),ui(4,"br"),F(),V(5,"button",3),Z("click",function(){return t.logout()}),he(6,"Logout"),F()()())},styles:["img[_ngcontent-%COMP%]{display:block;width:80px;margin:30px auto;box-shadow:0 5px 10px -7px #333;border-radius:50%}.form[_ngcontent-%COMP%]{background-color:#fff;margin:50px auto 10px;padding:30px;border-radius:8px;overflow:hidden;box-shadow:0 2px 10px -3px #333;text-align:center}button[_ngcontent-%COMP%]{border-radius:100px;border:none;background:#719BE6;width:50%;padding:10px;color:#fff;box-shadow:0 2px 10px -3px #719be6;display:block;margin:30px auto 10px}"]});const lse=[{path:"",component:Iu},{path:"home",component:Iu},{path:"login",component:od},{path:"logout",component:yd}];class Eu{}function dse(n,e){1&n&&(V(0,"div",1),ui(1,"div",2),F())}Eu.\u0275fac=function(e){return new(e||Eu)},Eu.\u0275mod=ar({type:Eu}),Eu.\u0275inj=zn({imports:[kN.forRoot(lse),kN]});class vd{constructor(e){this.loaderService=e,this.isLoading=this.loaderService.isLoading}}vd.\u0275fac=function(e){return new(e||vd)(T(ys))},vd.\u0275cmp=vn({type:vd,selectors:[["app-loader"]],decls:2,vars:3,consts:[["class","c d-flex align-items-center justify-content-center",4,"ngIf"],[1,"c","d-flex","align-items-center","justify-content-center"],[1,"loader"]],template:function(e,t){1&e&&(de(0,dse,2,0,"div",0),function vP(n,e){const t=Ee();let r;const i=n+22;t.firstCreatePass?(r=function Rq(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(i,r.onDestroy)):r=t.data[i];const o=r.factory||(r.factory=To(r.type)),s=Wn(T);try{const a=qd(!1),u=o();return qd(a),function _4(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,C(),i,u),u}finally{Wn(s)}}(1,"async")),2&e&&W("ngIf",function IP(n,e,t){const r=n+22,i=C(),o=function Rs(n,e){return n[e]}(i,r);return function hc(n,e){return n[1].data[e].pure}(i,r)?pP(i,cn(),e,o.transform,t,o):o.transform(t)}(1,1,t.isLoading))},dependencies:[Vo,zx],styles:[".c[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1000;text-align:center;background:black;opacity:.5}.loader[_ngcontent-%COMP%]{border:15px solid #f3f3f3;border-radius:50%;border-top:15px solid #3498db;width:100px;height:100px;animation:_ngcontent-%COMP%_spin 2s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(360deg)}}"]});class Id{}Id.\u0275fac=function(e){return new(e||Id)},Id.\u0275cmp=vn({type:Id,selectors:[["app-root"]],decls:2,vars:0,template:function(e,t){1&e&&ui(0,"router-outlet")(1,"app-loader")},dependencies:[Jy,vd],styles:[".node[_ngcontent-%COMP%]{border:solid 10px darkblue;padding:10px;height:100%}.node-preview[_ngcontent-%COMP%]{border:solid 1px black;position:absolute;top:55px;left:55px;height:-webkit-fill-available;width:-webkit-fill-available}@media only screen and (min-width: 600px){.col-md-9.node[_ngcontent-%COMP%]{border-left:0px}}"]});class wu{}wu.\u0275fac=function(e){return new(e||wu)},wu.\u0275mod=ar({type:wu,bootstrap:[Id]}),wu.\u0275inj=zn({providers:[Mi],imports:[v5,Eu,$oe,Tie]}),y5().bootstrapModule(wu).catch(n=>console.error(n))}},Fe=>{Fe(Fe.s=50)}]);