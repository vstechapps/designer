"use strict";(self.webpackChunkdesigner=self.webpackChunkdesigner||[]).push([[179],{408:()=>{function ke(n){return"function"==typeof n}function _u(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const pd=_u(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function yu(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class $n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(ke(r))try{r()}catch(o){e=o instanceof pd?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{WD(o)}catch(s){e=e??[],s instanceof pd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new pd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)WD(e);else{if(e instanceof $n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&yu(t,e)}remove(e){const{_finalizers:t}=this;t&&yu(t,e),e instanceof $n&&e._removeParent(this)}}$n.EMPTY=(()=>{const n=new $n;return n.closed=!0,n})();const qD=$n.EMPTY;function zD(n){return n instanceof $n||n&&"closed"in n&&ke(n.remove)&&ke(n.add)&&ke(n.unsubscribe)}function WD(n){ke(n)?n():n.unsubscribe()}const fo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},gd={setTimeout(n,e,...t){const{delegate:r}=gd;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=gd;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function KD(n){gd.setTimeout(()=>{const{onUnhandledError:e}=fo;if(!e)throw n;e(n)})}function QD(){}const mU=mg("C",void 0,void 0);function mg(n,e,t){return{kind:n,value:e,error:t}}let po=null;function md(n){if(fo.useDeprecatedSynchronousErrorHandling){const e=!po;if(e&&(po={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=po;if(po=null,t)throw r}}else n()}class _g extends $n{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,zD(e)&&e.add(this)):this.destination=TU}static create(e,t,r){return new vu(e,t,r)}next(e){this.isStopped?vg(function yU(n){return mg("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?vg(function _U(n){return mg("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?vg(mU,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const IU=Function.prototype.bind;function yg(n,e){return IU.call(n,e)}class EU{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){_d(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){_d(r)}else _d(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){_d(t)}}}class vu extends _g{constructor(e,t,r){let i;if(super(),ke(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&fo.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&yg(e.next,o),error:e.error&&yg(e.error,o),complete:e.complete&&yg(e.complete,o)}):i=e}this.destination=new EU(i)}}function _d(n){fo.useDeprecatedSynchronousErrorHandling?function vU(n){fo.useDeprecatedSynchronousErrorHandling&&po&&(po.errorThrown=!0,po.error=n)}(n):KD(n)}function vg(n,e){const{onStoppedNotification:t}=fo;t&&gd.setTimeout(()=>t(n,e))}const TU={closed:!0,next:QD,error:function wU(n){throw n},complete:QD},Ig="function"==typeof Symbol&&Symbol.observable||"@@observable";function go(n){return n}function YD(n){return 0===n.length?go:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let ft=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function AU(n){return n&&n instanceof _g||function DU(n){return n&&ke(n.next)&&ke(n.error)&&ke(n.complete)}(n)&&zD(n)}(t)?t:new vu(t,r,i);return md(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=JD(r))((i,o)=>{const s=new vu({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Ig](){return this}pipe(...t){return YD(t)(this)}toPromise(t){return new(t=JD(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function JD(n){var e;return null!==(e=n??fo.Promise)&&void 0!==e?e:Promise}const bU=_u(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let zr=(()=>{class n extends ft{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new XD(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new bU}next(t){md(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){md(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){md(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?qD:(this.currentObservers=null,o.push(t),new $n(()=>{this.currentObservers=null,yu(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new ft;return t.source=this,t}}return n.create=(e,t)=>new XD(e,t),n})();class XD extends zr{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:qD}}function ZD(n){return ke(n?.lift)}function St(n){return e=>{if(ZD(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Et(n,e,t,r,i){return new SU(n,e,t,r,i)}class SU extends _g{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function pe(n,e){return St((t,r)=>{let i=0;t.subscribe(Et(r,o=>{r.next(n.call(e,o,i++))}))})}function wg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}function mo(n){return this instanceof mo?(this.v=n,this):new mo(n)}function xU(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(h){r[h]&&(i[h]=function(f){return new Promise(function(p,m){o.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{!function u(h){h.value instanceof mo?Promise.resolve(h.value.v).then(c,l):d(o[0][2],h)}(r[h](f))}catch(p){d(o[0][3],p)}}function c(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),o.shift(),o.length&&a(o[0][0],o[0][1])}}function MU(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function nA(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){!function i(o,s,a,u){Promise.resolve(u).then(function(c){o({value:c,done:a})},s)}(a,u,(s=n[o](s)).done,s.value)})}}}const rA=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function iA(n){return ke(n?.then)}function oA(n){return ke(n[Ig])}function sA(n){return Symbol.asyncIterator&&ke(n?.[Symbol.asyncIterator])}function aA(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const uA=function kU(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function cA(n){return ke(n?.[uA])}function lA(n){return xU(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield mo(t.read());if(i)return yield mo(void 0);yield yield mo(r)}}finally{t.releaseLock()}})}function dA(n){return ke(n?.getReader)}function nr(n){if(n instanceof ft)return n;if(null!=n){if(oA(n))return function OU(n){return new ft(e=>{const t=n[Ig]();if(ke(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(rA(n))return function VU(n){return new ft(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(iA(n))return function FU(n){return new ft(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,KD)})}(n);if(sA(n))return hA(n);if(cA(n))return function LU(n){return new ft(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(dA(n))return function UU(n){return hA(lA(n))}(n)}throw aA(n)}function hA(n){return new ft(e=>{(function BU(n,e){var t,r,i,o;return function RU(n,e,t,r){return new(t||(t=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(l.value).then(a,u)}c((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=MU(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Wr(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ot(n,e,t=1/0){return ke(e)?Ot((r,i)=>pe((o,s)=>e(r,o,i,s))(nr(n(r,i))),t):("number"==typeof e&&(t=e),St((r,i)=>function jU(n,e,t,r,i,o,s,a){const u=[];let c=0,l=0,d=!1;const h=()=>{d&&!u.length&&!c&&e.complete()},f=m=>c<r?p(m):u.push(m),p=m=>{o&&e.next(m),c++;let _=!1;nr(t(m,l++)).subscribe(Et(e,I=>{i?.(I),o?f(I):e.next(I)},()=>{_=!0},void 0,()=>{if(_)try{for(c--;u.length&&c<r;){const I=u.shift();s?Wr(e,s,()=>p(I)):p(I)}h()}catch(I){e.error(I)}}))};return n.subscribe(Et(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,n,t)))}function gs(n=1/0){return Ot(go,n)}const Kr=new ft(n=>n.complete());function Tg(n){return n[n.length-1]}function fA(n){return ke(Tg(n))?n.pop():void 0}function Iu(n){return function GU(n){return n&&ke(n.schedule)}(Tg(n))?n.pop():void 0}function pA(n,e=0){return St((t,r)=>{t.subscribe(Et(r,i=>Wr(r,n,()=>r.next(i),e),()=>Wr(r,n,()=>r.complete(),e),i=>Wr(r,n,()=>r.error(i),e)))})}function gA(n,e=0){return St((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function mA(n,e){if(!n)throw new Error("Iterable cannot be null");return new ft(t=>{Wr(t,e,()=>{const r=n[Symbol.asyncIterator]();Wr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function pt(n,e){return e?function YU(n,e){if(null!=n){if(oA(n))return function qU(n,e){return nr(n).pipe(gA(e),pA(e))}(n,e);if(rA(n))return function WU(n,e){return new ft(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(iA(n))return function zU(n,e){return nr(n).pipe(gA(e),pA(e))}(n,e);if(sA(n))return mA(n,e);if(cA(n))return function KU(n,e){return new ft(t=>{let r;return Wr(t,e,()=>{r=n[uA](),Wr(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void t.error(s)}o?t.complete():t.next(i)},0,!0)}),()=>ke(r?.return)&&r.return()})}(n,e);if(dA(n))return function QU(n,e){return mA(lA(n),e)}(n,e)}throw aA(n)}(n,e):nr(n)}function Cg(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new vu({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function Me(n){for(let e in n)if(n[e]===Me)return e;throw Error("Could not find renamed property on target object.")}function Dg(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ne(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ne).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Ag(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const ZU=Me({__forward_ref__:Me});function Oe(n){return n.__forward_ref__=Oe,n.toString=function(){return Ne(this())},n}function W(n){return bg(n)?n():n}function bg(n){return"function"==typeof n&&n.hasOwnProperty(ZU)&&n.__forward_ref__===Oe}function Sg(n){return n&&!!n.\u0275providers}class S extends Error{constructor(e,t){super(function yd(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function ne(n){return"string"==typeof n?n:null==n?"":String(n)}function vd(n,e){throw new S(-201,!1)}function Gn(n,e){null==n&&function Ae(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function rr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Id(n){return yA(n,Ed)||yA(n,IA)}function yA(n,e){return n.hasOwnProperty(e)?n[e]:null}function vA(n){return n&&(n.hasOwnProperty(Rg)||n.hasOwnProperty(uB))?n[Rg]:null}const Ed=Me({\u0275prov:Me}),Rg=Me({\u0275inj:Me}),IA=Me({ngInjectableDef:Me}),uB=Me({ngInjectorDef:Me});var K=(()=>((K=K||{})[K.Default=0]="Default",K[K.Host=1]="Host",K[K.Self=2]="Self",K[K.SkipSelf=4]="SkipSelf",K[K.Optional=8]="Optional",K))();let Pg;function Hn(n){const e=Pg;return Pg=n,e}function EA(n,e,t){const r=Id(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&K.Optional?null:void 0!==e?e:void vd(Ne(n))}const Ve=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Eu={},xg="__NG_DI_FLAG__",wd="ngTempTokenPath",dB=/\n/gm,wA="__source";let wu;function ms(n){const e=wu;return wu=n,e}function fB(n,e=K.Default){if(void 0===wu)throw new S(-203,!1);return null===wu?EA(n,void 0,e):wu.get(n,e&K.Optional?null:void 0,e)}function $(n,e=K.Default){return(function cB(){return Pg}()||fB)(W(n),e)}function ye(n,e=K.Default){return $(n,Td(e))}function Td(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Mg(n){const e=[];for(let t=0;t<n.length;t++){const r=W(n[t]);if(Array.isArray(r)){if(0===r.length)throw new S(900,!1);let i,o=K.Default;for(let s=0;s<r.length;s++){const a=r[s],u=pB(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}e.push($(i,o))}else e.push($(r))}return e}function Tu(n,e){return n[xg]=e,n.prototype[xg]=e,n}function pB(n){return n[xg]}function Ri(n){return{toString:n}.toString()}var ir=(()=>((ir=ir||{})[ir.OnPush=0]="OnPush",ir[ir.Default=1]="Default",ir))(),Ir=(()=>{return(n=Ir||(Ir={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ir;var n})();const Qr={},Te=[],Cd=Me({\u0275cmp:Me}),Ng=Me({\u0275dir:Me}),kg=Me({\u0275pipe:Me}),CA=Me({\u0275mod:Me}),Yr=Me({\u0275fac:Me}),Cu=Me({__NG_ELEMENT_ID__:Me});let _B=0;function Sn(n){return Ri(()=>{const t=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===ir.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Te,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Ir.Emulated,id:"c"+_B++,styles:n.styles||Te,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},o=n.dependencies,s=n.features;return i.inputs=bA(n.inputs,r),i.outputs=bA(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(DA).filter(AA):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(on).filter(AA):null,i})}function DA(n){return be(n)||qt(n)}function AA(n){return null!==n}function Er(n){return Ri(()=>({type:n.type,bootstrap:n.bootstrap||Te,declarations:n.declarations||Te,imports:n.imports||Te,exports:n.exports||Te,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function bA(n,e){if(null==n)return Qr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,e&&(e[i]=o)}return t}const J=Sn;function be(n){return n[Cd]||null}function qt(n){return n[Ng]||null}function on(n){return n[kg]||null}function Rn(n,e){const t=n[CA]||null;if(!t&&!0===e)throw new Error(`Type ${Ne(n)} does not have '\u0275mod' property.`);return t}function Pn(n){return Array.isArray(n)&&"object"==typeof n[1]}function sr(n){return Array.isArray(n)&&!0===n[1]}function Fg(n){return 0!=(4&n.flags)}function Su(n){return n.componentOffset>-1}function Rd(n){return 1==(1&n.flags)}function ar(n){return null!==n.template}function IB(n){return 0!=(256&n[2])}function yo(n,e){return n.hasOwnProperty(Yr)?n[Yr]:null}class TB{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function xn(){return NA}function NA(n){return n.type.prototype.ngOnChanges&&(n.setInput=DB),CB}function CB(){const n=OA(this),e=n?.current;if(e){const t=n.previous;if(t===Qr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function DB(n,e,t,r){const i=this.declaredInputs[t],o=OA(n)||function AB(n,e){return n[kA]=e}(n,{previous:Qr,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new TB(u&&u.currentValue,e,a===Qr),n[r]=e}xn.ngInherit=!0;const kA="__ngSimpleChanges__";function OA(n){return n[kA]||null}function Vt(n){for(;Array.isArray(n);)n=n[0];return n}function Pd(n,e){return Vt(e[n])}function Mn(n,e){return Vt(e[n.index])}function LA(n,e){return n.data[e]}function Nn(n,e){const t=e[n];return Pn(t)?t:t[0]}function xd(n){return 64==(64&n[2])}function Pi(n,e){return null==e?null:n[e]}function UA(n){n[18]=0}function Ug(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const re={lFrame:QA(null),bindingsEnabled:!0};function jA(){return re.bindingsEnabled}function T(){return re.lFrame.lView}function ve(){return re.lFrame.tView}function qe(n){return re.lFrame.contextLView=n,n[8]}function ze(n){return re.lFrame.contextLView=null,n}function Ft(){let n=$A();for(;null!==n&&64===n.type;)n=n.parent;return n}function $A(){return re.lFrame.currentTNode}function Tr(n,e){const t=re.lFrame;t.currentTNode=n,t.isParent=e}function Bg(){return re.lFrame.isParent}function an(){const n=re.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Ts(){return re.lFrame.bindingIndex++}function UB(n,e){const t=re.lFrame;t.bindingIndex=t.bindingRootIndex=n,$g(e)}function $g(n){re.lFrame.currentDirectiveIndex=n}function Hg(n){re.lFrame.currentQueryIndex=n}function jB(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function WA(n,e,t){if(t&K.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&K.Host||(i=jB(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;e=i,n=o}const r=re.lFrame=KA();return r.currentTNode=e,r.lView=n,!0}function qg(n){const e=KA(),t=n[1];re.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function KA(){const n=re.lFrame,e=null===n?null:n.child;return null===e?QA(n):e}function QA(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function YA(){const n=re.lFrame;return re.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const JA=YA;function zg(){const n=YA();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function un(){return re.lFrame.selectedIndex}function vo(n){re.lFrame.selectedIndex=n}function Md(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=o;s&&(n.contentHooks||(n.contentHooks=[])).push(-t,s),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),u&&(n.viewHooks||(n.viewHooks=[])).push(-t,u),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=l&&(n.destroyHooks||(n.destroyHooks=[])).push(t,l)}}function Nd(n,e,t){XA(n,e,3,t)}function kd(n,e,t,r){(3&n[2])===t&&XA(n,e,t,r)}function Wg(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function XA(n,e,t,r){const o=r??-1,s=e.length-1;let a=0;for(let u=void 0!==r?65535&n[18]:0;u<s;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[18]+=65536),(a<o||-1==o)&&(YB(n,t,e,u),n[18]=(4294901760&n[18])+u+2),u++}function YB(n,e,t,r){const i=t[r]<0,o=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}class Pu{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Qg(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{const o=i,s=t[++r];eb(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function ZA(n){return 3===n||4===n||6===n}function eb(n){return 64===n.charCodeAt(0)}function xu(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||tb(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function tb(n,e,t,r,i){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}function nb(n){return-1!==n}function Od(n){return 32767&n}function Vd(n,e){let t=function ej(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let Yg=!0;function Fd(n){const e=Yg;return Yg=n,e}let tj=0;const Cr={};function Ld(n,e){const t=ob(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,Jg(r.data,n),Jg(e,null),Jg(r.blueprint,null));const i=Xg(n,e),o=n.injectorIndex;if(nb(i)){const s=Od(i),a=Vd(i,e),u=a[1].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|u[s+c]}return e[o+8]=i,o}function Jg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function ob(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Xg(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=hb(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Zg(n,e,t){!function nj(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Cu)&&(r=t[Cu]),null==r&&(r=t[Cu]=tj++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function sb(n,e,t){if(t&K.Optional||void 0!==n)return n;vd()}function ab(n,e,t,r){if(t&K.Optional&&void 0===r&&(r=null),0==(t&(K.Self|K.Host))){const i=n[9],o=Hn(void 0);try{return i?i.get(e,r,t&K.Optional):EA(e,r,t&K.Optional)}finally{Hn(o)}}return sb(r,0,t)}function ub(n,e,t,r=K.Default,i){if(null!==n){if(1024&e[2]){const s=function aj(n,e,t,r,i){let o=n,s=e;for(;null!==o&&null!==s&&1024&s[2]&&!(256&s[2]);){const a=cb(o,s,t,r|K.Self,Cr);if(a!==Cr)return a;let u=o.parent;if(!u){const c=s[21];if(c){const l=c.get(t,Cr,r);if(l!==Cr)return l}u=hb(s),s=s[15]}o=u}return i}(n,e,t,r,Cr);if(s!==Cr)return s}const o=cb(n,e,t,r,Cr);if(o!==Cr)return o}return ab(e,t,r,i)}function cb(n,e,t,r,i){const o=function oj(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Cu)?n[Cu]:void 0;return"number"==typeof e?e>=0?255&e:sj:e}(t);if("function"==typeof o){if(!WA(e,n,r))return r&K.Host?sb(i,0,r):ab(e,t,r,i);try{const s=o(r);if(null!=s||r&K.Optional)return s;vd()}finally{JA()}}else if("number"==typeof o){let s=null,a=ob(n,e),u=-1,c=r&K.Host?e[16][6]:null;for((-1===a||r&K.SkipSelf)&&(u=-1===a?Xg(n,e):e[a+8],-1!==u&&db(r,!1)?(s=e[1],a=Od(u),e=Vd(u,e)):a=-1);-1!==a;){const l=e[1];if(lb(o,a,l.data)){const d=ij(a,e,t,s,r,c);if(d!==Cr)return d}u=e[a+8],-1!==u&&db(r,e[1].data[a+8]===c)&&lb(o,a,e)?(s=l,a=Od(u),e=Vd(u,e)):a=-1}}return i}function ij(n,e,t,r,i,o){const s=e[1],a=s.data[n+8],l=function Ud(n,e,t,r,i){const o=n.providerIndexes,s=e.data,a=1048575&o,u=n.directiveStart,l=o>>20,h=i?a+l:n.directiveEnd;for(let f=r?a:a+l;f<h;f++){const p=s[f];if(f<u&&t===p||f>=u&&p.type===t)return f}if(i){const f=s[u];if(f&&ar(f)&&f.type===t)return u}return null}(a,s,t,null==r?Su(a)&&Yg:r!=s&&0!=(3&a.type),i&K.Host&&o===a);return null!==l?Io(e,s,l,a):Cr}function Io(n,e,t,r){let i=n[t];const o=e.data;if(function JB(n){return n instanceof Pu}(i)){const s=i;s.resolving&&function eB(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new S(-200,`Circular dependency in DI detected for ${n}${t}`)}(function De(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ne(n)}(o[t]));const a=Fd(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?Hn(s.injectImpl):null;WA(n,r,K.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function QB(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=NA(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o))}(t,o[t],e)}finally{null!==u&&Hn(u),Fd(a),s.resolving=!1,JA()}}return i}function lb(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function db(n,e){return!(n&K.Self||n&K.Host&&e)}class Ds{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ub(this._tNode,this._lView,e,Td(r),t)}}function sj(){return new Ds(Ft(),T())}function Lt(n){return Ri(()=>{const e=n.prototype.constructor,t=e[Yr]||em(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[Yr]||em(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function em(n){return bg(n)?()=>{const e=em(W(n));return e&&e()}:yo(n)}function hb(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}const bs="__parameters__";function Rs(n,e,t){return Ri(()=>{const r=function tm(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,c,l){const d=u.hasOwnProperty(bs)?u[bs]:Object.defineProperty(u,bs,{value:[]})[bs];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class G{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Eo(n,e){n.forEach(t=>Array.isArray(t)?Eo(t,e):e(t))}function pb(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function jd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function kn(n,e,t){let r=Ps(n,e);return r>=0?n[1|r]=t:(r=~r,function dj(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function rm(n,e){const t=Ps(n,e);if(t>=0)return n[1|t]}function Ps(n,e){return function gb(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const Ou=Tu(Rs("Optional"),8),Vu=Tu(Rs("SkipSelf"),4);var _n=(()=>((_n=_n||{})[_n.Important=1]="Important",_n[_n.DashCase=2]="DashCase",_n))();const cm=new Map;let Nj=0;const dm="__ngContext__";function Kt(n,e){Pn(e)?(n[dm]=e[20],function Oj(n){cm.set(n[20],n)}(e)):n[dm]=e}function fm(n,e){return undefined(n,e)}function Bu(n){const e=n[3];return sr(e)?e[3]:e}function pm(n){return Ob(n[13])}function gm(n){return Ob(n[4])}function Ob(n){for(;null!==n&&!sr(n);)n=n[4];return n}function Ms(n,e,t,r,i){if(null!=r){let o,s=!1;sr(r)?o=r:Pn(r)&&(s=!0,r=r[0]);const a=Vt(r);0===n&&null!==t?null==i?jb(e,t,a):wo(e,t,a,i||null,!0):1===n&&null!==t?wo(e,t,a,i||null,!0):2===n?function wm(n,e,t){const r=qd(n,e);r&&function t$(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function i$(n,e,t,r,i){const o=t[7];o!==Vt(t)&&Ms(e,n,r,o,i);for(let a=10;a<t.length;a++){const u=t[a];ju(u[1],u,n,e,r,o)}}(e,n,o,t,i)}}function _m(n,e,t){return n.createElement(e,t)}function Fb(n,e){const t=n[9],r=t.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,Ug(i,-1)),t.splice(r,1)}function ym(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&Fb(i,r),e>0&&(n[t-1][4]=r[4]);const o=jd(n,10+e);!function Wj(n,e){ju(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function Lb(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&ju(n,e,t,3,null,null),function Yj(n){let e=n[13];if(!e)return vm(n[1],n);for(;e;){let t=null;if(Pn(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Pn(e)&&vm(e[1],e),e=e[3];null===e&&(e=n),Pn(e)&&vm(e[1],e),t=e&&e[4]}e=t}}(e)}}function vm(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function e$(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Pu)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];try{u.call(a)}finally{}}else try{o.call(i)}finally{}}}}(n,e),function Zj(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?r[i=s]():r[i=-s].unsubscribe(),o+=2}else{const s=r[i=t[o+1]];t[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)(0,r[o])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&sr(e[3])){t!==e[3]&&Fb(t,e);const r=e[19];null!==r&&r.detachView(n)}!function Vj(n){cm.delete(n[20])}(e)}}function Ub(n,e,t){return function Bb(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=n.data[r.directiveStart+i];if(o===Ir.None||o===Ir.Emulated)return null}return Mn(r,t)}}(n,e.parent,t)}function wo(n,e,t,r,i){n.insertBefore(e,t,r,i)}function jb(n,e,t){n.appendChild(e,t)}function $b(n,e,t,r,i){null!==r?wo(n,e,t,r,i):jb(n,e,t)}function qd(n,e){return n.parentNode(e)}let Dm,qb=function Hb(n,e,t){return 40&n.type?Mn(n,t):null};function zd(n,e,t,r){const i=Ub(n,r,e),o=e[11],a=function Gb(n,e,t){return qb(n,e,t)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)$b(o,i,t[u],a,!1);else $b(o,i,t,a,!1)}function Wd(n,e){if(null!==e){const t=e.type;if(3&t)return Mn(e,n);if(4&t)return Em(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Wd(n,r);{const i=n[e.index];return sr(i)?Em(-1,i):Vt(i)}}if(32&t)return fm(e,n)()||Vt(n[e.index]);{const r=Wb(n,e);return null!==r?Array.isArray(r)?r[0]:Wd(Bu(n[16]),r):Wd(n,e.next)}}return null}function Wb(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Em(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return Wd(r,i)}return e[7]}function Tm(n,e,t,r,i,o,s){for(;null!=t;){const a=r[t.index],u=t.type;if(s&&0===e&&(a&&Kt(Vt(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)Tm(n,e,t.child,r,i,o,!1),Ms(e,n,i,a,o);else if(32&u){const c=fm(t,r);let l;for(;l=c();)Ms(e,n,i,l,o);Ms(e,n,i,a,o)}else 16&u?Kb(n,e,r,t,i,o):Ms(e,n,i,a,o);t=s?t.projectionNext:t.next}}function ju(n,e,t,r,i,o){Tm(t,r,n.firstChild,e,i,o,!1)}function Kb(n,e,t,r,i,o){const s=t[16],u=s[6].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)Ms(e,n,i,u[c],o);else Tm(n,e,u,s[3],i,o,!0)}function Qb(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Yb(n,e,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&Qg(n,e,r),null!==i&&Qb(n,e,i),null!==o&&function s$(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}class t0{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const Jd=new G("ENVIRONMENT_INITIALIZER"),h0=new G("INJECTOR",-1),f0=new G("INJECTOR_DEF_TYPES");class p0{get(e,t=Eu){if(t===Eu){const r=new Error(`NullInjectorError: No provider for ${Ne(e)}!`);throw r.name="NullInjectorError",r}return t}}function N$(...n){return{\u0275providers:g0(0,n),\u0275fromNgModule:!0}}function g0(n,...e){const t=[],r=new Set;let i;return Eo(e,o=>{const s=o;xm(s,t,[],r)&&(i||(i=[]),i.push(s))}),void 0!==i&&m0(i,t),t}function m0(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];Mm(i,o=>{e.push(o)})}}function xm(n,e,t,r){if(!(n=W(n)))return!1;let i=null,o=vA(n);const s=!o&&be(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const u=n.ngModule;if(o=vA(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of u)xm(c,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;r.add(i);try{Eo(o.imports,l=>{xm(l,e,t,r)&&(c||(c=[]),c.push(l))})}finally{}void 0!==c&&m0(c,e)}if(!a){const c=yo(i)||(()=>new i);e.push({provide:i,useFactory:c,deps:Te},{provide:f0,useValue:i,multi:!0},{provide:Jd,useValue:()=>$(i),multi:!0})}const u=o.providers;null==u||a||Mm(u,l=>{e.push(l)})}}return i!==n&&void 0!==n.providers}function Mm(n,e){for(let t of n)Sg(t)&&(t=t.\u0275providers),Array.isArray(t)?Mm(t,e):e(t)}const k$=Me({provide:String,useValue:Me});function Nm(n){return null!==n&&"object"==typeof n&&k$ in n}function Co(n){return"function"==typeof n}const km=new G("Set Injector scope."),Xd={},V$={};let Om;function Zd(){return void 0===Om&&(Om=new p0),Om}class ti{}class v0 extends ti{constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Fm(e,s=>this.processProvider(s)),this.records.set(h0,Ns(void 0,this)),i.has("environment")&&this.records.set(ti,Ns(void 0,this));const o=this.records.get(km);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(f0.multi,Te,K.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=ms(this),r=Hn(void 0);try{return e()}finally{ms(t),Hn(r)}}get(e,t=Eu,r=K.Default){this.assertNotDestroyed(),r=Td(r);const i=ms(this),o=Hn(void 0);try{if(!(r&K.SkipSelf)){let a=this.records.get(e);if(void 0===a){const u=function j$(n){return"function"==typeof n||"object"==typeof n&&n instanceof G}(e)&&Id(e);a=u&&this.injectableDefInScope(u)?Ns(Vm(e),Xd):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&K.Self?Zd():this.parent).get(e,t=r&K.Optional&&t===Eu?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[wd]=s[wd]||[]).unshift(Ne(e)),i)throw s;return function gB(n,e,t,r){const i=n[wd];throw e[wA]&&i.unshift(e[wA]),n.message=function mB(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Ne(e);if(Array.isArray(e))i=e.map(Ne).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Ne(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(dB,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[wd]=null,n}(s,e,"R3InjectorError",this.source)}throw s}finally{Hn(o),ms(i)}}resolveInjectorInitializers(){const e=ms(this),t=Hn(void 0);try{const r=this.get(Jd.multi,Te,K.Self);for(const i of r)i()}finally{ms(e),Hn(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Ne(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(e){let t=Co(e=W(e))?e:W(e&&e.provide);const r=function L$(n){return Nm(n)?Ns(void 0,n.useValue):Ns(I0(n),Xd)}(e);if(Co(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Ns(void 0,Xd,!0),i.factory=()=>Mg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Xd&&(t.value=V$,t.value=t.factory()),"object"==typeof t.value&&t.value&&function B$(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=W(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Vm(n){const e=Id(n),t=null!==e?e.factory:yo(n);if(null!==t)return t;if(n instanceof G)throw new S(204,!1);if(n instanceof Function)return function F$(n){const e=n.length;if(e>0)throw function ku(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new S(204,!1);const t=function sB(n){const e=n&&(n[Ed]||n[IA]);if(e){const t=function aB(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new S(204,!1)}function I0(n,e,t){let r;if(Co(n)){const i=W(n);return yo(i)||Vm(i)}if(Nm(n))r=()=>W(n.useValue);else if(function y0(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Mg(n.deps||[]));else if(function _0(n){return!(!n||!n.useExisting)}(n))r=()=>$(W(n.useExisting));else{const i=W(n&&(n.useClass||n.provide));if(!function U$(n){return!!n.deps}(n))return yo(i)||Vm(i);r=()=>new i(...Mg(n.deps))}return r}function Ns(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Fm(n,e){for(const t of n)Array.isArray(t)?Fm(t,e):t&&Sg(t)?Fm(t.\u0275providers,e):e(t)}class $${}class E0{}class H${resolveComponentFactory(e){throw function G$(n){const e=Error(`No component factory found for ${Ne(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let qu=(()=>{class n{}return n.NULL=new H$,n})();function q$(){return ks(Ft(),T())}function ks(n,e){return new On(Mn(n,e))}let On=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=q$,n})();class T0{}let ni=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function W$(){const n=T(),t=Nn(Ft().index,n);return(Pn(t)?t:n)[11]}(),n})(),K$=(()=>{class n{}return n.\u0275prov=H({token:n,providedIn:"root",factory:()=>null}),n})();class zu{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Q$=new zu("15.0.4"),Lm={};function Bm(n){return n.ngOriginalError}class Os{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Bm(e);for(;t&&Bm(t);)t=Bm(t);return t||null}}function ri(n){return n instanceof Function?n():n}function D0(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}const A0="ng-template";function sG(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==D0(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function b0(n){return 4===n.type&&n.value!==A0}function aG(n,e,t){return e===(4!==n.type||t?n.value:A0)}function uG(n,e,t){let r=4;const i=n.attrs||[],o=function dG(n){for(let e=0;e<n.length;e++)if(ZA(n[e]))return e;return n.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!aG(n,u,t)||""===u&&1===e.length){if(ur(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!sG(n.attrs,c,t)){if(ur(r))return!1;s=!0}continue}const d=cG(8&r?"class":u,i,b0(n),t);if(-1===d){if(ur(r))return!1;s=!0;continue}if(""!==c){let h;h=d>o?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==D0(f,c,0)||2&r&&c!==h){if(ur(r))return!1;s=!0}}}}else{if(!s&&!ur(r)&&!ur(u))return!1;if(s&&ur(u))continue;s=!1,r=u|1&r}}return ur(r)||s}function ur(n){return 0==(1&n)}function cG(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const s=e[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function hG(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function S0(n,e,t=!1){for(let r=0;r<e.length;r++)if(uG(n,e[r],t))return!0;return!1}function R0(n,e){return n?":not("+e.trim()+")":e}function pG(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!ur(s)&&(e+=R0(o,i),i=""),r=s,o=o||!ur(r);t++}return""!==i&&(e+=R0(o,i)),e}const ie={};function Q(n){P0(ve(),T(),un()+n,!1)}function P0(n,e,t,r){if(!r)if(3==(3&e[2])){const o=n.preOrderCheckHooks;null!==o&&Nd(e,o,t)}else{const o=n.preOrderHooks;null!==o&&kd(e,o,0,t)}vo(t)}function k0(n,e=null,t=null,r){const i=O0(n,e,t,r);return i.resolveInjectorInitializers(),i}function O0(n,e=null,t=null,r,i=new Set){const o=[t||Te,N$(n)];return r=r||("object"==typeof n?void 0:Ne(n)),new v0(o,e||Zd(),r||null,i)}let cr=(()=>{class n{static create(t,r){if(Array.isArray(t))return k0({name:""},r,t,"");{const i=t.name??"";return k0({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=Eu,n.NULL=new p0,n.\u0275prov=H({token:n,providedIn:"any",factory:()=>$(h0)}),n.__NG_ELEMENT_ID__=-1,n})();function A(n,e=K.Default){const t=T();return null===t?$(n,e):ub(Ft(),t,W(n),e)}function G0(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],o=t[r+1];if(-1!==o){const s=n.data[o];Hg(i),s.contentQueries(2,e[o],o)}}}function th(n,e,t,r,i,o,s,a,u,c,l){const d=e.blueprint.slice();return d[0]=i,d[2]=76|r,(null!==l||n&&1024&n[2])&&(d[2]|=1024),UA(d),d[3]=d[15]=n,d[8]=t,d[10]=s||n&&n[10],d[11]=a||n&&n[11],d[12]=u||n&&n[12]||null,d[9]=c||n&&n[9]||null,d[6]=o,d[20]=function kj(){return Nj++}(),d[21]=l,d[16]=2==e.type?n[16]:d,d}function Ls(n,e,t,r,i){let o=n.data[e];if(null===o)o=function qm(n,e,t,r,i){const o=$A(),s=Bg(),u=n.data[e]=function BG(n,e,t,r,i,o){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u)),u}(n,e,t,r,i),function LB(){return re.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function Ru(){const n=re.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Tr(o,!0),o}function Wu(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function zm(n,e,t){qg(e);try{const r=n.viewQuery;null!==r&&n_(1,r,t);const i=n.template;null!==i&&H0(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&G0(n,e),n.staticViewQueries&&n_(2,n.viewQuery,t);const o=n.components;null!==o&&function FG(n,e){for(let t=0;t<e.length;t++)o4(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,zg()}}function nh(n,e,t,r){const i=e[2];if(128!=(128&i)){qg(e);try{UA(e),function HA(n){return re.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&H0(n,e,t,2,r);const s=3==(3&i);if(s){const c=n.preOrderCheckHooks;null!==c&&Nd(e,c,null)}else{const c=n.preOrderHooks;null!==c&&kd(e,c,0,null),Wg(e,0)}if(function r4(n){for(let e=pm(n);null!==e;e=gm(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],o=i[3];0==(512&i[2])&&Ug(o,1),i[2]|=512}}}(e),function n4(n){for(let e=pm(n);null!==e;e=gm(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];xd(r)&&nh(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&G0(n,e),s){const c=n.contentCheckHooks;null!==c&&Nd(e,c)}else{const c=n.contentHooks;null!==c&&kd(e,c,1),Wg(e,1)}!function OG(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)vo(~i);else{const o=i,s=t[++r],a=t[++r];UB(s,o),a(2,e[o])}}}finally{vo(-1)}}(n,e);const a=n.components;null!==a&&function VG(n,e){for(let t=0;t<e.length;t++)i4(n,e[t])}(e,a);const u=n.viewQuery;if(null!==u&&n_(2,u,r),s){const c=n.viewCheckHooks;null!==c&&Nd(e,c)}else{const c=n.viewHooks;null!==c&&kd(e,c,2),Wg(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,Ug(e[3],-1))}finally{zg()}}}function H0(n,e,t,r,i){const o=un(),s=2&r;try{vo(-1),s&&e.length>22&&P0(n,e,22,!1),t(r,i)}finally{vo(o)}}function Wm(n,e,t){if(Fg(e)){const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const s=n.data[o];s.contentQueries&&s.contentQueries(1,t[o],o)}}}function Km(n,e,t){!jA()||(function zG(n,e,t,r){const i=t.directiveStart,o=t.directiveEnd;Su(t)&&function ZG(n,e,t){const r=Mn(e,n),i=q0(t),o=n[10],s=rh(n,th(n,i,null,t.onPush?32:16,r,e,o,o.createRenderer(r,t),null,null,null));n[e.index]=s}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Ld(t,e),Kt(r,e);const s=t.initialInputs;for(let a=i;a<o;a++){const u=n.data[a],c=Io(e,n,a,t);Kt(c,e),null!==s&&e4(0,a-i,c,u,0,s),ar(u)&&(Nn(t.index,e)[8]=Io(e,n,a,t))}}(n,e,t,Mn(t,e)),64==(64&t.flags)&&J0(n,e,t))}function Qm(n,e,t=Mn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?t(e,n):n[s];n[i++]=a}}}function q0(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Ym(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Ym(n,e,t,r,i,o,s,a,u,c){const l=22+r,d=l+i,h=function LG(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:ie);return t}(l,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function W0(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const o=n[i];null===r?K0(t,e,i,o):r.hasOwnProperty(i)&&K0(t,e,r[i],o)}return t}function K0(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Q0(n,e){const t=Nn(e,n);16&t[2]||(t[2]|=32)}function Jm(n,e,t,r){let i=!1;if(jA()){const o=null===r?null:{"":-1},s=function KG(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(S0(e,s.selectors,!1))if(r||(r=[]),ar(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),Xm(n,e,a.length)}else r.unshift(s),Xm(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(n,t);let a,u;null===s?a=u=null:[a,u]=s,null!==a&&(i=!0,Y0(n,e,t,a,o,u)),o&&function QG(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new S(-301,!1);r.push(e[i],o)}}}(t,r,o)}return t.mergedAttrs=xu(t.mergedAttrs,t.attrs),i}function Y0(n,e,t,r,i,o){for(let c=0;c<r.length;c++)Zg(Ld(t,e),n,r[c].type);!function JG(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const l=r[c];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,u=Wu(n,e,r.length,null);for(let c=0;c<r.length;c++){const l=r[c];t.mergedAttrs=xu(t.mergedAttrs,l.hostAttrs),XG(n,t,e,u,l),YG(u,l,i),null!==l.contentQueries&&(t.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(t.flags|=64);const d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),a=!0),u++}!function jG(n,e,t){const i=e.directiveEnd,o=n.data,s=e.attrs,a=[];let u=null,c=null;for(let l=e.directiveStart;l<i;l++){const d=o[l],h=t?t.get(d):null,p=h?h.outputs:null;u=W0(d.inputs,l,u,h?h.inputs:null),c=W0(d.outputs,l,c,p);const m=null===u||null===s||b0(e)?null:t4(u,l,s);a.push(m)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}(n,t,o)}function J0(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function BB(){return re.lFrame.currentDirectiveIndex}();try{vo(o);for(let a=r;a<i;a++){const u=n.data[a],c=e[a];$g(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&WG(u,c)}}finally{vo(-1),$g(s)}}function WG(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Xm(n,e,t){e.componentOffset=t,(n.components||(n.components=[])).push(e.index)}function YG(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ar(e)&&(t[""]=n)}}function XG(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=yo(i.type)),s=new Pu(o,ar(i),A);n.blueprint[r]=s,t[r]=s,function HG(n,e,t,r,i){const o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function qG(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,o)}}(n,e,r,Wu(n,t,i.hostVars,ie),i)}function e4(n,e,t,r,i,o){const s=o[e];if(null!==s){const a=r.setInput;for(let u=0;u<s.length;){const c=s[u++],l=s[u++],d=s[u++];null!==a?r.setInput(t,d,c,l):t[l]=d}}}function t4(n,e,t){let r=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===r&&(r=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function X0(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null]}function i4(n,e){const t=Nn(e,n);if(xd(t)){const r=t[1];48&t[2]?nh(r,t,r.template,t[8]):t[5]>0&&e_(t)}}function e_(n){for(let r=pm(n);null!==r;r=gm(r))for(let i=10;i<r.length;i++){const o=r[i];if(xd(o))if(512&o[2]){const s=o[1];nh(s,o,s.template,o[8])}else o[5]>0&&e_(o)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=Nn(t[r],n);xd(i)&&i[5]>0&&e_(i)}}function o4(n,e){const t=Nn(e,n),r=t[1];(function s4(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),zm(r,t,t[8])}function rh(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function t_(n){for(;n;){n[2]|=32;const e=Bu(n);if(IB(n)&&!e)return n;n=e}return null}function ih(n,e,t,r=!0){const i=e[10];i.begin&&i.begin();try{nh(n,e,n.template,t)}catch(s){throw r&&nS(e,s),s}finally{i.end&&i.end()}}function n_(n,e,t){Hg(0),e(n,t)}function Z0(n){return n[7]||(n[7]=[])}function eS(n){return n.cleanup||(n.cleanup=[])}function nS(n,e){const t=n[9],r=t?t.get(Os,null):null;r&&r.handleError(e)}function r_(n,e,t,r,i){for(let o=0;o<t.length;){const s=t[o++],a=t[o++],u=e[s],c=n.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function oh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=Ag(i,a):2==o&&(r=Ag(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function sh(n,e,t,r,i=!1){for(;null!==t;){const o=e[t.index];if(null!==o&&r.push(Vt(o)),sr(o))for(let a=10;a<o.length;a++){const u=o[a],c=u[1].firstChild;null!==c&&sh(u[1],u,c,r)}const s=t.type;if(8&s)sh(n,e,t.child,r);else if(32&s){const a=fm(t,e);let u;for(;u=a();)r.push(u)}else if(16&s){const a=Wb(e,t);if(Array.isArray(a))r.push(...a);else{const u=Bu(e[16]);sh(u[1],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class Ku{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return sh(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(sr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(ym(e,r),jd(t,r))}this._attachedToViewContainer=!1}Lb(this._lView[1],this._lView)}onDestroy(e){!function z0(n,e,t,r){const i=Z0(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&eS(n).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){t_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){ih(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Qj(n,e){ju(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=e}}class a4 extends Ku{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;ih(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class rS extends qu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=be(e);return new Qu(t,this.ngModule)}}function iS(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class c4{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Td(r);const i=this.injector.get(e,Lm,r);return i!==Lm||t===Lm?i:this.parentInjector.get(e,t,r)}}class Qu extends E0{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function gG(n){return n.map(pG).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return iS(this.componentDef.inputs)}get outputs(){return iS(this.componentDef.outputs)}create(e,t,r,i){let o=(i=i||this.ngModule)instanceof ti?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new c4(e,o):e,a=s.get(T0,null);if(null===a)throw new S(407,!1);const u=s.get(K$,null),c=a.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",d=r?function UG(n,e,t){return n.selectRootElement(e,t===Ir.ShadowDom)}(c,r,this.componentDef.encapsulation):_m(c,l,function u4(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(l)),h=this.componentDef.onPush?288:272,f=Ym(0,null,null,1,0,null,null,null,null,null),p=th(null,f,null,h,null,null,a,c,u,s,null);let m,_;qg(p);try{const I=this.componentDef;let w,y=null;I.findHostDirectiveDefs?(w=[],y=new Map,I.findHostDirectiveDefs(I,w,y),w.push(I)):w=[I];const b=function d4(n,e){const t=n[1];return n[22]=e,Ls(t,22,2,"#host",null)}(p,d),L=function h4(n,e,t,r,i,o,s,a){const u=i[1];!function f4(n,e,t,r){for(const i of n)e.mergedAttrs=xu(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(oh(e,e.mergedAttrs,!0),null!==t&&Yb(r,t,e))}(r,n,e,s);const c=o.createRenderer(e,t),l=th(i,q0(t),null,t.onPush?32:16,i[n.index],n,o,c,a||null,null,null);return u.firstCreatePass&&Xm(u,n,r.length-1),rh(i,l),i[n.index]=l}(b,d,I,w,p,a,c);_=LA(f,22),d&&function g4(n,e,t,r){if(r)Qg(n,t,["ng-version",Q$.full]);else{const{attrs:i,classes:o}=function mG(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!ur(i))break;i=o}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Qg(n,t,i),o&&o.length>0&&Qb(n,t,o.join(" "))}}(c,I,d,r),void 0!==t&&function m4(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const o=t[i];r.push(null!=o?Array.from(o):null)}}(_,this.ngContentSelectors,t),m=function p4(n,e,t,r,i,o){const s=Ft(),a=i[1],u=Mn(s,i);Y0(a,i,s,t,null,r);for(let l=0;l<t.length;l++)Kt(Io(i,a,s.directiveStart+l,s),i);J0(a,i,s),u&&Kt(u,i);const c=Io(i,a,s.directiveStart+s.componentOffset,s);if(n[8]=i[8]=c,null!==o)for(const l of o)l(c,e);return Wm(a,s,n),c}(L,I,w,y,p,[_4]),zm(f,p,null)}finally{zg()}return new l4(this.componentType,m,ks(_,p),p,_)}}class l4 extends $${constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new a4(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const o=this._rootLView;r_(o[1],o,i,e,t),Q0(o,this._tNode.index)}}get injector(){return new Ds(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function _4(){const n=Ft();Md(T()[1],n)}function Se(n){let e=function oS(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(ar(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new S(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const s=n;s.inputs=i_(n.inputs),s.declaredInputs=i_(n.declaredInputs),s.outputs=i_(n.outputs);const a=i.hostBindings;a&&E4(n,a);const u=i.viewQuery,c=i.contentQueries;if(u&&v4(n,u),c&&I4(n,c),Dg(n.inputs,i.inputs),Dg(n.declaredInputs,i.declaredInputs),Dg(n.outputs,i.outputs),ar(i)&&i.data.animation){const l=n.data;l.animation=(l.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===Se&&(t=!1)}}e=Object.getPrototypeOf(e)}!function y4(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=xu(i.hostAttrs,t=xu(t,i.hostAttrs))}}(r)}function i_(n){return n===Qr?{}:n===Te?[]:n}function v4(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function I4(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function E4(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let ah=null;function Do(){if(!ah){const n=Ve.Symbol;if(n&&n.iterator)ah=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(ah=r)}}}return ah}function Yu(n){return!!o_(n)&&(Array.isArray(n)||!(n instanceof Map)&&Do()in n)}function o_(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ar(n,e,t){return n[e]=t}function Qt(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function we(n,e,t,r,i,o,s,a){const u=T(),c=ve(),l=n+22,d=c.firstCreatePass?function x4(n,e,t,r,i,o,s,a,u){const c=e.consts,l=Ls(e,n,4,s||null,Pi(c,a));Jm(e,t,l,Pi(c,u)),Md(e,l);const d=l.tViews=Ym(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,t,r,i,o,s):c.data[l];Tr(d,!1);const h=u[11].createComment("");zd(c,u,h,d),Kt(h,u),rh(u,u[l]=X0(h,u,h,d)),Rd(d)&&Km(c,u,d),null!=s&&Qm(u,d,a)}function Z(n,e,t){const r=T();return Qt(r,Ts(),e)&&function Vn(n,e,t,r,i,o,s,a){const u=Mn(e,t);let l,c=e.inputs;!a&&null!=c&&(l=c[r])?(r_(n,t,l,r,i),Su(e)&&Q0(t,e.index)):3&e.type&&(r=function $G(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(u,r,i))}(ve(),function Ye(){const n=re.lFrame;return LA(n.tView,n.selectedIndex)}(),r,n,e,r[11],t,!1),Z}function s_(n,e,t,r,i){const s=i?"class":"style";r_(n,t,e.inputs[s],s,r)}function U(n,e,t,r){const i=T(),o=ve(),s=22+n,a=i[11],u=i[s]=_m(a,e,function KB(){return re.lFrame.currentNamespace}()),c=o.firstCreatePass?function k4(n,e,t,r,i,o,s){const a=e.consts,c=Ls(e,n,2,i,Pi(a,o));return Jm(e,t,c,Pi(a,s)),null!==c.attrs&&oh(c,c.attrs,!1),null!==c.mergedAttrs&&oh(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,i,0,e,t,r):o.data[s];return Tr(c,!0),Yb(a,u,c),32!=(32&c.flags)&&zd(o,i,u,c),0===function MB(){return re.lFrame.elementDepthCount}()&&Kt(u,i),function NB(){re.lFrame.elementDepthCount++}(),Rd(c)&&(Km(o,i,c),Wm(o,c,i)),null!==r&&Qm(i,c),U}function B(){let n=Ft();Bg()?function jg(){re.lFrame.isParent=!1}():(n=n.parent,Tr(n,!1));const e=n;!function kB(){re.lFrame.elementDepthCount--}();const t=ve();return t.firstCreatePass&&(Md(t,n),Fg(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function XB(n){return 0!=(8&n.flags)}(e)&&s_(t,e,T(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function ZB(n){return 0!=(16&n.flags)}(e)&&s_(t,e,T(),e.stylesWithoutHost,!1),B}function Mi(n,e,t,r){return U(n,e,t,r),B(),Mi}function tt(){return T()}function Xu(n){return!!n&&"function"==typeof n.then}const c_=function vS(n){return!!n&&"function"==typeof n.subscribe};function ce(n,e,t,r){const i=T(),o=ve(),s=Ft();return function ES(n,e,t,r,i,o,s){const a=Rd(r),c=n.firstCreatePass&&eS(n),l=e[8],d=Z0(e);let h=!0;if(3&r.type||s){const m=Mn(r,e),_=s?s(m):m,I=d.length,w=s?b=>s(Vt(b[r.index])):r.index;let y=null;if(!s&&a&&(y=function V4(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const a=e[7],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(n,e,i,r.index)),null!==y)(y.__ngLastListenerFn__||y).__ngNextListenerFn__=o,y.__ngLastListenerFn__=o,h=!1;else{o=TS(r,e,l,o,!1);const b=t.listen(_,i,o);d.push(o,b),c&&c.push(i,w,I,I+1)}}else o=TS(r,e,l,o,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const m=p.length;if(m)for(let _=0;_<m;_+=2){const L=e[p[_]][p[_+1]].subscribe(o),j=d.length;d.push(o,L),c&&c.push(i,r.index,j,-(j+1))}}}(o,i,i[11],s,n,e,r),ce}function wS(n,e,t,r){try{return!1!==t(r)}catch(i){return nS(n,i),!1}}function TS(n,e,t,r,i){return function o(s){if(s===Function)return r;t_(n.componentOffset>-1?Nn(n.index,e):e);let u=wS(e,0,r,s),c=o.__ngNextListenerFn__;for(;c;)u=wS(e,0,c,s)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&(s.preventDefault(),s.returnValue=!1),u}}function ee(n=1){return function $B(n){return(re.lFrame.contextLView=function GB(n,e){for(;n>0;)e=e[15],n--;return e}(n,re.lFrame.contextLView))[8]}(n)}function ch(n,e){return n<<17|e<<2}function Ni(n){return n>>17&32767}function d_(n){return 2|n}function bo(n){return(131068&n)>>2}function h_(n,e){return-131069&n|e<<2}function f_(n){return 1|n}function NS(n,e,t,r,i){const o=n[t+1],s=null===e;let a=r?Ni(o):bo(o),u=!1;for(;0!==a&&(!1===u||s);){const l=n[a+1];q4(n[a],e)&&(u=!0,n[a+1]=r?f_(l):d_(l)),a=r?Ni(l):bo(l)}u&&(n[t+1]=r?d_(o):f_(o))}function q4(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Ps(n,e)>=0}function lh(n,e){return function lr(n,e,t,r){const i=T(),o=ve(),s=function Zr(n){const e=re.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);o.firstUpdatePass&&function $S(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[un()],s=function jS(n,e){return e>=n.expandoStartIndex}(n,t);(function zS(n,e){return 0!=(n.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function eH(n,e,t,r){const i=function Gg(n){const e=re.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Zu(t=p_(null,n,e,t,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==i)if(t=p_(i,n,e,t,r),null===o){let u=function tH(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==bo(r))return n[Ni(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=p_(null,n,e,u[1],r),u=Zu(u,e.attrs,r),function nH(n,e,t,r){n[Ni(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else o=function rH(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Zu(r,n[o].hostAttrs,t);return Zu(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function G4(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ni(s),u=bo(s);n[r]=t;let l,c=!1;if(Array.isArray(t)){const d=t;l=d[1],(null===l||Ps(d,l)>0)&&(c=!0)}else l=t;if(i)if(0!==u){const h=Ni(n[a+1]);n[r+1]=ch(h,a),0!==h&&(n[h+1]=h_(n[h+1],r)),n[a+1]=function j4(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=ch(a,0),0!==a&&(n[a+1]=h_(n[a+1],r)),a=r;else n[r+1]=ch(u,0),0===a?a=r:n[u+1]=h_(n[u+1],r),u=r;c&&(n[r+1]=d_(n[r+1])),NS(n,l,r,!0),NS(n,l,r,!1),function H4(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&Ps(o,e)>=0&&(t[r+1]=f_(t[r+1]))}(e,l,n,r,o),s=ch(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,t,s,r)}}(o,n,s,r),e!==ie&&Qt(i,s,e)&&function HS(n,e,t,r,i,o,s,a){if(!(3&e.type))return;const u=n.data,c=u[a+1],l=function $4(n){return 1==(1&n)}(c)?qS(u,e,t,i,bo(c),s):void 0;dh(l)||(dh(o)||function B4(n){return 2==(2&n)}(c)&&(o=qS(u,null,t,i,a,s)),function o$(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:_n.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=_n.Important),n.setStyle(t,r,i,o))}}(r,s,Pd(un(),t),i,o))}(o,o.data[un()],i,i[11],n,i[s+1]=function sH(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ne(function xi(n){return n instanceof t0?n.changingThisBreaksApplicationSecurity:n}(n)))),n}(e,t),r,s)}(n,e,null,!0),lh}function p_(n,e,t,r,i){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],r=Zu(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Zu(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),kn(n,s,!!t||e[++o]))}return void 0===n?null:n}function qS(n,e,t,r,i,o){const s=null===e;let a;for(;i>0;){const u=n[i],c=Array.isArray(u),l=c?u[1]:u,d=null===l;let h=t[i+1];h===ie&&(h=d?Te:void 0);let f=d?rm(h,r):l===r?h:void 0;if(c&&!dh(f)&&(f=rm(u,r)),dh(f)&&(a=f,s))return a;const p=n[i+1];i=s?Ni(p):bo(p)}if(null!==e){let u=o?e.residualClasses:e.residualStyles;null!=u&&(a=rm(u,r))}return a}function dh(n){return void 0!==n}function Ee(n,e=""){const t=T(),r=ve(),i=n+22,o=r.firstCreatePass?Ls(r,i,1,e,null):r.data[i],s=t[i]=function mm(n,e){return n.createText(e)}(t[11],e);zd(r,t,s,o),Tr(o,!1)}function vn(n){return g_("",n,""),vn}function g_(n,e,t){const r=T(),i=function Bs(n,e,t,r){return Qt(n,Ts(),t)?e+ne(t)+r:ie}(r,n,e,t);return i!==ie&&function ii(n,e,t){const r=Pd(e,n);!function Vb(n,e,t){n.setValue(e,t)}(n[11],r,t)}(r,un(),i),g_}const Ys="en-US";let pR=Ys;function y_(n,e,t,r,i){if(n=W(n),Array.isArray(n))for(let o=0;o<n.length;o++)y_(n[o],e,t,r,i);else{const o=ve(),s=T();let a=Co(n)?n:W(n.provide),u=I0(n);const c=Ft(),l=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(Co(n)||!n.multi){const f=new Pu(u,i,A),p=I_(a,e,i?l:l+h,d);-1===p?(Zg(Ld(c,s),o,a),v_(o,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(f),s.push(f)):(t[p]=f,s[p]=f)}else{const f=I_(a,e,l+h,d),p=I_(a,e,l,l+h),m=f>=0&&t[f],_=p>=0&&t[p];if(i&&!_||!i&&!m){Zg(Ld(c,s),o,a);const I=function C3(n,e,t,r,i){const o=new Pu(n,t,A);return o.multi=[],o.index=e,o.componentProviders=0,UR(o,i,r&&!t),o}(i?T3:w3,t.length,i,r,u);!i&&_&&(t[p].providerFactory=I),v_(o,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(I),s.push(I)}else v_(o,n,f>-1?f:p,UR(t[i?p:f],u,!i&&r));!i&&r&&_&&t[p].componentProviders++}}}function v_(n,e,t,r){const i=Co(e),o=function O$(n){return!!n.useClass}(e);if(i||o){const u=(o?W(e.useClass):e).prototype.ngOnDestroy;if(u){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const l=c.indexOf(t);-1===l?c.push(t,[r,u]):c[l+1].push(r,u)}else c.push(t,u)}}}function UR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function I_(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function w3(n,e,t,r){return E_(this.multi,[])}function T3(n,e,t,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Io(t,t[1],this.providerFactory.index,r);o=a.slice(0,s),E_(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],E_(i,o);return o}function E_(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function We(n,e=[]){return t=>{t.providersResolver=(r,i)=>function E3(n,e,t){const r=ve();if(r.firstCreatePass){const i=ar(n);y_(t,r.data,r.blueprint,i,!0),y_(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Js{}class BR{}class jR extends Js{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new rS(this);const r=Rn(e);this._bootstrapComponents=ri(r.bootstrap),this._r3Injector=O0(e,t,[{provide:Js,useValue:this},{provide:qu,useValue:this.componentFactoryResolver}],Ne(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class w_ extends BR{constructor(e){super(),this.moduleType=e}create(e){return new jR(this.moduleType,e)}}class A3 extends Js{constructor(e,t,r){super(),this.componentFactoryResolver=new rS(this),this.instance=null;const i=new v0([...e,{provide:Js,useValue:this},{provide:qu,useValue:this.componentFactoryResolver}],t||Zd(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function mh(n,e,t=null){return new A3(n,e,t).injector}let b3=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=g0(0,t.type),i=r.length>0?mh([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=H({token:n,providedIn:"environment",factory:()=>new n($(ti))}),n})();function $R(n){n.getStandaloneInjector=e=>e.get(b3).getOrCreateStandaloneInjector(n)}function YR(n,e,t,r){return function JR(n,e,t,r,i,o){const s=e+t;return Qt(n,s,i)?Ar(n,s+1,o?r.call(o,i):r(i)):function oc(n,e){const t=n[e];return t===ie?void 0:t}(n,s+1)}(T(),an(),n,e,t,r)}function C_(n){return e=>{setTimeout(n,void 0,e)}}const Ce=class J3 extends zr{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=C_(o),i&&(i=C_(i)),s&&(s=C_(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof $n&&e.add(a),a}};let oi=(()=>{class n{}return n.__NG_ELEMENT_ID__=tq,n})();const Z3=oi,eq=class extends Z3{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tViews,i=th(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(r)),zm(r,i,e),new Ku(i)}};function tq(){return function _h(n,e){return 4&n.type?new eq(e,n,ks(n,e)):null}(Ft(),T())}let hr=(()=>{class n{}return n.__NG_ELEMENT_ID__=nq,n})();function nq(){return function iP(n,e){let t;const r=e[n.index];if(sr(r))t=r;else{let i;if(8&n.type)i=Vt(r);else{const o=e[11];i=o.createComment("");const s=Mn(n,e);wo(o,qd(o,s),i,function n$(n,e){return n.nextSibling(e)}(o,s),!1)}e[n.index]=t=X0(r,e,i,n),rh(e,t)}return new nP(t,n,e)}(Ft(),T())}const rq=hr,nP=class extends rq{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ks(this._hostTNode,this._hostLView)}get injector(){return new Ds(this._hostTNode,this._hostLView)}get parentInjector(){const e=Xg(this._hostTNode,this._hostLView);if(nb(e)){const t=Vd(e,this._hostLView),r=Od(e);return new Ds(t[1].data[r+8],t)}return new Ds(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=rP(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=e.createEmbeddedView(t||{},o);return this.insert(s,i),s}createComponent(e,t,r,i,o){const s=e&&!function Nu(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const d=t||{};a=d.index,r=d.injector,i=d.projectableNodes,o=d.environmentInjector||d.ngModuleRef}const u=s?e:new Qu(be(e)),c=r||this.parentInjector;if(!o&&null==u.ngModule){const h=(s?c:this.parentInjector).get(ti,null);h&&(o=h)}const l=u.create(c,i,void 0,o);return this.insert(l.hostView,a),l}insert(e,t){const r=e._lView,i=r[1];if(function xB(n){return sr(n[3])}(r)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const d=r[3],h=new nP(d,d[6],d[3]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(t),s=this._lContainer;!function Jj(n,e,t,r){const i=10+r,o=t.length;r>0&&(t[i-1][4]=e),r<o-10?(e[4]=t[i],pb(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const s=e[17];null!==s&&t!==s&&function Xj(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(i,r,s,o);const a=Em(o,s),u=r[11],c=qd(u,s[7]);return null!==c&&function Kj(n,e,t,r,i,o){r[0]=i,r[6]=e,ju(n,r,t,1,i,o)}(i,s[6],u,r,c,a),e.attachToViewContainerRef(),pb(A_(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=rP(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=ym(this._lContainer,t);r&&(jd(A_(this._lContainer),t),Lb(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=ym(this._lContainer,t);return r&&null!=jd(A_(this._lContainer),t)?new Ku(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function rP(n){return n[8]}function A_(n){return n[8]||(n[8]=[])}function vh(...n){}const Ih=new G("Application Initializer");let Eh=(()=>{class n{constructor(t){this.appInits=t,this.resolve=vh,this.reject=vh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Xu(o))t.push(o);else if(c_(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)($(Ih,8))},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uc=new G("AppId",{providedIn:"root",factory:function xP(){return`${V_()}${V_()}${V_()}`}});function V_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const MP=new G("Platform Initializer"),NP=new G("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),kP=new G("appBootstrapListener");let xq=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const si=new G("LocaleId",{providedIn:"root",factory:()=>ye(si,K.Optional|K.SkipSelf)||function Mq(){return typeof $localize<"u"&&$localize.locale||Ys}()});class kq{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let OP=(()=>{class n{compileModuleSync(t){return new w_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=ri(Rn(t).declarations).reduce((s,a)=>{const u=be(a);return u&&s.push(new Qu(u)),s},[]);return new kq(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Fq=(()=>Promise.resolve(0))();function F_(n){typeof Zone>"u"?Fq.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class mt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ce(!1),this.onMicrotaskEmpty=new Ce(!1),this.onStable=new Ce(!1),this.onError=new Ce(!1),typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Lq(){let n=Ve.requestAnimationFrame,e=Ve.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function jq(n){const e=()=>{!function Bq(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ve,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,U_(n),n.isCheckStableRunning=!0,L_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),U_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{try{return LP(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),UP(n)}},onInvoke:(t,r,i,o,s,a,u)=>{try{return LP(n),t.invoke(i,o,s,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),UP(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,U_(n),L_(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mt.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(mt.isInAngularZone())throw new S(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Uq,vh,vh);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const Uq={};function L_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function U_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function LP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function UP(n){n._nesting--,L_(n)}class $q{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ce,this.onMicrotaskEmpty=new Ce,this.onStable=new Ce,this.onError=new Ce}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const BP=new G(""),wh=new G("");let $_,B_=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$_||(function Gq(n){$_=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mt.assertNotInAngularZone(),F_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())F_(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)($(mt),$(j_),$(wh))},n.\u0275prov=H({token:n,factory:n.\u0275fac}),n})(),j_=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return $_?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),ki=null;const jP=new G("AllowMultipleToken"),G_=new G("PlatformDestroyListeners");class $P{constructor(e,t){this.name=e,this.token=t}}function HP(n,e,t=[]){const r=`Platform: ${e}`,i=new G(r);return(o=[])=>{let s=H_();if(!s||s.injector.get(jP,!1)){const a=[...t,...o,{provide:i,useValue:!0}];n?n(a):function zq(n){if(ki&&!ki.get(jP,!1))throw new S(400,!1);ki=n;const e=n.get(zP);(function GP(n){const e=n.get(MP,null);e&&e.forEach(t=>t())})(n)}(function qP(n=[],e){return cr.create({name:e,providers:[{provide:km,useValue:"platform"},{provide:G_,useValue:new Set([()=>ki=null])},...n]})}(a,r))}return function Kq(n){const e=H_();if(!e)throw new S(401,!1);return e}()}}function H_(){return ki?.get(zP)??null}let zP=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function KP(n,e){let t;return t="noop"===n?new $q:("zone.js"===n?void 0:n)||new mt(e),t}(r?.ngZone,function WP(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:mt,useValue:i}];return i.run(()=>{const s=cr.create({providers:o,parent:this.injector,name:t.moduleType.name}),a=t.create(s),u=a.injector.get(Os,null);if(!u)throw new S(402,!1);return i.runOutsideAngular(()=>{const c=i.onError.subscribe({next:l=>{u.handleError(l)}});a.onDestroy(()=>{Ch(this._modules,a),c.unsubscribe()})}),function QP(n,e,t){try{const r=t();return Xu(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(u,i,()=>{const c=a.injector.get(Eh);return c.runInitializers(),c.donePromise.then(()=>(function gR(n){Gn(n,"Expected localeId to be defined"),"string"==typeof n&&(pR=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(si,Ys)||Ys),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,r=[]){const i=YP({},r);return function Hq(n,e,t){const r=new w_(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(Th);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new S(403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new S(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(G_,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)($(cr))},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function YP(n,e){return Array.isArray(e)?e.reduce(YP,n):{...n,...e}}let Th=(()=>{class n{constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new ft(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new ft(a=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{mt.assertNotInAngularZone(),F_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{mt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{u.unsubscribe(),c.unsubscribe()}});this.isStable=function JU(...n){const e=Iu(n),t=function HU(n,e){return"number"==typeof Tg(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?nr(r[0]):gs(t)(pt(r,e)):Kr}(o,s.pipe(function XU(n={}){const{connector:e=(()=>new zr),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,c=0,l=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=u=void 0,l=d=!1},p=()=>{const m=s;f(),m?.unsubscribe()};return St((m,_)=>{c++,!d&&!l&&h();const I=u=u??e();_.add(()=>{c--,0===c&&!d&&!l&&(a=Cg(p,i))}),I.subscribe(_),!s&&c>0&&(s=new vu({next:w=>I.next(w),error:w=>{d=!0,h(),a=Cg(f,t,w),I.error(w)},complete:()=>{l=!0,h(),a=Cg(f,r),I.complete()}}),nr(m).subscribe(s))})(o)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof E0;if(!this._injector.get(Eh).done)throw!i&&function _s(n){const e=be(n)||qt(n)||on(n);return null!==e&&e.standalone}(t),new S(405,false);let s;s=i?t:this._injector.get(qu).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function qq(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Js),c=s.create(cr.NULL,[],r||s.selector,a),l=c.location.nativeElement,d=c.injector.get(BP,null);return d?.registerApplication(l),c.onDestroy(()=>{this.detachView(c.hostView),Ch(this.components,c),d?.unregisterApplication(l)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new S(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Ch(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(kP,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ch(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new S(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)($(mt),$(ti),$(Os))},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ch(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let Dh=(()=>{class n{}return n.__NG_ELEMENT_ID__=Yq,n})();function Yq(n){return function Jq(n,e,t){if(Su(n)&&!t){const r=Nn(n.index,e);return new Ku(r,r)}return 47&n.type?new Ku(e[16],e):null}(Ft(),T(),16==(16&n))}class tx{constructor(){}supports(e){return Yu(e)}create(e){return new rz(e)}}const nz=(n,e)=>e;class rz{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||nz}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const s=!r||t&&t.currentIndex<rx(r,i,o)?t:r,a=rx(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{o||(o=[]);const c=a-i,l=u-i;if(c!=l){for(let h=0;h<c;h++){const f=h<o.length?o[h]:o[h]=0,p=f+h;l<=p&&p<c&&(o[h]=f+1)}o[s.previousIndex]=l-c}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Yu(e))throw new S(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),r=!0),t=t._next}else i=0,function S4(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Do()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new iz(t,r),o,i),e}_verifyReinsertion(e,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new nx),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new nx),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class iz{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class oz{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class nx{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new oz,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rx(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class ix{constructor(){}supports(e){return e instanceof Map||o_(e)}create(){return new sz}}class sz{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||o_(e)))throw new S(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new az(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class az{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ox(){return new Sh([new tx])}let Sh=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||ox()),deps:[[n,new Vu,new Ou]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new S(901,!1)}}return n.\u0275prov=H({token:n,providedIn:"root",factory:ox}),n})();function sx(){return new cc([new ix])}let cc=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||sx()),deps:[[n,new Vu,new Ou]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new S(901,!1)}}return n.\u0275prov=H({token:n,providedIn:"root",factory:sx}),n})();const lz=HP(null,"core",[]);let dz=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)($(Th))},n.\u0275mod=Er({type:n}),n.\u0275inj=rr({}),n})(),Q_=null;function Pr(){return Q_}class pz{}const In=new G("DocumentToken");let Y_=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=H({token:n,factory:function(){return function gz(){return $(ax)}()},providedIn:"platform"}),n})();const mz=new G("Location Initialized");let ax=(()=>{class n extends Y_{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pr().getBaseHref(this._doc)}onPopState(t){const r=Pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ux()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ux()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)($(In))},n.\u0275prov=H({token:n,factory:function(){return function _z(){return new ax($(In))}()},providedIn:"platform"}),n})();function ux(){return!!window.history.pushState}function J_(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function cx(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ui(n){return n&&"?"!==n[0]?"?"+n:n}let Po=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=H({token:n,factory:function(){return ye(dx)},providedIn:"root"}),n})();const lx=new G("appBaseHref");let dx=(()=>{class n extends Po{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ye(In).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return J_(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ui(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+ui(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+ui(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)($(Y_),$(lx,8))},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yz=(()=>{class n extends Po{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=J_(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ui(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ui(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)($(Y_),$(lx,8))},n.\u0275prov=H({token:n,factory:n.\u0275fac}),n})(),X_=(()=>{class n{constructor(t){this._subject=new Ce,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Ez(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(cx(hx(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ui(r))}normalize(t){return n.stripTrailingSlash(function Iz(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._basePath,hx(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ui(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ui(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ui,n.joinWithSlash=J_,n.stripTrailingSlash=cx,n.\u0275fac=function(t){return new(t||n)($(Po))},n.\u0275prov=H({token:n,factory:function(){return function vz(){return new X_($(Po))}()},providedIn:"root"}),n})();function hx(n){return n.replace(/\/index.html$/,"")}let Ex=(()=>{class n{constructor(t,r,i,o){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Yu(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Ne(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(A(Sh),A(cc),A(On),A(ni))},n.\u0275dir=J({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class s9{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Lh=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new s9(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),Cx(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Cx(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(A(hr),A(oi),A(Sh))},n.\u0275dir=J({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Cx(n,e){n.context.$implicit=e.item}let ta=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new u9,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Dx("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Dx("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(A(hr),A(oi))},n.\u0275dir=J({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class u9{constructor(){this.$implicit=null,this.ngIf=null}}function Dx(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ne(e)}'.`)}let F9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Er({type:n}),n.\u0275inj=rr({}),n})();let j9=(()=>{class n{}return n.\u0275prov=H({token:n,providedIn:"root",factory:()=>new $9($(In),window)}),n})();class $9{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function G9(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Rx(this.window.history)||Rx(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Rx(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class _6 extends pz{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class py extends _6{static makeCurrent(){!function fz(n){Q_||(Q_=n)}(new py)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function y6(){return fc=fc||document.querySelector("base"),fc?fc.getAttribute("href"):null}();return null==t?null:function v6(n){Bh=Bh||document.createElement("a"),Bh.setAttribute("href",n);const e=Bh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){fc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function i9(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Bh,fc=null;const Ox=new G("TRANSITION_ID"),E6=[{provide:Ih,useFactory:function I6(n,e,t){return()=>{t.get(Eh).donePromise.then(()=>{const r=Pr(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[Ox,In,cr],multi:!0}];let T6=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=H({token:n,factory:n.\u0275fac}),n})();const jh=new G("EventManagerPlugins");let $h=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(t))return this._eventNameToPlugin.set(t,s),s}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)($(jh),$(mt))},n.\u0275prov=H({token:n,factory:n.\u0275fac}),n})();class Vx{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Pr().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Fx=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=H({token:n,factory:n.\u0275fac}),n})(),pc=(()=>{class n extends Fx{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Lx),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Lx))}}return n.\u0275fac=function(t){return new(t||n)($(In))},n.\u0275prov=H({token:n,factory:n.\u0275fac}),n})();function Lx(n){Pr().remove(n)}const gy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},my=/%COMP%/g;function _y(n,e){return e.flat(100).map(t=>t.replace(my,n))}function jx(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let yy=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new vy(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Ir.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new R6(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case Ir.ShadowDom:return new P6(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=_y(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)($($h),$(pc),$(uc))},n.\u0275prov=H({token:n,factory:n.\u0275fac}),n})();class vy{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(gy[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Gx(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Gx(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=gy[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=gy[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_n.DashCase|_n.Important)?e.style.setProperty(t,r,i&_n.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_n.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,jx(r)):this.eventManager.addEventListener(e,t,jx(r))}}function Gx(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class R6 extends vy{constructor(e,t,r,i){super(e),this.component=r;const o=_y(i+"-"+r.id,r.styles);t.addStyles(o),this.contentAttr=function A6(n){return"_ngcontent-%COMP%".replace(my,n)}(i+"-"+r.id),this.hostAttr=function b6(n){return"_nghost-%COMP%".replace(my,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class P6 extends vy{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=_y(i.id,i.styles);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let x6=(()=>{class n extends Vx{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)($(In))},n.\u0275prov=H({token:n,factory:n.\u0275fac}),n})();const Hx=["alt","control","meta","shift"],M6={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},N6={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let k6=(()=>{class n extends Vx{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pr().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Hx.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),s+=c+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=M6[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Hx.forEach(s=>{s!==i&&(0,N6[s])(t)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)($(In))},n.\u0275prov=H({token:n,factory:n.\u0275fac}),n})();const zx=[{provide:NP,useValue:"browser"},{provide:MP,useValue:function O6(){py.makeCurrent()},multi:!0},{provide:In,useFactory:function F6(){return function l$(n){Dm=n}(document),document},deps:[]}],L6=HP(lz,"browser",zx),Wx=new G(""),Kx=[{provide:wh,useClass:class w6{addToWindow(e){Ve.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},Ve.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ve.getAllAngularRootElements=()=>e.getAllRootElements(),Ve.frameworkStabilizers||(Ve.frameworkStabilizers=[]),Ve.frameworkStabilizers.push(r=>{const i=Ve.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(function(u){u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Pr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:BP,useClass:B_,deps:[mt,j_,wh]},{provide:B_,useClass:B_,deps:[mt,j_,wh]}],Qx=[{provide:km,useValue:"root"},{provide:Os,useFactory:function V6(){return new Os},deps:[]},{provide:jh,useClass:x6,multi:!0,deps:[In,mt,NP]},{provide:jh,useClass:k6,multi:!0,deps:[In]},{provide:yy,useClass:yy,deps:[$h,pc,uc]},{provide:T0,useExisting:yy},{provide:Fx,useExisting:pc},{provide:pc,useClass:pc,deps:[In]},{provide:$h,useClass:$h,deps:[jh,mt]},{provide:class H9{},useClass:T6,deps:[]},[]];let U6=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:uc,useValue:t.appId},{provide:Ox,useExisting:uc},E6]}}}return n.\u0275fac=function(t){return new(t||n)($(Wx,12))},n.\u0275mod=Er({type:n}),n.\u0275inj=rr({providers:[...Qx,...Kx],imports:[F9,dz]}),n})(),Yx=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)($(In))},n.\u0275prov=H({token:n,factory:function(t){let r=null;return r=t?new t:function j6(){return new Yx($(In))}(),r},providedIn:"root"}),n})();function z(...n){return pt(n,Iu(n))}typeof window<"u"&&window;class Yn extends zr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Gh=_u(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:Q6}=Array,{getPrototypeOf:Y6,prototype:J6,keys:X6}=Object;function Zx(n){if(1===n.length){const e=n[0];if(Q6(e))return{args:e,keys:null};if(function Z6(n){return n&&"object"==typeof n&&Y6(n)===J6}(e)){const t=X6(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:e5}=Array;function eM(n){return pe(e=>function t5(n,e){return e5(e)?n(...e):n(e)}(n,e))}function tM(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function nM(...n){const e=Iu(n),t=fA(n),{args:r,keys:i}=Zx(n);if(0===r.length)return pt([],e);const o=new ft(function n5(n,e,t=go){return r=>{rM(e,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let u=0;u<i;u++)rM(e,()=>{const c=pt(n[u],e);let l=!1;c.subscribe(Et(r,d=>{o[u]=d,l||(l=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>tM(i,s):go));return t?o.pipe(eM(t)):o}function rM(n,e,t){n?Wr(t,n,e):e()}function wy(...n){return function r5(){return gs(1)}()(pt(n,Iu(n)))}function iM(n){return new ft(e=>{nr(n()).subscribe(e)})}function gc(n,e){const t=ke(n)?n:()=>n,r=i=>i.error(t());return new ft(e?i=>e.schedule(r,0,i):r)}function Ty(){return St((n,e)=>{let t=null;n._refCount++;const r=Et(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class oM extends ft{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ZD(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $n;const t=this.getSubject();e.add(this.source.subscribe(Et(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$n.EMPTY)}return e}refCount(){return Ty()(this)}}function xr(n,e){return St((t,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();t.subscribe(Et(r,u=>{i?.unsubscribe();let c=0;const l=o++;nr(n(u,l)).subscribe(i=Et(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function mc(n){return n<=0?()=>Kr:St((e,t)=>{let r=0;e.subscribe(Et(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Vi(n,e){return St((t,r)=>{let i=0;t.subscribe(Et(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Hh(n){return St((e,t)=>{let r=!1;e.subscribe(Et(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function sM(n=o5){return St((e,t)=>{let r=!1;e.subscribe(Et(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function o5(){return new Gh}function Fi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Vi((i,o)=>n(i,o,r)):go,mc(1),t?Hh(e):sM(()=>new Gh))}function xo(n,e){return ke(e)?Ot(n,e,1):Ot(n,1)}function Yt(n,e,t){const r=ke(n)||e||t?{next:n,error:e,complete:t}:n;return r?St((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Et(o,u=>{var c;null===(c=r.next)||void 0===c||c.call(r,u),o.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),o.complete()},u=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,u),o.error(u)},()=>{var u,c;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):go}function Li(n){return St((e,t)=>{let o,r=null,i=!1;r=e.subscribe(Et(t,void 0,void 0,s=>{o=nr(n(s,Li(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function s5(n,e,t,r,i){return(o,s)=>{let a=t,u=e,c=0;o.subscribe(Et(s,l=>{const d=c++;u=a?n(u,l,d):(a=!0,l),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function aM(n,e){return St(s5(n,e,arguments.length>=2,!0))}function Cy(n){return n<=0?()=>Kr:St((e,t)=>{let r=[];e.subscribe(Et(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function uM(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Vi((i,o)=>n(i,o,r)):go,Cy(1),t?Hh(e):sM(()=>new Gh))}function Dy(n){return St((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const le="primary",_c=Symbol("RouteTitle");class c5{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function na(n){return new c5(n)}function l5(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Mr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!cM(n[i],e[i]))return!1;return!0}function cM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function lM(n){return Array.prototype.concat.apply([],n)}function dM(n){return n.length>0?n[n.length-1]:null}function Ut(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ui(n){return c_(n)?n:Xu(n)?pt(Promise.resolve(n)):z(n)}const qh=!1,h5={exact:function pM(n,e,t){if(!No(n.segments,e.segments)||!zh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!pM(n.children[r],e.children[r],t))return!1;return!0},subset:gM},hM={exact:function f5(n,e){return Mr(n,e)},subset:function p5(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>cM(n[t],e[t]))},ignored:()=>!0};function fM(n,e,t){return h5[t.paths](n.root,e.root,t.matrixParams)&&hM[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function gM(n,e,t){return mM(n,e,e.segments,t)}function mM(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!No(i,t)||e.hasChildren()||!zh(i,t,r))}if(n.segments.length===t.length){if(!No(n.segments,t)||!zh(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!gM(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(No(n.segments,i)&&zh(n.segments,i,r)&&n.children[le])&&mM(n.children[le],e,o,r)}}function zh(n,e,t){return e.every((r,i)=>hM[t](n[i].parameters,r.parameters))}class Mo{constructor(e=new de([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=na(this.queryParams)),this._queryParamMap}toString(){return _5.serialize(this)}}class de{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ut(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Wh(this)}}class yc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=na(this.parameters)),this._parameterMap}toString(){return vM(this)}}function No(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let vc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=H({token:n,factory:function(){return new Ay},providedIn:"root"}),n})();class Ay{parse(e){const t=new A5(e);return new Mo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ic(e.root,!0)}`,r=function I5(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Kh(t)}=${Kh(i)}`).join("&"):`${Kh(t)}=${Kh(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function y5(n){return encodeURI(n)}(e.fragment)}`:""}`}}const _5=new Ay;function Wh(n){return n.segments.map(e=>vM(e)).join("/")}function Ic(n,e){if(!n.hasChildren())return Wh(n);if(e){const t=n.children[le]?Ic(n.children[le],!1):"",r=[];return Ut(n.children,(i,o)=>{o!==le&&r.push(`${o}:${Ic(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function m5(n,e){let t=[];return Ut(n.children,(r,i)=>{i===le&&(t=t.concat(e(r,i)))}),Ut(n.children,(r,i)=>{i!==le&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===le?[Ic(n.children[le],!1)]:[`${i}:${Ic(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[le]?`${Wh(n)}/${t[0]}`:`${Wh(n)}/(${t.join("//")})`}}function _M(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Kh(n){return _M(n).replace(/%3B/gi,";")}function by(n){return _M(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qh(n){return decodeURIComponent(n)}function yM(n){return Qh(n.replace(/\+/g,"%20"))}function vM(n){return`${by(n.path)}${function v5(n){return Object.keys(n).map(e=>`;${by(e)}=${by(n[e])}`).join("")}(n.parameters)}`}const E5=/^[^\/()?;=#]+/;function Yh(n){const e=n.match(E5);return e?e[0]:""}const w5=/^[^=?&#]+/,C5=/^[^&#]+/;class A5{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new de([],{}):new de([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[le]=new de(e,t)),r}parseSegment(){const e=Yh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new S(4009,qh);return this.capture(e),new yc(Qh(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Yh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Yh(this.remaining);i&&(r=i,this.capture(r))}e[Qh(t)]=Qh(r)}parseQueryParam(e){const t=function T5(n){const e=n.match(w5);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function D5(n){const e=n.match(C5);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=yM(t),o=yM(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Yh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new S(4010,qh);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=le);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[le]:new de([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new S(4011,qh)}}function Sy(n){return n.segments.length>0?new de([],{[le]:n}):n}function Jh(n){const e={};for(const r of Object.keys(n.children)){const o=Jh(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function b5(n){if(1===n.numberOfChildren&&n.children[le]){const e=n.children[le];return new de(n.segments.concat(e.segments),e.children)}return n}(new de(n.segments,e))}function ko(n){return n instanceof Mo}function P5(n,e,t,r,i){if(0===t.length)return ra(e.root,e.root,e.root,r,i);const o=function wM(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new EM(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Ut(o.outlets,(u,c)=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new EM(t,e,r)}(t);return o.toRoot()?ra(e.root,e.root,new de([],{}),r,i):function s(u){const c=function M5(n,e,t,r){if(n.isAbsolute)return new ia(e.root,!0,0);if(-1===r)return new ia(t,t===e.root,0);return function TM(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new S(4005,!1);i=r.segments.length}return new ia(r,!1,i-o)}(t,r+(Ec(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,u),l=c.processChildren?Tc(c.segmentGroup,c.index,o.commands):Py(c.segmentGroup,c.index,o.commands);return ra(e.root,c.segmentGroup,l,r,i)}(n.snapshot?._lastPathIndex)}function Ec(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function wc(n){return"object"==typeof n&&null!=n&&n.outlets}function ra(n,e,t,r,i){let s,o={};r&&Ut(r,(u,c)=>{o[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`}),s=n===e?t:IM(n,e,t);const a=Sy(Jh(s));return new Mo(a,o,i)}function IM(n,e,t){const r={};return Ut(n.children,(i,o)=>{r[o]=i===e?t:IM(i,e,t)}),new de(n.segments,r)}class EM{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ec(r[0]))throw new S(4003,!1);const i=r.find(wc);if(i&&i!==dM(r))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ia{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Py(n,e,t){if(n||(n=new de([],{})),0===n.segments.length&&n.hasChildren())return Tc(n,e,t);const r=function k5(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const s=n.segments[i],a=t[r];if(wc(a))break;const u=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!DM(u,c,s))return o;r+=2}else{if(!DM(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new de(n.segments.slice(0,r.pathIndex),{});return o.children[le]=new de(n.segments.slice(r.pathIndex),n.children),Tc(o,0,i)}return r.match&&0===i.length?new de(n.segments,{}):r.match&&!n.hasChildren()?xy(n,e,t):r.match?Tc(n,0,i):xy(n,e,t)}function Tc(n,e,t){if(0===t.length)return new de(n.segments,{});{const r=function N5(n){return wc(n[0])?n[0].outlets:{[le]:n}}(t),i={};return Ut(r,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=Py(n.children[s],e,o))}),Ut(n.children,(o,s)=>{void 0===r[s]&&(i[s]=o)}),new de(n.segments,i)}}function xy(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(wc(o)){const u=O5(o.outlets);return new de(r,u)}if(0===i&&Ec(t[0])){r.push(new yc(n.segments[e].path,CM(t[0]))),i++;continue}const s=wc(o)?o.outlets[le]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Ec(a)?(r.push(new yc(s,CM(a))),i+=2):(r.push(new yc(s,{})),i++)}return new de(r,{})}function O5(n){const e={};return Ut(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=xy(new de([],{}),0,t))}),e}function CM(n){const e={};return Ut(n,(t,r)=>e[r]=`${t}`),e}function DM(n,e,t){return n==t.path&&Mr(e,t.parameters)}class li{constructor(e,t){this.id=e,this.url=t}}class My extends li{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Oo extends li{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xh extends li{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class AM extends li{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class V5 extends li{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class F5 extends li{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class L5 extends li{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class U5 extends li{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class B5 extends li{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class j5{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class $5{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class G5{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class H5{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class q5{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class z5{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bM{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let K5=(()=>{class n{createUrlTree(t,r,i,o,s,a){return P5(t||r.root,i,o,s,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=H({token:n,factory:n.\u0275fac}),n})(),Q5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=H({token:n,factory:function(e){return K5.\u0275fac(e)},providedIn:"root"}),n})();class SM{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ny(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Ny(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ky(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ky(e,this._root).map(t=>t.value)}}function Ny(n,e){if(n===e.value)return e;for(const t of e.children){const r=Ny(n,t);if(r)return r}return null}function ky(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ky(n,t);if(r.length)return r.unshift(e),r}return[]}class di{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function oa(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class RM extends SM{constructor(e,t){super(e),this.snapshot=t,Oy(this,e)}toString(){return this.snapshot.toString()}}function PM(n,e){const t=function Y5(n,e){const s=new Zh([],{},{},"",{},le,e,null,n.root,-1,{});return new MM("",new di(s,[]))}(n,e),r=new Yn([new yc("",{})]),i=new Yn({}),o=new Yn({}),s=new Yn({}),a=new Yn(""),u=new sa(r,i,s,a,o,le,e,t.root);return u.snapshot=t.root,new RM(new di(u,[]),t)}class sa{constructor(e,t,r,i,o,s,a,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.pipe(pe(c=>c[_c]))??z(void 0),this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(pe(e=>na(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(pe(e=>na(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xM(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function J5(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Zh{constructor(e,t,r,i,o,s,a,u,c,l,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=d}get title(){return this.data?.[_c]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=na(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=na(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class MM extends SM{constructor(e,t){super(t),this.url=e,Oy(this,t)}toString(){return NM(this._root)}}function Oy(n,e){e.value._routerState=n,e.children.forEach(t=>Oy(n,t))}function NM(n){const e=n.children.length>0?` { ${n.children.map(NM).join(", ")} } `:"";return`${n.value}${e}`}function Vy(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Mr(e.params,t.params)||n.params.next(t.params),function d5(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Mr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Fy(n,e){const t=Mr(n.params,e.params)&&function g5(n,e){return No(n,e)&&n.every((t,r)=>Mr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Fy(n.parent,e.parent))}function Cc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Z5(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Cc(n,r,i);return Cc(n,r)})}(n,e,t);return new di(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Cc(n,a)),s}}const r=function e8(n){return new sa(new Yn(n.url),new Yn(n.params),new Yn(n.queryParams),new Yn(n.fragment),new Yn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>Cc(n,o));return new di(r,i)}}const Ly="ngNavigationCancelingError";function kM(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ko(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=OM(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function OM(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Ly]=!0,r.cancellationCode=e,t&&(r.url=t),r}function VM(n){return FM(n)&&ko(n.url)}function FM(n){return n&&n[Ly]}class t8{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Dc,this.attachRef=null}}let Dc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new t8,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ef=!1;let Uy=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=le,this.activateEvents=new Ce,this.deactivateEvents=new Ce,this.attachEvents=new Ce,this.detachEvents=new Ce,this.parentContexts=ye(Dc),this.location=ye(hr),this.changeDetector=ye(Dh),this.environmentInjector=ye(ti)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,ef);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,ef);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,ef);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new S(4013,ef);this._activatedRoute=t;const i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new n8(t,a,i.injector);if(r&&function r8(n){return!!n.resolveComponentFactory}(r)){const c=r.resolveComponentFactory(s);this.activated=i.createComponent(c,i.length,u)}else this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=J({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[xn]}),n})();class n8{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===sa?this.route:e===Dc?this.childContexts:this.parent.get(e,t)}}let By=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Sn({type:n,selectors:[["ng-component"]],standalone:!0,features:[$R],decls:1,vars:0,template:function(t,r){1&t&&Mi(0,"router-outlet")},dependencies:[Uy],encapsulation:2}),n})();function LM(n,e){return n.providers&&!n._injector&&(n._injector=mh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function $y(n){const e=n.children&&n.children.map($y),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==le&&(t.component=By),t}function Jn(n){return n.outlet||le}function UM(n,e){const t=n.filter(r=>Jn(r)===e);return t.push(...n.filter(r=>Jn(r)!==e)),t}function Ac(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class u8{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Vy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=oa(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Ut(i,(o,s)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=oa(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=oa(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=oa(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new z5(o.value.snapshot))}),e.children.length&&this.forwardEvent(new H5(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(Vy(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Vy(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=Ac(i.snapshot),u=a?.get(qu)??null;s.attachRef=null,s.route=i,s.resolver=u,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class BM{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class tf{constructor(e,t){this.component=e,this.route=t}}function c8(n,e,t){const r=n._root;return bc(r,e?e._root:null,t,[r.value])}function aa(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function oB(n){return null!==Id(n)}(n)?e.get(n):n:r}function bc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=oa(e);return n.children.forEach(s=>{(function d8(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function h8(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!No(n.url,e.url);case"pathParamsOrQueryParamsChange":return!No(n.url,e.url)||!Mr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fy(n,e)||!Mr(n.queryParams,e.queryParams);default:return!Fy(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new BM(r)):(o.data=s.data,o._resolvedData=s._resolvedData),bc(n,e,o.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new tf(a.outlet.component,s))}else s&&Sc(e,a,i),i.canActivateChecks.push(new BM(r)),bc(n,null,o.component?a?a.children:null:t,r,i)})(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Ut(o,(s,a)=>Sc(s,t.getContext(a),i)),i}function Sc(n,e,t){const r=oa(n),i=n.value;Ut(r,(o,s)=>{Sc(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new tf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Rc(n){return"function"==typeof n}function Gy(n){return n instanceof Gh||"EmptyError"===n?.name}const nf=Symbol("INITIAL_VALUE");function ua(){return xr(n=>nM(n.map(e=>e.pipe(mc(1),function i5(...n){const e=Iu(n);return St((t,r)=>{(e?wy(n,t,e):wy(n,t)).subscribe(r)})}(nf)))).pipe(pe(e=>{for(const t of e)if(!0!==t){if(t===nf)return nf;if(!1===t||t instanceof Mo)return t}return!0}),Vi(e=>e!==nf),mc(1)))}function jM(n){return function CU(...n){return YD(n)}(Yt(e=>{if(ko(e))throw kM(0,e)}),pe(e=>!0===e))}const Hy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $M(n,e,t,r,i){const o=qy(n,e,t);return o.matched?function R8(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?z(i.map(s=>{const a=aa(s,n);return Ui(function y8(n){return n&&Rc(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(ua(),jM()):z(!0)}(r=LM(e,r),e,t).pipe(pe(s=>!0===s?o:{...Hy})):z(o)}function qy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Hy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||l5)(t,n,e);if(!i)return{...Hy};const o={};Ut(i.posParams,(a,u)=>{o[u]=a.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function rf(n,e,t,r){if(t.length>0&&function M8(n,e,t){return t.some(r=>sf(n,e,r)&&Jn(r)!==le)}(n,t,r)){const o=new de(e,function x8(n,e,t,r){const i={};i[le]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&Jn(o)!==le){const s=new de([],{});s._sourceSegment=n,s._segmentIndexShift=e.length,i[Jn(o)]=s}return i}(n,e,r,new de(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function N8(n,e,t){return t.some(r=>sf(n,e,r))}(n,t,r)){const o=new de(n.segments,function P8(n,e,t,r,i){const o={};for(const s of r)if(sf(n,t,s)&&!i[Jn(s)]){const a=new de([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,o[Jn(s)]=a}return{...i,...o}}(n,e,t,r,n.children));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const i=new de(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function sf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function GM(n,e,t,r){return!!(Jn(n)===r||r!==le&&sf(e,t,n))&&("**"===n.path||qy(e,n,t).matched)}function HM(n,e,t){return 0===e.length&&!n.children[t]}const af=!1;class uf{constructor(e){this.segmentGroup=e||null}}class qM{constructor(e){this.urlTree=e}}function Pc(n){return gc(new uf(n))}function zM(n){return gc(new qM(n))}class F8{constructor(e,t,r,i,o){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const e=rf(this.urlTree.root,[],[],this.config).segmentGroup,t=new de(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,le).pipe(pe(o=>this.createUrlTree(Jh(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Li(o=>{if(o instanceof qM)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof uf?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,le).pipe(pe(i=>this.createUrlTree(Jh(i),e.queryParams,e.fragment))).pipe(Li(i=>{throw i instanceof uf?this.noMatchError(i):i}))}noMatchError(e){return new S(4002,af)}createUrlTree(e,t,r){const i=Sy(e);return new Mo(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(pe(o=>new de([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return pt(i).pipe(xo(o=>{const s=r.children[o],a=UM(t,o);return this.expandSegmentGroup(e,a,s,o).pipe(pe(u=>({segment:u,outlet:o})))}),aM((o,s)=>(o[s.outlet]=s.segment,o),{}),uM())}expandSegment(e,t,r,i,o,s){return pt(r).pipe(xo(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,o,s).pipe(Li(c=>{if(c instanceof uf)return z(null);throw c}))),Fi(a=>!!a),Li((a,u)=>{if(Gy(a))return HM(t,i,o)?z(new de([],{})):Pc(t);throw a}))}expandSegmentAgainstRoute(e,t,r,i,o,s,a){return GM(i,t,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s):Pc(t):Pc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?zM(o):this.lineralizeSegments(r,o).pipe(Ot(s=>{const a=new de(s,{});return this.expandSegment(e,a,t,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){const{matched:a,consumedSegments:u,remainingSegments:c,positionalParamSegments:l}=qy(t,i,o);if(!a)return Pc(t);const d=this.applyRedirectCommands(u,i.redirectTo,l);return i.redirectTo.startsWith("/")?zM(d):this.lineralizeSegments(i,d).pipe(Ot(h=>this.expandSegment(e,t,r,h.concat(c),s,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){return"**"===r.path?(e=LM(r,e),r.loadChildren?(r._loadedRoutes?z({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(pe(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new de(i,{})))):z(new de(i,{}))):$M(t,r,i,e).pipe(xr(({matched:s,consumedSegments:a,remainingSegments:u})=>s?this.getChildConfig(e=r._injector??e,r,i).pipe(Ot(l=>{const d=l.injector??e,h=l.routes,{segmentGroup:f,slicedSegments:p}=rf(t,a,u,h),m=new de(f.segments,f.children);if(0===p.length&&m.hasChildren())return this.expandChildren(d,h,m).pipe(pe(y=>new de(a,y)));if(0===h.length&&0===p.length)return z(new de(a,{}));const _=Jn(r)===o;return this.expandSegment(d,m,h,p,_?le:o,!0).pipe(pe(w=>new de(a.concat(w.segments),w.children)))})):Pc(t)))}getChildConfig(e,t,r){return t.children?z({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?z({routes:t._loadedRoutes,injector:t._loadedInjector}):function S8(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?z(!0):z(i.map(s=>{const a=aa(s,n);return Ui(function p8(n){return n&&Rc(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(ua(),jM())}(e,t,r).pipe(Ot(i=>i?this.configLoader.loadChildren(e,t).pipe(Yt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function O8(n){return gc(OM(af,3))}())):z({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return z(r);if(i.numberOfChildren>1||!i.children[le])return gc(new S(4e3,af));i=i.children[le]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new Mo(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ut(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=t[a]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let s={};return Ut(t.children,(a,u)=>{s[u]=this.createSegmentGroup(e,a,r,i)}),new de(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new S(4001,af);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class U8{}class $8{constructor(e,t,r,i,o,s,a){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const e=rf(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,le).pipe(pe(t=>{if(null===t)return null;const r=new Zh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},le,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new di(r,t),o=new MM(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,r=xM(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return pt(Object.keys(r.children)).pipe(xo(i=>{const o=r.children[i],s=UM(t,i);return this.processSegmentGroup(e,s,o,i)}),aM((i,o)=>i&&o?(i.push(...o),i):null),function a5(n,e=!1){return St((t,r)=>{let i=0;t.subscribe(Et(r,o=>{const s=n(o,i++);(s||e)&&r.next(o),!s&&r.complete()}))})}(i=>null!==i),Hh(null),uM(),pe(i=>{if(null===i)return null;const o=KM(i);return function G8(n){n.sort((e,t)=>e.value.outlet===le?-1:t.value.outlet===le?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,r,i,o){return pt(t).pipe(xo(s=>this.processSegmentAgainstRoute(s._injector??e,s,r,i,o)),Fi(s=>!!s),Li(s=>{if(Gy(s))return HM(r,i,o)?z([]):z(null);throw s}))}processSegmentAgainstRoute(e,t,r,i,o){if(t.redirectTo||!GM(t,r,i,o))return z(null);let s;if("**"===t.path){const a=i.length>0?dM(i).parameters:{},u=YM(r)+i.length;s=z({snapshot:new Zh(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,JM(t),Jn(t),t.component??t._loadedComponent??null,t,QM(r),u,XM(t)),consumedSegments:[],remainingSegments:[]})}else s=$M(r,t,i,e).pipe(pe(({matched:a,consumedSegments:u,remainingSegments:c,parameters:l})=>{if(!a)return null;const d=YM(r)+u.length;return{snapshot:new Zh(u,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,JM(t),Jn(t),t.component??t._loadedComponent??null,t,QM(r),d,XM(t)),consumedSegments:u,remainingSegments:c}}));return s.pipe(xr(a=>{if(null===a)return z(null);const{snapshot:u,consumedSegments:c,remainingSegments:l}=a;e=t._injector??e;const d=t._loadedInjector??e,h=function H8(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:p}=rf(r,c,l,h.filter(_=>void 0===_.redirectTo));if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(pe(_=>null===_?null:[new di(u,_)]));if(0===h.length&&0===p.length)return z([new di(u,[])]);const m=Jn(t)===o;return this.processSegment(d,h,f,p,m?le:o).pipe(pe(_=>null===_?null:[new di(u,_)]))}))}}function q8(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function KM(n){const e=[],t=new Set;for(const r of n){if(!q8(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=KM(r.children);e.push(new di(r.value,i))}return e.filter(r=>!t.has(r))}function QM(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function YM(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function JM(n){return n.data||{}}function XM(n){return n.resolve||{}}function ZM(n){return"string"==typeof n.title||null===n.title}function zy(n){return xr(e=>{const t=n(e);return t?pt(t).pipe(pe(()=>e)):z(e)})}const ca=new G("ROUTES");let Wy=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ui(t.loadComponent()).pipe(pe(t1),Yt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Dy(()=>{this.componentLoaders.delete(t)})),i=new oM(r,()=>new zr).pipe(Ty());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(pe(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let u,c,l=!1;Array.isArray(a)?c=a:(u=a.create(t).injector,c=lM(u.get(ca,[],K.Self|K.Optional)));return{routes:c.map($y),injector:u}}),Dy(()=>{this.childrenLoaders.delete(r)})),s=new oM(o,()=>new zr).pipe(Ty());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(t){return Ui(t()).pipe(pe(t1),Ot(i=>i instanceof BR||Array.isArray(i)?z(i):pt(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)($(cr),$(OP))},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function t1(n){return function eW(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Ky=(()=>{class n{constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new zr,this.configLoader=ye(Wy),this.environmentInjector=ye(ti),this.urlSerializer=ye(vc),this.rootContexts=ye(Dc),this.navigationId=0,this.configLoader.onLoadEndListener=i=>this.events.next(new $5(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new j5(i))}get hasRequestedNavigation(){return 0!==this.navigationId}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Yn({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Vi(r=>0!==r.id),pe(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),xr(r=>{let i=!1,o=!1;return z(r).pipe(Yt(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),xr(s=>{const a=t.browserUrlTree.toString(),u=!t.navigated||s.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(("reload"===t.onSameUrlNavigation||u)&&t.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return r1(s.source)&&(t.browserUrlTree=s.extractedUrl),z(s).pipe(xr(l=>{const d=this.transitions?.getValue();return this.events.next(new My(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),d!==this.transitions?.getValue()?Kr:Promise.resolve(l)}),function L8(n,e,t,r){return xr(i=>function V8(n,e,t,r,i){return new F8(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(pe(o=>({...i,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),Yt(l=>{this.currentNavigation={...this.currentNavigation,finalUrl:l.urlAfterRedirects},r.urlAfterRedirects=l.urlAfterRedirects}),function W8(n,e,t,r,i){return Ot(o=>function j8(n,e,t,r,i,o,s="emptyOnly"){return new $8(n,e,t,r,i,s,o).recognize().pipe(xr(a=>null===a?function B8(n){return new ft(e=>e.error(n))}(new U8):z(a)))}(n,e,t,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i).pipe(pe(s=>({...o,targetSnapshot:s}))))}(this.environmentInjector,t.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Yt(l=>{if(r.targetSnapshot=l.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!l.extras.skipLocationChange){const h=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl);t.setBrowserUrl(h,l)}t.browserUrlTree=l.urlAfterRedirects}const d=new V5(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}));if(u&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:d,extractedUrl:h,source:f,restoredState:p,extras:m}=s,_=new My(d,this.urlSerializer.serialize(h),f,p);this.events.next(_);const I=PM(h,t.rootComponentType).snapshot;return z(r={...s,targetSnapshot:I,urlAfterRedirects:h,extras:{...m,skipLocationChange:!1,replaceUrl:!1}})}return t.rawUrlTree=s.rawUrl,s.resolve(null),Kr}),Yt(s=>{const a=new F5(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),pe(s=>r={...s,guards:c8(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function I8(n,e){return Ot(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?z({...t,guardsResult:!0}):function E8(n,e,t,r){return pt(n).pipe(Ot(i=>function b8(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?z(o.map(a=>{const u=Ac(e)??i,c=aa(a,u);return Ui(function _8(n){return n&&Rc(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):u.runInContext(()=>c(n,e,t,r))).pipe(Fi())})).pipe(ua()):z(!0)}(i.component,i.route,t,e,r)),Fi(i=>!0!==i,!0))}(s,r,i,n).pipe(Ot(a=>a&&function f8(n){return"boolean"==typeof n}(a)?function w8(n,e,t,r){return pt(e).pipe(xo(i=>wy(function C8(n,e){return null!==n&&e&&e(new G5(n)),z(!0)}(i.route.parent,r),function T8(n,e){return null!==n&&e&&e(new q5(n)),z(!0)}(i.route,r),function A8(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function l8(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>iM(()=>z(s.guards.map(u=>{const c=Ac(s.node)??t,l=aa(u,c);return Ui(function m8(n){return n&&Rc(n.canActivateChild)}(l)?l.canActivateChild(r,n):c.runInContext(()=>l(r,n))).pipe(Fi())})).pipe(ua())));return z(o).pipe(ua())}(n,i.path,t),function D8(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return z(!0);const i=r.map(o=>iM(()=>{const s=Ac(e)??t,a=aa(o,s);return Ui(function g8(n){return n&&Rc(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(Fi())}));return z(i).pipe(ua())}(n,i.route,t))),Fi(i=>!0!==i,!0))}(r,o,n,e):z(a)),pe(a=>({...t,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),Yt(s=>{if(r.guardsResult=s.guardsResult,ko(s.guardsResult))throw kM(0,s.guardsResult);const a=new L5(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Vi(s=>!!s.guardsResult||(t.restoreHistory(s),this.cancelNavigationTransition(s,"",3,t),!1)),zy(s=>{if(s.guards.canActivateChecks.length)return z(s).pipe(Yt(a=>{const u=new U5(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),xr(a=>{let u=!1;return z(a).pipe(function K8(n,e){return Ot(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return z(t);let o=0;return pt(i).pipe(xo(s=>function Q8(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!ZM(i)&&(o[_c]=i.title),function Y8(n,e,t,r){const i=function J8(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return z({});const o={};return pt(i).pipe(Ot(s=>function X8(n,e,t,r){const i=Ac(e)??r,o=aa(n,i);return Ui(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[s],e,t,r).pipe(Fi(),Yt(a=>{o[s]=a}))),Cy(1),function u5(n){return pe(()=>n)}(o),Li(s=>Gy(s)?Kr:gc(s)))}(o,n,e,r).pipe(pe(s=>(n._resolvedData=s,n.data=xM(n,t).resolve,i&&ZM(i)&&(n.data[_c]=i.title),null)))}(s.route,r,n,e)),Yt(()=>o++),Cy(1),Ot(s=>o===i.length?z(t):Kr))})}(t.paramsInheritanceStrategy,this.environmentInjector),Yt({next:()=>u=!0,complete:()=>{u||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2,t))}}))}),Yt(a=>{const u=new B5(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),zy(s=>{const a=u=>{const c=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(u.routeConfig).pipe(Yt(l=>{u.component=l}),pe(()=>{})));for(const l of u.children)c.push(...a(l));return c};return nM(a(s.targetSnapshot.root)).pipe(Hh(),mc(1))}),zy(()=>t.afterPreactivation()),pe(s=>{const a=function X5(n,e,t){const r=Cc(n,e._root,t?t._root:void 0);return new RM(r,e)}(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return r={...s,targetRouterState:a}}),Yt(s=>{t.currentUrlTree=s.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),t.routerState=s.targetRouterState,"deferred"===t.urlUpdateStrategy&&(s.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,s),t.browserUrlTree=s.urlAfterRedirects)}),((n,e,t)=>pe(r=>(new u8(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s)),Yt({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Oo(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Dy(()=>{i||o||this.cancelNavigationTransition(r,"",1,t),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Li(s=>{if(o=!0,FM(s)){VM(s)||(t.navigated=!0,t.restoreHistory(r,!0));const a=new Xh(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),VM(s)){const u=t.urlHandlingStrategy.merge(s.url,t.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||r1(r.source)};t.scheduleNavigation(u,"imperative",null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const a=new AM(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(t.errorHandler(s))}catch(u){r.reject(u)}}return Kr}))}))}cancelNavigationTransition(t,r,i,o){const s=new Xh(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function r1(n){return"imperative"!==n}let i1=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===le);return r}getResolvedTitleForRoute(t){return t.data[_c]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=H({token:n,factory:function(){return ye(tW)},providedIn:"root"}),n})(),tW=(()=>{class n extends i1{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)($(Yx))},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=H({token:n,factory:function(){return ye(iW)},providedIn:"root"}),n})();class rW{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let iW=(()=>{class n extends rW{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Lt(n)))(r||n)}}(),n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cf=new G("",{providedIn:"root",factory:()=>({})});let sW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=H({token:n,factory:function(){return ye(aW)},providedIn:"root"}),n})(),aW=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function uW(n){throw n}function cW(n,e,t){return e.parse("/")}const lW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Jt=(()=>{class n{constructor(){this.disposed=!1,this.currentPageId=0,this.console=ye(xq),this.isNgZoneEnabled=!1,this.options=ye(cf,{optional:!0})||{},this.errorHandler=this.options.errorHandler||uW,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||cW,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>z(void 0),this.urlHandlingStrategy=ye(sW),this.routeReuseStrategy=ye(nW),this.urlCreationStrategy=ye(Q5),this.titleStrategy=ye(i1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=lM(ye(ca,{optional:!0})??[]),this.navigationTransitions=ye(Ky),this.urlSerializer=ye(vc),this.location=ye(X_),this.rootComponentType=null,this.isNgZoneEnabled=ye(mt)instanceof mt&&mt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Mo,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=PM(this.currentUrlTree,this.rootComponentType),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(t.state){const a={...t.state};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(i.state=a)}const s=this.parseUrl(t.url);this.scheduleNavigation(s,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map($y),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,c=u?this.currentUrlTree.fragment:s;let l=null;switch(a){case"merge":l={...this.currentUrlTree.queryParams,...o};break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=o||null}return null!==l&&(l=this.removeEmptyProps(l)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,l,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ko(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function hW(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new S(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...lW}:!1===r?{...dW}:r,ko(t))return fM(this.currentUrlTree,t,i);const o=this.parseUrl(t);return fM(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,c,l;return s?(a=s.resolve,u=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,u=h}),"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),l=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):l=0,this.navigationTransitions.handleNavigationRequest({targetPageId:l,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class s1{}let gW=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Vi(t=>t instanceof Oo),xo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=mh(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(s,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return pt(i).pipe(gs())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):z(null);const o=i.pipe(Ot(s=>null===s?z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?pt([o,this.loader.loadComponent(r)]).pipe(gs()):o})}}return n.\u0275fac=function(t){return new(t||n)($(Jt),$(OP),$(ti),$(s1),$(Wy))},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Yy=new G("");let a1=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof My?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Oo&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof bM&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new bM(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){!function $0(){throw new Error("invalid")}()},n.\u0275prov=H({token:n,factory:n.\u0275fac}),n})();function da(n,e){return{\u0275kind:n,\u0275providers:e}}function c1(){const n=ye(cr);return e=>{const t=n.get(Th);if(e!==t.components[0])return;const r=n.get(Jt),i=n.get(l1);1===n.get(Xy)&&r.initialNavigation(),n.get(d1,null,K.Optional)?.setUpPreloading(),n.get(Yy,null,K.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const l1=new G("",{factory:()=>new zr}),Xy=new G("",{providedIn:"root",factory:()=>1});const d1=new G("");function IW(n){return da(0,[{provide:d1,useExisting:gW},{provide:s1,useExisting:n}])}const h1=new G("ROUTER_FORROOT_GUARD"),EW=[X_,{provide:vc,useClass:Ay},Jt,Dc,{provide:sa,useFactory:function u1(n){return n.routerState.root},deps:[Jt]},Wy,[]];function wW(){return new $P("Router",Jt)}let f1=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[EW,[],{provide:ca,multi:!0,useValue:t},{provide:h1,useFactory:AW,deps:[[Jt,new Ou,new Vu]]},{provide:cf,useValue:r||{}},r?.useHash?{provide:Po,useClass:yz}:{provide:Po,useClass:dx},{provide:Yy,useFactory:()=>{const n=ye(j9),e=ye(mt),t=ye(cf),r=ye(Ky),i=ye(vc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new a1(i,r,n,e,t)}},r?.preloadingStrategy?IW(r.preloadingStrategy).\u0275providers:[],{provide:$P,multi:!0,useFactory:wW},r?.initialNavigation?bW(r):[],[{provide:p1,useFactory:c1},{provide:kP,multi:!0,useExisting:p1}]]}}static forChild(t){return{ngModule:n,providers:[{provide:ca,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)($(h1,8))},n.\u0275mod=Er({type:n}),n.\u0275inj=rr({imports:[By]}),n})();function AW(n){return"guarded"}function bW(n){return["disabled"===n.initialNavigation?da(3,[{provide:Ih,multi:!0,useFactory:()=>{const e=ye(Jt);return()=>{e.setUpLocationChangeListener()}}},{provide:Xy,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?da(2,[{provide:Xy,useValue:0},{provide:Ih,multi:!0,deps:[cr],useFactory:e=>{const t=e.get(mz,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const o=e.get(Jt),s=e.get(l1);(function r(i){e.get(Jt).events.pipe(Vi(s=>s instanceof Oo||s instanceof Xh||s instanceof AM),pe(s=>s instanceof Oo||s instanceof Xh&&(0===s.code||1===s.code)&&null),Vi(s=>null!==s),mc(1)).subscribe(()=>{i()})})(()=>{i(!0)}),o.afterPreactivation=()=>(i(!0),s.closed?z(void 0):s),o.initialNavigation()}))}}]).\u0275providers:[]]}const p1=new G("");function g1(n,e,t,r,i,o,s){try{var a=n[o](s),u=a.value}catch(c){return void t(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function g(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function s(u){g1(o,r,i,s,a,"next",u)}function a(u){g1(o,r,i,s,a,"throw",u)}s(void 0)})}}const m1=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},_1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,c=u?n[i+2]:0;let h=(15&a)<<2|c>>6,f=63&c;u||(f=64,s||(h=64)),r.push(t[o>>2],t[(3&o)<<4|a>>4],t[h],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(m1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const u=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const o=n[t++],s=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,null==o||null==a||null==c||null==d)throw new MW;r.push(o<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class MW extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lf=function(n){return function(n){const e=m1(n);return _1.encodeByteArray(e,!0)}(n).replace(/\./g,"")},df=function(n){try{return _1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},hf=()=>{try{return function OW(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&df(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},v1=n=>{var e,t;return null===(t=null===(e=hf())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},I1=()=>{var n;return null===(n=hf())||void 0===n?void 0:n.config},E1=n=>{var e;return null===(e=hf())||void 0===e?void 0:e[`_${n}`]};class w1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function rt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function T1(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function ev(){try{return"object"==typeof indexedDB}catch{return!1}}function C1(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(t){e(t)}})}class mr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vo.prototype.create)}}class Vo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function KW(n,e){return n.replace(QW,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new mr(i,`${this.serviceName}: ${s} (${i}).`,r)}}const QW=/\{\$([^}]+)}/g;function YW(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Mc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],s=e[i];if(A1(o)&&A1(s)){if(!Mc(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function A1(n){return null!==n&&"object"==typeof n}function Nc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class XW{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function ZW(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=tv),void 0===i.error&&(i.error=tv),void 0===i.complete&&(i.complete=tv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tv(){}function b1(n,e=1e3,t=2){const r=e*Math.pow(t,n),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function dn(n){return n&&n._delegate?n._delegate:n}class _r{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Fo="[DEFAULT]";class o7{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new w1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function a7(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Fo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return g(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Fo){return this.instances.has(e)}getOptions(e=Fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Fo?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=Fo){return this.component?this.component.multipleInstances?e:Fo:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class u7{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o7(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const rv=[];var fe=(()=>{return(n=fe||(fe={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",fe;var n})();const S1={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},c7=fe.INFO,l7={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},d7=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=l7[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class pf{constructor(e){this.name=e,this._logLevel=c7,this._logHandler=d7,this._userLogHandler=null,rv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?S1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}let R1,P1;const x1=new WeakMap,iv=new WeakMap,M1=new WeakMap,ov=new WeakMap,sv=new WeakMap;let av={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return iv.get(n);if("objectStoreNames"===e)return n.objectStoreNames||M1.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Bi(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function v7(n){return"function"==typeof n?function y7(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function p7(){return P1||(P1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(uv(this),e),Bi(x1.get(this))}:function(...e){return Bi(n.apply(uv(this),e))}:function(e,...t){const r=n.call(uv(this),e,...t);return M1.set(r,e.sort?e.sort():[e]),Bi(r)}}(n):(n instanceof IDBTransaction&&function m7(n){if(iv.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});iv.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,function f7(){return R1||(R1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,av):n)}function Bi(n){if(n instanceof IDBRequest)return function g7(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Bi(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&x1.set(t,n)}).catch(()=>{}),sv.set(e,n),e}(n);if(ov.has(n))return ov.get(n);const e=v7(n);return e!==n&&(ov.set(n,e),sv.set(e,n)),e}const uv=n=>sv.get(n);function N1(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(n,e),a=Bi(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Bi(s.result),u.oldVersion,u.newVersion,Bi(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const I7=["get","getKey","getAll","getAllKeys","count"],E7=["put","add","delete","clear"],cv=new Map;function k1(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(cv.get(e))return cv.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=E7.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!I7.includes(t))return;const o=function(){var s=g(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[t](...u),i&&c.done]))[0]});return function(u){return s.apply(this,arguments)}}();return cv.set(e,o),o}!function _7(n){av=n(av)}(n=>({...n,get:(e,t,r)=>k1(e,t)||n.get(e,t,r),has:(e,t)=>!!k1(e,t)||n.has(e,t)}));class w7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function T7(n){return"VERSION"===n.getComponent()?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const lv="@firebase/app",Lo=new pf("@firebase/app"),gf="[DEFAULT]",Q7={[lv]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Uo=new Map,mf=new Map;function Y7(n,e){try{n.container.addComponent(e)}catch(t){Lo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Nr(n){const e=n.name;if(mf.has(e))return Lo.debug(`There were multiple attempts to register component ${e}.`),!1;mf.set(e,n);for(const t of Uo.values())Y7(t,n);return!0}function ji(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const hi=new Vo("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class X7{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hi.create("app-deleted",{appName:this._name})}}const ha="10.8.1";function V1(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:gf,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw hi.create("bad-app-name",{appName:String(i)});if(t||(t=I1()),!t)throw hi.create("no-options");const o=Uo.get(i);if(o){if(Mc(t,o.options)&&Mc(r,o.config))return o;throw hi.create("duplicate-app",{appName:i})}const s=new u7(i);for(const u of mf.values())s.addComponent(u);const a=new X7(t,r,s);return Uo.set(i,a),a}function dv(n=gf){const e=Uo.get(n);if(!e&&n===gf&&I1())return V1();if(!e)throw hi.create("no-app",{appName:n});return e}function Xn(n,e,t){var r;let i=null!==(r=Q7[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Lo.warn(a.join(" "))}Nr(new _r(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const kc="firebase-heartbeat-store";let fv=null;function F1(){return fv||(fv=N1("firebase-heartbeat-database",1,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(kc)}catch(t){console.warn(t)}}}).catch(n=>{throw hi.create("idb-open",{originalErrorMessage:n.message})})),fv}function pv(){return(pv=g(function*(n){try{const t=(yield F1()).transaction(kc),r=yield t.objectStore(kc).get(U1(n));return yield t.done,r}catch(e){if(e instanceof mr)Lo.warn(e.message);else{const t=hi.create("idb-get",{originalErrorMessage:e?.message});Lo.warn(t.message)}}})).apply(this,arguments)}function L1(n,e){return gv.apply(this,arguments)}function gv(){return(gv=g(function*(n,e){try{const r=(yield F1()).transaction(kc,"readwrite");yield r.objectStore(kc).put(e,U1(n)),yield r.done}catch(t){if(t instanceof mr)Lo.warn(t.message);else{const r=hi.create("idb-set",{originalErrorMessage:t?.message});Lo.warn(r.message)}}})).apply(this,arguments)}function U1(n){return`${n.name}!${n.options.appId}`}class iK{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new sK(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return g(function*(){var t,r;const o=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=B1();if((null!=(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(e._heartbeatsCache=yield e._heartbeatsCachePromise,null!=(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats)))&&e._heartbeatsCache.lastSentHeartbeatDate!==s&&!e._heartbeatsCache.heartbeats.some(a=>a.date===s))return e._heartbeatsCache.heartbeats.push({date:s,agent:o}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return g(function*(){var t;if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=B1(),{heartbeatsToSend:i,unsentEntries:o}=function oK(n,e=1024){const t=[];let r=n.slice();for(const i of n){const o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),j1(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),j1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=lf(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,o.length>0?(e._heartbeatsCache.heartbeats=o,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function B1(){return(new Date).toISOString().substring(0,10)}class sK{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return g(function*(){return!!ev()&&C1().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return g(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function tK(n){return pv.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return g(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return L1(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return g(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return L1(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function j1(n){return lf(JSON.stringify({version:2,heartbeats:n})).length}!function aK(n){Nr(new _r("platform-logger",e=>new w7(e),"PRIVATE")),Nr(new _r("heartbeat",e=>new iK(e),"PRIVATE")),Xn(lv,"0.9.28",n),Xn(lv,"0.9.28","esm2017"),Xn("fire-js","")}(""),Xn("firebase","10.8.1","app");const $1="@firebase/installations",H1="w:0.6.5",q1="FIS_v2",fi=new Vo("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function z1(n){return n instanceof mr&&n.code.includes("request-failed")}function _v({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function W1(n){return{token:n.token,requestStatus:2,expiresIn:gK(n.expiresIn),creationTime:Date.now()}}function yv(n,e){return vv.apply(this,arguments)}function vv(){return(vv=g(function*(n,e){const r=(yield e.json()).error;return fi.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function K1({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Q1(n,{refreshToken:e}){const t=K1(n);return t.append("Authorization",function mK(n){return`${q1} ${n}`}(e)),t}function Iv(n){return Ev.apply(this,arguments)}function Ev(){return(Ev=g(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function gK(n){return Number(n.replace("s","000"))}function _K(n,e){return wv.apply(this,arguments)}function wv(){return(wv=g(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=_v(n),i=K1(n),o=e.getImmediate({optional:!0});if(o){const c=yield o.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:q1,appId:n.appId,sdkVersion:H1})},u=yield Iv(()=>fetch(r,a));if(u.ok){const c=yield u.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:W1(c.authToken)}}throw yield yv("Create Installation",u)})).apply(this,arguments)}function Y1(n){return new Promise(e=>{setTimeout(e,n)})}const vK=/^[cdef][\w-]{21}$/;function IK(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function EK(n){return function yK(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return vK.test(t)?t:""}catch{return""}}function fa(n){return`${n.appName}!${n.appId}`}const pa=new Map;function J1(n,e){const t=fa(n);X1(t,e),function CK(n,e){const t=function Z1(){return!Bo&&"BroadcastChannel"in self&&(Bo=new BroadcastChannel("[Firebase] FID Change"),Bo.onmessage=n=>{X1(n.data.key,n.data.fid)}),Bo}();t&&t.postMessage({key:n,fid:e}),function eN(){0===pa.size&&Bo&&(Bo.close(),Bo=null)}()}(t,e)}function X1(n,e){const t=pa.get(n);if(t)for(const r of t)r(e)}let Bo=null;const jo="firebase-installations-store";let Cv=null;function Dv(){return Cv||(Cv=N1("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(jo)}})),Cv}function _f(n,e){return Av.apply(this,arguments)}function Av(){return(Av=g(function*(n,e){const t=fa(n),i=(yield Dv()).transaction(jo,"readwrite"),o=i.objectStore(jo),s=yield o.get(t);return yield o.put(e,t),yield i.done,(!s||s.fid!==e.fid)&&J1(n,e.fid),e})).apply(this,arguments)}function bv(n){return Sv.apply(this,arguments)}function Sv(){return(Sv=g(function*(n){const e=fa(n),r=(yield Dv()).transaction(jo,"readwrite");yield r.objectStore(jo).delete(e),yield r.done})).apply(this,arguments)}function Oc(n,e){return Rv.apply(this,arguments)}function Rv(){return(Rv=g(function*(n,e){const t=fa(n),i=(yield Dv()).transaction(jo,"readwrite"),o=i.objectStore(jo),s=yield o.get(t),a=e(s);return void 0===a?yield o.delete(t):yield o.put(a,t),yield i.done,a&&(!s||s.fid!==a.fid)&&J1(n,a.fid),a})).apply(this,arguments)}function Pv(n){return xv.apply(this,arguments)}function xv(){return(xv=g(function*(n){let e;const t=yield Oc(n.appConfig,r=>{const i=bK(r),o=SK(n,i);return e=o.registrationPromise,o.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})).apply(this,arguments)}function bK(n){return nN(n||{fid:IK(),registrationStatus:0})}function SK(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(fi.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function RK(n,e){return Mv.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:PK(n)}:{installationEntry:e}}function Mv(){return(Mv=g(function*(n,e){try{const t=yield _K(n,e);return _f(n.appConfig,t)}catch(t){throw z1(t)&&409===t.customData.serverCode?yield bv(n.appConfig):yield _f(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})).apply(this,arguments)}function PK(n){return Nv.apply(this,arguments)}function Nv(){return(Nv=g(function*(n){let e=yield tN(n.appConfig);for(;1===e.registrationStatus;)yield Y1(100),e=yield tN(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield Pv(n);return r||t}return e})).apply(this,arguments)}function tN(n){return Oc(n,e=>{if(!e)throw fi.create("installation-not-found");return nN(e)})}function nN(n){return function xK(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function MK(n,e){return kv.apply(this,arguments)}function kv(){return(kv=g(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=NK(n,t),i=Q1(n,t),o=e.getImmediate({optional:!0});if(o){const c=yield o.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:H1,appId:n.appId}})},u=yield Iv(()=>fetch(r,a));if(u.ok)return W1(yield u.json());throw yield yv("Generate Auth Token",u)})).apply(this,arguments)}function NK(n,{fid:e}){return`${_v(n)}/${e}/authTokens:generate`}function Ov(n){return Vv.apply(this,arguments)}function Vv(){return(Vv=g(function*(n,e=!1){let t;const r=yield Oc(n.appConfig,o=>{if(!iN(o))throw fi.create("not-registered");const s=o.authToken;if(!e&&VK(s))return o;if(1===s.requestStatus)return t=kK(n,e),o;{if(!navigator.onLine)throw fi.create("app-offline");const a=LK(o);return t=OK(n,a),a}});return t?yield t:r.authToken})).apply(this,arguments)}function kK(n,e){return Fv.apply(this,arguments)}function Fv(){return(Fv=g(function*(n,e){let t=yield rN(n.appConfig);for(;1===t.authToken.requestStatus;)yield Y1(100),t=yield rN(n.appConfig);const r=t.authToken;return 0===r.requestStatus?Ov(n,e):r})).apply(this,arguments)}function rN(n){return Oc(n,e=>{if(!iN(e))throw fi.create("not-registered");return function UK(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function OK(n,e){return Lv.apply(this,arguments)}function Lv(){return(Lv=g(function*(n,e){try{const t=yield MK(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield _f(n.appConfig,r),t}catch(t){if(!z1(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield _f(n.appConfig,r)}else yield bv(n.appConfig);throw t}})).apply(this,arguments)}function iN(n){return void 0!==n&&2===n.registrationStatus}function VK(n){return 2===n.requestStatus&&!function FK(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function LK(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function Uv(){return(Uv=g(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield Pv(e);return r?r.catch(console.error):Ov(e).catch(console.error),t.fid})).apply(this,arguments)}function Bv(){return(Bv=g(function*(n,e=!1){const t=n;return yield $K(t),(yield Ov(t,e)).token})).apply(this,arguments)}function $K(n){return jv.apply(this,arguments)}function jv(){return(jv=g(function*(n){const{registrationPromise:e}=yield Pv(n);e&&(yield e)})).apply(this,arguments)}function Hv(n){return fi.create("missing-app-config-values",{valueName:n})}const oN="installations",WK=n=>{const e=n.getProvider("app").getImmediate(),t=function qK(n){if(!n||!n.options)throw Hv("App Configuration");if(!n.name)throw Hv("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Hv(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:ji(e,"heartbeat"),_delete:()=>Promise.resolve()}},KK=n=>{const t=ji(n.getProvider("app").getImmediate(),oN).getImmediate();return{getId:()=>function BK(n){return Uv.apply(this,arguments)}(t),getToken:i=>function jK(n){return Bv.apply(this,arguments)}(t,i)}};(function QK(){Nr(new _r(oN,WK,"PUBLIC")),Nr(new _r("installations-internal",KK,"PRIVATE"))})(),Xn($1,"0.6.5"),Xn($1,"0.6.5","esm2017");const yf="analytics",YK="firebase_id",ZK="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qv="https://www.googletagmanager.com/gtag/js",Rt=new pf("@firebase/analytics"),hn=new Vo("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function tQ(n){if(!n.startsWith(qv)){const e=hn.create("invalid-gtag-resource",{gtagURL:n});return Rt.warn(e.message),""}return n}function sN(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function rQ(n,e){const t=function nQ(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:tQ}),r=document.createElement("script"),i=`${qv}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function oQ(n,e,t,r,i,o){return zv.apply(this,arguments)}function zv(){return(zv=g(function*(n,e,t,r,i,o){const s=r[i];try{if(s)yield e[s];else{const u=(yield sN(t)).find(c=>c.measurementId===i);u&&(yield e[u.appId])}}catch(a){Rt.error(a)}n("config",i,o)})).apply(this,arguments)}function sQ(n,e,t,r,i){return Wv.apply(this,arguments)}function Wv(){return(Wv=g(function*(n,e,t,r,i){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const a=yield sN(t);for(const u of s){const c=a.find(d=>d.measurementId===u),l=c&&e[c.appId];if(!l){o=[];break}o.push(l)}}0===o.length&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){Rt.error(o)}})).apply(this,arguments)}function cQ(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(qv)&&t.src.includes(n))return t;return null}const aN=new class hQ{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function fQ(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function pQ(n){return Kv.apply(this,arguments)}function Kv(){return(Kv=g(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:fQ(r)},o=ZK.replace("{app-id}",t),s=yield fetch(o,i);if(200!==s.status&&304!==s.status){let a="";try{const u=yield s.json();null!==(e=u.error)&&void 0!==e&&e.message&&(a=u.error.message)}catch{}throw hn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})).apply(this,arguments)}function gQ(n){return Qv.apply(this,arguments)}function Qv(){return(Qv=g(function*(n,e=aN,t){const{appId:r,apiKey:i,measurementId:o}=n.options;if(!r)throw hn.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw hn.create("no-api-key")}const s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new yQ;return setTimeout(g(function*(){a.abort()}),void 0!==t?t:6e4),uN({appId:r,apiKey:i,measurementId:o},s,a,e)})).apply(this,arguments)}function uN(n,e,t){return Yv.apply(this,arguments)}function Yv(){return(Yv=g(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=aN){var o;const{appId:s,measurementId:a}=n;try{yield mQ(r,e)}catch(u){if(a)return Rt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:s,measurementId:a};throw u}try{const u=yield pQ(n);return i.deleteThrottleMetadata(s),u}catch(u){const c=u;if(!_Q(c)){if(i.deleteThrottleMetadata(s),a)return Rt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:s,measurementId:a};throw u}const l=503===Number(null===(o=c?.customData)||void 0===o?void 0:o.httpStatus)?b1(t,i.intervalMillis,30):b1(t,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+l,backoffCount:t+1};return i.setThrottleMetadata(s,d),Rt.debug(`Calling attemptFetch again in ${l} millis`),uN(n,d,r,i)}})).apply(this,arguments)}function mQ(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(hn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function _Q(n){if(!(n instanceof mr&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class yQ{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Jv,iI;function Xv(){return(Xv=g(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const o=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:o}))}})).apply(this,arguments)}function cN(n){iI=n}function lN(n){Jv=n}function DQ(){return oI.apply(this,arguments)}function oI(){return(oI=g(function*(){if(!ev())return Rt.warn(hn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield C1()}catch(n){return Rt.warn(hn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function sI(){return(sI=g(function*(n,e,t,r,i,o,s){var a;const u=gQ(n);u.then(f=>{t[f.measurementId]=f.appId,n.options.measurementId&&f.measurementId!==n.options.measurementId&&Rt.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Rt.error(f)),e.push(u);const c=DQ().then(f=>{if(f)return r.getId()}),[l,d]=yield Promise.all([u,c]);cQ(o)||rQ(o,l.measurementId),iI&&(i("consent","default",iI),cN(void 0)),i("js",new Date);const h=null!==(a=s?.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h[YK]=d),i("config",l.measurementId,h),Jv&&(i("set",Jv),lN(void 0)),l.measurementId})).apply(this,arguments)}class bQ{constructor(e){this.app=e}_delete(){return delete kr[this.app.options.appId],Promise.resolve()}}let kr={},dN=[];const hN={};let pN,Or,vf="dataLayer",aI=!1;function RQ(n,e,t){!function SQ(){const n=[];if(T1()&&n.push("This is a browser extension environment."),function zW(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=hn.create("invalid-analytics-context",{errorInfo:e});Rt.warn(t.message)}}();const r=n.options.appId;if(!r)throw hn.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw hn.create("no-api-key");Rt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=kr[r])throw hn.create("already-exists",{id:r});if(!aI){!function iQ(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(vf);const{wrappedGtag:o,gtagCore:s}=function uQ(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function aQ(n,e,t,r){function o(){return(o=g(function*(s,...a){try{if("event"===s){const[u,c]=a;yield sQ(n,e,t,u,c)}else if("config"===s){const[u,c]=a;yield oQ(n,e,t,r,u,c)}else if("consent"===s){const[u]=a;n("consent","update",u)}else if("get"===s){const[u,c,l]=a;n("get",u,c,l)}else if("set"===s){const[u]=a;n("set",u)}else n(s,...a)}catch(u){Rt.error(u)}})).apply(this,arguments)}return function i(s){return o.apply(this,arguments)}}(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}(kr,dN,hN,vf,"gtag");Or=o,pN=s,aI=!0}return kr[r]=function AQ(n,e,t,r,i,o,s){return sI.apply(this,arguments)}(n,dN,hN,e,pN,vf,t),new bQ(n)}function gN(n,e,t,r){n=dn(n),function vQ(n,e,t,r,i){return Xv.apply(this,arguments)}(Or,kr[n.app.options.appId],e,t,r).catch(i=>Rt.error(i))}const mN="@firebase/analytics";!function MQ(){Nr(new _r(yf,(e,{options:t})=>RQ(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Nr(new _r("analytics-internal",function n(e){try{const t=e.getProvider(yf).getImmediate();return{logEvent:(r,i,o)=>gN(t,r,i,o)}}catch(t){throw hn.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Xn(mN,"0.10.1"),Xn(mN,"0.10.1","esm2017")}();const NQ=function yN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},vN=new Vo("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),If=new pf("@firebase/auth");function Ef(n,...e){If.logLevel<=fe.ERROR&&If.error(`Auth (${ha}): ${n}`,...e)}function wn(n,...e){throw lI(n,...e)}function Fn(n,...e){return lI(n,...e)}function IN(n,e,t){const r=Object.assign(Object.assign({},NQ()),{[e]:t});return new Vo("auth","Firebase",r).create(e,{appName:n.name})}function ga(n,e,t){if(!(e instanceof t))throw t.name!==e.constructor.name&&wn(n,"argument-error"),IN(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lI(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return vN.create(n,...e)}function R(n,e,...t){if(!n)throw lI(e,...t)}function Vr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ef(e),new Error(e)}function pi(n,e){n||Vr(e)}function Vc(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function EN(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class Fc{constructor(e,t){this.shortDelay=e,this.longDelay=t,pi(t>e,"Short delay should be less than long delay!"),this.isMobile=function jW(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}()||function GW(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return function OQ(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function dI(){return"http:"===EN()||"https:"===EN()}()||T1()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function hI(n,e){pi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class wN{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const FQ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},LQ=new Fc(3e4,6e4);function je(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function $e(n,e,t,r){return fI.apply(this,arguments)}function fI(){return(fI=g(function*(n,e,t,r,i={}){return TN(n,i,g(function*(){let o={},s={};r&&("GET"===e?s=r:o={body:JSON.stringify(r)});const a=Nc(Object.assign({key:n.config.apiKey},s)).slice(1),u=yield n._getAdditionalHeaders();return u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode),wN.fetch()(CN(n,n.config.apiHost,t,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},o))}))})).apply(this,arguments)}function TN(n,e,t){return pI.apply(this,arguments)}function pI(){return(pI=g(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},FQ),e);try{const i=new BQ(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw Lc(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[u,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw Lc(n,"credential-already-in-use",s);if("EMAIL_EXISTS"===u)throw Lc(n,"email-already-in-use",s);if("USER_DISABLED"===u)throw Lc(n,"user-disabled",s);const l=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw IN(n,l,c);wn(n,l)}}catch(i){if(i instanceof mr)throw i;wn(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function gi(n,e,t,r){return gI.apply(this,arguments)}function gI(){return(gI=g(function*(n,e,t,r,i={}){const o=yield $e(n,e,t,r,i);return"mfaPendingCredential"in o&&wn(n,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function CN(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?hI(n.config,i):`${n.config.apiScheme}://${i}`}class BQ{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Fn(this.auth,"network-request-failed")),LQ.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Lc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Fn(n,e,r);return i.customData._tokenResponse=t,i}function yI(){return(yI=g(function*(n,e){return $e(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function HQ(n,e){return II.apply(this,arguments)}function II(){return(II=g(function*(n,e){return $e(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Uc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function EI(){return(EI=g(function*(n,e=!1){const t=dn(n),r=yield t.getIdToken(e),i=wf(r);R(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Uc(wI(i.auth_time)),issuedAtTime:Uc(wI(i.iat)),expirationTime:Uc(wI(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function wI(n){return 1e3*Number(n)}function wf(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return Ef("JWT malformed, contained fewer than 3 sections"),null;try{const i=df(t);return i?JSON.parse(i):(Ef("Failed to decode base64 JWT payload"),null)}catch(i){return Ef("Caught error parsing JWT payload as JSON",i?.toString()),null}}function mi(n,e){return TI.apply(this,arguments)}function TI(){return(TI=g(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof mr&&WQ(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}function WQ({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}class KQ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(g(function*(){yield t.iteration()}),r)}iteration(){var e=this;return g(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class RN{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uc(this.lastLoginAt),this.creationTime=Uc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Bc(n){return CI.apply(this,arguments)}function CI(){return(CI=g(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield mi(n,HQ(t,{idToken:r}));R(i?.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?JQ(o.providerUserInfo):[],a=YQ(n.providerData,s),l=!!n.isAnonymous&&!(n.email&&o.passwordHash||a?.length),d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new RN(o.createdAt,o.lastLoginAt),isAnonymous:l};Object.assign(n,d)})).apply(this,arguments)}function DI(){return(DI=g(function*(n){const e=dn(n);yield Bc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function YQ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function JQ(n){return n.map(e=>{var{providerId:t}=e,r=wg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function AI(){return(AI=g(function*(n,e){const t=yield TN(n,{},g(function*(){const r=Nc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=CN(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",wN.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}function bI(){return(bI=g(function*(n,e){return $e(n,"POST","/v2/accounts:revokeToken",je(n,e))})).apply(this,arguments)}class jc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){R(e.idToken,"internal-error"),R(typeof e.idToken<"u","internal-error"),R(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function zQ(n){const e=wf(n);return R(e,"internal-error"),R(typeof e.exp<"u","internal-error"),R(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return g(function*(){return R(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return g(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function XQ(n,e){return AI.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new jc;return r&&(R("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),i&&(R("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),o&&(R("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jc,this.toJSON())}_performRefresh(){return Vr("not implemented")}}function $i(n,e){R("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class $o{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=wg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KQ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new RN(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var t=this;return g(function*(){const r=yield mi(t,t.stsTokenManager.getToken(t.auth,e));return R(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function qQ(n){return EI.apply(this,arguments)}(this,e)}reload(){return function QQ(n){return DI.apply(this,arguments)}(this)}_assign(e){this!==e&&(R(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $o(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){R(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return g(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Bc(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return g(function*(){const t=yield e.getIdToken();return yield mi(e,function $Q(n,e){return yI.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,c,l;const d=null!==(r=t.displayName)&&void 0!==r?r:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,f=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,_=null!==(u=t._redirectEventId)&&void 0!==u?u:void 0,I=null!==(c=t.createdAt)&&void 0!==c?c:void 0,w=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:b,isAnonymous:L,providerData:j,stsTokenManager:Ze}=t;R(y&&Ze,e,"internal-error");const An=jc.fromJSON(this.name,Ze);R("string"==typeof y,e,"internal-error"),$i(d,e.name),$i(h,e.name),R("boolean"==typeof b,e,"internal-error"),R("boolean"==typeof L,e,"internal-error"),$i(f,e.name),$i(p,e.name),$i(m,e.name),$i(_,e.name),$i(I,e.name),$i(w,e.name);const fd=new $o({uid:y,auth:e,email:h,emailVerified:b,displayName:d,isAnonymous:L,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:An,createdAt:I,lastLoginAt:w});return j&&Array.isArray(j)&&(fd.providerData=j.map(gg=>Object.assign({},gg))),_&&(fd._redirectEventId=_),fd}static _fromIdTokenResponse(e,t,r=!1){return g(function*(){const i=new jc;i.updateFromServerResponse(t);const o=new $o({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Bc(o),o})()}}const PN=new Map;function _i(n){pi(n instanceof Function,"Expected a class definition");let e=PN.get(n);return e?(pi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,PN.set(n,e),e)}const xN=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return g(function*(){return!0})()}_set(t,r){var i=this;return g(function*(){i.storage[t]=r})()}_get(t){var r=this;return g(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return g(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function Tf(n,e,t){return`firebase:${n}:${e}:${t}`}class ma{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Tf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Tf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return g(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?$o._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return g(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return g(function*(){if(!t.length)return new ma(_i(xN),e,r);const i=(yield Promise.all(t.map(function(){var c=g(function*(l){if(yield l._isAvailable())return l});return function(l){return c.apply(this,arguments)}}()))).filter(c=>c);let o=i[0]||_i(xN);const s=Tf(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const l=yield c._get(s);if(l){const d=$o._fromJSON(e,l);c!==o&&(a=d),o=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return o._shouldAllowMigration&&u.length?(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(function(){var c=g(function*(l){if(l!==o)try{yield l._remove(s)}catch{}});return function(l){return c.apply(this,arguments)}}())),new ma(o,e,r)):new ma(o,e,r)})()}}function MN(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ON(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FN(e))return"Blackberry";if(LN(e))return"Webos";if(SI(e))return"Safari";if((e.includes("chrome/")||kN(e))&&!e.includes("edge/"))return"Chrome";if(VN(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function NN(n=rt()){return/firefox\//i.test(n)}function SI(n=rt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kN(n=rt()){return/crios\//i.test(n)}function ON(n=rt()){return/iemobile/i.test(n)}function VN(n=rt()){return/android/i.test(n)}function FN(n=rt()){return/blackberry/i.test(n)}function LN(n=rt()){return/webos/i.test(n)}function Cf(n=rt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function UN(n=rt()){return Cf(n)||VN(n)||LN(n)||FN(n)||/windows phone/i.test(n)||ON(n)}function BN(n,e=[]){let t;switch(n){case"Browser":t=MN(rt());break;case"Worker":t=`${MN(rt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ha}/${r}`}class rY{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((s,a)=>{try{s(e(o))}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return g(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function RI(){return(RI=g(function*(n,e={}){return $e(n,"GET","/v2/passwordPolicy",je(n,e))})).apply(this,arguments)}class sY{constructor(e){var t,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=null===(t=u.meetsMinPasswordLength)||void 0===t||t),u.isValid&&(u.isValid=null===(r=u.meetsMaxPasswordLength)||void 0===r||r),u.isValid&&(u.isValid=null===(i=u.containsLowercaseLetter)||void 0===i||i),u.isValid&&(u.isValid=null===(o=u.containsUppercaseLetter)||void 0===o||o),u.isValid&&(u.isValid=null===(s=u.containsNumericCharacter)||void 0===s||s),u.isValid&&(u.isValid=null===(a=u.containsNonAlphanumericCharacter)||void 0===a||a),u}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class aY{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jN(this),this.idTokenSubscription=new jN(this),this.beforeStateQueue=new rY(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=_i(t)),this._initializationPromise=this.queue(g(function*(){var i,o;if(!r._deleted&&(r.persistenceManager=yield ma.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return g(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return g(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let o=i,s=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,u=o?._redirectEventId,c=yield t.tryRedirectSignIn(e);(!a||a===u)&&c?.user&&(o=c.user,s=!0)}if(!o)return t.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield t.beforeStateQueue.runMiddleware(o)}catch(a){o=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return o?t.reloadAndSetCurrentUserOrClear(o):t.directlySetCurrentUser(null)}return R(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===o._redirectEventId?t.directlySetCurrentUser(o):t.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var t=this;return g(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return g(function*(){try{yield Bc(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function VQ(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return g(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return g(function*(){const r=e?dn(e):null;return r&&R(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return g(function*(){if(!r._deleted)return e&&R(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(g(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return g(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(g(function*(){yield t.assertedPersistence.setPersistence(_i(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return g(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return g(function*(){const t=yield function iY(n){return RI.apply(this,arguments)}(e),r=new sY(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Vo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){var t=this;return g(function*(){if(t.currentUser){const r=yield t.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=t.tenantId&&(i.tenantId=t.tenantId),yield function ZQ(n,e){return bI.apply(this,arguments)}(t,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return g(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return g(function*(){if(!t.redirectPersistenceManager){const r=e&&_i(e)||t._popupRedirectResolver;R(r,t,"argument-error"),t.redirectPersistenceManager=yield ma.create(t,[_i(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return g(function*(){var r,i;return t._isInitialized&&(yield t.queue(g(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return g(function*(){if(e===t.currentUser)return t.queue(g(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o="function"==typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(R(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),"function"==typeof t){const u=e.addObserver(t,r,i);return()=>{s=!0,u()}}{const u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){var t=this;return g(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return R(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return g(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return g(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function kQ(n,...e){If.logLevel<=fe.WARN&&If.warn(`Auth (${ha}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function ut(n){return dn(n)}class jN{constructor(e){this.auth=e,this.observer=null,this.addObserver=function JW(n,e){const t=new XW(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return R(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let $c={loadJS:()=>g(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $N(n){return`__${n}${Math.floor(1e6*Math.random())}`}function qN(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function zN(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class WN{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,t){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}function yi(n,e){return WI.apply(this,arguments)}function WI(){return(WI=g(function*(n,e){return gi(n,"POST","/v1/accounts:signInWithIdp",je(n,e))})).apply(this,arguments)}class _a extends WN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new _a(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):wn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=wg(t,["providerId","signInMethod"]);if(!r||!i)return null;const s=new _a(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){return yi(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,yi(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,yi(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nc(t)}return e}}class Gi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class YN extends Gi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let XI=(()=>{class n extends YN{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return _a._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})();class Zn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return g(function*(){const o=yield $o._fromIdTokenResponse(e,r,i),s=XN(r);return new Zn({user:o,providerId:s,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return g(function*(){yield e._updateTokensIfNecessary(r,!0);const i=XN(r);return new Zn({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function XN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Sf extends mr{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Sf.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Sf(e,t,r,i)}}function ZN(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?Sf._fromErrorAndOperation(n,o,e,r):o})}function rE(n,e){return iE.apply(this,arguments)}function iE(){return(iE=g(function*(n,e,t=!1){const r=yield mi(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Zn._forOperation(n,"link",r)})).apply(this,arguments)}function sE(){return(sE=g(function*(n,e,t=!1){const{auth:r}=n,i="reauthenticate";try{const o=yield mi(n,ZN(r,i,e,n),t);R(o.idToken,r,"internal-error");const s=wf(o.idToken);R(s,r,"internal-error");const{sub:a}=s;return R(n.uid===a,r,"user-mismatch"),Zn._forOperation(n,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&wn(r,"user-mismatch"),o}})).apply(this,arguments)}function aE(){return(aE=g(function*(n,e,t=!1){const r="signIn",i=yield ZN(n,r,e),o=yield Zn._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})).apply(this,arguments)}const xf="__sak";class ik{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xf,"1"),this.storage.removeItem(xf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const aJ=(()=>{class n extends ik{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function iJ(){const n=rt();return SI(n)||Cf(n)}()&&function nY(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=UN(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(t.newValue!==a)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function tY(){return function HW(){const n=rt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===t.newValue||t.newValue===t.oldValue?o():setTimeout(o,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,o=this;return g(function*(){yield i().call(o,t,r),o.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return g(function*(){const o=yield r().call(i,t);return i.localCache[t]=JSON.stringify(o),o})()}_remove(t){var r=()=>super._remove,i=this;return g(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),ok=(()=>{class n extends ik{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let cJ=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return g(function*(){const i=t,{eventId:o,eventType:s,data:a}=i.data,u=r.handlersMap[s];if(!u?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const c=Array.from(u).map(function(){var d=g(function*(h){return h(i.origin,a)});return function(h){return d.apply(this,arguments)}}()),l=yield function uJ(n){return Promise.all(n.map(function(){var e=g(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(c);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:l})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function Mf(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class lJ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return g(function*(){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let s,a;return new Promise((u,c)=>{const l=Mf("",20);o.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:o,onMessage(h){const f=h;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(f.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"))}}},i.handlers.add(a),o.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:l,data:t},[o.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function vt(){return window}function BE(){return typeof vt().WorkerGlobalScope<"u"&&"function"==typeof vt().importScripts}function jE(){return(jE=g(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const sk="firebaseLocalStorageDb",Nf="firebaseLocalStorage",ak="fbase_key";class zc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function kf(n,e){return n.transaction([Nf],e?"readwrite":"readonly").objectStore(Nf)}function $E(){const n=indexedDB.open(sk,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Nf,{keyPath:ak})}catch(i){t(i)}}),n.addEventListener("success",g(function*(){const r=n.result;r.objectStoreNames.contains(Nf)?e(r):(r.close(),yield function mJ(){const n=indexedDB.deleteDatabase(sk);return new zc(n).toPromise()}(),e(yield $E()))}))})}function uk(n,e,t){return GE.apply(this,arguments)}function GE(){return(GE=g(function*(n,e,t){const r=kf(n,!0).put({[ak]:e,value:t});return new zc(r).toPromise()})).apply(this,arguments)}function HE(){return(HE=g(function*(n,e){const t=kf(n,!1).get(e),r=yield new zc(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function ck(n,e){const t=kf(n,!0).delete(e);return new zc(t).toPromise()}const IJ=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return g(function*(){return t.db||(t.db=yield $E()),t.db})()}_withRetries(t){var r=this;return g(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield t(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return g(function*(){return BE()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return g(function*(){t.receiver=cJ._getInstance(function pJ(){return BE()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=g(function*(i,o){return{keyProcessed:(yield t._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=g(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return g(function*(){var r,i;if(t.activeServiceWorker=yield function hJ(){return jE.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new lJ(t.activeServiceWorker);const o=yield t.sender._send("ping",{},800);!o||(null===(r=o[0])||void 0===r?void 0:r.fulfilled)&&(null===(i=o[0])||void 0===i?void 0:i.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return g(function*(){if(r.sender&&r.activeServiceWorker&&function fJ(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return g(function*(){try{if(!indexedDB)return!1;const t=yield $E();return yield uk(t,xf,"1"),yield ck(t,xf),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return g(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return g(function*(){return i._withPendingWrite(g(function*(){return yield i._withRetries(o=>uk(o,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return g(function*(){const i=yield r._withRetries(o=>function _J(n,e){return HE.apply(this,arguments)}(o,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return g(function*(){return r._withPendingWrite(g(function*(){return yield r._withRetries(i=>ck(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return g(function*(){const r=yield t._withRetries(s=>{const a=kf(s,!1).getAll();return new zc(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],o=new Set;if(0!==r.length)for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(t.localCache[s])!==JSON.stringify(a)&&(t.notifyListeners(s,a),i.push(s));for(const s of Object.keys(t.localCache))t.localCache[s]&&!o.has(s)&&(t.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(g(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function Ho(n,e){return e?_i(e):(R(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}$N("rcb"),new Fc(3e4,6e4);class ZE extends WN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return yi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return yi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function OJ(n){return function nk(n,e){return aE.apply(this,arguments)}(n.auth,new ZE(n),n.bypassAuthState)}function VJ(n){const{auth:e,user:t}=n;return R(t,e,"internal-error"),function tk(n,e){return sE.apply(this,arguments)}(t,new ZE(n),n.bypassAuthState)}function FJ(n){return ew.apply(this,arguments)}function ew(){return(ew=g(function*(n){const{auth:e,user:t}=n;return R(t,e,"internal-error"),rE(t,new ZE(n),n.bypassAuthState)})).apply(this,arguments)}class dk{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=g(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return g(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:u}=e;if(a)return void t.reject(a);const c={auth:t.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(u)(c))}catch(l){t.reject(l)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OJ;case"linkViaPopup":case"linkViaRedirect":return FJ;case"reauthViaPopup":case"reauthViaRedirect":return VJ;default:wn(this.auth,"internal-error")}}resolve(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const LJ=new Fc(2e3,1e4);function tw(){return(tw=g(function*(n,e,t){const r=ut(n);ga(n,e,Gi);const i=Ho(r,t);return new iw(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}let iw=(()=>{class n extends dk{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){var t=this;return g(function*(){const r=yield t.execute();return R(r,t.auth,"internal-error"),r})()}onExecution(){var t=this;return g(function*(){pi(1===t.filter.length,"Popup operations only handle one event");const r=Mf();t.authWindow=yield t.resolver._openPopup(t.auth,t.provider,t.filter[0],r),t.authWindow.associatedEvent=r,t.resolver._originValidation(t.auth).catch(i=>{t.reject(i)}),t.resolver._isIframeWebStorageSupported(t.auth,i=>{i||t.reject(Fn(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation()})()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(t,LJ.get())};t()}}return n.currentPopupAction=null,n})();const Wc=new Map;class jJ extends dk{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return g(function*(){let r=Wc.get(t.auth._key());if(!r){try{const o=(yield function $J(n,e){return ow.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}Wc.set(t.auth._key(),r)}return t.bypassAuthState||Wc.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return g(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return g(function*(){})()}cleanUp(){}}function ow(){return(ow=g(function*(n,e){const t=fk(e),r=hk(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function GJ(n,e){Wc.set(n._key(),e)}function hk(n){return _i(n._redirectPersistence)}function fk(n){return Tf("pendingRedirect",n.config.apiKey,n.name)}function pk(n,e){return hw.apply(this,arguments)}function hw(){return(hw=g(function*(n,e,t=!1){const r=ut(n),i=Ho(r,e),s=yield new jJ(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})).apply(this,arguments)}class KJ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function QJ(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _k(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!_k(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(Fn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(mk(e))}saveEventToCache(e){this.cachedEventUids.add(mk(e)),this.lastProcessedEventTime=Date.now()}}function mk(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function _k({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function YJ(n){return pw.apply(this,arguments)}function pw(){return(pw=g(function*(n,e={}){return $e(n,"GET","/v1/projects",e)})).apply(this,arguments)}const JJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XJ=/^https?/;function gw(){return(gw=g(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield YJ(n);for(const t of e)try{if(eX(t))return}catch{}wn(n,"unauthorized-domain")})).apply(this,arguments)}function eX(n){const e=Vc(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return""===s.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&s.hostname===r}if(!XJ.test(t))return!1;if(JJ.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const tX=new Fc(3e4,6e4);function yk(){const n=vt().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}function nX(n){return new Promise((e,t)=>{var r,i,o;function s(){yk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yk(),t(Fn(n,"network-request-failed"))},timeout:tX.get()})}if(null!==(i=null===(r=vt().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(o=vt().gapi)||void 0===o||!o.load){const a=$N("iframefcb");return vt()[a]=()=>{gapi.load?s():t(Fn(n,"network-request-failed"))},function PI(n){return $c.loadJS(n)}(`${function dY(){return $c.gapiScript}()}?onload=${a}`).catch(u=>t(u))}s()}}).catch(e=>{throw Vf=null,e})}let Vf=null;function rX(n){return Vf=Vf||nX(n),Vf}const iX=new Fc(5e3,15e3),aX={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uX=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cX(n){const e=n.config;R(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?hI(e,"emulator/auth/iframe"):`https://${n.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:n.name,v:ha},i=uX.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Nc(r).slice(1)}`}function mw(){return mw=g(function*(n){const e=yield rX(n),t=vt().gapi;return R(t,n,"internal-error"),e.open({where:document.body,url:cX(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aX,dontclear:!0},r=>new Promise(function(){var i=g(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=Fn(n,"network-request-failed"),u=vt().setTimeout(()=>{s(a)},iX.get());function c(){vt().clearTimeout(u),o(r)}r.ping(c).then(c,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),mw.apply(this,arguments)}const dX={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class vk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const IX=encodeURIComponent("fac");function Ik(n,e,t,r,i,o){return _w.apply(this,arguments)}function _w(){return(_w=g(function*(n,e,t,r,i,o){R(n.config.authDomain,n,"auth-domain-config-required"),R(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ha,eventId:i};if(e instanceof Gi){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",YW(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,d]of Object.entries(o||{}))s[l]=d}if(e instanceof YN){const l=e.getScopes().filter(d=>""!==d);l.length>0&&(s.scopes=l.join(","))}n.tenantId&&(s.tid=n.tenantId);const a=s;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];const u=yield n._getAppCheckToken(),c=u?`#${IX}=${encodeURIComponent(u)}`:"";return`${EX(n)}?${Nc(a).slice(1)}${c}`})).apply(this,arguments)}function EX({config:n}){return n.emulator?hI(n,"emulator/auth/handler"):`https://${n.authDomain}/__/auth/handler`}const yw="webStorageSupport",TX=class wX{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ok,this._completeRedirectFn=pk,this._overrideRedirectResult=GJ}_openPopup(e,t,r,i){var o=this;return g(function*(){var s;pi(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=yield Ik(e,t,r,Vc(),i);return function mX(n,e,t,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},dX),{width:r.toString(),height:i.toString(),top:o,left:s}),c=rt().toLowerCase();t&&(a=kN(c)?"_blank":t),NN(c)&&(e=e||"http://localhost",u.scrollbars="yes");const l=Object.entries(u).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(function eY(n=rt()){var e;return Cf(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function _X(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new vk(null);const d=window.open(e||"",a,l);R(d,n,"popup-blocked");try{d.focus()}catch{}return new vk(d)}(e,a,Mf())})()}_openRedirect(e,t,r,i){var o=this;return g(function*(){return yield o._originValidation(e),function dJ(n){vt().location.href=n}(yield Ik(e,t,r,Vc(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(pi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return g(function*(){const r=yield function lX(n){return mw.apply(this,arguments)}(e),i=new KJ(e);return r.register("authEvent",o=>(R(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yw,{type:yw},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[yw];void 0!==s&&t(!!s),wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function ZJ(n){return gw.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return UN()||SI()||Cf()}};var Tk="@firebase/auth";class CX{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return g(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){R(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const SX=E1("authIdTokenMaxAge")||300;let Dk=null;const RX=n=>function(){var e=g(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>SX)return;const o=r?.token;Dk!==o&&(Dk=o,yield fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function PX(n=dv()){const e=ji(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function gY(n,e){const t=ji(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(Mc(t.getOptions(),e??{}))return i;wn(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:TX,persistence:[IJ,aJ,ok]}),r=E1("authTokenSyncURL");if(r){const o=RX(r);(function XY(n,e,t){dn(n).beforeAuthStateChanged(e,t)})(t,o,()=>o(t.currentUser)),function JY(n,e,t,r){dn(n).onIdTokenChanged(e,t,r)}(t,s=>o(s))}const i=v1("auth");return i&&function _Y(n,e,t){const r=ut(n);R(r._canInitEmulator,r,"emulator-config-failed"),R(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,o=qN(e),{host:s,port:a}=function yY(n){const e=qN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:zN(r.substr(o.length+1))}}{const[o,s]=r.split(":");return{host:o,port:zN(s)}}}(e);r.config.emulator={url:`${o}//${s}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function vY(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}(function uY(n){$c=n})({loadJS:n=>new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Fn("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",function xX(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function AX(n){Nr(new _r("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;R(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BN(n)},c=new aY(r,i,o,u);return function mY(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(_i);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Nr(new _r("auth-internal",e=>{const t=ut(e.getProvider("auth").getImmediate());return new CX(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xn(Tk,"1.6.1",function DX(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(n)),Xn(Tk,"1.6.1","esm2017")}("Browser");var M,MX=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yr={},Iw=Iw||{},te=MX||self;function Lf(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Kc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ew="closure_uid_"+(1e9*Math.random()>>>0),kX=0;function OX(n,e,t){return n.call.apply(n.bind,arguments)}function VX(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Xt(n,e,t){return(Xt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?OX:VX).apply(null,arguments)}function Uf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Pt(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function Hi(){this.s=this.s,this.o=this.o}Hi.prototype.s=!1,Hi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function NX(n){Object.prototype.hasOwnProperty.call(n,Ew)&&n[Ew]||(n[Ew]=++kX)}(this)},Hi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ak=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function ww(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function bk(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Lf(r)){const i=n.length||0,o=r.length||0;n.length=i+o;for(let s=0;s<o;s++)n[i+s]=r[s]}else n.push(r)}}function Zt(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Zt.prototype.h=function(){this.defaultPrevented=!0};var LX=function(){if(!te.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};te.addEventListener("test",t,e),te.removeEventListener("test",t,e)}catch{}return n}();function Qc(n){return/^[\s\xa0]*$/.test(n)}function Bf(){var n=te.navigator;return n&&(n=n.userAgent)?n:""}function Fr(n){return-1!=Bf().indexOf(n)}function Tw(n){return Tw[" "](n),n}Tw[" "]=function(){};var Dw,n,BX=Fr("Opera"),ya=Fr("Trident")||Fr("MSIE"),Sk=Fr("Edge"),Cw=Sk||ya,Rk=Fr("Gecko")&&!(-1!=Bf().toLowerCase().indexOf("webkit")&&!Fr("Edge"))&&!(Fr("Trident")||Fr("MSIE"))&&!Fr("Edge"),jX=-1!=Bf().toLowerCase().indexOf("webkit")&&!Fr("Edge");function Pk(){var n=te.document;return n?n.documentMode:void 0}e:{var Aw="",bw=(n=Bf(),Rk?/rv:([^\);]+)(\)|;)/.exec(n):Sk?/Edge\/([\d\.]+)/.exec(n):ya?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):jX?/WebKit\/(\S+)/.exec(n):BX?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(bw&&(Aw=bw?bw[1]:""),ya){var Sw=Pk();if(null!=Sw&&Sw>parseFloat(Aw)){Dw=String(Sw);break e}}Dw=Aw}var $X=te.document&&ya&&(Pk()||parseInt(Dw,10))||void 0;function Yc(n,e){if(Zt.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Rk){e:{try{Tw(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:GX[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Yc.$.h.call(this)}}Pt(Yc,Zt);var GX={2:"touch",3:"pen",4:"mouse"};Yc.prototype.h=function(){Yc.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Jc="closure_listenable_"+(1e6*Math.random()|0),HX=0;function qX(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++HX,this.fa=this.ia=!1}function jf(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Pw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Mk(n){const e={};for(const t in n)e[t]=n[t];return e}const Nk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kk(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<Nk.length;o++)t=Nk[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function $f(n){this.src=n,this.g={},this.h=0}function xw(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=Ak(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(jf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Mw(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.fa&&o.listener==e&&o.capture==!!t&&o.la==r)return i}return-1}$f.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var s=Mw(n,e,r,i);return-1<s?(e=n[s],t||(e.ia=!1)):((e=new qX(e,this.src,o,!!r,i)).ia=t,n.push(e)),e};var Nw="closure_lm_"+(1e6*Math.random()|0),kw={};function Ok(n,e,t,r,i){if(r&&r.once)return Fk(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ok(n,e[o],t,r,i);return null}return t=Lw(t),n&&n[Jc]?n.O(e,t,Kc(r)?!!r.capture:!!r,i):Vk(n,e,t,!1,r,i)}function Vk(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var s=Kc(i)?!!i.capture:!!i,a=Vw(n);if(a||(n[Nw]=a=new $f(n)),(t=a.add(e,t,r,s,o)).proxy)return t;if(r=function WX(){const e=KX;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)LX||(i=s),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Uk(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Fk(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Fk(n,e[o],t,r,i);return null}return t=Lw(t),n&&n[Jc]?n.P(e,t,Kc(r)?!!r.capture:!!r,i):Vk(n,e,t,!0,r,i)}function Lk(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Lk(n,e[o],t,r,i);else r=Kc(r)?!!r.capture:!!r,t=Lw(t),n&&n[Jc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Mw(o=n.g[e],t,r,i))&&(jf(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=Vw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Mw(e,t,r,i)),(t=-1<n?e[n]:null)&&Ow(t))}function Ow(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Jc])xw(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Uk(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Vw(e))?(xw(t,n),0==t.h&&(t.src=null,e[Nw]=null)):jf(n)}}}function Uk(n){return n in kw?kw[n]:kw[n]="on"+n}function KX(n,e){if(n.fa)n=!0;else{e=new Yc(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Ow(n),n=t.call(r,e)}return n}function Vw(n){return(n=n[Nw])instanceof $f?n:null}var Fw="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lw(n){return"function"==typeof n?n:(n[Fw]||(n[Fw]=function(e){return n.handleEvent(e)}),n[Fw])}function xt(){Hi.call(this),this.i=new $f(this),this.S=this,this.J=null}function Bt(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Zt(e,n);else if(e instanceof Zt)e.target=e.target||n;else{var i=e;kk(e=new Zt(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var s=e.g=t[o];i=Gf(s,r,!0,e)&&i}if(i=Gf(s=e.g=n,r,!0,e)&&i,i=Gf(s,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Gf(s=e.g=t[o],r,!1,e)&&i}function Gf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==t){var a=s.listener,u=s.la||s.src;s.ia&&xw(n.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Pt(xt,Hi),xt.prototype[Jc]=!0,xt.prototype.removeEventListener=function(n,e,t,r){Lk(this,n,e,t,r)},xt.prototype.N=function(){if(xt.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)jf(t[r]);delete n.g[e],n.h--}}this.J=null},xt.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},xt.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Uw=te.JSON.stringify;function YX(){var n=Bw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Bk=new class QX{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new XX,n=>n.reset());class XX{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ZX(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function eZ(n){te.setTimeout(()=>{throw n},0)}let Xc,Zc=!1,Bw=new class JX{constructor(){this.h=this.g=null}add(e,t){const r=Bk.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},jk=()=>{const n=te.Promise.resolve(void 0);Xc=()=>{n.then(tZ)}};var tZ=()=>{for(var n;n=YX();){try{n.h.call(n.g)}catch(t){eZ(t)}var e=Bk;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Zc=!1};function Hf(n,e){xt.call(this),this.h=n||1,this.g=e||te,this.j=Xt(this.qb,this),this.l=Date.now()}function jw(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function $w(n,e,t){if("function"==typeof n)t&&(n=Xt(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Xt(n.handleEvent,n)}return 2147483647<Number(e)?-1:te.setTimeout(n,e||0)}function $k(n){n.g=$w(()=>{n.g=null,n.i&&(n.i=!1,$k(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Pt(Hf,xt),(M=Hf.prototype).ga=!1,M.T=null,M.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Bt(this,"tick"),this.ga&&(jw(this),this.start()))}},M.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},M.N=function(){Hf.$.N.call(this),jw(this),delete this.g};class nZ extends Hi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$k(this)}N(){super.N(),this.g&&(te.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function el(n){Hi.call(this),this.h=n,this.g={}}Pt(el,Hi);var Gk=[];function Hk(n,e,t,r){Array.isArray(t)||(t&&(Gk[0]=t.toString()),t=Gk);for(var i=0;i<t.length;i++){var o=Ok(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function qk(n){Pw(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ow(e)},n),n.g={}}function qf(){this.g=!0}function va(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function sZ(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Uw(t)}catch{return e}}(n,t)+(r?" "+r:"")})}el.prototype.N=function(){el.$.N.call(this),qk(this)},el.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qf.prototype.Ea=function(){this.g=!1},qf.prototype.info=function(){};var qo={},zk=null;function zf(){return zk=zk||new xt}function Wk(n){Zt.call(this,qo.Ta,n)}function tl(n){const e=zf();Bt(e,new Wk(e))}function Kk(n,e){Zt.call(this,qo.STAT_EVENT,n),this.stat=e}function fn(n){const e=zf();Bt(e,new Kk(e,n))}function Qk(n,e){Zt.call(this,qo.Ua,n),this.size=e}function nl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return te.setTimeout(function(){n()},e)}qo.Ta="serverreachability",Pt(Wk,Zt),qo.STAT_EVENT="statevent",Pt(Kk,Zt),qo.Ua="timingevent",Pt(Qk,Zt);var Wf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Yk={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Gw(){}function Xk(){}Gw.prototype.h=null;var zw,rl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Hw(){Zt.call(this,"d")}function qw(){Zt.call(this,"c")}function Kf(){}function il(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new el(this),this.P=aZ,this.V=new Hf(n=Cw?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Zk}function Zk(){this.i=null,this.g="",this.h=!1}Pt(Hw,Zt),Pt(qw,Zt),Pt(Kf,Gw),Kf.prototype.g=function(){return new XMLHttpRequest},Kf.prototype.i=function(){return{}},zw=new Kf;var aZ=45e3,eO={},Ww={};function Kw(n,e,t){n.L=1,n.A=Xf(vi(e)),n.u=t,n.S=!0,tO(n,null)}function tO(n,e){n.G=Date.now(),ol(n),n.B=vi(n.A);var t=n.B,r=n.W;Array.isArray(r)||(r=[String(r)]),dO(t.i,"t",r),n.o=0,t=n.l.J,n.h=new Zk,n.g=OO(n.l,t?e:null,!n.u),0<n.O&&(n.M=new nZ(Xt(n.Pa,n,n.g),n.O)),Hk(n.U,n.g,"readystatechange",n.nb),e=n.I?Mk(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),tl(),function rZ(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");s=2<=d.length&&"type"==d[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+s})}(n.j,n.v,n.B,n.m,n.W,n.u)}function nO(n){return!!n.g&&"GET"==n.v&&2!=n.L&&n.l.Ha}function rO(n,e,t){let i,r=!0;for(;!n.J&&n.o<t.length;){if(i=uZ(n,t),i==Ww){4==e&&(n.s=4,fn(14),r=!1),va(n.j,n.m,null,"[Incomplete Response]");break}if(i==eO){n.s=4,fn(15),va(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}va(n.j,n.m,i,null),Qw(n,i)}nO(n)&&0!=n.o&&(n.h.g=n.h.g.slice(n.o),n.o=0),4!=e||0!=t.length||n.h.h||(n.s=1,fn(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),nT(e),e.M=!0,fn(11))):(va(n.j,n.m,t,"[Invalid Chunked Response]"),zo(n),sl(n))}function uZ(n,e){var t=n.o,r=e.indexOf("\n",t);return-1==r?Ww:(t=Number(e.substring(t,r)),isNaN(t)?eO:(r+=1)+t>e.length?Ww:(e=e.slice(r,r+t),n.o=r+t,e))}function ol(n){n.Y=Date.now()+n.P,iO(n,n.P)}function iO(n,e){if(null!=n.C)throw Error("WatchDog timer not null");n.C=nl(Xt(n.lb,n),e)}function Qf(n){n.C&&(te.clearTimeout(n.C),n.C=null)}function sl(n){0==n.l.H||n.J||xO(n.l,n)}function zo(n){Qf(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,jw(n.V),qk(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Qw(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Yw(t.i,n)))if(!n.K&&Yw(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;ip(t),np(t)}tT(t),fn(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=nl(Xt(t.ib,t),6e3));if(1>=pO(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Ko(t,11)}else if((n.K||t.g==n)&&ip(t),!Qc(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(t.V=c[0],c=c[1],2==t.H)if("c"==c[0]){t.K=c[1],t.pa=c[2];const l=c[3];null!=l&&(t.ra=l,t.l.info("VER="+t.ra));const d=c[4];null!=d&&(t.Ga=d,t.l.info("SVER="+t.Ga));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(t.L=r=1.5*h,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const f=n.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var o=r.i;o.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Jw(o,o.h),o.h=null))}if(r.F){const m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.Da=m,Ge(r.I,r.F,m))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var s=n;if((r=t).wa=kO(r,r.J?r.pa:null,r.Y),s.K){gO(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(Qf(a),ol(a)),r.g=s}else RO(r);0<t.j.length&&rp(t)}else"stop"!=c[0]&&"close"!=c[0]||Ko(t,7);else 3==t.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ko(t,7):eT(t):"noop"!=c[0]&&t.h&&t.h.Aa(c),t.A=0)}tl()}catch{}}function oO(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Lf(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function lZ(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Lf(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function cZ(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Lf(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}(M=il.prototype).setTimeout=function(n){this.P=n},M.nb=function(n){n=n.target;const e=this.M;e&&3==Lr(n)?e.l():this.Pa(n)},M.Pa=function(n){try{if(n==this.g)e:{const l=Lr(this.g);var e=this.g.Ia();if(this.g.da(),!(3>l)&&(3!=l||Cw||this.g&&(this.h.h||this.g.ja()||TO(this.g)))){this.J||4!=l||7==e||tl(),Qf(this);var t=this.g.da();this.ca=t;t:if(nO(this)){var r=TO(this.g);n="";var i=r.length,o=4==Lr(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){zo(this),sl(this);var s="";break t}this.h.i=new te.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=n,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==t,function iZ(n,e,t,r,i,o,s){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+s})}(this.j,this.v,this.B,this.m,this.W,l,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Qc(a)){var c=a;break t}}c=null}if(!(t=c)){this.i=!1,this.s=3,fn(12),zo(this),sl(this);break e}va(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qw(this,t)}this.S?(rO(this,l,s),Cw&&this.i&&3==l&&(Hk(this.U,this.V,"tick",this.mb),this.V.start())):(va(this.j,this.m,s,null),Qw(this,s)),4==l&&zo(this),this.i&&!this.J&&(4==l?xO(this.l,this):(this.i=!1,ol(this)))}else(function SZ(n){const e={};n=(n.g&&2<=Lr(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Qc(n[r]))continue;var t=ZX(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const o=e[i]||[];e[i]=o,o.push(t)}!function zX(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<s.indexOf("Unknown SID")?(this.s=3,fn(12)):(this.s=0,fn(13)),zo(this),sl(this)}}}catch{}},M.mb=function(){if(this.g){var n=Lr(this.g),e=this.g.ja();this.o<e.length&&(Qf(this),rO(this,n,e),this.i&&4!=n&&ol(this))}},M.cancel=function(){this.J=!0,zo(this)},M.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(function oZ(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(tl(),fn(17)),zo(this),this.s=2,sl(this)):iO(this,this.Y-n)};var sO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wo(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Wo){this.h=n.h,Yf(this,n.j),this.s=n.s,this.g=n.g,Jf(this,n.m),this.l=n.l;var e=n.i,t=new cl;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),aO(this,t),this.o=n.o}else n&&(e=String(n).match(sO))?(this.h=!1,Yf(this,e[1]||"",!0),this.s=al(e[2]||""),this.g=al(e[3]||"",!0),Jf(this,e[4]),this.l=al(e[5]||"",!0),aO(this,e[6]||"",!0),this.o=al(e[7]||"")):(this.h=!1,this.i=new cl(null,this.h))}function vi(n){return new Wo(n)}function Yf(n,e,t){n.j=t?al(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Jf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function aO(n,e,t){e instanceof cl?(n.i=e,function _Z(n,e){e&&!n.j&&(qi(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(cO(this,r),dO(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=ul(e,gZ)),n.i=new cl(e,n.h))}function Ge(n,e,t){n.i.set(e,t)}function Xf(n){return Ge(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function al(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ul(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,hZ),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function hZ(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Wo.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ul(e,uO,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ul(e,uO,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(ul(t,"/"==t.charAt(0)?pZ:fZ,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ul(t,mZ)),n.join("")};var uO=/[#\/\?@]/g,fZ=/[#\?:]/g,pZ=/[#\?]/g,gZ=/[#\?@]/g,mZ=/#/g;function cl(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function qi(n){n.g||(n.g=new Map,n.h=0,n.i&&function dZ(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function cO(n,e){qi(n),e=Ia(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function lO(n,e){return qi(n),e=Ia(n,e),n.g.has(e)}function dO(n,e,t){cO(n,e),0<t.length&&(n.i=null,n.g.set(Ia(n,e),ww(t)),n.h+=t.length)}function Ia(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function hO(n){this.l=n||vZ,n=te.PerformanceNavigationTiming?0<(n=te.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(te.g&&te.g.Ka&&te.g.Ka()&&te.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(M=cl.prototype).add=function(n,e){qi(this),this.i=null,n=Ia(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},M.forEach=function(n,e){qi(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},M.ta=function(){qi(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let o=0;o<i.length;o++)t.push(e[r])}return t},M.Z=function(n){qi(this);let e=[];if("string"==typeof n)lO(this,n)&&(e=e.concat(this.g.get(Ia(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},M.set=function(n,e){return qi(this),this.i=null,lO(this,n=Ia(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},M.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},M.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),n.push(i)}}return this.i=n.join("&")};var vZ=10;function fO(n){return!!n.h||!!n.g&&n.g.size>=n.j}function pO(n){return n.h?1:n.g?n.g.size:0}function Yw(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Jw(n,e){n.g?n.g.add(e):n.h=e}function gO(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function mO(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return ww(n.i)}function EZ(){this.g=new class{stringify(n){return te.JSON.stringify(n,void 0)}parse(n){return te.JSON.parse(n,void 0)}}}function wZ(n,e,t){const r=t||"";try{oO(n,function(i,o){let s=i;Kc(i)&&(s=Uw(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Zf(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function ll(n){this.l=n.ec||null,this.j=n.ob||!1}function ep(n,e){xt.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Xw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}hO.prototype.cancel=function(){if(this.i=mO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Pt(ll,Gw),ll.prototype.g=function(){return new ep(this.l,this.j)},ll.prototype.i=function(n){return function(){return n}}({}),Pt(ep,xt);var Xw=0;function _O(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function dl(n){n.readyState=4,n.l=null,n.j=null,n.A=null,hl(n)}function hl(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(M=ep.prototype).open=function(n,e){if(this.readyState!=Xw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,hl(this)},M.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||te).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},M.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,dl(this)),this.readyState=Xw},M.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,hl(this)),this.g&&(this.readyState=3,hl(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof te.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_O(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},M.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?dl(this):hl(this),3==this.readyState&&_O(this)}},M.Za=function(n){this.g&&(this.response=this.responseText=n,dl(this))},M.Ya=function(n){this.g&&(this.response=n,dl(this))},M.ka=function(){this.g&&dl(this)},M.setRequestHeader=function(n,e){this.v.append(n,e)},M.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},M.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ep.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var CZ=te.JSON.parse;function it(n){xt.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=yO,this.L=this.M=!1}Pt(it,xt);var yO="",DZ=/^https?$/i,AZ=["POST","PUT"];function vO(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,IO(n),tp(n)}function IO(n){n.F||(n.F=!0,Bt(n,"complete"),Bt(n,"error"))}function EO(n){if(n.h&&typeof Iw<"u"&&(!n.C[1]||4!=Lr(n)||2!=n.da()))if(n.v&&4==Lr(n))$w(n.La,0,n);else if(Bt(n,"readystatechange"),4==Lr(n)){n.h=!1;try{const s=n.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===s){var i=String(n.I).match(sO)[1]||null;!i&&te.self&&te.self.location&&(i=te.self.location.protocol.slice(0,-1)),r=!DZ.test(i?i.toLowerCase():"")}t=r}if(t)Bt(n,"complete"),Bt(n,"success");else{n.m=6;try{var o=2<Lr(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",IO(n)}}finally{tp(n)}}}function tp(n,e){if(n.g){wO(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Bt(n,"ready");try{t.onreadystatechange=r}catch{}}}function wO(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(te.clearTimeout(n.A),n.A=null)}function Lr(n){return n.g?n.g.readyState:0}function TO(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case yO:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function CO(n){let e="";return Pw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Zw(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=CO(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ge(n,e,t))}function fl(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function DO(n){this.Ga=0,this.j=[],this.l=new qf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=fl("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=fl("baseRetryDelayMs",5e3,n),this.hb=fl("retryDelaySeedMs",1e4,n),this.eb=fl("forwardChannelMaxRetries",2,n),this.xa=fl("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new hO(n&&n.concurrentRequestLimit),this.Ja=new EZ,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function eT(n){if(AO(n),3==n.H){var e=n.W++,t=vi(n.I);if(Ge(t,"SID",n.K),Ge(t,"RID",e),Ge(t,"TYPE","terminate"),pl(n,t),(e=new il(n,n.l,e)).L=2,e.A=Xf(vi(t)),t=!1,te.navigator&&te.navigator.sendBeacon)try{t=te.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&te.Image&&((new Image).src=e.A,t=!0),t||(e.g=OO(e.l,null),e.g.ha(e.A)),e.G=Date.now(),ol(e)}NO(n)}function np(n){n.g&&(nT(n),n.g.cancel(),n.g=null)}function AO(n){np(n),n.u&&(te.clearTimeout(n.u),n.u=null),ip(n),n.i.cancel(),n.m&&("number"==typeof n.m&&te.clearTimeout(n.m),n.m=null)}function rp(n){if(!fO(n.i)&&!n.m){n.m=!0;var e=n.Na;Xc||jk(),Zc||(Xc(),Zc=!0),Bw.add(e,n),n.C=0}}function bO(n,e){var t;t=e?e.m:n.W++;const r=vi(n.I);Ge(r,"SID",n.K),Ge(r,"RID",t),Ge(r,"AID",n.V),pl(n,r),n.o&&n.s&&Zw(r,n.o,n.s),t=new il(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=SO(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Jw(n.i,t),Kw(t,r,e)}function pl(n,e){n.na&&Pw(n.na,function(t,r){Ge(e,r,t)}),n.h&&oO({},function(t,r){Ge(e,r,t)})}function SO(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Xt(n.h.Va,n.h,n):null;e:{var i=n.j;let o=-1;for(;;){const s=["count="+t];-1==o?0<t?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let u=0;u<t;u++){let c=i[u].g;const l=i[u].map;if(c-=o,0>c)o=Math.max(0,i[u].g-100),a=!1;else try{wZ(l,s,"req"+c+"_")}catch{r&&r(l)}}if(a){r=s.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function RO(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Xc||jk(),Zc||(Xc(),Zc=!0),Bw.add(e,n),n.A=0}}function tT(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=nl(Xt(n.Ma,n),MO(n,n.A)),n.A++,0))}function nT(n){null!=n.B&&(te.clearTimeout(n.B),n.B=null)}function PO(n){n.g=new il(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=vi(n.wa);Ge(e,"RID","rpc"),Ge(e,"SID",n.K),Ge(e,"AID",n.V),Ge(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Ge(e,"TO",n.qa),Ge(e,"TYPE","xmlhttp"),pl(n,e),n.o&&n.s&&Zw(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=Xf(vi(e)),t.u=null,t.S=!0,tO(t,n)}function ip(n){null!=n.v&&(te.clearTimeout(n.v),n.v=null)}function xO(n,e){var t=null;if(n.g==e){ip(n),nT(n),n.g=null;var r=2}else{if(!Yw(n.i,e))return;t=e.F,gO(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.u?e.u.length:0,e=Date.now()-e.G;var i=n.C;Bt(r=zf(),new Qk(r,t)),rp(n)}else RO(n);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function RZ(n,e){return!(pO(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=nl(Xt(n.Na,n,e),MO(n,n.C)),n.C++,0)))}(n,e)||2==r&&tT(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Ko(n,5);break;case 4:Ko(n,10);break;case 3:Ko(n,6);break;default:Ko(n,2)}}function MO(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Ko(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Xt(n.pb,n);t||(t=new Wo("//www.google.com/images/cleardot.gif"),te.location&&"http"==te.location.protocol||Yf(t,"https"),Xf(t)),function TZ(n,e){const t=new qf;if(te.Image){const r=new Image;r.onload=Uf(Zf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Uf(Zf,t,r,"TestLoadImage: error",!1,e),r.onabort=Uf(Zf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Uf(Zf,t,r,"TestLoadImage: timeout",!1,e),te.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else fn(2);n.H=0,n.h&&n.h.za(e),NO(n),AO(n)}function NO(n){if(n.H=0,n.ma=[],n.h){const e=mO(n.i);(0!=e.length||0!=n.j.length)&&(bk(n.ma,e),bk(n.ma,n.j),n.i.i.length=0,ww(n.j),n.j.length=0),n.h.ya()}}function kO(n,e,t){var r=t instanceof Wo?vi(t):new Wo(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Jf(r,r.m);else{var i=te.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Wo(null);r&&Yf(o,r),e&&(o.g=e),i&&Jf(o,i),t&&(o.l=t),r=o}return e=n.Da,(t=n.F)&&e&&Ge(r,t,e),Ge(r,"VER",n.ra),pl(n,r),r}function OO(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new it(n.Ha&&!n.va?new ll({ob:t}):n.va)).Oa(n.J),e}function VO(){}function op(){if(ya&&!(10<=Number($X)))throw Error("Environmental error: no available transport.")}function Ln(n,e){xt.call(this),this.g=new DO(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Qc(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Qc(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ea(this)}function FO(n){Hw.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function LO(){qw.call(this),this.status=1}function Ea(n){this.g=n}function vr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function rT(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var o=n.g[3],s=(e=n.g[0])+(o^(t=n.g[1])&((i=n.g[2])^o))+r[0]+3614090360&4294967295;s=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=t+(s<<7&4294967295|s>>>25))+((s=o+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(t^o&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^t&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(t^o&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^t&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(t^o&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^t&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(t^o&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=e+(i^o&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^t&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^t&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^t&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^t&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=e+(t^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=t+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=e+(t^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=t+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=e+(t^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=t+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=e+(t^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^t)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=t+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=e+(i^(t|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~t))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=t+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(t|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~t))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=t+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(t|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~t))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=t+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(e=t+((s=e+(i^(t|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(e^(o|~t))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+o&4294967295}function Re(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var o=0|n[i];r&&o==e||(t[i]=o,r=!1)}this.g=t}(M=it.prototype).Oa=function(n){this.M=n},M.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():zw.g(),this.C=function Jk(n){return n.h||(n.h=n.i())}(this.u?this.u:zw),this.g.onreadystatechange=Xt(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(o){return void vO(this,o)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())t.set(o,r.get(o))}r=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),i=te.FormData&&n instanceof te.FormData,!(0<=Ak(AZ,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of t)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wO(this),0<this.B&&((this.L=function bZ(n){return ya&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xt(this.ua,this)):this.A=$w(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){vO(this,o)}},M.ua=function(){typeof Iw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Bt(this,"timeout"),this.abort(8))},M.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Bt(this,"complete"),Bt(this,"abort"),tp(this))},M.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),tp(this,!0)),it.$.N.call(this)},M.La=function(){this.s||(this.G||this.v||this.l?EO(this):this.kb())},M.kb=function(){EO(this)},M.isActive=function(){return!!this.g},M.da=function(){try{return 2<Lr(this)?this.g.status:-1}catch{return-1}},M.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},M.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),CZ(e)}},M.Ia=function(){return this.m},M.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(M=DO.prototype).ra=8,M.H=1,M.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new il(this,this.l,n);let o=this.s;if(this.U&&(o?(o=Mk(o),kk(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=SO(this,i,e),Ge(t=vi(this.I),"RID",n),Ge(t,"CVER",22),this.F&&Ge(t,"X-HTTP-Session-Id",this.F),pl(this,t),o&&(this.O?e="headers="+encodeURIComponent(String(CO(o)))+"&"+e:this.o&&Zw(t,this.o,o)),Jw(this.i,i),this.bb&&Ge(t,"TYPE","init"),this.P?(Ge(t,"$req",e),Ge(t,"SID","null"),i.aa=!0,Kw(i,t,null)):Kw(i,t,e),this.H=2}}else 3==this.H&&(n?bO(this,n):0==this.j.length||fO(this.i)||bO(this))},M.Ma=function(){if(this.u=null,PO(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=nl(Xt(this.jb,this),n)}},M.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,fn(10),np(this),PO(this))},M.ib=function(){null!=this.v&&(this.v=null,np(this),tT(this),fn(19))},M.pb=function(n){n?(this.l.info("Successfully pinged google.com"),fn(2)):(this.l.info("Failed to ping google.com"),fn(1))},M.isActive=function(){return!!this.h&&this.h.isActive(this)},(M=VO.prototype).Ba=function(){},M.Aa=function(){},M.za=function(){},M.ya=function(){},M.isActive=function(){return!0},M.Va=function(){},op.prototype.g=function(n,e){return new Ln(n,e)},Pt(Ln,xt),Ln.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;fn(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=kO(n,null,n.Y),rp(n)},Ln.prototype.close=function(){eT(this.g)},Ln.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Uw(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&rp(e)},Ln.prototype.N=function(){this.g.h=null,delete this.j,eT(this.g),delete this.g,Ln.$.N.call(this)},Pt(FO,Hw),Pt(LO,qw),Pt(Ea,VO),Ea.prototype.Ba=function(){Bt(this.g,"a")},Ea.prototype.Aa=function(n){Bt(this.g,new FO(n))},Ea.prototype.za=function(n){Bt(this.g,new LO)},Ea.prototype.ya=function(){Bt(this.g,"b")},Pt(vr,function PZ(){this.blockSize=-1}),vr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},vr.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=t;)rT(this,n,o),o+=this.blockSize;if("string"==typeof n){for(;o<e;)if(r[i++]=n.charCodeAt(o++),i==this.blockSize){rT(this,r),i=0;break}}else for(;o<e;)if(r[i++]=n[o++],i==this.blockSize){rT(this,r),i=0;break}}this.h=i,this.i+=e},vr.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var xZ={};function iT(n){return-128<=n&&128>n?function UX(n,e){var t=xZ;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Re([0|e],0>e?-1:0)}):new Re([0|n],0>n?-1:0)}function Ur(n){if(isNaN(n)||!isFinite(n))return wa;if(0>n)return jt(Ur(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=oT;return new Re(e,0)}var oT=4294967296,wa=iT(0),sT=iT(1),BO=iT(16777216);function Ii(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function er(n){return-1==n.h}function jt(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Re(t,~n.h).add(sT)}function sp(n,e){return n.add(jt(e))}function ap(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function gl(n,e){this.g=n,this.h=e}function up(n,e){if(Ii(e))throw Error("division by zero");if(Ii(n))return new gl(wa,wa);if(er(n))return e=up(jt(n),e),new gl(jt(e.g),jt(e.h));if(er(e))return e=up(n,jt(e)),new gl(jt(e.g),e.h);if(30<n.g.length){if(er(n)||er(e))throw Error("slowDivide_ only works with positive integers.");for(var t=sT,r=e;0>=r.X(n);)t=jO(t),r=jO(r);var i=Ta(t,1),o=Ta(r,1);for(r=Ta(r,2),t=Ta(t,2);!Ii(r);){var s=o.add(r);0>=s.X(n)&&(i=i.add(t),o=s),r=Ta(r,1),t=Ta(t,1)}return e=sp(n,i.R(e)),new gl(i,e)}for(i=wa;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),s=(o=Ur(t)).R(e);er(s)||0<s.X(n);)s=(o=Ur(t-=r)).R(e);Ii(o)&&(o=sT),i=i.add(o),n=sp(n,s)}return new gl(i,n)}function jO(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Re(t,n.h)}function Ta(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],o=0;o<r;o++)i[o]=0<e?n.D(o+t)>>>e|n.D(o+t+1)<<32-e:n.D(o+t);return new Re(i,n.h)}(M=Re.prototype).ea=function(){if(er(this))return-jt(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:oT+r)*e,e*=oT}return n},M.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ii(this))return"0";if(er(this))return"-"+jt(this).toString(n);for(var e=Ur(Math.pow(n,6)),t=this,r="";;){var i=up(t,e).g,o=((0<(t=sp(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Ii(t=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},M.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},M.X=function(n){return er(n=sp(this,n))?-1:Ii(n)?0:1},M.abs=function(){return er(this)?jt(this):this},M.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&n.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=s>>>16,t[i]=(s&=65535)<<16|(o&=65535)}return new Re(t,-2147483648&t[t.length-1]?-1:0)},M.R=function(n){if(Ii(this)||Ii(n))return wa;if(er(this))return er(n)?jt(this).R(jt(n)):jt(jt(this).R(n));if(er(n))return jt(this.R(jt(n)));if(0>this.X(BO)&&0>n.X(BO))return Ur(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=n.D(i)>>>16,u=65535&n.D(i);t[2*r+2*i]+=s*u,ap(t,2*r+2*i),t[2*r+2*i+1]+=o*u,ap(t,2*r+2*i+1),t[2*r+2*i+1]+=s*a,ap(t,2*r+2*i+1),t[2*r+2*i+2]+=o*a,ap(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Re(t,0)},M.gb=function(n){return up(this,n).h},M.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Re(t,this.h&n.h)},M.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Re(t,this.h|n.h)},M.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Re(t,this.h^n.h)},op.prototype.createWebChannel=op.prototype.g,Ln.prototype.send=Ln.prototype.u,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,Wf.NO_ERROR=0,Wf.TIMEOUT=8,Wf.HTTP_ERROR=6,Yk.COMPLETE="complete",Xk.EventType=rl,rl.OPEN="a",rl.CLOSE="b",rl.ERROR="c",rl.MESSAGE="d",xt.prototype.listen=xt.prototype.O,it.prototype.listenOnce=it.prototype.P,it.prototype.getLastError=it.prototype.Sa,it.prototype.getLastErrorCode=it.prototype.Ia,it.prototype.getStatus=it.prototype.da,it.prototype.getResponseJson=it.prototype.Wa,it.prototype.getResponseText=it.prototype.ja,it.prototype.send=it.prototype.ha,it.prototype.setWithCredentials=it.prototype.Oa,vr.prototype.digest=vr.prototype.l,vr.prototype.reset=vr.prototype.reset,vr.prototype.update=vr.prototype.j,Re.prototype.add=Re.prototype.add,Re.prototype.multiply=Re.prototype.R,Re.prototype.modulo=Re.prototype.gb,Re.prototype.compare=Re.prototype.X,Re.prototype.toNumber=Re.prototype.ea,Re.prototype.toString=Re.prototype.toString,Re.prototype.getBits=Re.prototype.D,Re.fromNumber=Ur,Re.fromString=function UO(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return jt(UO(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ur(Math.pow(e,8)),r=wa,i=0;i<n.length;i+=8){var o=Math.min(8,n.length-i),s=parseInt(n.substring(i,i+o),e);8>o?(o=Ur(Math.pow(e,o)),r=r.R(o).add(Ur(s))):r=(r=r.R(t)).add(Ur(s))}return r};var MZ=yr.createWebChannelTransport=function(){return new op},NZ=yr.getStatEventTarget=function(){return zf()},aT=yr.ErrorCode=Wf,kZ=yr.EventType=Yk,OZ=yr.Event=qo,$O=yr.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},cp=(yr.FetchXmlHttpFactory=ll,yr.WebChannel=Xk),VZ=yr.XhrIo=it,FZ=yr.Md5=vr,Ca=yr.Integer=Re;const GO="@firebase/firestore";class Mt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");let Da="10.8.1";const zi=new pf("@firebase/firestore");function Aa(){return zi.logLevel}function C(n,...e){if(zi.logLevel<=fe.DEBUG){const t=e.map(uT);zi.debug(`Firestore (${Da}): ${n}`,...t)}}function ct(n,...e){if(zi.logLevel<=fe.ERROR){const t=e.map(uT);zi.error(`Firestore (${Da}): ${n}`,...t)}}function Un(n,...e){if(zi.logLevel<=fe.WARN){const t=e.map(uT);zi.warn(`Firestore (${Da}): ${n}`,...t)}}function uT(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function O(n="Unexpected state"){const e=`FIRESTORE (${Da}) INTERNAL ASSERTION FAILED: `+n;throw ct(e),new Error(e)}function V(n,e){n||O()}function P(n,e){return n}const E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class D extends mr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class At{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class HO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Mt.UNAUTHENTICATED))}shutdown(){}}class UZ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class BZ{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let s=new At;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new At,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(g(function*(){yield c.promise,yield o(r.currentUser)}))},u=c=>{C("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(C("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new At)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(C("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(V("string"==typeof r.accessToken),new HO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return V(null===e||"string"==typeof e),new Mt(e)}}class jZ{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $Z{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new jZ(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GZ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=o=>{null!=o.error&&C("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,C("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{C("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):C("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(V("string"==typeof t.token),this.R=t.token,new qO(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function HZ(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class zO{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=HZ(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function X(n,e){return n<e?-1:n>e?1:0}function ba(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class Xe{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new D(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new D(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new D(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new D(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Xe(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?X(this.nanoseconds,e.nanoseconds):X(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class F{constructor(e){this.timestamp=e}static fromTimestamp(e){return new F(e)}static min(){return new F(new Xe(0,0))}static max(){return new F(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ml{constructor(e,t,r){void 0===t?t=0:t>e.length&&O(),void 0===r?r=e.length-t:r>e.length-t&&O(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ml.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ml?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ge extends ml{construct(e,t,r){return new ge(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new D(E.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new ge(t)}static emptyPath(){return new ge([])}}const qZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends ml{construct(e,t,r){return new Ke(e,t,r)}static isValidIdentifier(e){return qZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ke(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new D(E.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new D(E.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new D(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new D(E.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ke(t)}static emptyPath(){return new Ke([])}}class x{constructor(e){this.path=e}static fromPath(e){return new x(ge.fromString(e))}static fromName(e){return new x(ge.fromString(e).popFirst(5))}static empty(){return new x(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ge.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ge.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new x(new ge(e.slice()))}}function QO(n){return new Bn(n.readTime,n.key,-1)}class Bn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Bn(F.min(),x.empty(),-1)}static max(){return new Bn(F.max(),x.empty(),-1)}}function lT(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=x.comparator(n.documentKey,e.documentKey),0!==t?t:X(n.largestBatchId,e.largestBatchId))}const YO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KZ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Wi(n){return dT.apply(this,arguments)}function dT(){return dT=g(function*(n){if(n.code!==E.FAILED_PRECONDITION||n.message!==YO)throw n;C("LocalStore","Unexpectedly lost primary lease")}),dT.apply(this,arguments)}class v{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&O(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new v((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof v?t:v.resolve(t)}catch(t){return v.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):v.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):v.reject(t)}static resolve(e){return new v((t,r)=>{t(e)})}static reject(e){return new v((t,r)=>{r(e)})}static waitFor(e){return new v((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=v.resolve(!1);for(const r of e)t=t.next(i=>i?v.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new v((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const c=u;t(e[c]).next(l=>{s[c]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,t){return new v((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class lp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new At,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new _l(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=hT(r.target.error);this.V.reject(new _l(e,i))}}static open(e,t,r,i){try{return new lp(t,e.transaction(i,r))}catch(o){throw new _l(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(C("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new YZ(t)}}class tr{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===tr.S(rt())&&ct("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return C("SimpleDb","Removing database:",e),Jo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ev())return!1;if(tr.C())return!0;const e=rt(),t=tr.S(e),r=0<t&&t<10,i=tr.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return g(function*(){return t.db||(C("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new _l(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new D(E.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new D(E.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new _l(e,a))},o.onupgradeneeded=s=>{C("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',s.oldVersion),t.p.N(s.target.result,o.transaction,s.oldVersion,t.version).next(()=>{C("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return g(function*(){const s="readonly"===t;let a=0;for(;;){++a;try{o.db=yield o.O(e);const u=lp.open(o.db,e,s?"readonly":"readwrite",r),c=i(u).next(l=>(u.g(),l)).catch(l=>(u.abort(l),v.reject(l))).toPromise();return c.catch(()=>{}),yield u.m,c}catch(u){const c=u,l="FirebaseError"!==c.name&&a<3;if(C("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),o.close(),!l)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class QZ{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Jo(this.k.delete())}}class _l extends D{constructor(e,t){super(E.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ki(n){return"IndexedDbTransactionError"===n.name}class YZ{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(C("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(C("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Jo(r)}add(e){return C("SimpleDb","ADD",this.store.name,e,e),Jo(this.store.add(e))}get(e){return Jo(this.store.get(e)).next(t=>(void 0===t&&(t=null),C("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return C("SimpleDb","DELETE",this.store.name,e),Jo(this.store.delete(e))}count(){return C("SimpleDb","COUNT",this.store.name),Jo(this.store.count())}W(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const o=i.getAll(r.range);return new v((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{const o=this.cursor(r),s=[];return this.G(o,(a,u)=>{s.push(u)}).next(()=>s)}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new v((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,t){C("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.J=!1;const i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Z(e){const t=this.cursor({});return new v((r,i)=>{t.onerror=o=>{const s=hT(o.target.error);i(s)},t.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,t){const r=[];return new v((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const u=new QZ(a),c=t(a.primaryKey,a.value,u);if(c instanceof v){const l=c.catch(d=>(u.done(),v.reject(d)));r.push(l)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>v.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Jo(n){return new v((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=hT(r.target.error);t(i)}})}let JO=!1;function hT(n){const e=tr.S(rt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new D("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return JO||(JO=!0,setTimeout(()=>{throw r},0)),r}}return n}let jn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function yl(n){return null==n}function vl(n){return 0===n&&1/n==-1/0}function oV(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Qi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Le{constructor(e,t){this.comparator=e,this.root=t||$t.EMPTY}insert(e,t){return new Le(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hp(this.root,e,this.comparator,!1)}getReverseIterator(){return new hp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hp(this.root,e,this.comparator,!0)}}class hp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??$t.RED,this.left=i??$t.EMPTY,this.right=o??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new $t(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return $t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw O();const e=this.left.check();if(e!==this.right.check())throw O();return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1,$t.EMPTY=new class{constructor(){this.size=0}get key(){throw O()}get value(){throw O()}get color(){throw O()}get left(){throw O()}get right(){throw O()}copy(e,t,r,i,o){return this}insert(e,t,r){return new $t(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xe{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new aV(this.data.getIterator())}getIteratorFrom(e){return new aV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof xe)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new xe(this.comparator);return t.data=e,t}}class aV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Tn{constructor(e){this.fields=e,e.sort(Ke.comparator)}static empty(){return new Tn([])}unionWith(e){let t=new xe(Ke.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Tn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ba(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class uV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new uV("Invalid base64 string: "+o):o}}(e);return new bt(t)}static fromUint8Array(e){const t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return X(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const _ee=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yi(n){if(V(!!n),"string"==typeof n){let e=0;const t=_ee.exec(n);if(V(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(n.seconds),nanos:ot(n.nanos)}}function ot(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ei(n){return"string"==typeof n?bt.fromBase64String(n):bt.fromUint8Array(n)}function fp(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function pp(n){const e=n.mapValue.fields.__previous_value__;return fp(e)?pp(e):e}function Il(n){const e=Yi(n.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}class yee{constructor(e,t,r,i,o,s,a,u,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Xo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Xo&&e.projectId===this.projectId&&e.database===this.database}}const Ji_mapValue={fields:{__type__:{stringValue:"__max__"}}};function Xi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fp(n)?4:hV(n)?9007199254740991:10:O()}function jr(n,e){if(n===e)return!0;const t=Xi(n);if(t!==Xi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Il(n).isEqual(Il(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Yi(i.timestampValue),a=Yi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Ei(n.bytesValue).isEqual(Ei(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ot(i.geoPointValue.latitude)===ot(o.geoPointValue.latitude)&&ot(i.geoPointValue.longitude)===ot(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ot(i.integerValue)===ot(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=ot(i.doubleValue),a=ot(o.doubleValue);return s===a?vl(s)===vl(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ba(n.arrayValue.values||[],e.arrayValue.values||[],jr);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(oV(s)!==oV(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===a[u]||!jr(s[u],a[u])))return!1;return!0}(n,e);default:return O()}var o}function El(n,e){return void 0!==(n.values||[]).find(t=>jr(t,e))}function Zi(n,e){if(n===e)return 0;const t=Xi(n),r=Xi(e);if(t!==r)return X(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return X(n.booleanValue,e.booleanValue);case 2:return function(o,s){const a=ot(o.integerValue||o.doubleValue),u=ot(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return cV(n.timestampValue,e.timestampValue);case 4:return cV(Il(n),Il(e));case 5:return X(n.stringValue,e.stringValue);case 6:return function(o,s){const a=Ei(o),u=Ei(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let c=0;c<a.length&&c<u.length;c++){const l=X(a[c],u[c]);if(0!==l)return l}return X(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){const a=X(ot(o.latitude),ot(s.latitude));return 0!==a?a:X(ot(o.longitude),ot(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],u=s.values||[];for(let c=0;c<a.length&&c<u.length;++c){const l=Zi(a[c],u[c]);if(l)return l}return X(a.length,u.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Ji_mapValue&&s===Ji_mapValue)return 0;if(o===Ji_mapValue)return 1;if(s===Ji_mapValue)return-1;const a=o.fields||{},u=Object.keys(a),c=s.fields||{},l=Object.keys(c);u.sort(),l.sort();for(let d=0;d<u.length&&d<l.length;++d){const h=X(u[d],l[d]);if(0!==h)return h;const f=Zi(a[u[d]],c[l[d]]);if(0!==f)return f}return X(u.length,l.length)}(n.mapValue,e.mapValue);default:throw O()}}function cV(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return X(n,e);const t=Yi(n),r=Yi(e),i=X(t.seconds,r.seconds);return 0!==i?i:X(t.nanos,r.nanos)}function xa(n){return pT(n)}function pT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Yi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ei(n.bytesValue).toBase64():"referenceValue"in n?x.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=pT(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${pT(t.fields[s])}`;return i+"}"}(n.mapValue):O()}function Zo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function gT(n){return!!n&&"integerValue"in n}function wl(n){return!!n&&"arrayValue"in n}function lV(n){return!!n&&"nullValue"in n}function dV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _p(n){return!!n&&"mapValue"in n}function Tl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Qi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Tl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Tl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function hV(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class Gt{constructor(e){this.value=e}static empty(){return new Gt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!_p(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tl(t)}setAll(e){let t=Ke.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Tl(s):i.push(a.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());_p(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];_p(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Qi(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Gt(Tl(this.value))}}function gV(n){const e=[];return Qi(n.fields,(t,r)=>{const i=new Ke([t]);if(_p(r)){const o=gV(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Tn(e)}class He{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new He(e,0,F.min(),F.min(),F.min(),Gt.empty(),0)}static newFoundDocument(e,t,r,i){return new He(e,1,t,F.min(),r,i,0)}static newNoDocument(e,t){return new He(e,2,t,F.min(),F.min(),Gt.empty(),0)}static newUnknownDocument(e,t){return new He(e,3,t,F.min(),F.min(),Gt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(F.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=F.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof He&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new He(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class eo{constructor(e,t){this.position=e,this.inclusive=t}}function mV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(r=o.field.isKeyField()?x.comparator(x.fromName(s.referenceValue),t.key):Zi(s,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function _V(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!jr(n.position[t],e.position[t]))return!1;return!0}class Cl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Eee(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class yV{}class me extends yV{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new wee(e,t,r):"array-contains"===t?new Dee(e,r):"in"===t?new CV(e,r):"not-in"===t?new Aee(e,r):"array-contains-any"===t?new bee(e,r):new me(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Tee(e,r):new Cee(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Zi(t,this.value)):null!==t&&Xi(this.value)===Xi(t)&&this.matchesComparison(Zi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return O()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pe extends yV{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Pe(e,t)}matches(e){return Ma(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Ma(n){return"and"===n.op}function _T(n){return function vV(n){for(const e of n.filters)if(e instanceof Pe)return!1;return!0}(n)&&Ma(n)}function yT(n){if(n instanceof me)return n.field.canonicalString()+n.op.toString()+xa(n.value);if(_T(n))return n.filters.map(e=>yT(e)).join(",");{const e=n.filters.map(t=>yT(t)).join(",");return`${n.op}(${e})`}}function IV(n,e){return n instanceof me?(r=n,(i=e)instanceof me&&r.op===i.op&&r.field.isEqual(i.field)&&jr(r.value,i.value)):n instanceof Pe?function(r,i){return i instanceof Pe&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&IV(s,i.filters[a]),!0)}(n,e):void O();var r,i}function wV(n){return n instanceof me?`${(t=n).field.canonicalString()} ${t.op} ${xa(t.value)}`:n instanceof Pe?function(t){return t.op.toString()+" {"+t.getFilters().map(wV).join(" ,")+"}"}(n):"Filter";var t}class wee extends me{constructor(e,t,r){super(e,t,r),this.key=x.fromName(r.referenceValue)}matches(e){const t=x.comparator(e.key,this.key);return this.matchesComparison(t)}}class Tee extends me{constructor(e,t){super(e,"in",t),this.keys=TV(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Cee extends me{constructor(e,t){super(e,"not-in",t),this.keys=TV(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function TV(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>x.fromName(r.referenceValue))}class Dee extends me{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wl(t)&&El(t.arrayValue,this.value)}}class CV extends me{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&El(this.value.arrayValue,t)}}class Aee extends me{constructor(e,t){super(e,"not-in",t)}matches(e){if(El(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!El(this.value.arrayValue,t)}}class bee extends me{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>El(this.value.arrayValue,r))}}class See{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function vT(n,e=null,t=[],r=[],i=null,o=null,s=null){return new See(n,e,t,r,i,o,s)}function es(n){const e=P(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>yT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),yl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>xa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>xa(r)).join(",")),e.ce=t}return e.ce}function Dl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Eee(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!IV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_V(n.startAt,e.startAt)&&_V(n.endAt,e.endAt)}function yp(n){return x.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class wi{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function Na(n){return new wi(n)}function SV(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function IT(n){return null!==n.collectionGroup}function ka(n){const e=P(n);if(null===e.le){e.le=[];const t=new Set;for(const o of e.explicitOrderBy)e.le.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new xe(Ke.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.le.push(new Cl(o,r))}),t.has(Ke.keyField().canonicalString())||e.le.push(new Cl(Ke.keyField(),r))}return e.le}function pn(n){const e=P(n);return e.he||(e.he=function RV(n,e){if("F"===n.limitType)return vT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Cl(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new eo(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new eo(n.startAt.position,n.startAt.inclusive):null;return vT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,ka(n))),e.he}function ET(n,e){const t=n.filters.concat([e]);return new wi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ip(n,e,t){return new wi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Al(n,e){return Dl(pn(n),pn(e))&&n.limitType===e.limitType}function PV(n){return`${es(pn(n))}|lt:${n.limitType}`}function Oa(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>wV(i)).join(", ")}]`),yl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>xa(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>xa(i)).join(",")),`Target(${r})`}(pn(n))}; limitType=${n.limitType})`}function bl(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):x.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of ka(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(s,a,u){const c=mV(s,a,u);return s.inclusive?c<=0:c<0}(r.startAt,ka(r),i)||r.endAt&&!function(s,a,u){const c=mV(s,a,u);return s.inclusive?c>=0:c>0}(r.endAt,ka(r),i)));var r,i}function MV(n){return(e,t)=>{let r=!1;for(const i of ka(n)){const o=Ree(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Ree(n,e,t){const r=n.field.isKeyField()?x.comparator(e.key,t.key):function(o,s,a){const u=s.data.field(o),c=a.data.field(o);return null!==u&&null!==c?Zi(u,c):O()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return O()}}class Ti{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qi(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return sV(this.inner)}size(){return this.innerSize}}const Pee=new Le(x.comparator);function Cn(){return Pee}const NV=new Le(x.comparator);function Sl(...n){let e=NV;for(const t of n)e=e.insert(t.key,t);return e}function kV(n){let e=NV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function $r(){return Rl()}function OV(){return Rl()}function Rl(){return new Ti(n=>n.toString(),(n,e)=>n.isEqual(e))}const xee=new Le(x.comparator),Mee=new xe(x.comparator);function oe(...n){let e=Mee;for(const t of n)e=e.add(t);return e}const Nee=new xe(X);function VV(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vl(e)?"-0":e}}function FV(n){return{integerValue:""+n}}function LV(n,e){return function XO(n){return"number"==typeof n&&Number.isInteger(n)&&!vl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?FV(e):VV(n,e)}class Ep{constructor(){this._=void 0}}function kee(n,e,t){return n instanceof Va?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&fp(o)&&(o=pp(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof ts?BV(n,e):n instanceof ns?jV(n,e):function(i,o){const s=UV(i,o),a=$V(s)+$V(i.Ie);return gT(s)&&gT(i.Ie)?FV(a):VV(i.serializer,a)}(n,e)}function Oee(n,e,t){return n instanceof ts?BV(n,e):n instanceof ns?jV(n,e):t}function UV(n,e){return n instanceof Fa?gT(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class Va extends Ep{}class ts extends Ep{constructor(e){super(),this.elements=e}}function BV(n,e){const t=GV(e);for(const r of n.elements)t.some(i=>jr(i,r))||t.push(r);return{arrayValue:{values:t}}}class ns extends Ep{constructor(e){super(),this.elements=e}}function jV(n,e){let t=GV(e);for(const r of n.elements)t=t.filter(i=>!jr(i,r));return{arrayValue:{values:t}}}class Fa extends Ep{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function $V(n){return ot(n.integerValue||n.doubleValue)}function GV(n){return wl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Fee{constructor(e,t){this.version=e,this.transformResults=t}}class Qe{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qe}static exists(e){return new Qe(void 0,e)}static updateTime(e){return new Qe(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Tp{}function HV(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Ua(n.key,Qe.none()):new La(n.key,n.data,Qe.none());{const t=n.data,r=Gt.empty();let i=new xe(Ke.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);null===s&&o.length>1&&(o=o.popLast(),s=t.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new Ci(n.key,r,new Tn(i.toArray()),Qe.none())}}function Lee(n,e,t){n instanceof La?function(i,o,s){const a=i.value.clone(),u=WV(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ci?function(i,o,s){if(!wp(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=WV(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(zV(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function xl(n,e,t,r){return n instanceof La?function(o,s,a,u){if(!wp(o.precondition,s))return a;const c=o.value.clone(),l=KV(o.fieldTransforms,u,s);return c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ci?function(o,s,a,u){if(!wp(o.precondition,s))return a;const c=KV(o.fieldTransforms,u,s),l=s.data;return l.setAll(zV(o)),l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(n,e,t,r):(a=t,wp(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function Uee(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=UV(r.transform,i||null);null!=o&&(null===t&&(t=Gt.empty()),t.set(r.field,o))}return t||null}function qV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&ba(r,i,(o,s)=>function Vee(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof ts&&i instanceof ts||r instanceof ns&&i instanceof ns?ba(r.elements,i.elements,jr):r instanceof Fa&&i instanceof Fa?jr(r.Ie,i.Ie):r instanceof Va&&i instanceof Va);var r,i}(o,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class La extends Tp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ci extends Tp{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function zV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function WV(n,e,t){const r=new Map;V(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Oee(s,a,t[i]))}return r}function KV(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,kee(o,s,e))}return r}class Ua extends Tp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TT extends Tp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class CT{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Lee(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=xl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=xl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=OV();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;const u=HV(s,a);null!==u&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(F.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),oe())}isEqual(e){return this.batchId===e.batchId&&ba(this.mutations,e.mutations,(t,r)=>qV(t,r))&&ba(this.baseMutations,e.baseMutations,(t,r)=>qV(t,r))}}class DT{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){V(e.mutations.length===r.length);let i=xee;const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new DT(e,t,r,i)}}class AT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class jee{constructor(e,t){this.count=e,this.unchangedNames=t}}var It,Ie;function QV(n){switch(n){default:return O();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0}}function YV(n){if(void 0===n)return ct("GRPC error has no .code"),E.UNKNOWN;switch(n){case It.OK:return E.OK;case It.CANCELLED:return E.CANCELLED;case It.UNKNOWN:return E.UNKNOWN;case It.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case It.INTERNAL:return E.INTERNAL;case It.UNAVAILABLE:return E.UNAVAILABLE;case It.UNAUTHENTICATED:return E.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case It.NOT_FOUND:return E.NOT_FOUND;case It.ALREADY_EXISTS:return E.ALREADY_EXISTS;case It.PERMISSION_DENIED:return E.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case It.ABORTED:return E.ABORTED;case It.OUT_OF_RANGE:return E.OUT_OF_RANGE;case It.UNIMPLEMENTED:return E.UNIMPLEMENTED;case It.DATA_LOSS:return E.DATA_LOSS;default:return O()}}(Ie=It||(It={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";const $ee=new Ca([4294967295,4294967295],0);function XV(n){const e=function JV(){return new TextEncoder}().encode(n),t=new FZ;return t.update(e),new Uint8Array(t.digest())}function ZV(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ca([t,r],0),new Ca([i,o],0)]}class bT{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ml(`Invalid padding: ${t}`);if(r<0)throw new Ml(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Ml(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Ml(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=Ca.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply(Ca.fromNumber(r)));return 1===i.compare($ee)&&(i=new Ca([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=XV(e),[r,i]=ZV(t);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new bT(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Te)return;const t=XV(e),[r,i]=ZV(t);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);this.Re(s)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Nl{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,kl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Nl(F.min(),i,new Le(X),Cn(),oe())}}class kl{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new kl(r,t,oe(),oe(),oe())}}class Dp{constructor(e,t,r,i){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=i}}class eF{constructor(e,t){this.targetId=e,this.fe=t}}class tF{constructor(e,t,r=bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class nF{constructor(){this.ge=0,this.pe=iF(),this.ye=bt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=oe(),t=oe(),r=oe();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:O()}}),new kl(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=iF()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,V(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Gee{constructor(e){this.Le=e,this.ke=new Map,this.qe=Cn(),this.Qe=rF(),this.Ke=new Le(X)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:O()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.fe.count,i=this.Ye(t);if(i){const o=i.target;if(yp(o))if(0===r){const s=new x(o.path);this.We(t,s,He.newNoDocument(s,F.min()))}else V(1===r);else{const s=this.Ze(t);if(s!==r){const a=this.Xe(e),u=a?this.et(a,e,s):1;0!==u&&(this.He(t),this.Ke=this.Ke.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let s,a;try{s=Ei(r).toUint8Array()}catch(u){if(u instanceof uV)return Un("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new bT(s,i,o)}catch(u){return Un(u instanceof Ml?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(t,o,null),i++)}),i}it(e){const t=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&yp(a.target)){const u=new x(a.target.path);null!==this.qe.get(u)||this.st(s,u)||this.We(s,u,He.newNoDocument(u,e))}o.De&&(t.set(s,o.ve()),o.Fe())}});let r=oe();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const c=this.Ye(u);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const i=new Nl(e,t,this.Ke,this.qe,r);return this.qe=Cn(),this.Qe=rF(),this.Ke=new Le(X),i}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,t)?i.Me(t,1):i.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new nF,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new xe(X),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||C("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new nF),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function rF(){return new Le(x.comparator)}function iF(){return new Le(x.comparator)}const Hee={asc:"ASCENDING",desc:"DESCENDING"},qee={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zee={and:"AND",or:"OR"};class Wee{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ST(n,e){return n.useProto3Json||yl(e)?e:{value:e}}function Ba(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Kee(n,e){return Ba(n,e.toTimestamp())}function lt(n){return V(!!n),F.fromTimestamp(function(t){const r=Yi(t);return new Xe(r.seconds,r.nanos)}(n))}function RT(n,e){return PT(n,e).canonicalString()}function PT(n,e){const t=(i=n,new ge(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function sF(n){const e=ge.fromString(n);return V(mF(e)),e}function Ol(n,e){return RT(n.databaseId,e.path)}function Gr(n,e){const t=sF(e);if(t.get(1)!==n.databaseId.projectId)throw new D(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new D(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new x(cF(t))}function aF(n,e){return RT(n.databaseId,e)}function xT(n){return new ge(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cF(n){return V(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function lF(n,e,t){return{name:Ol(n,e),fields:t.value.mapValue.fields}}function hF(n,e){return{documents:[aF(n,e.path)]}}function NT(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=aF(n,i);const o=function(c){if(0!==c.length)return gF(Pe.create(c,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const s=function(c){if(0!==c.length)return c.map(l=>{return{field:to((h=l).field),direction:Zee(h.dir)};var h})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=ST(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:t,parent:i};var c}function fF(n){let e=function uF(n){const e=sF(n);return 4===e.length?ge.emptyPath():cF(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){V(1===r);const l=t.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];t.where&&(o=function(d){const h=pF(d);return h instanceof Pe&&_T(h)?h.getFilters():[h]}(t.where));let s=[];t.orderBy&&(s=t.orderBy.map(h=>{return new Cl(ja((p=h).field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction));var p}));let a=null;t.limit&&(a=function(d){let h;return h="object"==typeof d?d.value:d,yl(h)?null:h}(t.limit));let u=null;var d;t.startAt&&(u=new eo((d=t.startAt).values||[],!!d.before));let c=null;return t.endAt&&(c=function(d){return new eo(d.values||[],!d.before)}(t.endAt)),function bV(n,e,t,r,i,o,s,a){return new wi(n,e,t,r,i,o,s,a)}(e,i,s,o,a,"F",u,c)}function pF(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ja(t.unaryFilter.field);return me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ja(t.unaryFilter.field);return me.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ja(t.unaryFilter.field);return me.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ja(t.unaryFilter.field);return me.create(s,"!=",{nullValue:"NULL_VALUE"});default:return O()}}(n):void 0!==n.fieldFilter?me.create(ja((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return O()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Pe.create(t.compositeFilter.filters.map(r=>pF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return O()}}(t.compositeFilter.op))}(n):O();var t}function Zee(n){return Hee[n]}function ete(n){return qee[n]}function tte(n){return zee[n]}function to(n){return{fieldPath:n.canonicalString()}}function ja(n){return Ke.fromServerFormat(n.fieldPath)}function gF(n){return n instanceof me?function(t){if("=="===t.op){if(dV(t.value))return{unaryFilter:{field:to(t.field),op:"IS_NAN"}};if(lV(t.value))return{unaryFilter:{field:to(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(dV(t.value))return{unaryFilter:{field:to(t.field),op:"IS_NOT_NAN"}};if(lV(t.value))return{unaryFilter:{field:to(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:to(t.field),op:ete(t.op),value:t.value}}}(n):n instanceof Pe?function(t){const r=t.getFilters().map(i=>gF(i));return 1===r.length?r[0]:{compositeFilter:{op:tte(t.op),filters:r}}}(n):O()}function nte(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function mF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Di{constructor(e,t,r,i,o=F.min(),s=F.min(),a=bt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class _F{constructor(e){this.ct=e}}function kT(n){const e=fF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ip(e,e.limit,"L"):e}class ss{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(ot(e.integerValue));else if("doubleValue"in e){const r=ot(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),vl(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At(`${r.seconds||""}`),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Ei(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?hV(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):O()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),x.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}ss.bt=new ss;class lte{constructor(){this._n=new BT}addToCollectionParentIndex(e,t){return this._n.add(t),v.resolve()}getCollectionParents(e,t){return v.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return v.resolve()}deleteFieldIndex(e,t){return v.resolve()}deleteAllFieldIndexes(e){return v.resolve()}createTargetIndexes(e,t){return v.resolve()}getDocumentsMatchingTarget(e,t){return v.resolve(null)}getIndexType(e,t){return v.resolve(0)}getFieldIndexes(e,t){return v.resolve([])}getNextCollectionGroupToUpdate(e){return v.resolve(null)}getMinOffset(e,t){return v.resolve(Bn.min())}getMinOffsetFromCollectionGroup(e,t){return v.resolve(Bn.min())}updateCollectionGroup(e,t,r){return v.resolve()}updateIndexEntries(e,t){return v.resolve()}}class BT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new xe(ge.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xe(ge.comparator)).toArray()}}new Uint8Array(0);class tn{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new tn(e,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(41943040,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);class us{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new us(0)}static Bn(){return new us(-1)}}class mte{constructor(){this.changes=new Ti(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,He.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?v.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vte{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class HF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&xl(r.mutation,i,Tn.empty(),Xe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=oe()){const i=$r();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Sl();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=$r();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,oe()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Cn();const s=Rl(),a=Rl();return t.forEach((u,c)=>{const l=r.get(c.key);i.has(c.key)&&(void 0===l||l.mutation instanceof Ci)?o=o.insert(c.key,c):void 0!==l?(s.set(c.key,l.mutation.getFieldMask()),xl(l.mutation,c,l.mutation.getFieldMask(),Xe.now())):s.set(c.key,Tn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,l)=>s.set(c,l)),t.forEach((c,l)=>{var d;return a.set(c,new vte(l,null!==(d=s.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Rl();let i=new Le((s,a)=>s-a),o=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const a of s)a.keys().forEach(u=>{const c=t.get(u);if(null===c)return;let l=r.get(u)||Tn.empty();l=a.applyToLocalView(c,l),r.set(u,l);const d=(i.get(a.batchId)||oe()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,l=u.value,d=OV();l.forEach(h=>{if(!o.has(h)){const f=HV(t.get(h),r.get(h));null!==f&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,d))}return v.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return x.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):IT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var s}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):v.resolve($r());let a=-1,u=o;return s.next(c=>v.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(l)?v.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,oe())).next(l=>({batchId:a,changes:kV(l)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new x(t)).next(r=>{let i=Sl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let s=Sl();return this.indexManager.getCollectionParents(e,o).next(a=>v.forEach(a,u=>{const c=(d=t,h=u.child(o),new wi(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt));var d,h;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(l=>{l.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,c)=>{const l=c.getKey();null===s.get(l)&&(s=s.insert(l,He.newInvalidDocument(l)))});let a=Sl();return s.forEach((u,c)=>{const l=o.get(u);void 0!==l&&xl(l.mutation,c,Tn.empty(),Xe.now()),bl(t,c)&&(a=a.insert(u,c))}),a})}}class Ite{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return v.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:lt(i.createTime)}),v.resolve();var i}getNamedQuery(e,t){return v.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:kT(i.bundledQuery),readTime:lt(i.readTime)}),v.resolve();var i}}class Ete{constructor(){this.overlays=new Le(x.comparator),this.hr=new Map}getOverlay(e,t){return v.resolve(this.overlays.get(t))}getOverlays(e,t){const r=$r();return v.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),v.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),v.resolve()}getOverlaysForCollection(e,t,r){const i=$r(),o=t.length+1,s=new x(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return v.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Le((c,l)=>c-l);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let l=o.get(c.largestBatchId);null===l&&(l=$r(),o=o.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}const a=$r(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return v.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new AT(t,r));let o=this.hr.get(t);void 0===o&&(o=oe(),this.hr.set(t,o)),this.hr.set(t,o.add(r.key))}}class jT{constructor(){this.Pr=new xe(kt.Ir),this.Tr=new xe(kt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new kt(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new kt(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new x(new ge([])),r=new kt(t,e),i=new kt(t,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new x(new ge([])),r=new kt(t,e),i=new kt(t,e+1);let o=oe();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const t=new kt(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class kt{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return x.comparator(e.key,t.key)||X(e.pr,t.pr)}static Er(e,t){return X(e.pr,t.pr)||x.comparator(e.key,t.key)}}class wte{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new xe(kt.Ir)}checkEmpty(e){return v.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.yr;this.yr++;const s=new CT(o,t,r,i);this.mutationQueue.push(s);for(const a of i)this.wr=this.wr.add(new kt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return v.resolve(s)}lookupMutationBatch(e,t){return v.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),o=i<0?0:i;return v.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return v.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return v.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new kt(t,0),i=new kt(t,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{const a=this.Sr(s.pr);o.push(a)}),v.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(X);return t.forEach(i=>{const o=new kt(i,0),s=new kt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),v.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;x.isDocumentKey(o)||(o=o.child(""));const s=new kt(new x(o),0);let a=new xe(X);return this.wr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.pr)),!0)},s),v.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){V(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return v.forEach(t.mutations,i=>{const o=new kt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new kt(t,0),i=this.wr.firstAfterOrEqual(r);return v.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return v.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Tte{constructor(e){this.vr=e,this.docs=new Le(x.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return v.resolve(r?r.document.mutableCopy():He.newInvalidDocument(t))}getEntries(e,t){let r=Cn();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():He.newInvalidDocument(i))}),v.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Cn();const s=t.path,a=new x(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:l}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||lT(QO(l),r)<=0||(i.has(l.key)||bl(t,l))&&(o=o.insert(l.key,l.mutableCopy()))}return v.resolve(o)}getAllFromCollectionGroup(e,t,r,i){O()}Fr(e,t){return v.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Cte(this)}getSize(e){return v.resolve(this.size)}}class Cte extends mte{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),v.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Dte{constructor(e){this.persistence=e,this.Mr=new Ti(t=>es(t),Dl),this.lastRemoteSnapshotVersion=F.min(),this.highestTargetId=0,this.Or=0,this.Nr=new jT,this.targetCount=0,this.Br=us.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),v.resolve()}getLastRemoteSnapshotVersion(e){return v.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return v.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),v.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),v.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new us(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,v.resolve()}updateTargetData(e,t){return this.qn(t),v.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,v.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),v.waitFor(o).next(()=>i)}getTargetCount(e){return v.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return v.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),v.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),v.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),v.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return v.resolve(r)}containsKey(e,t){return v.resolve(this.Nr.containsKey(t))}}class $T{constructor(e,t){this.Lr={},this.overlays={},this.kr=new jn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Dte(this),this.indexManager=new lte,this.remoteDocumentCache=new Tte(r=>this.referenceDelegate.Kr(r)),this.serializer=new _F(t),this.$r=new Ite(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ete,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Lr[e.toKey()];return r||(r=new wte(t,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){C("MemoryPersistence","Starting transaction:",e);const i=new Ate(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,t){return v.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,t)))}}class Ate extends KZ{constructor(e){super(),this.currentSequenceNumber=e}}class Np{constructor(e){this.persistence=e,this.zr=new jT,this.jr=null}static Hr(e){return new Np(e)}get Jr(){if(this.jr)return this.jr;throw O()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),v.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),v.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),v.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return v.forEach(this.Jr,r=>{const i=x.fromPath(r);return this.Yr(e,i).next(o=>{o||t.removeEntry(i,F.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return v.or([()=>v.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class zT{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=oe(),i=oe();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new zT(e,t.fromCache,r,i)}}class Ste{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class zF{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function qW(){return!function $W(){var n;const e=null===(n=hf())||void 0===n?void 0:n.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}()?8:tr.v(rt())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ji(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new Ste;return this.Ji(e,t,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,t,s,a.size)})}).next(()=>o.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Aa()<=fe.DEBUG&&C("QueryEngine","SDK will not create cache indexes for query:",Oa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),v.resolve()):(Aa()<=fe.DEBUG&&C("QueryEngine","Query:",Oa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Aa()<=fe.DEBUG&&C("QueryEngine","The SDK decides to create cache indexes for query:",Oa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pn(t))):v.resolve())}ji(e,t){if(SV(t))return v.resolve(null);let r=pn(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Ip(t,null,"F"),r=pn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=oe(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Zi(t,a);return this.Xi(t,c,s,u.readTime)?this.ji(e,Ip(t,null,"F")):this.es(e,c,t,u)}))})))}Hi(e,t,r,i){return SV(t)||i.isEqual(F.min())?v.resolve(null):this.zi.getDocuments(e,r).next(o=>{const s=this.Zi(t,o);return this.Xi(t,s,r,i)?v.resolve(null):(Aa()<=fe.DEBUG&&C("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Oa(t)),this.es(e,s,t,function KO(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=F.fromTimestamp(1e9===r?new Xe(t+1,0):new Xe(t,r));return new Bn(i,x.empty(),e)}(i,-1)).next(a=>a))})}Zi(e,t){let r=new xe(MV(e));return t.forEach((i,o)=>{bl(e,o)&&(r=r.add(o))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,t,r){return Aa()<=fe.DEBUG&&C("QueryEngine","Using full collection scan to execute query:",Oa(t)),this.zi.getDocumentsMatchingQuery(e,t,Bn.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}}class Rte{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new Le(X),this.rs=new Ti(o=>es(o),Dl),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HF(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function KF(n,e){return WT.apply(this,arguments)}function WT(){return WT=g(function*(n,e){const t=P(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=oe();for(const c of i){s.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}for(const c of o){a.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}return t.localDocuments.getDocuments(r,u).next(c=>({us:c,removedBatchIds:s,addedBatchIds:a}))})})}),WT.apply(this,arguments)}function Pte(n,e){const t=P(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.os.newChangeBuffer({trackRemovals:!0});return function(a,u,c,l){const d=c.batch,h=d.keys();let f=v.resolve();return h.forEach(p=>{f=f.next(()=>l.getEntry(u,p)).next(m=>{const _=c.docVersions.get(p);V(null!==_),m.version.compareTo(_)<0&&(d.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),l.addEntry(m)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=oe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function QF(n){const e=P(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function xte(n,e){const t=P(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((l,d)=>{const h=i.get(d);if(!h)return;a.push(t.Qr.removeMatchingKeys(o,l.removedDocuments,d).next(()=>t.Qr.addMatchingKeys(o,l.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);var m,_,I;null!==e.targetMismatches.get(d)?f=f.withResumeToken(bt.EMPTY_BYTE_STRING,F.min()).withLastLimboFreeSnapshotVersion(F.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),_=f,I=l,(0===(m=h).resumeToken.approximateByteSize()||_.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8||I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(o,f))});let u=Cn(),c=oe();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(function YF(n,e,t){let r=oe(),i=oe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Cn();return t.forEach((a,u)=>{const c=o.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(F.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):C("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{cs:s,ls:i}})}(o,s,e.documentUpdates).next(l=>{u=l.cs,c=l.ls})),!r.isEqual(F.min())){const l=t.Qr.getLastRemoteSnapshotVersion(o).next(d=>t.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return v.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(t.ns=i,o))}function Mte(n,e){const t=P(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function za(n,e){const t=P(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(o=>o?(i=o,v.resolve(i)):t.Qr.allocateTargetId(r).next(s=>(i=new Di(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Wa(n,e,t){return KT.apply(this,arguments)}function KT(){return KT=g(function*(n,e,t){const r=P(n),i=r.ns.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ki(s))throw s;C("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}),KT.apply(this,arguments)}function Vp(n,e,t){const r=P(n);let i=F.min(),o=oe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,c,l){const d=P(u),h=d.rs.get(l);return void 0!==h?v.resolve(d.ns.get(h)):d.Qr.getTargetData(c,l)}(r,s,pn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,t?i:F.min(),t?o:oe())).next(a=>(function ZF(n,e,t){let r=n.ss.get(e)||F.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ss.set(e,r)}(r,function xV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),a),{documents:a,hs:o})))}class ZT{constructor(){this.activeTargetIds=function wT(){return Nee}()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nL{constructor(){this.no=new ZT,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new ZT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ote{io(e){}shutdown(){}}class rL{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){C("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){C("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Up=null;function tC(){return null===Up?Up=268435456+Math.round(2147483648*Math.random()):Up++,"0x"+Up.toString(16)}const Vte={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Fte{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const nn="WebChannelConnection";class Lte extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+t.host,this.po=`projects/${i}/databases/${o}`,this.yo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(t,r,i,o,s){const a=tC(),u=this.bo(t,r.toUriEncodedString());C("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,o,s),this.Co(t,u,c,i).then(l=>(C("RestConnection",`Received RPC '${t}' ${a}: `,l),l),l=>{throw Un("RestConnection",`RPC '${t}' ${a} failed with error: `,l,"url: ",u,"request:",i),l})}vo(t,r,i,o,s,a){return this.So(t,r,i,o,s)}Do(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Da,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}bo(t,r){return`${this.fo}/v1/${r}:${Vte[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,r,i){const o=tC();return new Promise((s,a)=>{const u=new VZ;u.setWithCredentials(!0),u.listenOnce(kZ.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case aT.NO_ERROR:const l=u.getResponseJson();C(nn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),s(l);break;case aT.TIMEOUT:C(nn,`RPC '${e}' ${o} timed out`),a(new D(E.DEADLINE_EXCEEDED,"Request time out"));break;case aT.HTTP_ERROR:const d=u.getStatus();if(C(nn,`RPC '${e}' ${o} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h?.error;if(f&&f.status&&f.message){const p=function(_){const I=_.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(I)>=0?I:E.UNKNOWN}(f.status);a(new D(p,f.message))}else a(new D(E.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new D(E.UNAVAILABLE,"Connection failed."));break;default:O()}}finally{C(nn,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);C(nn,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",c,r,15)})}Fo(e,t,r){const i=tC(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=MZ(),a=NZ(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const l=o.join("");C(nn,`Creating RPC '${e}' stream ${i}: ${l}`,u);const d=s.createWebChannel(l,u);let h=!1,f=!1;const p=new Fte({lo:_=>{f?C(nn,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(h||(C(nn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),C(nn,`RPC '${e}' stream ${i} sending:`,_),d.send(_))},ho:()=>d.close()}),m=(_,I,w)=>{_.listen(I,y=>{try{w(y)}catch(b){setTimeout(()=>{throw b},0)}})};return m(d,cp.EventType.OPEN,()=>{f||C(nn,`RPC '${e}' stream ${i} transport opened.`)}),m(d,cp.EventType.CLOSE,()=>{f||(f=!0,C(nn,`RPC '${e}' stream ${i} transport closed`),p.Vo())}),m(d,cp.EventType.ERROR,_=>{f||(f=!0,Un(nn,`RPC '${e}' stream ${i} transport errored:`,_),p.Vo(new D(E.UNAVAILABLE,"The operation could not be completed")))}),m(d,cp.EventType.MESSAGE,_=>{var I;if(!f){const w=_.data[0];V(!!w);const y=w,b=y.error||(null===(I=y[0])||void 0===I?void 0:I.error);if(b){C(nn,`RPC '${e}' stream ${i} received error:`,b);const L=b.status;let j=function(fd){const gg=It[fd];if(void 0!==gg)return YV(gg)}(L),Ze=b.message;void 0===j&&(j=E.INTERNAL,Ze="Unknown error status: "+L+" with message "+b.message),f=!0,p.Vo(new D(j,Ze)),d.close()}else C(nn,`RPC '${e}' stream ${i} received:`,w),p.mo(w)}}),m(a,OZ.STAT_EVENT,_=>{_.stat===$O.PROXY?C(nn,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===$O.NOPROXY&&C(nn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}}function Bp(){return typeof document<"u"?document:null}function Hl(n){return new Wee(n,!0)}class nC{constructor(e,t,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=t,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,t-r);i>0&&C("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class oL{constructor(e,t,r,i,o,s,a,u){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new nC(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return g(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return g(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,t){var r=this;return g(function*(){r.n_(),r.r_(),r.jo.cancel(),r.Wo++,4!==e?r.jo.reset():t&&t.code===E.RESOURCE_EXHAUSTED?(ct(t.toString()),ct("Using maximum backoff delay to prevent overloading the backend."),r.jo.ko()):t&&t.code===E.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.i_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.To(t)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===t&&this.o_(r,i)},r=>{e(()=>{const i=new D(E.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,t){const r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){var e=this;this.state=5,this.jo.qo(g(function*(){e.state=0,e.start()}))}__(e){return C("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget(()=>this.Wo===e?t():(C("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ute extends oL{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function Yee(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:O(),i=e.targetChange.targetIds||[],o=function(c,l){return c.useProto3Json?(V(void 0===l||"string"==typeof l),bt.fromBase64String(l||"")):(V(void 0===l||l instanceof Uint8Array),bt.fromUint8Array(l||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const l=void 0===c.code?E.UNKNOWN:YV(c.code);return new D(l,c.message||"")}(s);t=new tF(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Gr(n,r.document.name),o=lt(r.document.updateTime),s=r.document.createTime?lt(r.document.createTime):F.min(),a=new Gt({mapValue:{fields:r.document.fields}}),u=He.newFoundDocument(i,o,s,a);t=new Dp(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Gr(n,r.document),o=r.readTime?lt(r.readTime):F.min(),s=He.newNoDocument(i,o);t=new Dp([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=Gr(n,r.document);t=new Dp([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return O();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new jee(i,o);t=new eF(r.targetId,s)}}var c;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return F.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?F.min():s.readTime?lt(s.readTime):F.min()}(e);return this.listener.u_(t,r)}c_(e){const t={};t.database=xT(this.serializer),t.addTarget=function(o,s){let a;const u=s.target;if(a=yp(u)?{documents:hF(o,u)}:{query:NT(o,u).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=oF(o,s.resumeToken);const c=ST(o,s.expectedCount);null!==c&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(F.min())>0){a.readTime=Ba(o,s.snapshotVersion.toTimestamp());const c=ST(o,s.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function Xee(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return O()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.t_(t)}l_(e){const t={};t.database=xT(this.serializer),t.removeTarget=e,this.t_(t)}}class Bte extends oL{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(V(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function Jee(n,e){return n&&n.length>0?(V(void 0!==e),n.map(t=>function(i,o){let s=lt(i.updateTime?i.updateTime:o);return s.isEqual(F.min())&&(s=lt(o)),new Fee(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=lt(e.commitTime);return this.listener.T_(r,t)}return V(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=xT(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function Vl(n,e){let t;if(e instanceof La)t={update:lF(n,e.key,e.value)};else if(e instanceof Ua)t={delete:Ol(n,e.key)};else if(e instanceof Ci)t={update:lF(n,e.key,e.data),updateMask:nte(e.fieldMask)};else{if(!(e instanceof TT))return O();t={verify:Ol(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Va)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ts)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ns)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Fa)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw O()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Kee(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:O()),t;var o}(this.serializer,r))};this.t_(t)}}class jte extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new D(E.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,PT(t,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new D(E.UNKNOWN,o.toString())})}vo(e,t,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,PT(t,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new D(E.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class Gte{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(ct(t),this.g_=!1):C("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Hte{constructor(e,t,r,i,o){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(a=>{r.enqueueAndForget(g(function*(){var u;oo(s)&&(C("RemoteStore","Restarting streams for network reachability change."),yield(u=g(function*(l){const d=P(l);d.v_.add(4),yield Ka(d),d.x_.set("Unknown"),d.v_.delete(4),yield ql(d)}),function c(l){return u.apply(this,arguments)})(s))}))}),this.x_=new Gte(r,i)}}function ql(n){return iC.apply(this,arguments)}function iC(){return iC=g(function*(n){if(oo(n))for(const e of n.F_)yield e(!0)}),iC.apply(this,arguments)}function Ka(n){return oC.apply(this,arguments)}function oC(){return oC=g(function*(n){for(const e of n.F_)yield e(!1)}),oC.apply(this,arguments)}function jp(n,e){const t=P(n);t.C_.has(e.targetId)||(t.C_.set(e.targetId,e),uC(t)?aC(t):Ya(t).Jo()&&sC(t,e))}function zl(n,e){const t=P(n),r=Ya(t);t.C_.delete(e),r.Jo()&&sL(t,e),0===t.C_.size&&(r.Jo()?r.Xo():oo(t)&&t.x_.set("Unknown"))}function sC(n,e){if(n.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(F.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ya(n).c_(e)}function sL(n,e){n.O_.Oe(e),Ya(n).l_(e)}function aC(n){n.O_=new Gee({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.C_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Ya(n).start(),n.x_.p_()}function uC(n){return oo(n)&&!Ya(n).Ho()&&n.C_.size>0}function oo(n){return 0===P(n).v_.size}function aL(n){n.O_=void 0}function qte(n){return cC.apply(this,arguments)}function cC(){return cC=g(function*(n){n.C_.forEach((e,t)=>{sC(n,e)})}),cC.apply(this,arguments)}function zte(n,e){return lC.apply(this,arguments)}function lC(){return lC=g(function*(n,e){aL(n),uC(n)?(n.x_.S_(e),aC(n)):n.x_.set("Unknown")}),lC.apply(this,arguments)}function Wte(n,e,t){return dC.apply(this,arguments)}function dC(){return dC=g(function*(n,e,t){if(n.x_.set("Online"),e instanceof tF&&2===e.state&&e.cause)try{yield(r=g(function*(o,s){const a=s.cause;for(const u of s.targetIds)o.C_.has(u)&&(yield o.remoteSyncer.rejectListen(u,a),o.C_.delete(u),o.O_.removeTarget(u))}),function i(o,s){return r.apply(this,arguments)})(n,e)}catch(r){C("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield $p(n,r)}else if(e instanceof Dp?n.O_.$e(e):e instanceof eF?n.O_.Je(e):n.O_.Ge(e),!t.isEqual(F.min()))try{const r=yield QF(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){const a=o.O_.it(s);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const l=o.C_.get(c);l&&o.C_.set(c,l.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,c)=>{const l=o.C_.get(u);if(!l)return;o.C_.set(u,l.withResumeToken(bt.EMPTY_BYTE_STRING,l.snapshotVersion)),sL(o,u);const d=new Di(l.target,u,c,l.sequenceNumber);sC(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){C("RemoteStore","Failed to raise snapshot:",r),yield $p(n,r)}var r}),dC.apply(this,arguments)}function $p(n,e,t){return hC.apply(this,arguments)}function hC(){return hC=g(function*(n,e,t){if(!Ki(e))throw e;n.v_.add(1),yield Ka(n),n.x_.set("Offline"),t||(t=()=>QF(n.localStore)),n.asyncQueue.enqueueRetryable(g(function*(){C("RemoteStore","Retrying IndexedDB access"),yield t(),n.v_.delete(1),yield ql(n)}))}),hC.apply(this,arguments)}function uL(n,e){return e().catch(t=>$p(n,t,e))}function Qa(n){return fC.apply(this,arguments)}function fC(){return fC=g(function*(n){const e=P(n),t=so(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Kte(e);)try{const i=yield Mte(e.localStore,r);if(null===i){0===e.D_.length&&t.Xo();break}r=i.batchId,Qte(e,i)}catch(i){yield $p(e,i)}cL(e)&&lL(e)}),fC.apply(this,arguments)}function Kte(n){return oo(n)&&n.D_.length<10}function Qte(n,e){n.D_.push(e);const t=so(n);t.Jo()&&t.P_&&t.I_(e.mutations)}function cL(n){return oo(n)&&!so(n).Ho()&&n.D_.length>0}function lL(n){so(n).start()}function Yte(n){return pC.apply(this,arguments)}function pC(){return pC=g(function*(n){so(n).d_()}),pC.apply(this,arguments)}function Jte(n){return gC.apply(this,arguments)}function gC(){return gC=g(function*(n){const e=so(n);for(const t of n.D_)e.I_(t.mutations)}),gC.apply(this,arguments)}function Xte(n,e,t){return mC.apply(this,arguments)}function mC(){return mC=g(function*(n,e,t){const r=n.D_.shift(),i=DT.from(r,e,t);yield uL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Qa(n)}),mC.apply(this,arguments)}function Zte(n,e){return _C.apply(this,arguments)}function _C(){return _C=g(function*(n,e){var t;e&&so(n).P_&&(yield(t=g(function*(i,o){if(QV(a=o.code)&&a!==E.ABORTED){const s=i.D_.shift();so(i).Zo(),yield uL(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield Qa(i)}var a}),function r(i,o){return t.apply(this,arguments)})(n,e)),cL(n)&&lL(n)}),_C.apply(this,arguments)}function dL(n,e){return yC.apply(this,arguments)}function yC(){return yC=g(function*(n,e){const t=P(n);t.asyncQueue.verifyOperationInProgress(),C("RemoteStore","RemoteStore received new credentials");const r=oo(t);t.v_.add(3),yield Ka(t),r&&t.x_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.v_.delete(3),yield ql(t)}),yC.apply(this,arguments)}function IC(){return IC=g(function*(n,e){const t=P(n);e?(t.v_.delete(2),yield ql(t)):e||(t.v_.add(2),yield Ka(t),t.x_.set("Unknown"))}),IC.apply(this,arguments)}function Ya(n){return n.N_||(n.N_=function(t,r,i){const o=P(t);return o.R_(),new Ute(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:qte.bind(null,n),To:zte.bind(null,n),u_:Wte.bind(null,n)}),n.F_.push(function(){var e=g(function*(t){t?(n.N_.Zo(),uC(n)?aC(n):n.x_.set("Unknown")):(yield n.N_.stop(),aL(n))});return function(t){return e.apply(this,arguments)}}())),n.N_}function so(n){return n.B_||(n.B_=function(t,r,i){const o=P(t);return o.R_(),new Bte(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:Yte.bind(null,n),To:Zte.bind(null,n),E_:Jte.bind(null,n),T_:Xte.bind(null,n)}),n.F_.push(function(){var e=g(function*(t){t?(n.B_.Zo(),yield Qa(n)):(yield n.B_.stop(),n.D_.length>0&&(C("RemoteStore",`Stopping write stream with ${n.D_.length} pending writes`),n.D_=[]))});return function(t){return e.apply(this,arguments)}}())),n.B_}class EC{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new At,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,a=new EC(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new D(E.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ja(n,e){if(ct("AsyncQueue",`${e}: ${n}`),Ki(n))return new D(E.UNAVAILABLE,`${e}: ${n}`);throw n}class Xa{constructor(e){this.comparator=e?(t,r)=>e(t,r)||x.comparator(t.key,r.key):(t,r)=>x.comparator(t.key,r.key),this.keyedMap=Sl(),this.sortedSet=new Le(this.comparator)}static emptySet(e){return new Xa(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Xa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class hL{constructor(){this.L_=new Le(x.comparator)}track(e){const t=e.doc.key,r=this.L_.get(t);r?0!==e.type&&3===r.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==r.type?this.L_=this.L_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.L_=this.L_.remove(t):1===e.type&&2===r.type?this.L_=this.L_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):O():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Za{constructor(e,t,r,i,o,s,a,u,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new Za(e,t,Xa.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Al(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class ene{constructor(){this.q_=void 0,this.Q_=[]}}class tne{constructor(){this.queries=new Ti(e=>PV(e),Al),this.onlineState="Unknown",this.K_=new Set}}function wC(n,e){return TC.apply(this,arguments)}function TC(){return TC=g(function*(n,e){const t=P(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new ene),i)try{o.q_=yield t.onListen(r)}catch(s){const a=Ja(s,`Initialization of query '${Oa(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,o),o.Q_.push(e),e.U_(t.onlineState),o.q_&&e.W_(o.q_)&&AC(t)}),TC.apply(this,arguments)}function CC(n,e){return DC.apply(this,arguments)}function DC(){return DC=g(function*(n,e){const t=P(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),i=0===o.Q_.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),DC.apply(this,arguments)}function nne(n,e){const t=P(n);let r=!1;for(const i of e){const s=t.queries.get(i.query);if(s){for(const a of s.Q_)a.W_(i)&&(r=!0);s.q_=i}}r&&AC(t)}function rne(n,e,t){const r=P(n),i=r.queries.get(e);if(i)for(const o of i.Q_)o.onError(t);r.queries.delete(e)}function AC(n){n.K_.forEach(e=>{e.next()})}class bC{constructor(e,t,r){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Za(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){return!e.fromCache||(!this.options.Z_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=Za.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class gL{constructor(e){this.key=e}}class mL{constructor(e){this.key=e}}class _L{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=oe(),this.mutatedKeys=oe(),this.ua=MV(e),this.ca=new Xa(this.ua)}get la(){return this.oa}ha(e,t){const r=t?t.Pa:new hL,i=t?t.ca:this.ca;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const h=i.get(l),f=bl(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let _=!1;h&&f?h.data.isEqual(f.data)?p!==m&&(r.track({type:3,doc:f}),_=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),_=!0,(u&&this.ua(f,u)>0||c&&this.ua(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),_=!0):h&&!f&&(r.track({type:1,doc:h}),_=!0,(u||c)&&(a=!0)),_&&(f?(s=s.add(f),o=m?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const l="F"===this.query.limitType?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ca:s,Pa:r,Xi:a,mutatedKeys:o}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort((l,d)=>function(f,p){const m=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return O()}};return m(f)-m(p)}(l.type,d.type)||this.ua(l.doc,d.doc)),this.Ta(r),i=null!=i&&i;const a=t&&!i?this.Ea():[],u=0===this.aa.size&&this.current&&!i?1:0,c=u!==this._a;return this._a=u,0!==s.length||c?{snapshot:new Za(this.query,e.ca,o,s,e.mutatedKeys,0===u,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new hL,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(t=>this.oa=this.oa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.oa=this.oa.delete(t)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=oe(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const t=[];return e.forEach(r=>{this.aa.has(r)||t.push(new mL(r))}),this.aa.forEach(r=>{e.has(r)||t.push(new gL(r))}),t}Ra(e){this.oa=e.hs,this.aa=oe();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return Za.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class sne{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ane{constructor(e){this.key=e,this.ma=!1}}class une{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Ti(a=>PV(a),Al),this.pa=new Map,this.ya=new Set,this.wa=new Le(x.comparator),this.Sa=new Map,this.ba=new jT,this.Da={},this.Ca=new Map,this.va=us.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function cne(n,e){return SC.apply(this,arguments)}function SC(){return SC=g(function*(n,e){const t=JC(n);let r,i;const o=t.ga.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{const s=yield za(t.localStore,pn(e)),a=t.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield RC(t,e,r,"current"===a,s.resumeToken),t.isPrimaryClient&&jp(t.remoteStore,s)}return i}),SC.apply(this,arguments)}function RC(n,e,t,r,i){return PC.apply(this,arguments)}function PC(){return PC=g(function*(n,e,t,r,i){n.Ma=(d,h,f)=>{return(p=g(function*(_,I,w,y){let b=I.view.ha(w);b.Xi&&(b=yield Vp(_.localStore,I.query,!1).then(({documents:An})=>I.view.ha(An,b)));const L=y&&y.targetChanges.get(I.targetId),j=y&&null!=y.targetMismatches.get(I.targetId),Ze=I.view.applyChanges(b,_.isPrimaryClient,L,j);return BC(_,I.targetId,Ze.da),Ze.snapshot}),function m(_,I,w,y){return p.apply(this,arguments)})(n,d,h,f);var p};const o=yield Vp(n.localStore,e,!0),s=new _L(e,o.hs),a=s.ha(o.documents),u=kl.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),c=s.applyChanges(a,n.isPrimaryClient,u);BC(n,t,c.da);const l=new sne(e,t,s);return n.ga.set(e,l),n.pa.has(t)?n.pa.get(t).push(e):n.pa.set(t,[e]),c.snapshot}),PC.apply(this,arguments)}function lne(n,e){return xC.apply(this,arguments)}function xC(){return xC=g(function*(n,e){const t=P(n),r=t.ga.get(e),i=t.pa.get(r.targetId);if(i.length>1)return t.pa.set(r.targetId,i.filter(o=>!Al(o,e))),void t.ga.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Wa(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),zl(t.remoteStore,r.targetId),eu(t,r.targetId)}).catch(Wi))):(eu(t,r.targetId),yield Wa(t.localStore,r.targetId,!0))}),xC.apply(this,arguments)}function MC(){return MC=g(function*(n,e,t){const r=XC(n);try{const i=yield function(s,a){const u=P(s),c=Xe.now(),l=a.reduce((f,p)=>f.add(p.key),oe());let d,h;return u.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=Cn(),m=oe();return u.os.getEntries(f,l).next(_=>{p=_,p.forEach((I,w)=>{w.isValidDocument()||(m=m.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(f,p)).next(_=>{d=_;const I=[];for(const w of a){const y=Uee(w,d.get(w.key).overlayedDocument);null!=y&&I.push(new Ci(w.key,y,gV(y.value.mapValue),Qe.exists(!0)))}return u.mutationQueue.addMutationBatch(f,c,I,a)}).next(_=>{h=_;const I=_.applyToLocalDocumentSet(d,m);return u.documentOverlayCache.saveOverlays(f,_.batchId,I)})}).then(()=>({batchId:h.batchId,changes:kV(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let c=s.Da[s.currentUser.toKey()];c||(c=new Le(X)),c=c.insert(a,u),s.Da[s.currentUser.toKey()]=c}(r,i.batchId,t),yield Ai(r,i.changes),yield Qa(r.remoteStore)}catch(i){const o=Ja(i,"Failed to persist write");t.reject(o)}}),MC.apply(this,arguments)}function yL(n,e){return NC.apply(this,arguments)}function NC(){return NC=g(function*(n,e){const t=P(n);try{const r=yield xte(t.localStore,e);e.targetChanges.forEach((i,o)=>{const s=t.Sa.get(o);s&&(V(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.ma=!0:i.modifiedDocuments.size>0?V(s.ma):i.removedDocuments.size>0&&(V(s.ma),s.ma=!1))}),yield Ai(t,r,e)}catch(r){yield Wi(r)}}),NC.apply(this,arguments)}function vL(n,e,t){const r=P(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ga.forEach((o,s)=>{const a=s.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=P(s);u.onlineState=a;let c=!1;u.queries.forEach((l,d)=>{for(const h of d.Q_)h.U_(a)&&(c=!0)}),c&&AC(u)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function hne(n,e,t){return kC.apply(this,arguments)}function kC(){return kC=g(function*(n,e,t){const r=P(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Sa.get(e),o=i&&i.key;if(o){let s=new Le(x.comparator);s=s.insert(o,He.newNoDocument(o,F.min()));const a=oe().add(o),u=new Nl(F.min(),new Map,new Le(X),s,a);yield yL(r,u),r.wa=r.wa.remove(o),r.Sa.delete(e),jC(r)}else yield Wa(r.localStore,e,!1).then(()=>eu(r,e,t)).catch(Wi)}),kC.apply(this,arguments)}function fne(n,e){return OC.apply(this,arguments)}function OC(){return OC=g(function*(n,e){const t=P(n),r=e.batch.batchId;try{const i=yield Pte(t.localStore,e);UC(t,r,null),LC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ai(t,i)}catch(i){yield Wi(i)}}),OC.apply(this,arguments)}function pne(n,e,t){return VC.apply(this,arguments)}function VC(){return VC=g(function*(n,e,t){const r=P(n);try{const i=yield function(s,a){const u=P(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return u.mutationQueue.lookupMutationBatch(c,a).next(d=>(V(null!==d),l=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,l,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>u.localDocuments.getDocuments(c,l))})}(r.localStore,e);UC(r,e,t),LC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ai(r,i)}catch(i){yield Wi(i)}}),VC.apply(this,arguments)}function LC(n,e){(n.Ca.get(e)||[]).forEach(t=>{t.resolve()}),n.Ca.delete(e)}function UC(n,e,t){const r=P(n);let i=r.Da[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function eu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.pa.get(e))n.ga.delete(r),t&&n.fa.xa(r,t);n.pa.delete(e),n.isPrimaryClient&&n.ba.Vr(e).forEach(r=>{n.ba.containsKey(r)||IL(n,r)})}function IL(n,e){n.ya.delete(e.path.canonicalString());const t=n.wa.get(e);null!==t&&(zl(n.remoteStore,t),n.wa=n.wa.remove(e),n.Sa.delete(t),jC(n))}function BC(n,e,t){for(const r of t)r instanceof gL?(n.ba.addReference(r.key,e),mne(n,r)):r instanceof mL?(C("SyncEngine","Document no longer in limbo: "+r.key),n.ba.removeReference(r.key,e),n.ba.containsKey(r.key)||IL(n,r.key)):O()}function mne(n,e){const t=e.key,r=t.path.canonicalString();n.wa.get(t)||n.ya.has(r)||(C("SyncEngine","New document in limbo: "+t),n.ya.add(r),jC(n))}function jC(n){for(;n.ya.size>0&&n.wa.size<n.maxConcurrentLimboResolutions;){const e=n.ya.values().next().value;n.ya.delete(e);const t=new x(ge.fromString(e)),r=n.va.next();n.Sa.set(r,new ane(t)),n.wa=n.wa.insert(t,r),jp(n.remoteStore,new Di(pn(Na(t.path)),r,"TargetPurposeLimboResolution",jn._e))}}function Ai(n,e,t){return $C.apply(this,arguments)}function $C(){return $C=g(function*(n,e,t){const r=P(n),i=[],o=[],s=[];var a;r.ga.isEmpty()||(r.ga.forEach((a,u)=>{s.push(r.Ma(u,e,t).then(c=>{if((c||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);const l=zT.Ki(u.targetId,c);o.push(l)}}))}),yield Promise.all(s),r.fa.u_(i),yield(a=g(function*(c,l){const d=P(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>v.forEach(l,f=>v.forEach(f.qi,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>v.forEach(f.Qi,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Ki(h))throw h;C("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const f=h.targetId;if(!h.fromCache){const p=d.ns.get(f),_=p.withLastLimboFreeSnapshotVersion(p.snapshotVersion);d.ns=d.ns.insert(f,_)}}}),function u(c,l){return a.apply(this,arguments)})(r.localStore,o))}),$C.apply(this,arguments)}function _ne(n,e){return GC.apply(this,arguments)}function GC(){return GC=g(function*(n,e){const t=P(n);if(!t.currentUser.isEqual(e)){C("SyncEngine","User change. New user:",e.toKey());const r=yield KF(t.localStore,e);t.currentUser=e,(o=t).Ca.forEach(a=>{a.forEach(u=>{u.reject(new D(E.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ca.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ai(t,r.us)}var o}),GC.apply(this,arguments)}function yne(n,e){const t=P(n),r=t.Sa.get(e);if(r&&r.ma)return oe().add(r.key);{let i=oe();const o=t.pa.get(e);if(!o)return i;for(const s of o){const a=t.ga.get(s);i=i.unionWith(a.view.la)}return i}}function JC(n){const e=P(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yne.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hne.bind(null,e),e.fa.u_=nne.bind(null,e.eventManager),e.fa.xa=rne.bind(null,e.eventManager),e}function XC(n){const e=P(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fne.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pne.bind(null,e),e}class Gp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return g(function*(){t.serializer=Hl(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function WF(n,e,t,r){return new Rte(n,e,t,r)}(this.persistence,new zF,e.initialUser,this.serializer)}createPersistence(e){return new $T(Np.Hr,this.serializer)}createSharedClientState(e){return new nL}terminate(){var e=this;return g(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class tu{initialize(e,t){var r=this;return g(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>vL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=_ne.bind(null,r.syncEngine),yield function vC(n,e){return IC.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new tne}createDatastore(e){const t=Hl(e.databaseInfo.databaseId),r=new Lte(e.databaseInfo);return new jte(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,o=e.asyncQueue,s=t=>vL(this.syncEngine,t,0),a=rL.D()?new rL:new Ote,new Hte(r,i,o,s,a);var r,i,o,s,a}createSyncEngine(e,t){return function(i,o,s,a,u,c,l){const d=new une(i,o,s,a,u,c);return l&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return g(function*(){var t,r;yield(r=g(function*(o){const s=P(o);C("RemoteStore","RemoteStore shutting down."),s.v_.add(5),yield Ka(s),s.M_.shutdown(),s.x_.set("Unknown")}),function i(o){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}class Hp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):ct("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class xne{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Mt.UNAUTHENTICATED,this.clientId=zO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var s=g(function*(a){C("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(r,s=>(C("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new D(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new At;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(g(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Ja(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function qp(n,e){return ZC.apply(this,arguments)}function ZC(){return ZC=g(function*(n,e){n.asyncQueue.verifyOperationInProgress(),C("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=g(function*(o){r.isEqual(o)||(yield KF(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),ZC.apply(this,arguments)}function eD(n,e){return tD.apply(this,arguments)}function tD(){return tD=g(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield nD(n);C("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>dL(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>dL(e.remoteStore,i)),n._onlineComponents=e}),tD.apply(this,arguments)}function AL(n){return"FirebaseError"===n.name?n.code===E.FAILED_PRECONDITION||n.code===E.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function nD(n){return rD.apply(this,arguments)}function rD(){return rD=g(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){C("FirestoreClient","Using user provided OfflineComponentProvider");try{yield qp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!AL(t))throw t;Un("Error using user provided cache. Falling back to memory cache: "+t),yield qp(n,new Gp)}}else C("FirestoreClient","Using default OfflineComponentProvider"),yield qp(n,new Gp);return n._offlineComponents}),rD.apply(this,arguments)}function zp(n){return iD.apply(this,arguments)}function iD(){return iD=g(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(C("FirestoreClient","Using user provided OnlineComponentProvider"),yield eD(n,n._uninitializedComponentsProvider._online)):(C("FirestoreClient","Using default OnlineComponentProvider"),yield eD(n,new tu))),n._onlineComponents}),iD.apply(this,arguments)}function ru(n){return sD.apply(this,arguments)}function sD(){return sD=g(function*(n){const e=yield zp(n),t=e.eventManager;return t.onListen=cne.bind(null,e.syncEngine),t.onUnlisten=lne.bind(null,e.syncEngine),t}),sD.apply(this,arguments)}function ML(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const NL=new Map;function aD(n,e,t){if(!t)throw new D(E.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kL(n){if(!x.isDocumentKey(n))throw new D(E.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function OL(n){if(x.isDocumentKey(n))throw new D(E.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Wp(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":O()}function _e(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new D(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wp(n);throw new D(E.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class FL{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new D(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new D(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function $ne(n,e,t,r){if(!0===e&&!0===r)throw new D(E.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=ML(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new D(E.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new D(E.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new D(E.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wl{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FL({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new D(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new D(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FL(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new LZ;switch(r.type){case"firstParty":return new $Z(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new D(E.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=NL.get(t);r&&(C("ComponentProvider","Removing Datastore"),NL.delete(t),r.terminate())}(this),Promise.resolve()}}class Ht{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ht(this.firestore,e,this._query)}}class dt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}}class Hr extends Ht{constructor(e,t,r){super(e,t,Na(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new x(e))}withConverter(e){return new Hr(this.firestore,e,this._path)}}function LL(n,e,...t){if(n=dn(n),aD("collection","path",e),n instanceof Wl){const r=ge.fromString(e,...t);return OL(r),new Hr(n,null,r)}{if(!(n instanceof dt||n instanceof Hr))throw new D(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ge.fromString(e,...t));return OL(r),new Hr(n.firestore,null,r)}}function uD(n,e,...t){if(n=dn(n),1===arguments.length&&(e=zO.newId()),aD("doc","path",e),n instanceof Wl){const r=ge.fromString(e,...t);return kL(r),new dt(n,null,new x(r))}{if(!(n instanceof dt||n instanceof Hr))throw new D(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ge.fromString(e,...t));return kL(r),new dt(n.firestore,n instanceof Hr?n.converter:null,new x(r))}}class Hne{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new nC(this,"async_queue_retry"),this._u=()=>{const t=Bp();t&&C("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const e=Bp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=Bp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const t=new At;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){var e=this;return g(function*(){if(0!==e.eu.length){try{yield e.eu[0](),e.eu.shift(),e.jo.reset()}catch(t){if(!Ki(t))throw t;C("AsyncQueue","Operation failed with retryable error: "+t)}e.eu.length>0&&e.jo.qo(()=>e.cu())}})()}uu(e){const t=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{throw this.ru=r,this.iu=!1,ct("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.iu=!1,r))));return this.Xa=t,t}enqueueAfterDelay(e,t,r){this.au(),this.ou.indexOf(e)>-1&&(t=0);const i=EC.createAndSchedule(this,e,t,r,o=>this.lu(o));return this.nu.push(i),i}au(){this.ru&&O()}verifyOperationInProgress(){}hu(){var e=this;return g(function*(){let t;do{t=e.Xa,yield t}while(t!==e.Xa)})()}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}class Ue extends Wl{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Hne,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||BL(this),this._firestoreClient.terminate()}}function zne(n,e){const r="string"==typeof n?n:e||"(default)",i=ji("object"==typeof n?n:dv(),"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(n=>{const e=v1("firestore");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})();o&&function Gne(n,e,t,r={}){var i;const o=(n=_e(n,Wl))._getSettings(),s=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&Un("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Mt.MOCK_USER;else{a=function BW(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[lf(JSON.stringify({alg:"none",type:"JWT"})),lf(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new D(E.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Mt(c)}n._authCredentials=new UZ(new HO(a,u))}}(i,...o)}return i}function ht(n){return n._firestoreClient||BL(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function BL(n){var e,t,r;const i=n._freezeSettings(),o=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new yee(n._databaseId,u,n._persistenceKey,(l=i).host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,ML(l.experimentalLongPollingOptions),l.useFetchStreams));var u,l;n._firestoreClient=new xne(n._authCredentials,n._appCheckCredentials,n._queue,o),(null===(t=i.localCache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class ls{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ls(bt.fromBase64String(e))}catch(t){throw new D(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ls(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class iu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new D(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class GL{constructor(e){this._methodName=e}}class lD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new D(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new D(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return X(this._lat,e._lat)||X(this._long,e._long)}}const Kne=/^__.*__$/;class Qne{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ci(e,this.data,this.fieldMask,t,this.fieldTransforms):new La(e,this.data,t,this.fieldTransforms)}}function qL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw O()}}class Kp{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Kp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Yp(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(qL(this.du)&&Kne.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Yne{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Hl(e)}Su(e,t,r,i=!1){return new Kp({du:e,methodName:t,wu:r,path:Ke.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ou(n){const e=n._freezeSettings(),t=Hl(n._databaseId);return new Yne(n._databaseId,!!e.ignoreUndefinedProperties,t)}function dD(n,e,t,r,i,o={}){const s=n.Su(o.merge||o.mergeFields?2:0,e,t,i);mD("Data must be an object, but it was:",s,r);const a=YL(r,s);let u,c;if(o.merge)u=new Tn(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const l=[];for(const d of o.mergeFields){const h=Yl(e,d,t);if(!s.contains(h))throw new D(E.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);XL(l,h)||l.push(h)}u=new Tn(l),c=s.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=s.fieldTransforms;return new Qne(new Gt(a),u,c)}function ds(n,e){if(JL(n=dn(n)))return mD("Unsupported field value:",e,n),YL(n,e);if(n instanceof GL)return function(r,i){if(!qL(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=ds(a,i.gu(s));null==u&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if(null===(r=dn(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return LV(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=Xe.fromDate(r);return{timestampValue:Ba(i.serializer,o)}}if(r instanceof Xe){const o=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ba(i.serializer,o)}}if(r instanceof lD)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ls)return{bytesValue:oF(i.serializer,r._byteString)};if(r instanceof dt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.pu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:RT(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${Wp(r)}`)}(n,e)}function YL(n,e){const t={};return sV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qi(n,(r,i)=>{const o=ds(i,e.Ru(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function JL(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Xe||n instanceof lD||n instanceof ls||n instanceof dt||n instanceof GL)}function mD(n,e,t){if(!JL(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Wp(t);throw e.pu("an object"===r?n+" a custom object":n+" "+r)}var i}function Yl(n,e,t){if((e=dn(e))instanceof iu)return e._internalPath;if("string"==typeof e)return Qp(n,e);throw Yp("Field path arguments must be of type string or ",n,!1,void 0,t)}const Jne=new RegExp("[~\\*/\\[\\]]");function Qp(n,e,t){if(e.search(Jne)>=0)throw Yp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new iu(...e.split("."))._internalPath}catch{throw Yp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Yp(n,e,t,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new D(E.INVALID_ARGUMENT,a+n+u)}function XL(n,e){return n.some(t=>t.isEqual(e))}class _D{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Xne(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Xne extends _D{data(){return super.data()}}function Jp(n,e){return"string"==typeof e?Qp(n,e):e instanceof iu?e._internalPath:e._delegate._internalPath}class yD{}class Zne extends yD{}class Jl extends Zne{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Jl(e,t,r)}_apply(e){const t=this._parse(e);return r2(e._query,t),new Ht(e.firestore,e.converter,ET(e._query,t))}_parse(e){const t=ou(e.firestore);return function(o,s,a,u,c,l,d){let h;if(c.isKeyField()){if("array-contains"===l||"array-contains-any"===l)throw new D(E.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if("in"===l||"not-in"===l){n2(d,l);const f=[];for(const p of d)f.push(t2(u,o,p));h={arrayValue:{values:f}}}else h=t2(u,o,d)}else"in"!==l&&"not-in"!==l&&"array-contains-any"!==l||n2(d,l),h=function QL(n,e,t,r=!1){return ds(t,n.Su(r?4:3,e))}(a,"where",d,"in"===l||"not-in"===l);return me.create(c,l,h)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class su extends yD{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new su(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Pe.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)r2(s,u),s=ET(s,u)}(e._query,t),new Ht(e.firestore,e.converter,ET(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function t2(n,e,t){if("string"==typeof(t=dn(t))){if(""===t)throw new D(E.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IT(e)&&-1!==t.indexOf("/"))throw new D(E.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ge.fromString(t));if(!x.isDocumentKey(r))throw new D(E.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zo(n,new x(r))}if(t instanceof dt)return Zo(n,t._key);throw new D(E.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wp(t)}.`)}function n2(n,e){if(!Array.isArray(n)||0===n.length)throw new D(E.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function r2(n,e){const t=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new D(E.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class tre{convertValue(e,t="none"){switch(Xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw O()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Qi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new lD(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=pp(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Il(e));default:return null}}convertTimestamp(e){const t=Yi(e);return new Xe(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ge.fromString(e);V(mF(r));const i=new Xo(r.get(1),r.get(3)),o=new x(r.popFirst(5));return i.isEqual(t)||ct(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}class hs{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class au extends _D{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new tg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Jp("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class tg extends au{data(e={}){return super.data(e)}}class uu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new hs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new tg(this._firestore,this._userDataWriter,r.key,r,new hs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new D(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new tg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const u=new tg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,l=-1;return 0!==a.type&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:rre(a.type),doc:u,oldIndex:c,newIndex:l}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rre(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return O()}}class ao extends tre{constructor(e){super(),this.firestore=e}convertBytes(e){return new ls(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,t)}}function Xl(n,e){return function(r,i){const o=new At;return r.asyncQueue.enqueueAndForget(g(function*(){return function dne(n,e,t){return MC.apply(this,arguments)}(yield function oD(n){return zp(n).then(e=>e.syncEngine)}(r),i,o)})),o.promise}(ht(n),e)}!function(e,t=!0){Da="10.8.1",Nr(new _r("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Ue(new BZ(r.getProvider("auth-internal")),new GZ(r.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new D(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xo(c.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Xn(GO,"4.4.3",e),Xn(GO,"4.4.3","esm2017")}();class Dn{static clone(e){let t;if(e){for(var r in t=Dn.create(e.tag),t.attributes=e.attributes,t.text=e.text,e.children)t.children.push(this.clone(e.children[r]));return t}return e}}Dn.create=function(n){return{id:Dn.id(10),tag:n,attributes:new Map,children:[]}},Dn.add=function(n,e){let t=Dn.create(e),r=n.children.push(t);return n.children[r-1]},Dn.id=function(n){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=t.length;let i=0;for(;i<n;)e+=t.charAt(Math.floor(Math.random()*r)),i+=1;return e},Dn.remove=function(n,e){for(var t=n,r=!1,i=0;!r&&i<t.children.length;i++){if(e.id==t.children[i].id)return t.children.splice(i,1),!0;r=Dn.remove(t.children[i],e)}return r};const Ire=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];var cu=(()=>(function(n){n.USER="USER",n.ADMIN="ADMIN"}(cu||(cu={})),cu))();class lu{constructor(){this.isLoading=new Yn(!1)}show(){this.isLoading.next(!0)}hide(){this.isLoading.next(!1)}}lu.\u0275fac=function(e){return new(e||lu)},lu.\u0275prov=H({token:lu,factory:lu.\u0275fac,providedIn:"root"});class uo{constructor(e){this.loader=e,this.app=V1(wre),this.analytics=function PQ(n=dv()){const e=ji(n=dn(n),yf);return e.isInitialized()?e.getImmediate():function xQ(n,e={}){const t=ji(n,yf);if(t.isInitialized()){const i=t.getImmediate();if(Mc(e,t.getOptions()))return i;throw hn.create("already-initialized")}return t.initialize({options:e})}(n)}(this.app),this.firestore=zne(this.app),this.auth=PX(this.app),this.isAdmin=!1,this.data={},this.refreshEvent=new Ce,this.refreshUser=new Ce,this.refreshUserSession(),this.refresh(ig.DESIGNS)}refreshUserSession(){this.auth.onAuthStateChanged(e=>{null==e?(this.user=void 0,this.isAdmin=!1,this.refreshUser.emit(void 0)):(console.log("FirestoreService:refreshUserSession:: Auth State Changed ",e),this.loader.show(),this.login({id:e.uid,email:e.email,name:e.displayName,contact:e.phoneNumber,image:e.photoURL,role:cu.USER}))})}refresh(e){const r=function ere(n,e,...t){let r=[];e instanceof yD&&r.push(e),r=r.concat(t),function(o){const s=o.filter(u=>u instanceof su).length,a=o.filter(u=>u instanceof Jl).length;if(s>1||s>0&&a>0)throw new D(E.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}(LL(this.firestore,e));(function ore(n){n=_e(n,Ht);const e=_e(n.firestore,Ue),t=ht(e),r=new ao(e);return function ZL(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new D(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query),function xL(n,e,t={}){const r=new At;return n.asyncQueue.enqueueAndForget(g(function*(){return function(o,s,a,u,c){const l=new Hp({next:h=>{s.enqueueAndForget(()=>CC(o,d)),h.fromCache&&"server"===u.source?c.reject(new D(E.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new bC(a,l,{includeMetadataChanges:!0,Z_:!0});return wC(o,d)}(yield ru(n),n.asyncQueue,e,t,r)})),r.promise}(t,n._query).then(i=>new uu(e,r,n,i))})(r).then(i=>{this.data[e]=[],i.forEach(o=>{let s=o.data();s.id=o.id,this.data[e].push(s)}),this.refreshEvent.emit(e)})}login(e){var t=this;return g(function*(){const r=uD(t.firestore,"users",e.id),i=yield function ire(n){n=_e(n,dt);const e=_e(n.firestore,Ue);return function PL(n,e,t={}){const r=new At;return n.asyncQueue.enqueueAndForget(g(function*(){return function(o,s,a,u,c){const l=new Hp({next:h=>{s.enqueueAndForget(()=>CC(o,d));const f=h.docs.has(a);!f&&h.fromCache?c.reject(new D(E.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&u&&"server"===u.source?c.reject(new D(E.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new bC(Na(a.path),l,{includeMetadataChanges:!0,Z_:!0});return wC(o,d)}(yield ru(n),n.asyncQueue,e,t,r)})),r.promise}(ht(e),n._key).then(t=>function ED(n,e,t){const r=t.docs.get(e._key),i=new ao(n);return new au(n,i,e._key,r,new hs(t.hasPendingWrites,t.fromCache),e.converter)}(e,n,t))}(r);if(i.exists()){let o=i.data();console.log("FirestoreService:login:: Existing User :",o),t.user={id:o.id,name:o.name,email:o.email,contact:o.contact,role:o.role,image:o.image},t.refreshUser.emit(t.user),sessionStorage.setItem("user",JSON.stringify(t.user)),t.isAdmin=t.user.role==cu.ADMIN,t.loader.hide()}else console.log("FirestoreService:login:: Create new user: "+e.email),t.user=e,yield function sre(n,e,t){n=_e(n,dt);const r=_e(n.firestore,Ue),i=function ID(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}(n.converter,e,t);return Xl(r,[dD(ou(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Qe.none())])}(uD(LL(t.firestore,"users"),e.id),t.user),console.log("FirestoreService:login:: Created new user: "+e.email),t.refreshUser.emit(t.user),sessionStorage.setItem("user",JSON.stringify(t.user)),t.log(du.SIGN_UP,t.user),t.loader.hide()})()}logout(){var e=this;return g(function*(){console.log("FirestoreService:logout:: Logging out user: "+e.user?.email),e.user=void 0,sessionStorage.clear(),e.isAdmin=!1,e.log(du.LOGOUT,e.user),e.refreshUser.emit(e.user)})()}log(e,t=null){let r={url:window.location.href,device:window.navigator.userAgent,timestamp:(new Date).toISOString(),event:e};t&&(r.data=t),console.log("Sending Event to Analytics: ",r),gN(this.analytics,e,r)}}uo.\u0275fac=function(e){return new(e||uo)($(lu))},uo.\u0275prov=H({token:uo,factory:uo.\u0275fac,providedIn:"root"});var ig=(()=>(function(n){n.DESIGNS="designs"}(ig||(ig={})),ig))(),du=(()=>(function(n){n.PAGE_VIEW="PAGE_VIEW",n.LOGIN="login",n.SIGN_UP="sign_up",n.LOGOUT="logout"}(du||(du={})),du))();const wre={apiKey:"AIzaSyAW1LTd9_9KMW90Xtcwd_wzAv6oSyYxdUs",authDomain:"design-vvsk.firebaseapp.com",projectId:"design-vvsk",storageBucket:"design-vvsk.appspot.com",messagingSenderId:"145324731810",appId:"1:145324731810:web:52249d2b70fbee852896fb",measurementId:"G-RYQ3M3HT1H"};class Zl{constructor(e,t){this.router=e,this.fs=t,this.provider=new XI;var r=sessionStorage.getItem("redirect");sessionStorage.removeItem("redirect"),t.refreshUser.subscribe(i=>{null!=i&&r?(console.log("Login Success, Redirecting to ",r),this.router.navigateByUrl(r)):(console.log("Login Success, Redirecting to home"),this.router.navigate(["home"]))})}login(){this.fs.loader.show(),function UJ(n,e,t){return tw.apply(this,arguments)}(this.fs.auth,this.provider).then(e=>{XI.credentialFromResult(e);let i=e.user;console.log("LoginComponent: SignInUser",i),this.fs.log(du.LOGIN,{id:i.uid,email:i.email,name:i.displayName,contact:i.phoneNumber,image:i.photoURL,role:cu.USER})}).catch(e=>{this.fs.loader.hide(),console.error(e),XI.credentialFromError(e)})}}Zl.\u0275fac=function(e){return new(e||Zl)(A(Jt),A(uo))},Zl.\u0275cmp=Sn({type:Zl,selectors:[["app-login"]],decls:13,vars:0,consts:[[1,"row","text-center","p-3"],[1,"col-md-4","col-sm-6","col-xs-12","form"],[2,"font-weight","600","font-size","18px"],["src","../../assets/icons/google-logo.png"],[3,"click"]],template:function(e,t){1&e&&(U(0,"div",0)(1,"div",1)(2,"div")(3,"h5"),Ee(4,"Welcome to "),U(5,"b"),Ee(6,"IMPULSE"),B(),Ee(7," Network"),B(),U(8,"p",2),Ee(9,"To access course contents, login with your google account"),B()(),Mi(10,"img",3),U(11,"button",4),ce("click",function(){return t.login()}),Ee(12,"Sign in"),B()()())},styles:["img[_ngcontent-%COMP%]{display:block;width:80px;margin:30px auto;box-shadow:0 5px 10px -7px #333;border-radius:50%}.form[_ngcontent-%COMP%]{background-color:#fff;margin:50px auto 10px;padding:30px;border-radius:8px;overflow:hidden;box-shadow:0 2px 10px -3px #333;text-align:center}button[_ngcontent-%COMP%]{border-radius:100px;border:none;background:#719BE6;width:50%;padding:10px;color:#fff;box-shadow:0 2px 10px -3px #719be6;display:block;margin:30px auto 10px}"]});class bi{constructor(){this.events=new Ce,this.parser=new DOMParser}parseText(e){let t;console.log("Parsing: ",e);try{var r=this.parser.parseFromString(e,"text/html");t=this.parse(r.body.children[0])}catch(i){console.error(i),alert("Unable to parse pasted content")}return console.log("Parsing Success: ",t),t}parse(e){let t=Dn.create(e.tagName);for(var r=0;r<e.attributes.length;r++){var i=e.attributes[r];t.attributes.set(i.name,i.value)}for(r=0;r<e.children.length;r++)t.children.push(this.parse(e.children[r]));for(r=0;r<e.childNodes.length;r++)if(e.childNodes[r].nodeType==Node.TEXT_NODE){t.text=e.childNodes[r].textContent||void 0;break}return t}}bi.\u0275fac=function(e){return new(e||bi)},bi.\u0275prov=H({token:bi,factory:bi.\u0275fac,providedIn:"root"});class ed{constructor(){this.menu=new Ce}}function Tre(n,e){if(1&n){const t=tt();U(0,"div")(1,"i",2),ce("click",function(){return qe(t),ze(ee().action.emit("edit"))}),Ee(2,"edit"),B()()}}function Cre(n,e){if(1&n){const t=tt();U(0,"div")(1,"i",4),ce("click",function(){return qe(t),ze(ee().action.emit("cut"))}),Ee(2,"cut"),B()()}}function Dre(n,e){if(1&n){const t=tt();U(0,"div")(1,"i",2),ce("click",function(){return qe(t),ze(ee().action.emit("copy"))}),Ee(2,"content_copy"),B()()}}function Are(n,e){if(1&n){const t=tt();U(0,"div")(1,"i",2),ce("click",function(){return qe(t),ze(ee().action.emit("paste"))}),Ee(2,"content_paste"),B()()}}function bre(n,e){if(1&n){const t=tt();U(0,"div")(1,"i",2),ce("click",function(){return qe(t),ze(ee().action.emit("preview"))}),Ee(2,"preview"),B()()}}function Sre(n,e){if(1&n){const t=tt();U(0,"div")(1,"i",2),ce("click",function(){return qe(t),ze(ee().action.emit("upload"))}),Ee(2,"upload"),B()()}}function Rre(n,e){if(1&n){const t=tt();U(0,"div")(1,"i",2),ce("click",function(){return qe(t),ze(ee().action.emit("download"))}),Ee(2,"download"),B()()}}function Pre(n,e){if(1&n){const t=tt();U(0,"div")(1,"i",5),ce("click",function(){return qe(t),ze(ee().action.emit("delete"))}),Ee(2,"delete"),B()()}}ed.\u0275fac=function(e){return new(e||ed)},ed.\u0275cmp=Sn({type:ed,selectors:[["app-header"]],outputs:{menu:"menu"},decls:10,vars:0,consts:[[1,"header"],[1,"row"],[1,"col-6","title","px-3"],[1,"col-6","d-flex","align-items-center","justify-content-end"],[1,"material-icons","m-1"]],template:function(e,t){1&e&&(U(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),Ee(4," Design"),B()(),U(5,"div",3)(6,"i",4),Ee(7,"copyright"),B(),U(8,"span"),Ee(9,"V.V.S.K Chaitanya"),B()()()())},styles:[".header[_ngcontent-%COMP%]{padding:5px 20px 5px 8px;background:#673ab7;color:#fff}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:30px}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .arrow-font[_ngcontent-%COMP%]{font-size:50px;line-height:.5;vertical-align:text-top}"]});class td{constructor(e){this.app=e,this.close=new Ce,this.action=new Ce}ngOnInit(){}}td.\u0275fac=function(e){return new(e||td)(A(bi))},td.\u0275cmp=Sn({type:td,selectors:[["app-menu"]],outputs:{close:"close",action:"action"},decls:13,vars:8,consts:[[1,"menu"],[1,"mx-3","d-flex","flex-column"],[1,"material-icons","text-light","pointer","mt-4",3,"click"],[4,"ngIf"],[1,"material-symbols-outlined","text-light","pointer","mt-4",3,"click"],[1,"material-icons","text-danger","pointer","mt-4",3,"click"]],template:function(e,t){1&e&&(U(0,"div",0)(1,"div",1)(2,"div")(3,"i",2),ce("click",function(){return t.action.emit("add")}),Ee(4,"add"),B()(),we(5,Tre,3,0,"div",3),we(6,Cre,3,0,"div",3),we(7,Dre,3,0,"div",3),we(8,Are,3,0,"div",3),we(9,bre,3,0,"div",3),we(10,Sre,3,0,"div",3),we(11,Rre,3,0,"div",3),we(12,Pre,3,0,"div",3),B()()),2&e&&(Q(5),Z("ngIf",t.app.current),Q(1),Z("ngIf",t.app.current),Q(1),Z("ngIf",t.app.current),Q(1),Z("ngIf",t.app.current&&t.app.paste),Q(1),Z("ngIf",t.app.design),Q(1),Z("ngIf",!t.app.design),Q(1),Z("ngIf",t.app.design),Q(1),Z("ngIf",t.app.current))},dependencies:[ta],styles:[".menu[_ngcontent-%COMP%]{position:absolute;top:55px;left:0;background:#673ab7;height:-webkit-fill-available}.menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}"]});class nd{constructor(e){this.appService=e,this.html="",this.appService.events.subscribe(t=>{"preview"==t&&this.ngOnChanges(),"download"==t&&this.download()})}ngOnInit(){console.log("Rendering Preview ..."),this.html=this.process(this.design),this.update()}ngOnChanges(){console.log("Rendering Preview ..."),this.html=this.process(this.design),this.update()}download(){navigator.clipboard.writeText(this.html)}update(){let e=document.getElementById("preview");e&&(e.innerHTML=this.html)}process(e){console.log("Processing ",e);let t="";if(e){let r=function(n){return null!=n&&-1!==Ire.indexOf(n.toLowerCase())}(e.tag),i="";for(let o of e.attributes)i+=" "+o[0]+'="'+o[1]+'"';if(r)t="<"+e.tag+i+"/>";else{let o="";e.text&&(o+=e.text);for(let s of e.children)o+=this.process(s);t="<"+e.tag+i+">"+o+"</"+e.tag+">"}}return t}}function xre(n,e){if(1&n){const t=tt();U(0,"i",6),ce("click",function(){qe(t);const i=ee(2);return ze(i.expand=!i.expand)}),Ee(1),B()}if(2&n){const t=ee(2);Q(1),vn(t.expand?"expand_more":"chevron_right")}}function Mre(n,e){if(1&n){const t=tt();U(0,"div")(1,"app-node",9),ce("select",function(i){return qe(t),ze(ee(3).select.emit(i))}),B()()}if(2&n){const t=e.$implicit,r=ee(3);Q(1),Z("node",t)("current",r.current)}}function Nre(n,e){if(1&n&&(U(0,"div",7),we(1,Mre,2,2,"div",8),B()),2&n){const t=ee(2);Q(1),Z("ngForOf",t.node.children)}}nd.\u0275fac=function(e){return new(e||nd)(A(bi))},nd.\u0275cmp=Sn({type:nd,selectors:[["app-preview"]],inputs:{design:"design"},features:[xn],decls:1,vars:0,consts:[["id","preview"]],template:function(e,t){1&e&&Mi(0,"div",0)}});const kre=function(n){return{"active-node":n}};function Ore(n,e){if(1&n){const t=tt();U(0,"div",1)(1,"div",2),we(2,xre,2,1,"i",3),U(3,"span",4),ce("click",function(){qe(t);const i=ee();return ze(i.select.emit(i.node))}),Ee(4),B()(),we(5,Nre,2,1,"div",5),B()}if(2&n){const t=ee();Q(1),Z("ngClass",YR(4,kre,null!=t.current&&t.node.id==t.current.id)),Q(1),Z("ngIf",t.node.children.length>=0),Q(2),vn(t.node.tag),Q(1),Z("ngIf",t.expand)}}class hu{constructor(){this.select=new Ce,this.expand=!1}}hu.\u0275fac=function(e){return new(e||hu)},hu.\u0275cmp=Sn({type:hu,selectors:[["app-node"]],inputs:{node:"node",current:"current"},outputs:{select:"select"},decls:1,vars:1,consts:[["class","row m-0",4,"ngIf"],[1,"row","m-0"],[1,"col-12",3,"ngClass"],["class","material-icons mx-2 pointer align-middle",3,"click",4,"ngIf"],[1,"pointer","text-uppercase",3,"click"],["class","col-12","style","margin-left:15px;",4,"ngIf"],[1,"material-icons","mx-2","pointer","align-middle",3,"click"],[1,"col-12",2,"margin-left","15px"],[4,"ngFor","ngForOf"],[3,"node","current","select"]],template:function(e,t){1&e&&we(0,Ore,6,6,"div",0),2&e&&Z("ngIf",t.node&&t.node.tag)},dependencies:[Ex,Lh,ta,hu],styles:[".active-node[_ngcontent-%COMP%]{background-color:#add8e6}"]});let u2=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(A(ni),A(On))},n.\u0275dir=J({type:n}),n})(),fs=(()=>{class n extends u2{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Lt(n)))(r||n)}}(),n.\u0275dir=J({type:n,features:[Se]}),n})();const qr=new G("NgValueAccessor"),rn=new G("NgValidators"),lo=new G("NgAsyncValidators");function v2(n){return null!=n}function I2(n){return Xu(n)?pt(n):n}function E2(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function w2(n,e){return e.map(t=>t(n))}function T2(n){return n.map(e=>function Gre(n){return!n.validate}(e)?e:t=>e.validate(t))}function CD(n){return null!=n?function C2(n){if(!n)return null;const e=n.filter(v2);return 0==e.length?null:function(t){return E2(w2(t,e))}}(T2(n)):null}function DD(n){return null!=n?function D2(n){if(!n)return null;const e=n.filter(v2);return 0==e.length?null:function(t){return function Vre(...n){const e=fA(n),{args:t,keys:r}=Zx(n),i=new ft(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let u=s,c=s;for(let l=0;l<s;l++){let d=!1;nr(t[l]).subscribe(Et(o,h=>{d||(d=!0,c--),a[l]=h},()=>u--,void 0,()=>{(!u||!d)&&(c||o.next(r?tM(r,a):a),o.complete())}))}});return e?i.pipe(eM(e)):i}(w2(t,e).map(I2)).pipe(pe(E2))}}(T2(n)):null}function A2(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function AD(n){return n?Array.isArray(n)?n:[n]:[]}function sg(n,e){return Array.isArray(n)?n.includes(e):n===e}function R2(n,e){const t=AD(e);return AD(n).forEach(i=>{sg(t,i)||t.push(i)}),t}function P2(n,e){return AD(e).filter(t=>!sg(n,t))}class x2{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=CD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=DD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class gn extends x2{get formDirective(){return null}get path(){return null}}class M2{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let N2=(()=>{class n extends M2{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(A(gn,10))},n.\u0275dir=J({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&lh("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Se]}),n})();const rd="VALID",ug="INVALID",fu="PENDING",id="DISABLED";function cg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class F2{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===rd}get invalid(){return this.status===ug}get pending(){return this.status==fu}get disabled(){return this.status===id}get enabled(){return this.status!==id}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(R2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(R2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(P2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(P2(e,this._rawAsyncValidators))}hasValidator(e){return sg(this._rawValidators,e)}hasAsyncValidator(e){return sg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=fu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=id,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=rd,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rd||this.status===fu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?id:rd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=fu,this._hasOwnPendingAsyncValidator=!0;const t=I2(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ce,this.statusChanges=new Ce}_calculateStatus(){return this._allControlsDisabled()?id:this.errors?ug:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fu)?fu:this._anyControlsHaveStatus(ug)?ug:rd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){cg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Jre(n){return Array.isArray(n)?CD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Xre(n){return Array.isArray(n)?DD(n):n||null}(this._rawAsyncValidators)}}class MD extends F2{constructor(e,t,r){super(function PD(n){return(cg(n)?n.validators:n)||null}(t),function xD(n,e){return(cg(e)?e.asyncValidators:n)||null}(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function V2(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new S(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function O2(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new S(1e3,"");if(!r[t])throw new S(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const od=new G("CallSetDisabledState",{providedIn:"root",factory:()=>ND}),ND="always";function hg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function kD(n,e){const t=function b2(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(A2(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function S2(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(A2(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();hg(e._rawValidators,i),hg(e._rawAsyncValidators,i)}function L2(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const uie={provide:gn,useExisting:Oe(()=>pg)},ad=(()=>Promise.resolve())();let pg=(()=>{class n extends gn{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ce,this.form=new MD({},CD(t),DD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ad.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),function sd(n,e,t=ND){kD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function tie(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&L2(n,e)})}(n,e),function rie(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function nie(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&L2(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function eie(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ad.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ad.then(()=>{const r=this._findContainer(t.path),i=new MD({});(function U2(n,e){kD(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ad.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ad.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function B2(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(A(rn,10),A(lo,10),A(od,8))},n.\u0275dir=J({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&ce("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[We([uie]),Se]}),n})(),K2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=J({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Y2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Er({type:n}),n.\u0275inj=rr({}),n})();const Eie={provide:qr,useExisting:Oe(()=>jD),multi:!0};function rU(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let jD=(()=>{class n extends fs{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=rU(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function wie(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Lt(n)))(r||n)}}(),n.\u0275dir=J({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&ce("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[We([Eie]),Se]}),n})(),iU=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(rU(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(A(On),A(ni),A(jD,9))},n.\u0275dir=J({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Tie={provide:qr,useExisting:Oe(()=>$D),multi:!0};function oU(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let $D=(()=>{class n extends fs{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],o=r.selectedOptions;if(void 0!==o){const s=o;for(let a=0;a<s.length;a++){const c=this._getOptionValue(s[a].value);i.push(c)}}else{const s=r.options;for(let a=0;a<s.length;a++){const u=s[a];if(u.selected){const c=this._getOptionValue(u.value);i.push(c)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Cie(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Lt(n)))(r||n)}}(),n.\u0275dir=J({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&ce("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[We([Tie]),Se]}),n})(),sU=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(oU(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(oU(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(A(On),A(ni),A($D,9))},n.\u0275dir=J({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Nie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Er({type:n}),n.\u0275inj=rr({imports:[Y2]}),n})(),kie=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:od,useValue:t.callSetDisabledState??ND}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Er({type:n}),n.\u0275inj=rr({imports:[Nie]}),n})();function Vie(n,e){if(1&n&&(U(0,"label",8),Ee(1),B()),2&n){const t=ee(2).$implicit;Z("for",t.id),Q(1),vn(t.label)}}function Fie(n,e){if(1&n){const t=tt();U(0,"span",9),ce("click",function(){qe(t);const i=ee(4);return ze(i.expand=!i.expand)}),Ee(1),B()}if(2&n){const t=ee(4);Q(1),vn(t.expand?"expand_less":"expand_more")}}function Lie(n,e){if(1&n){const t=tt();U(0,"button",12),ce("click",function(){const o=qe(t).$implicit,s=ee(3).$implicit;return ze(ee(2).update(s,{target:{value:o}}))}),Ee(1),B()}if(2&n){const t=e.$implicit;Q(1),vn(t)}}function Uie(n,e){if(1&n&&(U(0,"div",10),we(1,Lie,2,1,"button",11),B()),2&n){const t=ee(2).$implicit;Q(1),Z("ngForOf",t.values)}}function Bie(n,e){if(1&n){const t=tt();U(0,"div"),we(1,Vie,2,2,"label",4),U(2,"input",5),ce("change",function(i){qe(t);const o=ee().$implicit;return ze(ee(2).update(o,i))}),B(),we(3,Fie,2,1,"span",6),we(4,Uie,2,1,"div",7),B()}if(2&n){const t=ee().$implicit,r=ee(2);Q(1),Z("ngIf",t.label),Q(1),Z("type",t.type)("value",t.value)("id",t.id)("placeholder",t.placeholder)("name",t.name),Q(1),Z("ngIf",t.values),Q(1),Z("ngIf",r.expand&&t.values)}}function jie(n,e){if(1&n&&(U(0,"label",8),Ee(1),B()),2&n){const t=ee(2).$implicit;Z("for",t.id),Q(1),vn(t.label)}}function $ie(n,e){if(1&n&&(U(0,"option"),Ee(1),B()),2&n){const t=e.$implicit;Q(1),vn(t)}}function Gie(n,e){if(1&n){const t=tt();U(0,"div"),we(1,jie,2,2,"label",4),U(2,"select",13),ce("change",function(i){qe(t);const o=ee().$implicit;return ze(ee(2).update(o,i))}),we(3,$ie,2,1,"option",14),B()()}if(2&n){const t=ee().$implicit;Q(1),Z("ngIf",t.label),Q(1),Z("value",t.value),Q(1),Z("ngForOf",t.values)}}function Hie(n,e){if(1&n&&(U(0,"label",8),Ee(1),B()),2&n){const t=ee(2).$implicit;Z("for",t.id),Q(1),vn(t.label)}}function qie(n,e){if(1&n&&(U(0,"div"),we(1,Hie,2,2,"label",4),U(2,"textarea",15),Ee(3,"            "),B()()),2&n){const t=ee().$implicit;Q(1),Z("ngIf",t.label),Q(1),Z("value",t.value)}}const zie=function(){return["text","email","password","number"]};function Wie(n,e){if(1&n&&(U(0,"div",3),we(1,Bie,5,8,"div",0),we(2,Gie,4,3,"div",0),we(3,qie,4,2,"div",0),B()),2&n){const t=e.$implicit;Q(1),Z("ngIf",function QR(n,e,t){const r=an()+n,i=T();return i[r]===ie?Ar(i,r,t?e.call(t):e()):function Ju(n,e){return n[e]}(i,r)}(3,zie).indexOf(t.type)>-1),Q(1),Z("ngIf","select"==t.type),Q(1),Z("ngIf","textarea"==t.type)}}function Kie(n,e){if(1&n){const t=tt();U(0,"button",16),ce("click",function(){const o=qe(t).$implicit;return ze(ee(2).submit.emit(o.action))}),Ee(1),B()}if(2&n){const t=e.$implicit;Q(1),vn(t.text)}}function Qie(n,e){if(1&n&&(U(0,"form"),we(1,Wie,4,4,"div",1),U(2,"div"),we(3,Kie,2,1,"button",2),B()()),2&n){const t=ee();Q(1),Z("ngForOf",t.form.controls),Q(2),Z("ngForOf",t.form.actions)}}class ud{constructor(){this.expand=!1,this.submit=new Ce}update(e,t){e.value=t.target.value,this.expand=!1}}function Yie(n,e){if(1&n){const t=tt();U(0,"div",4)(1,"div",5)(2,"h5",6),Ee(3),B(),U(4,"button",7),ce("click",function(){return qe(t),ze(ee(2).action.emit("close_dialog"))}),B()(),U(5,"div",8)(6,"app-form",9),ce("submit",function(i){return qe(t),ze(ee(2).action.emit(i))}),B()()()}if(2&n){const t=ee(2);Q(3),vn(t.dialog.form.title),Q(3),Z("form",t.dialog.form)}}function Jie(n,e){if(1&n){const t=tt();U(0,"button",11),ce("click",function(){const o=qe(t).$implicit;return ze(ee(3).action.emit(o.action))}),Ee(1),B()}if(2&n){const t=e.$implicit;Q(1),vn(t.text)}}function Xie(n,e){if(1&n){const t=tt();U(0,"div",4)(1,"div",5)(2,"h5",6),Ee(3),B(),U(4,"button",7),ce("click",function(){return qe(t),ze(ee(2).action.emit("close_dialog"))}),B()(),U(5,"div",8),we(6,Jie,2,1,"button",10),B()()}if(2&n){const t=ee(2);Q(3),vn(t.dialog.title),Q(3),Z("ngForOf",t.dialog.actions)}}function Zie(n,e){if(1&n&&(U(0,"div",1)(1,"div",2),we(2,Yie,7,2,"div",3),we(3,Xie,7,2,"div",3),B()()),2&n){const t=ee();Q(2),Z("ngIf",t.dialog.form),Q(1),Z("ngIf",t.dialog.actions)}}ud.\u0275fac=function(e){return new(e||ud)},ud.\u0275cmp=Sn({type:ud,selectors:[["app-form"]],inputs:{form:"form"},outputs:{submit:"submit"},decls:1,vars:1,consts:[[4,"ngIf"],["class","m-3",4,"ngFor","ngForOf"],["class","btn btn-primary m-2",3,"click",4,"ngFor","ngForOf"],[1,"m-3"],["class","form-label",3,"for",4,"ngIf"],[1,"form-control",3,"type","value","id","placeholder","name","change"],["class","mx-2 material-icons pointer expand",3,"click",4,"ngIf"],["class","mt-2 exp-con",4,"ngIf"],[1,"form-label",3,"for"],[1,"mx-2","material-icons","pointer","expand",3,"click"],[1,"mt-2","exp-con"],["class","m-2 btn btn-sm btn-primary",3,"click",4,"ngFor","ngForOf"],[1,"m-2","btn","btn-sm","btn-primary",3,"click"],[1,"form-select",3,"value","change"],[4,"ngFor","ngForOf"],["rows","5",1,"form-select",3,"value"],[1,"btn","btn-primary","m-2",3,"click"]],template:function(e,t){1&e&&we(0,Qie,4,2,"form",0),2&e&&Z("ngIf",t.form)},dependencies:[Lh,ta,K2,iU,sU,N2,pg],styles:[".expand[_ngcontent-%COMP%]{position:relative;top:-30px;float:right}.exp-con[_ngcontent-%COMP%]{height:150px;overflow-y:scroll}"]});class cd{constructor(){this.action=new Ce}}function eoe(n,e){if(1&n){const t=tt();U(0,"app-menu",8),ce("close",function(){return qe(t),ze(ee().menu=!1)})("action",function(i){return qe(t),ze(ee().perform(i))}),B()}}function toe(n,e){if(1&n){const t=tt();U(0,"app-node",9),ce("select",function(i){return qe(t),ze(ee().select(i))}),B()}if(2&n){const t=ee();Z("node",t.design)("current",t.current)}}cd.\u0275fac=function(e){return new(e||cd)},cd.\u0275cmp=Sn({type:cd,selectors:[["app-dialog"]],inputs:{dialog:"dialog"},outputs:{action:"action"},decls:1,vars:1,consts:[["class","modal d-block","tabindex","-1",4,"ngIf"],["tabindex","-1",1,"modal","d-block"],[1,"modal-dialog"],["class","modal-content",4,"ngIf"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"form","submit"],["class","btn btn-primary m-2",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-primary","m-2",3,"click"]],template:function(e,t){1&e&&we(0,Zie,4,2,"div",0),2&e&&Z("ngIf",t.dialog)},dependencies:[Lh,ta,ud]});class ld{constructor(e){this.app=e,this.menu=!0}select(e){console.log(e),this.current=e,this.app.current=e}deselect(){this.current=void 0,this.app.current=void 0}perform(e){null!=HD[e]&&(this.dialog=HD[e]),"close_dialog"==e&&(this.dialog=void 0),"download"==e&&this.app.events.emit("download"),"upload"==e&&navigator.clipboard.readText().then(t=>{let r=this.app.parseText(t);r&&(this.design=r,this.app.design=r,this.current=this.design)}),"delete"==e&&(this.dialog={form:{title:"Confirm Delete?",controls:[{id:"node-d",type:"textarea",value:JSON.stringify(this.current)}],actions:[{text:"Yes",action:"delete_confirm"}]}}),"delete_confirm"==e&&(this.perform("close_dialog"),this.performDelete()),0==e.indexOf("add")&&this.performAdd(e),0==e.indexOf("edit")&&this.performEdit(e),"cut"==e&&(this.app.paste=this.current,this.performDelete()),"copy"==e&&this.current&&(this.app.paste=Dn.clone(this.current)),"paste"==e&&this.current&&this.app.paste&&(this.current.children.push(this.app.paste),this.app.events.emit("preview")),"preview"==e&&this.app.events.emit("preview")}performEdit(e){if("edit_text"==e&&(this.dialog=HD.add_text,this.dialog?.form&&(this.dialog.form.controls[0].value=this.current?.text||""),this.dialog?.actions&&(this.dialog.actions[0].text="Update")),"edit_style"==e){var t=this.current?.attributes.get("style");if(""==(t=t||""))this.perform("add_style");else{var r=t.split(";");for(var i in this.dialog={form:{title:"Edit Style",controls:[],actions:[{text:"Update",action:"edit_style_"}]}},r)if(""!=r[i]&&" "!=r[i]){var o=r[i].split(":")[0],s=r[i].split(":")[1];this.dialog.form?.controls.push({id:"c_"+i,type:"text",label:o,value:s})}}}if("edit_style_"==e){var a=[];this.dialog?.form?.controls.forEach(c=>{""!=c.label&&""!=c.value&&a.push(c.label+":"+c.value)}),a.length>0&&this.current?.attributes.set("style",a.join(";")+";"),this.perform("close_dialog")}if("edit_attribute"==e){var u=this.current?.attributes;if(0==(u=u||new Map)?.size)this.perform("add_attribute");else for(var i in this.dialog={form:{title:"Edit Attr",controls:[],actions:[{text:"Update",action:"edit_attribute_"}]}},u)""!=i&&null!=u.get(i)&&""!=u.get(i)&&(s=u.get(i)||"",this.dialog.form?.controls.push({id:"c_"+i,type:"text",label:i,value:s}))}if("edit_attribute_"==e){let c=new Map;this.dialog?.form?.controls.forEach(l=>{l.label&&l.value&&""!=l.value&&c.set(l.label,l.value)}),this.current&&(this.current.attributes=c),this.perform("close_dialog")}this.app.events.emit("preview")}performAdd(e){if(e.indexOf("add_element_")>-1){let t=e.replace("add_element_","");null==this.current?(this.current=Dn.create(t),this.design=this.current,this.app.design=this.design):Dn.add(this.current,t),this.perform("close_dialog")}if(e.indexOf("add_text_")>-1){if(this.current){let t=this.dialog?.form?.controls[0].value;t=""==t?void 0:t,this.current.text=t}console.log("Form",this.dialog?.form),this.perform("close_dialog")}if(e.indexOf("add_class_")>-1){if(this.current){let t=this.current.attributes.get("class"),r=this.dialog?.form?.controls[0].value;t=t?t+" "+r:r,t&&this.current.attributes.set("class",t)}console.log("Form",this.dialog?.form),this.perform("close_dialog")}if(e.indexOf("add_style_")>-1){if(this.current){let t=this.current.attributes.get("style"),r=this.dialog?.form?.controls[0].value,i=this.dialog?.form?.controls[1].value;t=t?t+r+":"+i+";":r+":"+i+";",t&&this.current.attributes.set("style",t)}console.log("Form",this.dialog?.form),this.perform("close_dialog")}if(e.indexOf("add_attribute_")>-1){if(this.current){let t=this.dialog?.form?.controls[0].value,r=this.dialog?.form?.controls[1].value;t&&r&&this.current.attributes.set(t,r)}console.log("Form",this.dialog?.form),this.perform("close_dialog")}this.app.events.emit("preview")}performDelete(){!this.design||!this.current||(this.design.id==this.current.id?(this.design=void 0,this.current=void 0,this.app.design=void 0,this.app.current=void 0):(Dn.remove(this.design,this.current),this.current=this.design),this.app.events.emit("preview"))}}ld.\u0275fac=function(e){return new(e||ld)(A(bi))},ld.\u0275cmp=Sn({type:ld,selectors:[["app-home"]],decls:8,vars:4,consts:[[3,"menu"],[3,"close","action",4,"ngIf"],[1,"node-preview","row","m-0"],[1,"col-12","col-md-3","node","table-responsive"],[3,"node","current","select",4,"ngIf"],[1,"col-12","col-md-9","node","table-responsive",3,"click"],[3,"design"],[3,"dialog","action"],[3,"close","action"],[3,"node","current","select"]],template:function(e,t){1&e&&(U(0,"app-header",0),ce("menu",function(){return t.menu=!0}),B(),we(1,eoe,1,0,"app-menu",1),U(2,"div",2)(3,"div",3),we(4,toe,1,2,"app-node",4),B(),U(5,"div",5),ce("click",function(){return t.deselect()}),Mi(6,"app-preview",6),B()(),U(7,"app-dialog",7),ce("action",function(i){return t.perform(i)}),B()),2&e&&(Q(1),Z("ngIf",t.menu),Q(3),Z("ngIf",t.design),Q(2),Z("design",t.design),Q(1),Z("dialog",t.dialog))},dependencies:[ta,ed,td,nd,hu,cd]});const HD={add:{action:"add",title:"Add",actions:[{text:"Element",action:"add_element"},{text:"Text",action:"add_text"},{text:"Class",action:"add_class"},{text:"Style",action:"add_style"},{text:"Attribute",action:"add_attribute"}]},add_element:{action:"add_element",title:"Add Element",actions:[{text:"Div",action:"add_element_div"},{text:"Span",action:"add_element_span"},{text:"Button",action:"add_element_button"},{text:"Input",action:"add_element_input"},{text:"Paragraph",action:"add_element_p"},{text:"Image",action:"add_element_img"},{text:"Video",action:"add_element_video"}]},add_text:{form:{title:"Add Text",controls:[{id:"addtext",type:"text",placeholder:"Enter text here..",value:""}],actions:[{text:"Add",action:"add_text_"}]}},add_class:{form:{title:"Add Class",controls:[{id:"addclass",type:"text",placeholder:"Specify class..",value:""}],actions:[{text:"Add",action:"add_class_"}]}},add_style:{form:{title:"Add Style",controls:[{id:"addstylekey",type:"text",placeholder:"name",value:"",values:["height","width","margin","padding","border","text-align","float","position","display","color","background","font-size","font-weight","text-decoration","vertical-align"]},{id:"addstylevalue",type:"text",placeholder:"value",value:""}],actions:[{text:"Add",action:"add_style_"}]}},add_attribute:{form:{title:"Add Attribute",controls:[{id:"attributeKey",type:"text",placeholder:"name",value:""},{id:"attributeKey",type:"text",placeholder:"value",value:""}],actions:[{text:"Add",action:"add_attribute_"}]}},edit:{action:"edit",title:"Edit",actions:[{text:"Text",action:"edit_text"},{text:"Class",action:"edit_class"},{text:"Style",action:"edit_style"},{text:"Attribute",action:"edit_attribute"}]}};class dd{constructor(e,t){this.router=e,this.fs=t,t.refreshUser.subscribe(r=>this.router.navigate(r?["dashboard"]:["home"]))}logout(){(function ZY(n){return dn(n).signOut()})(this.fs.auth).then(()=>this.fs.logout())}}dd.\u0275fac=function(e){return new(e||dd)(A(Jt),A(uo))},dd.\u0275cmp=Sn({type:dd,selectors:[["app-logout"]],decls:7,vars:0,consts:[[1,"row","text-center","p-3"],[1,"col-md-4","col-sm-6","col-xs-12","form"],[2,"font-weight","600","font-size","18px"],[3,"click"]],template:function(e,t){1&e&&(U(0,"div",0)(1,"div",1)(2,"p",2),Ee(3," Are you sure you want to log-off? "),Mi(4,"br"),B(),U(5,"button",3),ce("click",function(){return t.logout()}),Ee(6,"Logout"),B()()())},styles:["img[_ngcontent-%COMP%]{display:block;width:80px;margin:30px auto;box-shadow:0 5px 10px -7px #333;border-radius:50%}.form[_ngcontent-%COMP%]{background-color:#fff;margin:50px auto 10px;padding:30px;border-radius:8px;overflow:hidden;box-shadow:0 2px 10px -3px #333;text-align:center}button[_ngcontent-%COMP%]{border-radius:100px;border:none;background:#719BE6;width:50%;padding:10px;color:#fff;box-shadow:0 2px 10px -3px #719be6;display:block;margin:30px auto 10px}"]});class pu{constructor(e,t){this.firestore=e,this.router=t}canActivate(e,t){if(null==this.firestore.user){if(e.url.length>0){let r=[];e.url.forEach(i=>r.push(i.path)),sessionStorage.setItem("redirect",r.join("/"))}this.router.navigateByUrl("login")}return!0}}pu.\u0275fac=function(e){return new(e||pu)($(uo),$(Jt))},pu.\u0275prov=H({token:pu,factory:pu.\u0275fac,providedIn:"root"});const noe=[{path:"",component:ld,canActivate:[pu]},{path:"login",component:Zl},{path:"logout",component:dd}];class gu{}gu.\u0275fac=function(e){return new(e||gu)},gu.\u0275mod=Er({type:gu}),gu.\u0275inj=rr({imports:[f1.forRoot(noe),f1]});class hd{}hd.\u0275fac=function(e){return new(e||hd)},hd.\u0275cmp=Sn({type:hd,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&Mi(0,"router-outlet")},dependencies:[Uy],styles:[".node[_ngcontent-%COMP%]{border:solid 10px darkblue;padding:10px;height:100%}.node-preview[_ngcontent-%COMP%]{border:solid 1px black;position:absolute;top:55px;left:55px;height:-webkit-fill-available;width:-webkit-fill-available}@media only screen and (min-width: 600px){.col-md-9.node[_ngcontent-%COMP%]{border-left:0px}}"]});class mu{}mu.\u0275fac=function(e){return new(e||mu)},mu.\u0275mod=Er({type:mu,bootstrap:[hd]}),mu.\u0275inj=rr({providers:[bi],imports:[U6,gu,kie]}),L6().bootstrapModule(mu).catch(n=>console.error(n))}},ke=>{ke(ke.s=408)}]);